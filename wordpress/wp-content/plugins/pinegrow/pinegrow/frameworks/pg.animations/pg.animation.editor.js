var PgAnimationEditor=function(e,t,a,n,o){function l(e){e.forEach(function(e){if(e.list)l(e.list);else if(e.custom)e.field_def={type:"slider"};else if(e.prop){var t,a={name:(d[e.prop]=e).long||e.name,type:e.type||"slider",placeholder:e.placeholder||null};switch(a.type){case"slider":a.slider_def_unit="unit"in e?e.unit:"","min"in e?a.slider_min=e.min:a.slider_min=-99999,"max"in e?a.slider_max=e.max:a.slider_max=999999,"step"in e?a.slider_step=e.step:a.slider_step=1;break;case"checkbox":a.value=1,a.neg_value=0,a.default_value=1;break;case"select":a.options=e.options,a.open_list_on_focus=!0}e.options&&"select"!==a.type&&(a.options=e.options,a.open_list_on_focus=!0),!a.options&&e.examples&&(a.options=e.examples,a.no_auto_complete=!0),a.helptext=e.helptext||null,e.examples&&(t="<p>Double-click in the field for examples of values.</p>",a.helptext=a.helptext?a.helptext+t:t),e.field_def=a}})}var s=this,r=(this.target_col=a,this.description=n,this.animation_id=o,null),i=null,p=[],m=(this.addElement=function(e){var t=new PgAnimationEditorElement(e,s);return p.push(t),s.onTransformListUpdated(),t},this.removeElement=function(e){var t=p.indexOf(e);0<=t&&p.splice(t,1),s.onTransformListUpdated()},this.duplicateElement=function(e){var t=new PgAnimationEditorElement(e.toData(),this),a=p.indexOf(e);0<=a?p.splice(a,0,t):p.push(t),s.onTransformListUpdated()},this.moveElementToIndex=function(e,t){var a=p.indexOf(e);0<=a&&p.splice(a,1),t<0&&(t=0),p.splice(Math.min(t,p.length),0,e),s.onTransformListUpdated()},this.moveElementUp=function(e){this.moveElementToIndex(e,p.indexOf(e)-1)},this.moveElementDown=function(e){this.moveElementToIndex(e,p.indexOf(e)+1)},this.moveElementToTop=function(e){this.moveElementToIndex(e,0)},this.moveElementToBottom=function(e){this.moveElementToIndex(e,p.length)},this.getElements=function(){return p},this.getPgel=function(){return t},this.selectTransform=function(e){r&&(r.$element.removeClass("selected"),r.$kf)&&r.$kf.removeClass("selected"),r=e},this.onTransformListUpdated=function(){m()},function(){p.forEach(function(e){e.sortTransforms()})}),h=(this.onChange=function(e,t){var a=this.toData();p.forEach(function(e){}),s.onAnimationChanged&&s.onAnimationChanged(a,t)},this.setDescription=function(e){i=e},this.getDescription=function(){return i},this.toData=function(){var e={l:p.map(function(e){return e.toData()})};return i&&(e.desc=i),e},this.debug=function(){console.log(this.toData())},this.clear=function(){p.forEach(function(e){e.destroy()}),p=[]},{dim:[{key:"100",name:"100",html:"100 <small>default unit is px</small>"},{key:"50%",name:"50%",html:"50% <small>% of the unit size</small>"},{key:"80vw",name:"80vw",html:"80vw <small>80% of the window width</small>"},{key:"-100",name:"-100",html:"-100 <small>default unit is px</small>"},{key:"+=100",name:"+=100",html:"+=100 <small>add 100px to the current value</small>"},{key:"-=100",name:"-=100",html:"-=100 <small>substract 100px from the current value</small>"},{key:"random(-100,100)",name:"random(-100,100)",html:"random(-100,100) <small>random value between -100px and 100px</small>"},{key:"random([0, 100, 200])",name:"random([0, 100, 200])",html:"random([0, 100, 200]) <small>randomly select from the listed values</small>"},{key:"random(-100,100)%",name:"random(-100,100)%",html:"random(-100,100)% <small>random value between -100% and 100%</small>"}],percent:[{key:"50",name:"50",html:"50 <small>default unit is %</small>"},{key:"-50",name:"-50",html:"-50 <small>default unit is %</small>"},{key:"+=25",name:"+=25",html:"+=25 <small>add 25% to the current value</small>"},{key:"-=25",name:"-=25",html:"-=25 <small>substract 25% from the current value</small>"},{key:"random(-100,100)",name:"random(-100,100)",html:"random(-100,100) <small>random value between -100% and 100%</small>"},{key:"random([0, 50, 100])",name:"random([0, 50, 100])",html:"random([0, 50, 100]) <small>randomly select from the listed values</small>"}],degrees:[{key:"45",name:"45",html:"45 <small>default unit is deg</small>"},{key:"-90",name:"-90",html:"-90 <small>default unit is deg</small>"},{key:"0.5rad",name:"0.5rad",html:"0.5rad <small>value in radians</small>"},{key:"+=45",name:"+=45",html:"+=45 <small>add 45deg to the current value</small>"},{key:"-=45",name:"-=45",html:"-=45 <small>substract 45deg from the current value</small>"},{key:"90_short",name:"90_short",html:"90_short <small>rotate to 90deg using the shortest path</small>"},{key:"random(-360,360)",name:"random(-360,360)",html:"random(-360,360) <small>random value between -360deg and 360deg</small>"},{key:"random([0, 360, 720])",name:"random([0, 360, 720])",html:"random([0, 360, 720]) <small>randomly select from the listed values</small>"}],scale:[{key:"0.5",name:"0.5",html:"0.5 <small>scale by 0.5 - make smaller</small>"},{key:"1",name:"1",html:"1 <small>restore original size</small>"},{key:"2.5",name:"2.5",html:"2.5 <small>scale by 2.5 - make larger</small>"},{key:"+=0.5",name:"+=0.5",html:"+=0.5 <small>add 0.5 to the current value</small>"},{key:"-=0.5",name:"-=0.5",html:"-=0.5 <small>substract 0.5 from the current value</small>"},{key:"random(0.1,5)",name:"random(0.1,5)",html:"random(0.1,5) <small>random value between 0.1 and 5</small>"},{key:"random([0.1,1,2])",name:"random([0.1,1,2])",html:"random([0.1,1,2]) <small>randomly select from the listed values</small>"}],transformOrigin:[{key:"50% 50%",name:"50% 50%",html:"50% 50% <small>2D - transform from the center, default</small>"},{key:"left top",name:"left top",html:"left top <small>2D - transform from the top left</small>"},{key:"100px 200px",name:"100px 200px",html:"100px 200px <small>2D - transform from 100px 200px</small>"},{key:"50% 50% 50%",name:"50% 50% 50%",html:"50% 50% 50% <small>3D - transform from center</small>"},{key:"50% 50% -400px",name:"50% 50% -400px",html:"50% 50% -400px <small>3D - transform from center with 400px distance</small>"}],perspective:[{key:"200",name:"200",html:"200 <small>default unit is px</small>"},{key:"10em",name:"10em",html:"10em <small>set the unit for non-px</small>"}],opacity:[{key:"0",name:"0",html:"0 <small>fully transparent</small>"},{key:"0.5",name:"0.5",html:"0.5 <small>opacity is 50%</small>"},{key:"1",name:"1",html:"1 <small>fully visible</small>"},{key:"+=0.1",name:"+=0.1",html:"+=0.1 <small>add 0.1 to the current value</small>"},{key:"-=0.1",name:"-=0.1",html:"-=0.1 <small>substract 0.1 from the current value</small>"},{key:"random(0.1,0.8)",name:"random(0.1,0.8)",html:"random(0.1,0.8) <small>random value between 0.1 and 0.8</small>"},{key:"random([0.1,0.5,1])",name:"random([0.1,0.5,1])",html:"random([0.1,0.5,1]) <small>randomly select from the listed values</small>"}],autoopacity:[{key:"0",name:"0",html:"0 <small>fully transparent and hidden</small>"},{key:"0.5",name:"0.5",html:"0.5 <small>opacity is 50%</small>"},{key:"1",name:"1",html:"1 <small>fully visible</small>"},{key:"+=0.1",name:"+=0.1",html:"+=0.1 <small>add 0.1 to the current value</small>"},{key:"-=0.1",name:"-=0.1",html:"-=0.1 <small>substract 0.1 from the current value</small>"},{key:"random(0.1,0.8)",name:"random(0.1,0.8)",html:"random(0.1,0.8) <small>random value between 0.1 and 0.8</small>"},{key:"random([0.1,0.5,1])",name:"random([0.1,0.5,1])",html:"random([0.1,0.5,1]) <small>randomly select from the listed values</small>"}],color:[{key:"white",name:"white",html:"white <small>named color</small>"},{key:"#ffa8a8",name:"#ffa8a8",html:"#ffa8a8 <small>hex code</small>"},{key:"rgba(100, 120, 100, 0.8)",name:"rgba(100, 120, 100, 0.8)",html:"rgba(100, 120, 100, 0.8) <small>rgba value</small>"}],fontSize:[{key:"20",name:"20",html:"20 <small>default unit is px</small>"},{key:"3em",name:"3em",html:"3em <small>use units if non-px</small>"},{key:"+=1",name:"+=1",html:"+=1 <small>add 1px to the current value</small>"},{key:"-=1",name:"-=1",html:"-=1 <small>substract 1px from the current value</small>"},{key:"random(10,20)",name:"random(10,20)",html:"random(10,20) <small>random value between 10px and 20px</small>"},{key:"random([8, 16, 24])",name:"random([8, 16, 24])",html:"random([8, 16, 24]) <small>randomly select from the listed values</small>"},{key:"random(1,4)em",name:"random(1,4)em",html:"random(1,4)em <small>random value between 1em and 4em</small>"}],letterSpacing:[{key:"1.2",name:"1.2",html:"1.2 <small>default unit is px</small>"},{key:"0.2em",name:"0.2em",html:"0.2em <small>use units if non-px</small>"},{key:"+=1",name:"+=1",html:"+=1 <small>add 1px to the current value</small>"},{key:"-=1",name:"-=1",html:"-=1 <small>substract 1px from the current value</small>"},{key:"random(1,20)",name:"random(1,20)",html:"random(1,20) <small>random value between 1px and 20px</small>"},{key:"random([8, 16, 24])",name:"random([8, 16, 24])",html:"random([8, 16, 24]) <small>randomly select from the listed values</small>"},{key:"random(0,0.25)em",name:"random(0,0.25)em",html:"random(0,0.25)em <small>random value between 0em and 0.25em</small>"}],lineHeight:[{key:"1.33",name:"1.33",html:"1.33 <small>default is no unit</small>"},{key:"20px",name:"20px",html:"20px <small>use units</small>"},{key:"+=1",name:"+=1",html:"+=1 <small>add 1 to the current value</small>"},{key:"-=1",name:"-=1",html:"-=1 <small>substract 1 from the current value</small>"},{key:"random(1,1.5)",name:"random(1,1.5)",html:"random(1,1.5) <small>random value between 1 and 1.5</small>"},{key:"random([1.2, 2, 2.4])",name:"random([1.2, 2, 2.4])",html:"random([1.2, 2, 2.4]) <small>randomly select from the listed values</small>"},{key:"random(18,24)px",name:"random(18,24)px",html:"random(18,24)px <small>random value between 18px and 24px</small>"}],background:[{key:"white",name:"white",html:"white <small>a named color</small>"},{key:"#45fe87",name:"#45fe87",html:"#45fe87 <small>hex color</small>"},{key:"rgba(100,120,80,0.7)",name:"rgba(100,120,80,0.7)",html:"rgba(100,120,80,0.7) <small>RGBA color</small>"},{key:"linear-gradient(90deg, #ffe259, #ffa751)",name:"linear-gradient(90deg, #ffe259, #ffa751)",html:"linear-gradient(90deg, #ffe259, #ffa751) <small>a gradient</small>"}],dimPositive:[{key:"100",name:"100",html:"100 <small>default unit is px</small>"},{key:"50%",name:"50%",html:"50% <small>% of the unit size</small>"},{key:"80vw",name:"80vw",html:"80vw <small>80% of the window width</small>"},{key:"+=100",name:"+=100",html:"+=100 <small>add 100px to the current value</small>"},{key:"-=100",name:"-=100",html:"-=100 <small>substract 100px from the current value</small>"},{key:"random(50,100)",name:"random(50,100)",html:"random(50,100) <small>random value between 50px and 100px</small>"},{key:"random([0, 100, 200])",name:"random([0, 100, 200])",html:"random([0, 100, 200]) <small>randomly select from the listed values</small>"},{key:"random(10,100)%",name:"random(10,100)%",html:"random(10,100)% <small>random value between 10% and 100%</small>"}],zIndex:[{key:"1",name:"1",html:"1"},{key:"random(50,100)",name:"random(50,100)",html:"random(50,100) <small>random value between 50 and 100</small>"},{key:"random([0, 100, 200])",name:"random([0, 100, 200])",html:"random([0, 100, 200]) <small>randomly select from the listed values</small>"}],posDistance:[{key:"10",name:"10",html:"10 <small>10px - unit is always px</small>"},{key:"-10",name:"-10",html:"-10 <small>-10px</small>"}],posPercent:[{key:"100",name:"100",html:"100 <small>100% of the target's size - unit is always %</small>"},{key:"120",name:"120",html:"120 <small>120% of the target's size</small>"},{key:"50",name:"50",html:"50 <small>50% of the target's size</small>"}],border:[{key:"1px solid #ee55ff",name:"1px solid #ee55ff",html:"1px solid #ee55ff"}],strokeLen:[{key:"0",name:"0",html:"0 <small>0</small>"},{key:"10",name:"10",html:"10 <small>10px</small>"},{key:"100%",name:"100%",html:"100% <small>100% of the total path length</small>"},{key:"80%",name:"80%",html:"80% <small>80% of the total path length</small>"}],filters:[{key:"blur(5px)",name:"blur(5px)"},{key:"brightness(0.4)",name:"brightness(0.4)"},{key:"contrast(200%)",name:"contrast(200%)"},{key:"drop-shadow(16px 16px 20px blue)",name:"drop-shadow(16px 16px 20px blue)"},{key:"grayscale(50%)",name:"grayscale(50%)"},{key:"hue-rotate(90deg)",name:"hue-rotate(90deg)"},{key:"invert(75%)",name:"invert(75%)"},{key:"opacity(25%)",name:"opacity(25%)"},{key:"saturate(30%)",name:"saturate(30%)"},{key:"sepia(60%)",name:"sepia(60%)"},{key:"contrast(175%) brightness(3%)",name:"contrast(175%) brightness(3%)",html:"contrast(175%) brightness(3%) <small>combine multiple filters</small>"}],boxShadow:[{key:"2px 2px 10px rgba(0,0,0,0.5)",name:"2px 2px 10px rgba(0,0,0,0.5)"},{key:"1px 1px 5px 2px rgba(0,0,0,0.5)",name:"1px 1px 5px 2px rgba(0,0,0,0.5)"},{key:"inset 2px 2px 10px rgba(0,0,0,0.5)",name:"inset 2px 2px 10px rgba(0,0,0,0.5)"}],textShadow:[{key:"1px 1px 2px rgba(0,0,0,0.5)",name:"1px 1px 2px rgba(0,0,0,0.5)"}],classes:[{key:"my-class",name:"my-class"}],selector:[{key:".slide",name:".slide",html:".slide <small>Descendants with class slide</small>"},{key:"$.slide",name:"$.slide",html:"$.slide <small>All elements on the page with class slide</small>"},{key:"^.slider",name:"^.slider",html:"^.slider <small>The closest parent with the class slider</small>"},{key:"^.slider|.slide",name:"^.slider|.slide",html:"^.slider|.slide <small>All slides in the closest parent slider</small>"}]}),d=(this.prop_list=[{name:"Transform",list:[{divider:"Translate (move by)"},{name:"X",short:"x",prop:"x",examples:h.dim,helptext:""},{name:"Y",short:"y",prop:"y",examples:h.dim,helptext:""},{name:"Z",short:"z",prop:"z",examples:h.dim,helptext:""},{divider:"Translate by % (can combine with px translates)"},{name:"X%",short:"x%",prop:"xPercent",examples:h.percent,helptext:"Move the element by % of its own size on X-axis."},{name:"Y%",short:"y%",prop:"yPercent",examples:h.percent,helptext:"Move the element by % of its own size on Y-axis."},{divider:"Rotation"},{name:"Rotation X",short:"rx",prop:"rotationX",examples:h.degrees,helptext:""},{name:"Rotation Y",short:"ry",prop:"rotationY",examples:h.degrees,helptext:""},{name:"Rotation Z",short:"rz",prop:"rotationZ",examples:h.degrees,helptext:""},{divider:"Scale"},{name:"Scale",short:"sc",prop:"scale",step:.1,examples:h.scale,helptext:""},{name:"Scale X",short:"scx",prop:"scaleX",step:.1,examples:h.scale,helptext:""},{name:"Scale Y",short:"scy",prop:"scaleY",step:.1,examples:h.scale,helptext:""},{name:"Scale Z",short:"scz",prop:"scaleZ",step:.1,examples:h.scale,helptext:""},{divider:"Skew"},{name:"Skew X",short:"skx",prop:"skewX",examples:h.degrees,helptext:""},{name:"Skew Y",short:"sky",prop:"skewY",examples:h.degrees,helptext:""},{divider:!0},{name:"Transform origin",long:"Trans. origin",short:"tro",prop:"transformOrigin",placeholder:"50% 50% -200px",edit_in_dialog:!0,examples:h.transformOrigin,helptext:"The point over which the element is transformed. This property is not animated."},{name:"Perspective (for parent)",long:"Perspective",short:"per",prop:"perspective",examples:h.perspective,helptext:"Perspective that is set on the parent."},{name:"Transform perspective (for element)",long:"Trans. persp.",short:"tper",prop:"transformPerspective",examples:h.perspective,helptext:"Perspective set directly on the transformed element."}]},{name:"Opacity",list:[{name:"Auto opacity",short:"ao",prop:"autoAlpha",step:.1,min:0,max:1,examples:h.autoopacity.degrees,helptext:"Auto alpha 0 sets the visibility to hidden."},{name:"Opacity",short:"o",prop:"opacity",step:.1,min:0,max:1,examples:h.opacity,helptext:""}]},{name:"Text",list:[{name:"Color",short:"c",prop:"color",type:"color",examples:h.color,helptext:""},{name:"Font size",short:"fs",prop:"fontSize",examples:h.fontSize,helptext:""},{name:"Letter spacing",short:"ltsp",prop:"letterSpacing",examples:h.letterSpacing,helptext:""},{name:"Line height",short:"lh",prop:"lineHeight",examples:h.lineHeight,helptext:""}]},{name:"Background",list:[{name:"Background",long:"Bck",short:"bck",prop:"background",examples:h.background,helptext:""},{name:"Color",long:"Bck. color",short:"bckc",prop:"backgroundColor",type:"color",examples:h.color,helptext:""},{name:"Position X",long:"Bck. pos. X",short:"bckx",prop:"backgroundPositionX",examples:h.dim,helptext:""},{name:"Position Y",long:"Bck. pos. Y",short:"bcky",prop:"backgroundPositionY",examples:h.dim,helptext:""},{name:"Size",long:"Bck. size",short:"bcks",prop:"backgroundSize",examples:h.dimPositive,helptext:""}]},{name:"Dimension",list:[{divider:"Width"},{name:"Width",short:"w",prop:"width",examples:h.dimPositive,helptext:""},{name:"Min width",short:"minw",prop:"minWidth",examples:h.dimPositive,helptext:""},{name:"Max width",short:"maxw",prop:"maxWidth",examples:h.dimPositive,helptext:""},{divider:"Height"},{name:"Height",short:"h",prop:"height",examples:h.dimPositive,helptext:""},{name:"Min height",short:"minh",prop:"minHeight",examples:h.dimPositive,helptext:""},{name:"Max height",short:"maxh",prop:"maxHeight",examples:h.dimPositive,helptext:""},{divider:!0},{name:"Margin",list:[{name:"Top",short:"mt",prop:"marginTop",examples:h.dim,helptext:""},{name:"Bottom",short:"mb",prop:"marginBottom",examples:h.dim,helptext:""},{name:"Left",short:"ml",prop:"marginLeft",examples:h.dim,helptext:""},{name:"Right",short:"mr",prop:"marginRight",examples:h.dim,helptext:""}]},{name:"Padding",list:[{name:"Top",short:"pt",prop:"paddingTop",examples:h.dimPositive,helptext:""},{name:"Bottom",short:"pb",prop:"paddingBottom",examples:h.dimPositive,helptext:""},{name:"Left",short:"pl",prop:"paddingLeft",examples:h.dimPositive,helptext:""},{name:"Right",short:"pr",prop:"paddingRight",examples:h.dimPositive,helptext:""}]}]},{name:"Position",list:[{divider:"Static position"},{name:"Top",short:"top",prop:"top",examples:h.dim,helptext:""},{name:"Bottom",short:"bot",prop:"bottom",examples:h.dim,helptext:""},{name:"Left",short:"lft",prop:"left",examples:h.dim,helptext:""},{name:"Right",short:"rgt",prop:"right",examples:h.dim,helptext:""},{name:"Z Index",short:"zidx",prop:"zIndex",examples:h.zIndex,helptext:""},{divider:"Dynamic position"},{name:"Position rel. to interaction target",short:"rel pos",prop:"pgPos:pos",placeholder:"auto",type:"select",show_empty:!1,options:[{key:"auto",name:"Auto"},{key:"top bottom",name:"Top or bottom"},{key:"bottom top",name:"Bottom or top"},{key:"top",name:"Top"},{key:"bottom",name:"Bottom"},{key:"right",name:"Right"},{key:"left",name:"Left"},{key:"center",name:"Center"},{key:"inner-top",name:"Inner top"}],helptext:"Position the element next to the target element."},{name:"Position distance in px",short:"pos_dist",prop:"pgPos:dist",type:"slider",examples:h.posDistance,helptext:"Add distance between the element and the target."},{name:"Position width in %",short:"pos_w",prop:"pgPos:width",type:"slider",examples:h.posPercent,helptext:"Set width as % of the target's width."},{name:"Position height in %",short:"pos_h",prop:"pgPos:height",type:"slider",examples:h.posPercent,helptext:"Set height as % of the target's height."},{name:"Position use scale",short:"pos_scale",prop:"pgPos:scale",type:"checkbox",helptext:"Use scale for changing the size of the element. Requires transform-origin: 0 0."},{name:"Position target",short:"pos_trg",prop:"pgPos:tsel",type:"text",helptext:"By default the element is positioned next to the interaction target element. Enter a selector to select a different target element.",edit_in_dialog:!0},{name:"Don't reposition",short:"pos_norepo",prop:"pgPos:no_repo",type:"checkbox",helptext:`Don't reposition on window resize and scroll.`}]},{name:"Border",list:[{name:"Border",short:"brd",prop:"border",placeholder:"1px solid #cccccc",examples:h.border,helptext:""},{divider:"Width"},{name:"Width",long:"Brd. width",short:"brdw",prop:"borderWidth",examples:h.dimPositive,helptext:""},{name:"Top width",long:"Brd. top w.",short:"brdtw",prop:"borderTopWidth",examples:h.dimPositive,helptext:""},{name:"Bottom width",long:"Brd. bottom w.",short:"brdbw",prop:"borderBottomWidth",examples:h.dimPositive,helptext:""},{name:"Left width",long:"Brd. left w.",short:"brdlw",prop:"borderLeftWidth",examples:h.dimPositive,helptext:""},{name:"Right width",long:"Brd. right w.",short:"brdrw",prop:"borderRightWidth",examples:h.dimPositive,helptext:""},{divider:"Color"},{name:"Color",long:"Brd. color",short:"brdc",prop:"borderColor",type:"color",examples:h.color,helptext:""},{name:"Top color",long:"Brd. top c.",short:"brdtc",prop:"borderTopColor",type:"color",examples:h.color,helptext:""},{name:"Bottom color",long:"Brd. bottom c.",short:"brdbc",prop:"borderBottomColor",type:"color",examples:h.color,helptext:""},{name:"Left color",long:"Brd. left c.",short:"brdlc",prop:"borderLeftColor",type:"color",examples:h.color,helptext:""},{name:"Right color",long:"Brd. right c.",short:"brdrc",prop:"borderRightColor",type:"color",examples:h.color,helptext:""},{divider:"Radius"},{name:"Radius",long:"Brd. radius",short:"brdr",prop:"borderRadius",examples:h.dimPositive,helptext:""},{name:"Top Left radius",long:"Brd. tl radius",short:"brdtlr",prop:"borderTopLeftRadius",examples:h.dimPositive,helptext:""},{name:"Top Right radius",long:"Brd. tr radius",short:"brdtrr",prop:"borderTopRightRadius",examples:h.dimPositive,helptext:""},{name:"Bottom Left radius",long:"Brd. bl radius",short:"brdblr",prop:"borderBottomLeftRadius",examples:h.dimPositive,helptext:""},{name:"Bottom Right radius",long:"Brd. br radius",short:"brdbrr",prop:"borderBottomRightRadius",examples:h.dimPositive,helptext:""}]},{name:"Shadows &amp; Filters",list:[{name:"Box shadow",short:"bsh",prop:"boxShadow",placeholder:`2px 2px 10px rgba(0,0,0,0.5)`,edit_in_dialog:!0,examples:h.boxShadow,helptext:""},{name:"Text shadow",short:"tsh",prop:"textShadow",placeholder:`2px 2px 10px rgba(0,0,0,0.5)`,edit_in_dialog:!0,examples:h.textShadow,helptext:""},{name:"Filter",short:"flt",prop:"filter",placeholder:`blur(5px)`,edit_in_dialog:!0,examples:h.filters,helptext:""}]},{name:"Not animated CSS",list:[{name:"Display",short:"dis",prop:"display",type:"select",options:[{key:"none",name:"none"},{key:"inline",name:"inline"},{key:"inline-block",name:"inline-block"},{key:"block",name:"block"},{key:"flex",name:"flex"},{key:"grid",name:"grid"}],helptext:""},{name:"Position",short:"position",prop:"position",type:"select",options:[{key:"relative",name:"relative"},{key:"absolute",name:"absolute"},{key:"fixed",name:"fixed"},{key:"sticky",name:"sticky"}],helptext:""},{name:"Visibility",short:"vis",prop:"visibility",type:"select",options:[{key:"visible",name:"visible"},{key:"hidden",name:"hidden"},{key:"inherit",name:"inherit"}],helptext:""},{name:"Overflow",short:"overflow",prop:"overflow",type:"select",options:[{key:"auto",name:"auto"},{key:"hidden",name:"hidden"},{key:"scroll",name:"scroll"}],helptext:""},{name:"Pointer events",short:"pointer_events",prop:"pointerEvents",type:"select",options:[{key:"auto",name:"auto"},{key:"none",name:"none"}],helptext:""}]},{name:"Media",list:[{name:"Play during",long:"Play during",short:"play",prop:"media.playing",type:"slider",min:0,placeholder:"time in s, default current",helptext:"Play media during transform. Pause at the end."},{name:"Start playing",long:"Start playing media",short:"strtplay",prop:"media.play",type:"slider",min:0,placeholder:"time in s, default current",helptext:""},{name:"Stop playing",long:"Stop playing media",short:"stop",prop:"media.stop",type:"slider",min:0,placeholder:"time in s, default current",helptext:""},{name:"Volume",short:"vl",prop:"volume",step:.1,min:0,max:1,helptext:""},{name:"Mute",short:"mute",prop:"media.mute",type:"checkbox",helptext:""}]},{name:"Class",list:[{divider:"Change happens at the beginning of the transform."},{name:"Set class",short:"cls",prop:"class.set",placeholder:"myclass",type:"text",edit_in_dialog:!0,examples:h.classes,helptext:"Set the class attribute."},{name:"Add class",short:"acls",prop:"class.add",placeholder:"myclass",type:"text",edit_in_dialog:!0,examples:h.classes,helptext:"Add a single class."},{name:"Remove class",short:"rcls",prop:"class.remove",placeholder:"myclass",type:"text",edit_in_dialog:!0,examples:h.classes,helptext:"Remove a class."},{name:"Toggle class",short:"tcls",prop:"class.toggle",placeholder:"myclass",type:"text",edit_in_dialog:!0,examples:h.classes,helptext:"Toggle a class."}]},{name:"Attributes",list:[{divider:"Changes are animated. Use Set to just set the value."},{name:"Src",short:"src",prop:"attr:src",edit_in_dialog:!0,helptext:"Set the src attribute."},{name:"Alt",short:"alt",prop:"attr:alt",edit_in_dialog:!0,helptext:"Set the alt attribute."},{name:"Title",short:"title",prop:"attr:title",edit_in_dialog:!0,helptext:"Set the title attribute."},{divider:!0},{name:"Custom attribute...",custom:!0,edit_in_dialog:!0,helptext:"Animate any other attribute.",value:"attr:"}]},{name:"Scroll",list:[{name:"Scroll to",short:"scr",prop:"scrollTo:dest",placeholder:`#top, 100, next...`,options:[{key:"0",name:"0",html:"0 - Top"},{key:"100",name:"100",html:"100 - Fixed position in px"},{key:"#id",name:"#id",html:"#id - Element selector"},{key:"prev",name:"prev",html:"prev - Previous child element"},{key:"next",name:"next",html:"next - Next child element"},{key:"next_or_start",name:"next_or_start",html:"next_or_start - Next child element or go to start"},{key:"prev_page",name:"prev_page",html:"prev_page - Previous page"},{key:"next_page",name:"next_page",html:"next_page - Next page"},{key:"next_page_or_start",name:"next_page_or_start",html:"next_page_or_start - Next page or go to start"},{key:"page0",name:"page0",html:"page0 - the first page"},{key:"page1",name:"page1",html:"page1 - the second page"},{key:"page",name:"page",html:"page - use data-item-idx attribute as index or the index of element in its parent"},{key:"first",name:"first",html:"first - First child element"},{key:"last",name:"last",html:"last - Last child element"},{key:"item0",name:"item0",html:"item0 - the first element"},{key:"item1",name:"item1",html:"item1 - the second element"},{key:"item",name:"item",html:"item - use data-item-idx attribute as index or the index of element in its parent"}],helptext:"Scroll to a location inside this element. Add it to Body or Html to scroll the main viewport."},{name:"Child elements selector",short:"scr esel",prop:"scrollTo:esel",type:"text",placeholder:"default, all children",edit_in_dialog:!0,examples:h.selector,helptext:"Select elements for next, prev, etc scroll navigation."},{name:"Scroll offset",short:"scr o",prop:"scrollTo:offset",type:"slider",placeholder:"offset in px",helptext:"Offset the scroll location."},{name:"Scroll direction",short:"scr dir",prop:"scrollTo:dir",type:"select",show_empty:!0,options:[{key:"y",name:"Vertical (default)"},{key:"x",name:"Horizontal"}],helptext:"By default the Scroll Scene setting is used, if applicable."},{name:"Infinite scroll",short:"scr inf",prop:"scrollTo:inf",type:"checkbox",helptext:"Create the infinite scroll effect (the first element should be repeated at the end). By default the Scroll Scene setting is used, if applicable."}]},{name:"DOM",list:[{divider:"Create new elements"},{name:"Create from template",short:"create template",prop:"pgDom:template",type:"text",edit_in_dialog:!0,helptext:"HTML code for new elements."},{name:"Create clone",short:"clone",prop:"pgDom:clone",type:"checkbox",helptext:"Clone this element."},{name:"Create count selector",short:"create_count_sel",prop:"pgDom:count_sel",type:"text",edit_in_dialog:!0,examples:h.selector,helptext:"Create as many new elements as there are matches to this selector."},{name:"Create count",short:"create_count",prop:"pgDom:count",placeholder:"0",type:"slider",helptext:"The number of new elements. When used with the Count selector this value is added/substracted from the count."},{name:"Create insert at",short:"create ins",prop:"pgDom:ins",placeholder:"after",type:"select",show_empty:!0,options:[{key:"after",name:"After the cloned element"},{key:"append",name:"Append"}],helptext:"Where to insert the new element?"},{name:"New el. position rel. to the target",short:"create pos",prop:"pgDom:pos",placeholder:"auto",type:"text",show_empty:!1,options:[{key:"auto",name:"Auto"},{key:"top bottom",name:"Top or bottom"},{key:"bottom top",name:"Bottom or top"},{key:"top",name:"Top"},{key:"bottom",name:"Bottom"},{key:"right",name:"Right"},{key:"left",name:"Left"},{key:"center",name:"Center"},{key:"inner-top",name:"Inner top"}],helptext:"Position the new element next to the interaction target element."},{name:"Rel. position distance",short:"create pos_dist",prop:"pgDom:pos_dist",type:"slider",helptext:"Distance from the target element."},{name:"Position width in %",short:"create pos_w",prop:"pgDom:pos_width",type:"slider",examples:h.posPercent,helptext:"Set width as % of the target's width."},{name:"Position height in %",short:"create pos_h",prop:"pgDom:pos_height",type:"slider",examples:h.posPercent,helptext:"Set height as % of the target's height."},{name:"Position use scale",short:"create pos_scale",prop:"pgDom:pos_scale",type:"checkbox",helptext:"Use scale for changing the size of the element. Requires transform-origin: 0 0."},{name:"Don't reposition",short:"create pos_norepo",prop:"pgDom:pos_no_repo",type:"checkbox",helptext:`Don't reposition on window resize and scroll.`},{name:"Play animation on created",short:"create play",prop:"pgDom:play",type:"text",edit_in_dialog:!0,helptext:"Play the animation on the new element."},{divider:"Remove elements"},{name:"Remove element",short:"remove",prop:"pgDom:remove",type:"checkbox",helptext:"Remove the element from the page."},{divider:"Reparent"},{name:"Append to element",short:"reparent",prop:"pgDom:reparent",type:"text",helptext:"Enter a selector of the element to which the transform element should be appended.",edit_in_dialog:!0},{divider:"Browser history"},{name:"History push state",short:"hist_push",prop:"history.push",type:"text",helptext:"Push this value to the histroy."}]},{name:"SVG",list:[{divider:"Stroke"},{name:"Stroke dasharray",short:"stroke_da",prop:"stroke-dasharray",type:"slider",placeholder:"for example, 50 or 100%",examples:h.strokeLen,helptext:"Use with dashoffset to animate path drawing. Set both to 100% and transform dashoffset to 0 to draw the path."},{name:"Stroke dashoffset",short:"stroke_do",prop:"stroke-dashoffset",type:"slider",placeholder:"for example, 50 or 100%",examples:h.strokeLen,helptext:""},{name:"Stroke width",short:"stroke_w",prop:"stroke-width",type:"slider",examples:h.dimPos,helptext:""},{name:"Stroke color",short:"stroke",prop:"stroke",type:"color",examples:h.color,helptext:""},{name:"Stroke opacity",short:"stroke_o",prop:"stroke-opacity",step:.1,min:0,max:1,examples:h.opacity,helptext:""},{divider:"Fill"},{name:"Fill color",short:"fill",prop:"fill",type:"color",examples:h.color,helptext:""},{name:"Fill opacity",short:"fill_o",prop:"fill-opacity",step:.1,min:0,max:1,examples:h.opacity,helptext:""},{divider:"Origin"},{name:"SVG origin",short:"svg_o",prop:"svgOrigin",helptext:"Transform origin relative to SVG global coordinate space."},{divider:"Attributes"},{name:"X",short:"svg_x",prop:"attr:x",helptext:"Horizontal location in global SVG space."},{name:"Y",short:"svg_y",prop:"attr:y",helptext:"Vertical location in global SVG space."},{name:"CX",short:"svg_cx",prop:"attr:cx",helptext:"Center x."},{name:"CY",short:"svg_cy",prop:"attr:cy",helptext:"Center y."},{name:"X1",short:"svg_x1",prop:"attr:x1",helptext:"Line start x."},{name:"Y1",short:"svg_y1",prop:"attr:y1",helptext:"Line start y."},{name:"X2",short:"svg_x2",prop:"attr:x2",helptext:"Line end x."},{name:"Y2",short:"svg_y2",prop:"attr:y2",helptext:"Line end y."},{name:"Width",short:"width",prop:"attr:width",helptext:""},{name:"Height",short:"height",prop:"attr:height",helptext:""},{name:"RX",short:"svg_rx",prop:"attr:rx",helptext:"Rounded corner x."},{name:"RY",short:"svg_ry",prop:"attr:ry",helptext:"Rounded corner y."},{name:"Path Length",short:"svg_pathLength",prop:"attr:pathLength",helptext:""},{name:"D",short:"svg_d",prop:"attr:d",helptext:"Path shape."}]},{name:"Lottie",list:[{name:"Lottie seek",short:"lottie_s",prop:"pgLottie:seek",type:"checkbox",placeholder:"",helptext:""},{name:"Lottie play",short:"lottie_p",prop:"pgLottie:play",type:"slider",min:0,placeholder:"time in s, default current",helptext:""},{name:"Lottie pause",short:"lottie_pu",prop:"pgLottie:pause",type:"slider",min:0,placeholder:"time in s, default current",helptext:""},{name:"Lottie toggle",short:"lottie_t",prop:"pgLottie:toggle",type:"checkbox",min:0,placeholder:"time in s, default current",helptext:""},{divider:"Fill"},{name:"Lottie animation",short:"lottie_a",prop:"pgLottie:anim",type:"text",min:0,placeholder:"for example ${animation}",helptext:"Use ${...} syntax to pass in the Lottie animation instance, if not defined on the transformed element.",edit_in_dialog:!0}]},{name:"Interactions",list:[{divider:"Play Interactions animation"},{name:"Play animation",short:"play",prop:"pgia:play",type:"text",min:1,max:10,placeholder:"animation index or name, for example 1",helptext:"Play an animation on the element.",edit_in_dialog:!0},{name:"Pause animation",short:"pause",prop:"pgia:pause",type:"text",min:1,max:10,placeholder:"animation index or name, for example 1",helptext:"Pause an animation on the element.",edit_in_dialog:!0},{name:"Seek animation",short:"seek",prop:"pgia:seek",type:"text",helptext:"Seek animation to the progress of the tween.",edit_in_dialog:!0},{name:"Recreate animation",short:"recreate",prop:"pgia:rec",type:"text",helptext:"Recreate the listed animations (or the played animation) before playing it the next time. Useful when targets need to be re-evaluated.",edit_in_dialog:!0},{name:"Play/pause if moving in direction",short:"play_dir",prop:"pgia:dir",type:"select",options:[{key:"f_b",name:"In both directions"},{key:"f",name:"Forward"},{key:"b",name:"Backwards"}],placeholder:"default, both directions",helptext:"Play, pause or seek only when moving in the selected direction. Default is both forward and backwards.",edit_in_dialog:!1},{name:"Play/pause only once",short:"play_once",prop:"pgia:once",type:"checkbox",helptext:"Check to play or pause this animation only once."},{name:"Play when playhead moves",short:"play_on_move",prop:"pgia:cont",type:"checkbox",helptext:"Play the animation every time the playhead moves."},{name:"Play target element",short:"play_target",prop:"pgia:target",type:"text",placeholder:"for example, $.slide.current",helptext:"The target element for playing / pausing this animation, if different from the transformed element.",edit_in_dialog:!0},{divider:"Call function - callback(element, progress)"},{name:"On start",short:"onstart",prop:"pgCall:start",type:"text",placeholder:"function name, for example myFunc",edit_in_dialog:!0,helptext:""},{name:"On complete",short:"oncomplete",prop:"pgCall:complete",type:"text",placeholder:"function name, for example myFunc",edit_in_dialog:!0,helptext:""},{name:"On update",short:"onupdate",prop:"pgCall:update",type:"text",placeholder:"function name, for example myFunc",edit_in_dialog:!0,helptext:""}]},{divider:!0},{name:"Custom property...",custom:!0,edit_in_dialog:!0,helptext:"Animate any other property."}],{});l(this.prop_list);this.getPropDef=function(e){return d[e]||{type:"slider",name:e,short:e,field_def:{type:"slider",slider_def_unit:"",name:e}}},this.ease_menu=[],this.getEaseMenu=function(e,t){return pinegrow.findFrameworkByKey("pg.ia").pgiaGetEaseMenu(e,t)},this.fillFromData=function(e){this.clear(),i=e.desc||null,e.l?e.l.forEach(function(e){s.addElement(e)}):this.addElement({})},this.fillFromData(e),this.updateFromSelectedElement=function(){var e={},t=pinegrow.selectedElements.getLastSelected();t&&(e=JSON.parse(t.getAttr("data-pg-an-custom"))),this.fillFromData(e)},this.play=function(){pinegrow.selectedElements.getLastSelected().setAttribute("data-pg-an-custom",JSON.stringify(this.toData()),!0,"'")},this.destroy=function(){this.clear()}},PgAnimationEditorElement=function(a,n){var o=this,l=[],t=!1,s=(this.setMute=function(e){t=e},this.getMute=function(){return t},a.t||""),e=(this.$element=$(`<div class="pg-ae-timeline"><button class="pg-button">Add</button><ul></ul></div>`),this.$element.find("ul")),r=new PgInputField("target",{type:"text",show_empty:!1,name:"Target",placeholder:"this element"});r.prependTo(this.$element),r.setValue(s),r.on("change input",function(e){s=a.t=r.getValue(),n.onChange(o,"change"===e.type)});this.$element.find("button").on("click",function(e){e.preventDefault();var t=o.addTransform({});n.selectTransform(t),n.onTransformListUpdated(o),n.onChange(o,!0)}),this.getTransforms=function(){return l},this.getTarget=function(){return s},this.setTarget=function(e){s=a.t=e},this.addTransform=function(e){var t=new PgAnimationEditorTransform(e,n);return l.push(t),t.element=this,t},this.removeTransform=function(e){var t=l.indexOf(e);0<=t&&l.splice(t,1)},this.toData=function(){i();var e={t:s,l:l.map(function(e){return e.toData()})};return t&&(e.m=!0),e},this.destroy=function(){l.forEach(function(e){e.destroy()}),e.empty()},a.l&&(a.l.forEach(function(e){o.addTransform(e)}),this.setMute(a.m||!1)),this.sortTransforms=function(){i()},this.getTimelineDuration=function(){var a=0;return l.forEach(function(e){var t=e.getEndPosition();a<t&&(a=t)}),a};var i=function(){l.forEach(function(e){e.position_info=e.getTimelinePosition()}),l.sort(function(e,t){return e.position_info.start===t.position_info.start?e.position_info.end-t.position_info.end:e.position_info.start-t.position_info.start})};this.getNumberOfTargetElements=function(){var e,t=a.t||"this";return"this"===t?n.target_pgel_multiple?n.target_pgel_multiple.length:1:(e=n.target_pgel.get$DOMElement())&&void 0!==pgia?(e=e.get(0),pgia.getTargets(e,t,e.ownerDocument).length):0}},PgAnimationEditorTransform=function(l,r){function i(e,t,a,n){v&&v(m,!1,n)}function p(e){m.removeProperty(e)}var m=this,s=("p"in l&&(l.p=parseFloat(l.p)),"d"in l&&(l.d=parseFloat(l.d)),l.t=l.t||"tween",l.p||0),h=l.t,d=(this.position=s,[]),t=!1,c=(this.setMute=function(e){t=e},this.getMute=function(){return t},this.getProperties=function(){return d},this.setPropertyValue=function(e,t){var a=this.getPropertyByProp(e);a&&a.setValue(t)},this.getPropertyByProp=function(e){for(var t=0;t<d.length;t++)if(d[t].getProperty()===e)return d[t]},this.getType=function(){return h},this.setType=function(e){h=e,x.setValue(e)},this.getStagger=function(){return l.s||0},{}),a=r.prop_list,u=null,g=null,f=null,x=null,y=null,v=null,k=null,_=null,b=null,w=null,P=null,T=null,S=null,E=null,C=null;this.removeProperty=function(e){c[e.getProperty()]=!1;var t=d.indexOf(e);0<=t&&(d.splice(t,1),e.destroy()),v&&v(m,!1,!0),r.onChange(m,!0)},this.getAddPropertyMenu=function(n,o,l){var e=[],s=function(e,t){e.forEach(function(a){var e;a.list?(s(a.list,e=[]),t.push({label:a.name+(a.helptext?`<span class="multiline-desc">${a.helptext}</span>`:""),submenu:e})):a.divider?(t.length&&t.push({type:"divider"}),"string"==typeof a.divider&&t.push({type:"header",label:a.divider})):a.custom?(t.push({label:a.name+(a.helptext?`<span class="multiline-desc">${a.helptext}</span>`:""),action:function(){pinegrow.showPrompt(`<p>Property name, for example <code>width</code> (prefix <code>attr:</code> for HTML attributes):</p>`,"Add custom property",a.value||"","property",null,function(e){if(c[e])pinegrow.showQuickError(e+` is already set.`);else{l&&l(m,a);var t=m.addProperty({prop:e,name:e,field_def:r.getPropDef(e).field_def});if(t.onChanged=i,t.onPropDeleted=p,C){t=t.get$Element();C.append(t);try{t.find("input").get(0).focus()}catch(e){}}v&&v(m,!0,!0),r.onChange(m,!0),n&&n()}})}}),t.push({type:"divider"}),t.push({label:"Help...",action:function(){pinegrow.openExternalUrl("https://pinegrow.com/docs/interactions/animation-properties/")}})):t.push({label:a.name+(a.helptext?`<span class="multiline-desc">${a.helptext}</span>`:""),action:function(){if(c[a.prop])o?(e=m.getPropertyByProp(a.prop))&&(p(e),n&&n(),pinegrow.showQuickMessage(a.name+` was removed.`)):pinegrow.showQuickError(a.name+` is already set.`);else{if(l&&l(m,a),(e=m.addProperty(cloneObject(a))).onChanged=i,e.onPropDeleted=p,"default_value"in e.prop_def.field_def&&e.setValue(e.prop_def.field_def.default_value),C){var e=e.get$Element();C.append(e);try{e.find("input").get(0).focus()}catch(e){}}v&&v(m,!0,!0),r.onChange(m,!0),n&&n()}},check:c[a.prop]||!1})})};return s(a,e),e},this.getDialog=function(e){v=e,this.$element=$(`<div class="pg-ae-t"><div class="props"><button class="pg-button btn-block">Add property</button><div class="props-list"></div></div></div>`);function a(){"flip"===h?(b.show(),P.show(),S.show(),_.show(),w.show(),k.show(),l.foth&&T.show(),pg$Hide(m.$element.find(".props")),pg$Show(E)):(b.hide(),P.hide(),S.hide(),_.hide(),w.hide(),k.hide(),T.hide(),pg$Hide(E),pg$Show(m.$element.find(".props")),"set"===h?(g.hide(),u.hide(),y.hide()):(g.show(),u.show(),y.show()))}var t=this.$element.find("button"),n=(t.on("click",function(e){return e.preventDefault(),new CrsaContextMenu(m.getAddPropertyMenu(),t).showForElement(t),!1}),new PgToggleButtonMaker),o=((T=new PgInputField("flip_fade",{type:"checkbox",name:"Crossfade",value:"true"})).prependTo(this.$element),T.setValue(l.ffade),T.on("change",function(e){l.ffade=T.getValue()||null,r.onChange(m,"change"===e.type),v&&v(m,!1,"change"===e.type),"change"===e.type&&r.onTransformListUpdated()}),(w=new PgInputField("flip_oth",{type:"selector",show_empty:!1,use_selector_extensions:!0,name:"The other element",get_selector_base:function(){return r.getPgel()},selector_info:"Select the other element for the Flip",selector_multiple:!1,selector_global:!0,selector_dom:!0})).prependTo(this.$element),w.setValue(l.foth),l.foth?T.show():T.hide(),w.on("change",function(e){l.foth=w.getValue()||"",l.foth?T.show():T.hide(),r.onChange(m,!0),v&&v(m,!1,"change"===e.type),r.onTransformListUpdated()}),(_=new PgInputField("flip_class",{type:"slider",show_empty:!1,name:"Toggle class",placeholder:""})).prependTo(this.$element),_.setValue(l.fclass),_.on("change input",function(e){l.fclass=_.getValue()||"",r.onChange(m,"change"===e.type),v&&v(m,!1,"change"===e.type),"change"===e.type&&r.onTransformListUpdated()}),(k=new PgInputField("flip_spin",{type:"slider",show_empty:!1,name:"Spin",placeholder:"4",slider_def_unit:"",slider_min:-5,slider_step:1,slider_max:5})).prependTo(this.$element),k.setValue(l.fspin),k.on("change input",function(e){l.fspin=parseFloat(k.getValue()||0),r.onChange(m,"change"===e.type),v&&v(m,!1,"change"===e.type),"change"===e.type&&r.onTransformListUpdated()}),(P=new PgInputField("flip_nested",{type:"checkbox",name:"Nested",value:"true"})).prependTo(this.$element),P.setValue(l.fnest),P.on("change",function(e){l.fnest=P.getValue()||null,r.onChange(m,"change"===e.type),v&&v(m,!1,"change"===e.type),"change"===e.type&&r.onTransformListUpdated()}),(S=new PgInputField("flip_scale",{type:"checkbox",name:"Scale",value:"true"})).prependTo(this.$element),S.setValue(l.fscale),S.on("change",function(e){l.fscale=S.getValue()||null,r.onChange(m,"change"===e.type),v&&v(m,!1,"change"===e.type),"change"===e.type&&r.onTransformListUpdated()}),(b=new PgInputField("flip_absolute",{type:"checkbox",name:"Absolute",value:"true"})).prependTo(this.$element),b.setValue(l.fabs),b.on("change",function(e){l.fabs=b.getValue()||null,r.onChange(m,"change"===e.type),v&&v(m,!1,"change"===e.type),"change"===e.type&&r.onTransformListUpdated()}),E=$('<div class="pg-ia-flip-label">Flip options</div>').prependTo(this.$element),(u=new PgInputField("stagger",{type:"slider",show_empty:!1,name:"Stagger (s)",placeholder:"for example, 0.250",slider_def_unit:"",slider_min:0,slider_step:.1,slider_max:100})).prependTo(this.$element),u.setValue(l.s||""),u.on("change input",function(e){l.s=parseFloat(u.getValue()||0),v&&v(m,!1,"change"===e.type),r.onChange(m,"change"===e.type)}),(y=new PgInputField("ease",{type:"menu",name:"Ease",get_menu_options:r.getEaseMenu})).prependTo(this.$element),y.setValue(l.e||""),y.on("change input",function(e){l.e=y.getValue(),v&&v(m,!1,"change"===e.type),r.onChange(m,"change"===e.type),"change"===e.type&&r.onTransformListUpdated()}),(g=new PgInputField("duration",{type:"slider",show_empty:!1,name:"Duration (s)",placeholder:"0.5",slider_def_unit:"",slider_min:0,slider_step:.1,slider_max:100})).prependTo(this.$element),g.setValue(l.d),g.on("change input",function(e){var t=g.getValue();l.d=""===t?-1:parseFloat(t),v&&v(m,!1,"change"===e.type),r.onChange(m,"change"===e.type),"change"===e.type&&r.onTransformListUpdated()}),(f=new PgInputField("pos",{type:"slider",show_empty:!1,name:"Position (s)",placeholder:"4",slider_def_unit:"",slider_min:0,slider_step:.1,slider_max:100})).prependTo(this.$element),f.setValue(s),f.on("change input",function(e){s=l.p=parseFloat(f.getValue()||0),r.onChange(m,"change"===e.type),v&&v(m,!1,"change"===e.type),"change"===e.type&&r.onTransformListUpdated()}),(x=new PgInputField("type",{type:"select",name:"Type",toggle_buttons:!0,options:[{key:"set",name:"set",html:n.makeText("set",{})},{key:"tween",name:"tween",html:n.makeText("tween",{})}]})).prependTo(this.$element),x.setValue(h),0);return a(),x.on("change",function(e){var t=x.getValue()||"tween";"tween"!==h&&"flip"!==h||"set"!==t?"set"!==h||"tween"!==t&&"flip"!==t||(l.d=o):o=l.d,"set"===(h=l.t=t)&&(l.d=0),g.setValue(l.d),a(),r.onChange(m,!0),v&&v(m,!0,"change"===e.type),"change"===e.type&&r.onTransformListUpdated()}),C=this.$element.find(".props-list"),d.forEach(function(e){C.append(e.get$Element()),e.onChanged=i,e.onPropDeleted=p}),this.$element},this.getEase=function(){return l.e},this.setEase=function(e){l.e=e},this.destroyDialog=function(e){this.$element&&this.$element.get(0)===e.get(0)&&(this.$element.remove(),this.$element=null,y=f=g=u=v=C=null,d.forEach(function(e){e.onChanged=null,e.onPropDeleted=null}))},this.addProperty=function(e){var t=new PgAnimationEditorTransformProperty(e,r);return t.prop_def?(c[e.prop]=!0,d.push(t)):console.error(`Unknown animation property ${t.getProperty()}.`),t},this.toData=function(){var n={t:l.t||"tween",p:l.p||0,d:l.d,s:l.s,l:{}};return d.forEach(function(e){var t=e.getProperty(),a=t.split(":");1===a.length?n.l[t]=e.getValue():(n.l[a[0]]=n.l[a[0]]||{},n.l[a[0]][a[1]]=e.getValue())}),l.e&&(n.e=l.e),t&&(n.m=!0),"flip"===n.t&&(l.fabs&&(n.fabs="true"),l.fnest&&(n.fnest="true"),l.fclass&&(n.fclass=l.fclass),l.foth&&(n.foth=l.foth),l.ffade&&(n.ffade="true"),l.fscale&&(n.fscale="true"),l.fspin)&&(n.fspin=l.fspin),n},this.getEndPosition=function(){return l.p},this.getTimelinePosition=function(e,t){var a=l.p;return{start:a,end:a+(("tween"===l.t||"flip"===l.t)&&l.d||0)}},this.moveTo=function(e,t){e=Math.max(0,e),l.p=s=e,f&&f.setValue(l.p),void 0!==t&&(t=Math.max(0,t),l.d=t,g)&&g.setValue(l.d)},this.moveEndBy=function(e,t){var a,n=this.getTimelinePosition();this.moveBy(e),l.d&&(a=this.getTimelinePosition(),l.d=l.d+(a.start-n.start),g.setValue(l.d))},this.destroy=function(){d.forEach(function(e){e.destroy()}),d=[]},l.l&&($.each(l.l,function(a,e){"object"==typeof e?$.each(e,function(e,t){m.addProperty({prop:a+":"+e,value:t})}):m.addProperty({prop:a,value:e})}),this.setMute(l.m||!1))},PgAnimationEditorTransformProperty=function(e,t){var a=this,n=e.prop,o="value"in e?e.value:"",l=(this.prop_def=t.getPropDef(n),this.getProperty=function(){return n},this.getValue=function(){if("string"==typeof o){var e=parseFloat(o);if(!isNaN(o)&&!isNaN(e))return e}return o},this.setValue=function(e){o=e,l&&l.setValue(o)},this.getName=function(){return this.prop_def.name},null);this.get$Element=function(){return this.$element=$(`<div class="pg-ae-t-prop"></div>`),(l=new PgInputField("field",this.prop_def.field_def)).appendTo(this.$element),l.setValue(o),l.on("change input",function(e){o=l.getValue(),a.onChanged&&a.onChanged(a,n,o,"change"===e.type),t.onChange(a,"change"===e.type)}),$(`<i class="icon icon-close remove"></i>`).appendTo(l.$field).on("click",function(e){e.preventDefault(),a.onPropDeleted(a)}),this.$element},this.toData=function(){return{prop:n,value:o}},this.destroy=function(){this.$element&&(this.$element.remove(),this.$element=null,l=null)}},PgAnimationEditorDescribeAnimation=function(e){this.getHtml=function(){return"Custom animation"}},PgAnimationPhone=function(){function e(){pinegrow.selectedElements.repositionMenus()}function o(e){return e.replace(/[<>'"]/g,"")}var l=new PgDelayedTasks,a={animationProgress:function(t,a,n){t=o(t),a=parseFloat(a),n=parseFloat(n),s.forEach(function(e){e(t,a,n)}),l.run("reposition",e,300)},message:function(e,t){e="Interactions: "+o(e),t?pinegrow.showQuickError(e):pinegrow.showQuickMessage(e)},getPgel:function(e){return getPgNodeByPgId(e.getAttribute("data-pg-id"))},init:function(e){e._pg_add_to_source_funcs&&(e._pg_add_to_source_funcs.forEach(function(e){e()}),e._pg_add_to_source_funcs=[])}},s=(pinegrow.addEventHandler("on_page_shown_in_live_view",function(e,t){(t.getWindow()._pg_animation_phone=a).init(t.getWindow())}),[]);this.addListener=function(e){s.indexOf(e)<0&&s.push(e)},this.removeListener=function(e){var t=s.indexOf(e);0<=t&&s.splice(t,1)}};