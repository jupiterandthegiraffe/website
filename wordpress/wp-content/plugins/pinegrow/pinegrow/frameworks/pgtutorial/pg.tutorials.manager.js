class PgTutorialsManager{constructor(){this.list=[];function o(){function i(e){var t=""===r?null:((t=r.split("-")).pop(),0===t.length?a:s(t.join("-"))),o="",n=(t&&(o+=`<p style="margin-bottom: 20px;"><a href="#" class="back">← Back to ${t.choice.back_name}</a></p>`),l.find(".project-type").html(e.name?" - "+e.name:""),o=o+`<h2 class="pg-project-templates-title">${e.choice.question}</h2>`+`<div class="pg-project-templates">`,r.length?r+"-":"");e.choice.options.forEach(function(e){o+=`<div data-path="${n+e.key}" style="overflow:visible;"><img src="images/project_templates/${e.thumb||""}">`,e.pro&&!pinegrow.currentUser.isPro()&&(o+=`<div class="pg-pro-feature-badge" style="position: absolute;top:-4px;right:-4px;">Pro</div>`),o=o+`<div class="caption" style="padding-right:8px;"><h3>${e.name}</h3><p>${e.desc||""}</p>`+`</div></div>`}),o+=`</div>`,t||(o+=`<h2 class="pg-project-templates-title" style="margin-top:20px;margin-bottom: 10px;">Import a project`,pinegrow.currentUser.isPro()||(o+=`<div class="pg-pro-feature-badge" style="margin-left:8px;">Pro</div>`),o+=`</h2><p style="color:#777;">Upload a HTML project. Note: do not upload WordPress themes and plugins.</p><p><a class="upload" href="#">Import a project from a ZIP file</a></p>`),l.find(".wizard").html(o)}var a={choice:{question:"What would you like to build?",back_name:"the project type selection",options:[{key:"blocks",name:"Blocks for an existing site",desc:"Build one or more custom Gutenberg blocks and export them as a plugin that can be used on any WordPress site.",thumb:"blocks.png",choice:{question:"Which CSS framework is the site using?",options:[{key:"custom",name:"Custom CSS",project_id:"new_html_blocks",thumb:"blank_html.png",desc:"The right choice for most cases. Select this if the site theme is not using Bootstrap or Tailwind CSS."},{key:"bootstrap",name:"Bootstrap",project_id:"new_bs_blocks",thumb:"blank_bootstrap.jpg",desc:"Select if the site theme is using Bootstrap."},{key:"tailwind",name:"Tailwind CSS",project_id:"new_tw_blocks",thumb:"blank_tailwind.png",desc:"Select if the site theme is using Tailwind CSS."}]}},{key:"theme",name:"A complete theme",desc:"Build a complete WordPress theme with one or more templates.",thumb:"theme.png",pro:!0,pro_name:"Theme project template",choice:{question:"Which CSS framework do you want to use?",options:[{key:"bootstrap",name:"Bootstrap",project_id:"new_bs",thumb:"blank_bootstrap.jpg",desc:"Select to build the theme using Bootstrap CSS and JavaScript components."},{key:"tailwind_block_theme",name:"Tailwind CSS Block Theme",project_id:"new_tw_block_theme",thumb:"blank_tailwind.png",desc:"Select to quickly create a Tailiwnd CSS block theme."},{key:"tailwind",name:"Blank Tailwind CSS",project_id:"new_tw",thumb:"blank_tailwind.png",desc:"Select to style the theme with Tailwind CSS."},{key:"custom",name:"Plain CSS",project_id:"new_html",thumb:"blank_html.png",desc:"Select to build the theme with custom CSS styling."}]}},{key:"blank",name:"Just give me a blank project",desc:"Start with a blank project to create a static HTML project, theme or a plugin.",thumb:"blank.png",pro:!0,pro_name:"Blank project template",choice:{question:"Which CSS framework do you want to use?",options:[{key:"bootstrap",name:"Bootstrap",project_id:"new_bs",thumb:"blank_bootstrap.jpg"},{key:"tailwind",name:"Tailwind CSS",project_id:"new_tw",thumb:"blank_tailwind.png"},{key:"custom",name:"Plain CSS",project_id:"new_html",thumb:"blank_html.png"},{key:"pinekit",name:"Pinekit",project_id:"new_pinekit",thumb:"blank_pinekit.png"}]}}]}},r=(pgf.use_browser_storage&&(a={choice:{question:"What would you like to build?",back_name:"the project type selection",options:[{key:"bootstrap",name:"Bootstrap",project_id:"new_bs",thumb:"blank_bootstrap.jpg"},{key:"tailwind",name:"Tailwind CSS",project_id:"new_tw",thumb:"blank_tailwind.png"},{key:"custom",name:"Plain CSS",project_id:"new_html",thumb:"blank_html.png"},{key:"pinekit",name:"Pinekit",project_id:"new_pinekit",thumb:"blank_pinekit.png"}]}}),""),s=function(e){if(""===e)return a;for(var t=e.split("-"),o=a,n=0;o.choice&&n<t.length;){for(var i=!1,r=0;r<o.choice.options.length;r++)if(t[n]===o.choice.options[r].key){o=o.choice.options[r],n++,i=!0;break}if(!i)return null}return o},l=(pinegrow.dispatchEvent("on_get_new_project_templates",null,[]),pinegrow.showAlert(`<div class="wizard"></div>`,'Start a new project<span class="project-type"></span>',"Cancel"));i(a),l.on("click",".pg-project-templates [data-path]",function(e){e.preventDefault();var t,o=$(this).attr("data-path"),n=s(o);r=o,n.choice?n.pro&&!pinegrow.currentUser.isPro()?pinegrow.currentUser.onlyForProNotice(n.pro_name||n.name):i(n):n.project_id&&(n=(o="tutorial_"+n.project_id).split("/"),t=null,o.startsWith("https://")||(2===n.length&&(t=n[0],o=n[1]),o="https://"+o),l.modal("hide"),c.openProject(o,function(e){},t,{isCreatedWithNewProject:!0,source_project_id:o}))}),l.on("click",".back",function(e){var t;e.preventDefault(),(t=r.split("-")).pop(),r=t.join("-"),t=s(r),i(t)}),l.on("click",".upload",function(e){e.preventDefault(),pinegrow.currentUser.isPro()&&pinegrow.currentUser.isLoggedInAndActive()?(new PgProjectDownloader).uploadProject(null,function(){l.modal("hide")}):pinegrow.currentUser.onlyForProNotice("Project import")}),l.on("click",".local-project",async function(e){var t;e.preventDefault(),!0||pinegrow.currentUser.isPro()&&pinegrow.currentUser.isLoggedInAndActive()?(t=pinegrow.backend.getManagerForProject("local--"))&&(t.selectAndOpenProject(),l.modal("hide")):pinegrow.currentUser.onlyForProNotice("Editing local projects")}),l.find(".modal-body").css({backgroundColor:"#eeeeee",borderTop:"1px solid #dddddd"}),l.find(".modal-footer").css({marginTop:"0",borderTop:"1px solid #cfcfcf"})}var c=this,n=(pinegrow.addEventHandler("on_recent_list_populate",function(e,t){c.updateStartScreen()}),pinegrow.addEventHandler("on_before_load_project_from_server",function(e,t,o){var n,i;t.url.startsWith("https://tutorial_")?(i=t.url.replace("https://tutorial_",""),(i=(n=c.getTutorialForLessonKey(i)).findLesson(i)).addFilesToProject(t),i.main_lesson&&(n=n.getPreviousLesson(i))&&(t.projectLoadKeyIfNotFound="tutorial_"+n.key),t.lesson=i,t.name=i.name,t.isCreatedWithNewProject=i.tutorial.startProjects||!1,pgf.open_all_files_in_code=i.open_all_files_in_code||!1):((i=new PgTutorialLesson("dummy")).resources.forEach(function(e){t.addSourceUrlToDOMUrlMap(e.source_url,e.dom_url)}),pgf.open_all_files_in_code=pgf.kids||!1),o()}),pinegrow.addEventHandler("on_project_loaded",function(e,o){var n,i,r,a,s,t;1&&(n=o.getEditableFiles(),i=!0,r=o.getListOfOpenPages(),a=pgf.kids||!1,o.lesson&&o.lesson.openAllPages&&(a=!0),0===r.length&&(r.push("index.html"),o.pageWasOpenedOrClosed({url:"index.html"},!0)),n=n.filter(function(e){return!crsaGetNameFromUrl(e.url).startsWith("_")||pinegrow.currentUser.isAdmin()}),s=pinegrow.getCurrentProjectInfo(),setTimeout(function(){for(var e=n.length-1;0<=e;e--){var t=o.getRelativeUrl(n[e].url);(a||0<=r.indexOf(t))&&(!function(t){pinegrow.openOrShowPage(n[e].url,function(e){t&&e.show(!1)},t,null,{tab_index:0,do_not_remember_page_open:!0,open_with_wrapper:pgf.use_page_wrappers&&s.getSettingForUrl(n[e].url,"open-with-wrapper")})}(i),i=!1)}},10),o.lesson&&o.lesson.description?pinegrow.infoPanel?(pinegrow.infoPanel.setContent(null,{title:(o.lesson.display_title||o.lesson.name)+(o.lesson?'<span><a href="#" class="pg-tutorial-restart-button"><i class="icon icon-refresh"></i></a><a href="#" class="pg-tutorial-hide-info" style=""><i class="icon icon-hide" style=""></i></a></span>':""),content:o.lesson.description}),(t=pinegrow.infoPanel.get$Content().find(".pg-tutorial-video-button")).on("click",function(e){e.preventDefault(),l($(this).attr("data-vid"),o.lesson.subtitles)}),addTooltip(t,"Watch the video to learn about this tutorial."),(t=pinegrow.infoPanel.get$Content().find(".pg-tutorial-restart-button")).on("click",function(e){e.preventDefault(),new PgProjectMenuHelper(o).restartLesson()}),addTooltip(t,`Restart the current ${pgf.lesson_name} or the whole tutorial.`),(t=pinegrow.infoPanel.get$Content().find(".pg-tutorial-hide-info")).on("click",function(e){var t;e.preventDefault(),pinegrow.hideUIPanel("info"),c.toggle_info_panel_notice_shown||(t=$(".pg-toggle-info-button"),pinegrow.current_ui_explainer=new PgUIElementExplainer(t,"Use this button to toggle the Info panel at any time.",{show_delay:0,close_delay:5e3,focus:!1,position:"down",width:160,scroll_container:null,button:"Got it!",on_close:function(){pinegrow.current_ui_explainer=null}}),pgRevealElement(t),c.toggle_info_panel_notice_shown=!0)}),addTooltip(t,"Hide this panel."),pinegrow.showUIPanel("info",!1,!1,!1,"pages"),$(".menu-current-project").show().find("span").html(o.lesson.name),$(".pg-lesson-check-button").show(),$(".pg-toggle-info-button").show(),$("body").addClass("in-lesson"),o.isLoadedFromServer&&pinegrow.backend.setIndicatorState("saved-lesson"),o.isLoadedFromServer&&!o.isLoadedFromBackupId||pinegrow.backend.saveCurrentProject(),pgia.play($(".pg-tutorial-video-button[data-vid]").get(0),"Show",{l:[{name:"Show",trg:"no",a:"jello",po:"true",rpt:3,dly:1}]})):pinegrow.showAlert(`<p>The Info panel can not be displayed. Please restore the workspace layout to one of the presets in the Window menu.</p>`,"Info panel is missing"):(o.hasContentForUrl("_info.html")?o.getContentOfUrl("_info.html",function(e){try{var t=new pgParser,o=(t.assignIds=!1,t.parse(e),t.rootNode.findOne("body")),n=o.findOne("h1"),i={title:n.html()},r=(n.remove(),i.content=c.addInteractiveElementsToHTML(o.html()),pinegrow.infoPanel.setContent(null,i),pinegrow.infoPanel.get$Content().find(".pg-tutorial-video-button"));r.on("click",function(e){e.preventDefault(),l($(this).attr("data-vid"),null)}),addTooltip(r,"Watch the video to learn about this tutorial.");pgia.play($(".pg-tutorial-video-button[data-vid]").get(0),"Show",{l:[{name:"Show",trg:"no",a:"jello",po:"true",rpt:3,dly:1}]})}catch(e){console.error(e)}pinegrow.showUIPanel("info",!1,!1,!1,"pages")}):pinegrow.infoPanel&&(pinegrow.infoPanel.setContent(null,{title:"Nothing to see here",content:`<p>Create the page _info.html to set the content of the info panel.</p>`}),pinegrow.hideUIPanel("info")),$(".menu-current-project").show().find("span").html(o.name),$(".pg-lesson-check-button").hide(),$(".pg-toggle-info-button").hide(),$("body").removeClass("in-lesson")))}),pinegrow.addEventHandler("on_project_closed",function(){pinegrow.infoPanel.setContent(null,{title:"Nothing to see here",content:`<p>Create the page _info.html to set the content of the info panel.</p>`}),pinegrow.hideUIPanel("info")}),pinegrow.addEventHandler("on_got_images_from_backend",function(e,t,o){var n=pinegrow.getCurrentProject();n&&n.lesson&&n.lesson.getResourceImagesByTerm(t?.term).forEach(function(e){o.results.push({url:e,name:crsaGetNameFromUrl(e)})})}),!1),l=(pinegrow.addEventHandler("on_user_projects_received_from_backend",function(e,t){t.lessons&&$.each(t.lessons,function(e,t){var o=c.getTutorialForLessonKey(e);o&&(o=o.findLesson(e))&&o.setStatus(t)}),!pgf.kids||t.lessons["intro.video.kids"]&&"done"===t.lessons["intro.video.kids"]||n||(n=!0,setTimeout(function(){pinegrow.getCurrentProject()||new PgUIElementExplainer($(".pg-lessons-intro-video"),"Start by watching the introduction video.",{show_delay:0,close_delay:5e4,focus:!1,position:"up",scroll_container:$(".pg-start-screen"),button:"Got it!",on_button_clicked:function(){pinegrow.backend.setLessonStatus({key:"intro.video.kids"},"done")}})},1e3)),c.getTutorials().forEach(function(e){for(var t=!1,o=e.getLessons(!0),n=0;n<o.length;n++)if("active"===o[n].status){t=o[n];break}if(!t){for(n=0;n<o.length;n++)if("locked"===o[n].status||"none"===o[n].status){t=o[n];break}if(!t)for(n=o.length-2;0<=n;n--)if("done"===o[n].status){t=o[n+1];break}}t&&t.setStatus("active")}),c.updateStartScreen(t.projects)}),pinegrow.addEventHandler("on_public_projects_received_from_backend",function(e,t){var o="",n="global"===pgf.featured_projects&&!pgf.use_browser_storage;t.length&&(o=o+`<div class="pg-lessons-chapter"><h3>${n?"Projects belonging to other users":"Featured projects"}</h3>`+`<div class="lessons-grid">`,t.forEach(function(e){o+=`<li class="lesson-item lesson-item-with-image lesson-status-done" data-project="${e.project_id}">`,e.thumb?o+=c.getHtmlForProjectThumb(e):o+=c.getHtmlForProjectPlaceholder(e),o=o+c.getHTMLForProjectInfo(e)+`</li>`}),o+="</div></div>"),$(".projects .public-projects").html(o)}),pinegrow.addEventHandler("on_toolbar_created",function(e,t){t.addSection("tutorial");var o=new PgButtonToolbarItem(`<span class="pg-button pg-button-primary">${pgf.kids?"Check":"Complete"} <i class="icon icon-check"></i></span>`,pgf.kids?`Check if the lesson is completed correctly.`:"Complete the tutorial."),i=(o.$element.addClass("pg-lesson-check-button"),t.addItem("tutorial",o),pg$Hide(o.$element),!1),o=(o.onClick=function(){var t,e,o,n;i||(e=pinegrow.getCurrentProject()).lesson&&(t=e.lesson.tutorial,"ok"!==(e=e.lesson.check()).result&&(e.message+=`<br><br>Note, you can re-watch the video to see the instructions again.`),o=`<div class="pg-tutorial-check-box-overlay">
<div class="pg-tutorial-check-box pg-tutorial-check-box-${e.result}">
<h1>${e.title}</h1>
<i class="close-check icon icon-close"></i>
<div class="pg-tutorial-check-box-msg">${e.message}</div>`,e.decoration&&(o+=e.decoration),"ok"===e.result?o+=`<a class="pg-tutorial-check-box-button pg-tutorial-check-box-button-back"><span style="transform:scaleX(-1);display: inline-block;"><i class="icon icon-right-arrow"></i></span> Back to the ${pgf.lesson_name}</a>&nbsp;<a class="pg-tutorial-check-box-button pg-tutorial-check-box-button-ok">Next ${pgf.lesson_name} <i class="icon icon-right-arrow"></i></a><p><a href="#" class="aapg-tutorial-check-box-button pg-tutorial-check-box-button-launchpad">Leave the ${pgf.lesson_name} and go to the Start screen</a></p>`:o+=`<a class="pg-tutorial-check-box-button pg-tutorial-check-box-button-error"><span style="transform:scaleX(-1);display: inline-block;"><i class="icon icon-right-arrow"></i></span> Try again</a><p><a href="#" class="aapg-tutorial-check-box-button pg-tutorial-check-box-button-launchpad">Leave the ${pgf.lesson_name} and go to the Start screen</a></p>`,o+="</div></div>",n=$(o),addTooltip(n.find("[title]").on("click",function(e){pinegrow.dispatchEvent("on_info_panel_tooltip_clicked",null,this,e)}),"title",{}),i=!0,setTimeout(function(){$("body").append(n),i=!1},e.delay||0),n.find(".pg-tutorial-check-box-button-back, .pg-tutorial-check-box-button-error").on("click",function(e){e.preventDefault(),n.remove()}),n.find(".pg-tutorial-check-box-button-ok").on("click",function(e){e.preventDefault(),n.remove(),t.openNextLesson()}),n.find(".pg-tutorial-check-box-button-launchpad").on("click",function(e){e.preventDefault(),n.remove(),pinegrow.backend.saveAndCloseCurrentProject()}),n.find("i.close-check").on("click",function(e){e.preventDefault(),n.remove()}),n.find(".pg-tutorial-check-box").on("click",function(e){return!1}),n.on("click",function(e){e.preventDefault(),n.remove()}))},new PgButtonToolbarItem('<span class="pg-button"><i class="icon icon-274" style="font-size: 16px;top: 2px;"></i></span>',"Toggle the Info panel.")),o=(o.$element.addClass("pg-toggle-info-button"),t.addItem("tutorial",o),pg$Hide(o.$element),o.onClick=function(){pinegrow.isUIPanelVisible("info")?pinegrow.hideUIPanel("info"):pinegrow.showUIPanel("info",!1,!1,!1,"pages")},new PgButtonToolbarItem('<span class="pg-button">Menu</span>',"Go back to home screen and other actions."));o.$element.addClass("pg-lesson-home-button"),o.onClick=function(){}}),function(e,t){new PgTutorialVideo(e,t)}),t=function(e){var t,n=$(this).closest("li"),i=n.attr("data-project"),o=i.split("/"),r=null,o=(2===o.length&&(r=o[0],i=o[1]),[]);"new"!==i&&(t=pinegrow.backend.getManagerForProject(i),i=t.getPurePid(i),o.push({label:"Edit",action:async function(){isApp()?pinegrow.openProject(i):t.openProject(i,r)}}),isApp()?(o.push({label:"Edit in new window",action:function(){pinegrow.openProjectInNewWindow(i)}}),o.push({type:"divider"}),o.push({label:"Remove from the start screen",action:function(){pinegrow.recentFiles.remove(i,!1),n.remove()}})):(o.push({label:"Edit in new window",dont_handle_click:!0,link_url:pinegrow.backend.getProjectEditUrl(i,null,r)}),(t.canAlwaysEditProject(i)||pinegrow.currentUser.canEditProjectWithProjectId(i,r))&&(t.canSetImage(i)&&(o.push({type:"divider"}),o.push({label:"Set image...",action:function(){var o=pinegrow.getCurrentProject(),e=null,t=(o||(o=pinegrow.backend.makePlaceholderProjectFromProjectId(i,r,decodeURIComponent(n.attr("data-project-name"))),e=pinegrow.getCurrentProject,pinegrow.getCurrentProject=function(){return o}),pinegrow.focusRect.showFor$El(n),new PgQuickImageBrowser(null,"Select the project image"));t.imageBrowser.show_sizes=!1,t.imageBrowser.enable_unsplash=!1,t.show(n),t.onHide=function(){e&&(pinegrow.getCurrentProject=e)},t.setOnSelected(function(e,t){n.find(".placeholder, .project-thumb").remove(),o.thumb=e,n.prepend($(pinegrow.tutorialsManager.getHtmlForProjectThumb(o))),pinegrow.backend.setProjectFeaturedImage(o,t.id,function(){pinegrow.showQuickMessage("Project image set.")})}),t.with_focus_rect=!0}}),n.find(".project-thumb").length)&&o.push({label:"Remove image",action:function(){var e=pinegrow.backend.makePlaceholderProjectFromProjectId(i,r,decodeURIComponent(n.attr("data-project-name")));n.find(".placeholder, .project-thumb").remove(),n.prepend($(pinegrow.tutorialsManager.getHtmlForProjectPlaceholder(e))),pinegrow.backend.setProjectFeaturedImage(e,0,function(){pinegrow.showQuickMessage("Project image removed.")})}}),t.canRename(i)&&(o.push({type:"divider"}),o.push({label:"Rename project...",action:function(){var e=pinegrow.backend.makePlaceholderProjectFromProjectId(i,r,decodeURIComponent(n.attr("data-project-name")));pinegrow.backend.askToRenameProject(e,function(){n.attr("data-project",e.root.url.replace("https://","")),n.attr("data-project-name",encodeURIComponent(e.name)),n.find(".project-name").html(e.name),pinegrow.showQuickMessage("Project renamed.")})}})),t.canDelete(i))&&(o.push({type:"divider"}),o.push({type:"header",label:"Danger zone"}),o.push({label:"Delete project...",action:function(){var e=pinegrow.backend.makePlaceholderProjectFromProjectId(i,r,decodeURIComponent(n.attr("data-project-name")));new PgProjectMenuHelper(e).delete(function(){n.remove(),pinegrow.backend.getProjects(),pinegrow.showQuickMessage("Project deleted.")})}})),t.canRemoveFromStartScreen(i)&&(o.push({type:"divider"}),o.push({label:"Remove from the start screen",action:async function(){await t.removeFromStartScreen(i),n.remove()}}))),new CrsaContextMenu(o,n).showAt(e.pageX,e.pageY,n.closest(".pg-start-screen")))};this.selectNewProjectTemplate=function(){var e,t,i;"WPPLUGIN"===pgf.product?o():(e=[],pinegrow.dispatchEvent("on_get_new_project_templates",null,e),t=(t="")+`<h2 class="pg-project-templates-title">Choose a project template to get started:</h2>`+`<div class="pg-project-templates">`,e.forEach(function(e){t+=`<div data-pid="${e.pid}"><img src="${e.thumb}"><div class="caption" style="${e.vid?"":"padding-right:8px;"}"><h3>${e.name}</h3><p>${e.desc}</p>`,e.vid&&(t+=`<div class="pg-tutorial-video-button" data-vid="${e.vid}" data-subid="${e.subid}"><i class="icon icon-play-round"></i> Guide</div>`),t+=`</div></div>`}),t+=`</div>`,pinegrow.currentUser.isAdmin()&&(t+=`<h2 class="pg-project-templates-title">Import a project</h2><p><a class="upload" href="#">Import a project from a ZIP file</a>`),(i=pinegrow.showAlert(t,"Start a new project","Cancel")).find(".pg-project-templates [data-pid]").on("click",function(e){e.preventDefault();var t=$(this).attr("data-pid"),o=t.split("/"),n=null;t.startsWith("https://")||(2===o.length&&(n=o[0],t=o[1]),t="https://"+t),i.modal("hide"),c.openProject(t,function(e){},n,{isCreatedWithNewProject:!0,source_project_id:$(this).attr("data-pid")})}),i.find(".upload").on("click",function(e){e.preventDefault(),(new PgProjectDownloader).uploadProject(null,function(){i.modal("hide")})}),addTooltip(i.find(".pg-tutorial-video-button").on("click",function(e){e.preventDefault();var t=this.getAttribute("data-vid"),o=this.getAttribute("data-subid");new PgTutorialVideo(t,pgTutorialSubtitles.get(o));return!1}),"Watch a video about how to use this template."),i.find(".modal-body").css({backgroundColor:"#eeeeee",borderTop:"1px solid #dddddd"}),i.find(".modal-footer").css({marginTop:"0",borderTop:"1px solid #cfcfcf"}))};$(".pg-start-screen .lessons ul").on("click","li",function(e){e.preventDefault();var t=$(this).attr("data-key"),o=c.getTutorialForLessonKey(t),n=o.findLesson(t);if(pgf.kids){if(!pinegrow.currentUser.isLoggedInAndActive()&&!n.demo)return void pinegrow.currentUser.onlyForMembersNotice("go on this adventure")}else if(!pinegrow.currentUser.isLoggedIn()&&!pgf.use_browser_storage)return void pinegrow.currentUser.showLoginForm();var i=!0;pinegrow.currentUser.isLoggedInAndActive()||(i=!1),pinegrow.currentUser.isAdmin()&&0&&(i=!1),o.allowRandomAccess&&(i=!1),n&&"locked"===n.status?i?pinegrow.showQuickError(`This ${pgf.lesson_name} is locked. Unlock it by completing the ${pgf.lesson_name}s before it.`):o.allowRandomAccess&&(o.warnOnRandomAccess?pinegrow.showNotice(`<p>Lessons in this tutorial build upon each other and it is recommended to do them one by one. The added benefit is that whatever you build in one lesson will serve as the starting point for the next lesson.</p><p>That said, it is up to you how you learn. You can go straight to lessons that interest you.</p>`,"A quick note before you jump into this lesson","tutorial-random-access",function(){o.openLesson(t)},!1,!1,!1,!0,!1,null,{ok_label:"Open the lesson",cancel_label:"Cancel"}):o.openLesson(t)):o.openLesson(t)}),$(".pg-start-screen .lessons ul,.pg-start-screen .projects ul").on("mouseenter","li",function(e){e.preventDefault();var t=this.querySelectorAll(".lesson-img");t.length&&(gsap.killTweensOf(t[0]),gsap.to(t[0],{bottom:this.classList.contains("lesson-status-done")?0:-20,duration:.35}),2===t.length)&&(gsap.killTweensOf(t[1]),gsap.to(t[1],{left:"100px",bottom:"-40px",rotateZ:"0deg",duration:6}))}),$(".pg-start-screen .lessons ul,.pg-start-screen .projects ul").on("mouseleave","li",function(e){e.preventDefault();var t=this.querySelectorAll(".lesson-img");t.length&&(gsap.killTweensOf(t[0]),gsap.to(t[0],{bottom:this.classList.contains("lesson-status-done")?-20:-44,duration:1,delay:.5}),2===t.length)&&(gsap.killTweensOf(t[1]),gsap.to(t[1],{left:"120%",bottom:"120%",rotateZ:"45deg",ease:"power2.easeIn",duration:4}))}),$(".pg-start-screen .projects ul").on("click","li",function(e){var t,o,n,i;$(e.target).is("a.author")||$(e.target).closest(".project-dropdown").length||(e.preventDefault(),t=null,2===(o=(i=(n=$(this)).attr("data-project")).split("/")).length&&(t=o[0],i=o[1]),"open"!==i&&(isApp()?(o=n.attr("data-file"),i.startsWith("internal:")?(n=i.replace("internal:",""),pinegrow.openExample(n)):o?pinegrow.openOrShowPage(i):pinegrow.openProject(i)):(i=(n=pinegrow.backend.getManagerForProject(i)).getPurePid(i),n.openProject(i,t))))}).on("contextmenu","li",function(e){return t.call(this,e),!1}).on("click",".project-dropdown",function(e){return t.call(this,e),!1})}addTutorial(e,t){null==t?this.list.push(e):this.list.splice(t,0,e)}getTutorials(){return this.list}getLessons(t){var o=[];return this.list.forEach(function(e){t&&!e.showOnStartScreen||(o=o.concat(e.getLessons()))}),o}getTutorialForLessonKey(e){for(var t=0;t<this.list.length;t++)if(this.list[t].prefix&&e.startsWith(this.list[t].prefix))return this.list[t];return null}getLessonByKey(e){var t=this.getTutorialForLessonKey(e);return t?t.findLesson(e):null}registerTutorials(){pinegrow.dispatchEvent("on_register_tutorials",null,this),pinegrow.recentFiles.populate(),pgf.featured_projects&&pinegrow.backend.getPublicProjects()}getHtmlForProjectThumb(e,t,o,n){var i=`<div class="image-wrapper-4x3 project-thumb ${o?"placeholder":""}"><img src="${e.thumb}" class="">`;return o&&(i+=`<span><spanname>${e.name}</spanname></span>`),n&&e.short_description&&(i+=`<div class="description">${e.short_description}</div>`),i+=(t?"":`<div class="project-dropdown"><i class="icon icon-down"></i></div>`)+`</div>`}getHTMLForProjectTags(e){var t=this,o="";return e&&e.tags&&e.tags.length&&(o+=`<tags class="tags">${e.tags.map(function(e){return t.showTag(e.toLowerCase())}).join("")}</tags>`),o}showTag(e){var t={"bootstrap 5":'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bootstrap-fill" viewBox="0 0 16 16">\n'+'  <path d="M6.375 7.125V4.658h1.78c.973 0 1.542.457 1.542 1.237 0 .802-.604 1.23-1.764 1.23H6.375zm0 3.762h1.898c1.184 0 1.81-.48 1.81-1.377 0-.885-.65-1.348-1.886-1.348H6.375v2.725z"/>\n'+'  <path d="M4.002 0a4 4 0 0 0-4 4v8a4 4 0 0 0 4 4h8a4 4 0 0 0 4-4V4a4 4 0 0 0-4-4h-8zm1.06 12V3.545h3.399c1.587 0 2.543.809 2.543 2.11 0 .884-.65 1.675-1.483 1.816v.1c1.143.117 1.904.931 1.904 2.033 0 1.488-1.084 2.396-2.888 2.396H5.062z"/>\n'+"</svg>",bootstrap:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bootstrap-fill" viewBox="0 0 16 16">\n'+'  <path d="M6.375 7.125V4.658h1.78c.973 0 1.542.457 1.542 1.237 0 .802-.604 1.23-1.764 1.23H6.375zm0 3.762h1.898c1.184 0 1.81-.48 1.81-1.377 0-.885-.65-1.348-1.886-1.348H6.375v2.725z"/>\n'+'  <path d="M4.002 0a4 4 0 0 0-4 4v8a4 4 0 0 0 4 4h8a4 4 0 0 0 4-4V4a4 4 0 0 0-4-4h-8zm1.06 12V3.545h3.399c1.587 0 2.543.809 2.543 2.11 0 .884-.65 1.675-1.483 1.816v.1c1.143.117 1.904.931 1.904 2.033 0 1.488-1.084 2.396-2.888 2.396H5.062z"/>\n'+"</svg>","tailwind css":'<svg style="width: 24px;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 54 33"><g clip-path="url(#prefix__clip0)"><path fill="currentColor" fill-rule="evenodd" d="M27 0c-7.2 0-11.7 3.6-13.5 10.8 2.7-3.6 5.85-4.95 9.45-4.05 2.054.513 3.522 2.004 5.147 3.653C30.744 13.09 33.808 16.2 40.5 16.2c7.2 0 11.7-3.6 13.5-10.8-2.7 3.6-5.85 4.95-9.45 4.05-2.054-.513-3.522-2.004-5.147-3.653C36.756 3.11 33.692 0 27 0zM13.5 16.2C6.3 16.2 1.8 19.8 0 27c2.7-3.6 5.85-4.95 9.45-4.05 2.054.514 3.522 2.004 5.147 3.653C17.244 29.29 20.308 32.4 27 32.4c7.2 0 11.7-3.6 13.5-10.8-2.7 3.6-5.85 4.95-9.45 4.05-2.054-.513-3.522-2.004-5.147-3.653C23.256 19.31 20.192 16.2 13.5 16.2z" clip-rule="evenodd"/></g><defs><clipPath id="prefix__clip0"><path fill="#fff" d="M0 0h54v32.4H0z"/></clipPath></defs></svg>',"plain html":`<svg style="width: 16px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
  <path fill="currentColor" d="M71,460 L30,0 481,0 440,460 255,512"/>
  <path fill="#FFF" d="M256,208 L181,208 176,150 256,150 256,94 255,94 114,94 115,109 129,265 256,265zM256,355 L255,355 192,338 188,293 158,293 132,293 139,382 255,414 256,414z"/>
  <path fill="#FFF" d="M255,208 L255,265 325,265 318,338 255,355 255,414 371,382 372,372 385,223 387,208 371,208zM255,94 L255,129 255,150 255,150 392,150 392,150 392,150 393,138 396,109 397,94z"/>
</svg>`,interactions:`<i class="icon icon-113" style=""></i>`,wordpress:`<i class="icon icon-WP" style=""></i>`,tutorial:`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-lightbulb" viewBox="0 0 16 16">
  <path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"/>
</svg>`,css:`<i class="icon icon-Pin15" style=""></i>`,html:`<i class="icon icon-KODA" style=""></i>`};return t[e]?`<tag title="${e}">${t[e]}</tag>`:e}getHTMLForProjectInfo(e){var t=this,o=`<div class="project-info">`;return o+=`<div class="name-author"><span><b class="project-name">${e.name}</b></span>`,e.author&&(o+=`<a title="View profile" class="author" href="/@${e.author}/" target="_blank">@${e.author}</a>`),o=(o+=`</div>`)+this.getHTMLForProjectTags(e),0&&e.tags&&e.tags.length&&(o+=`<div class="tags">`,e.tags.forEach(function(e){o+=``+t.showTag(e)}),o+=`</div>`),o+=`</div>`}getHtmlForProjectPlaceholder(e,t,o){for(var n=t?"":`<div class="project-dropdown"><i class="icon icon-down"></i></div>`,i=0,r=0;r<e.name.length;r++)i+=e.name.charCodeAt(r);var a=!1,s=200+i%180,l=chroma.hsl(s,a?.2:.4,.9),s=chroma.hsl(s,a?.5:.9,.75),a=(a&&(a=l,l=s,s=a),`<div class="placeholder" style="background-color:${l.hex()};color:${s.hex()};">${pgSVGIcons.pg_logo}<span style="">${shortenString(e.name,50,"",!1)}</span>`);return o&&e.short_description&&(a+=`<div class="description">${e.short_description}</div>`),a+=n+`</div>`}updateStartScreen(e,t){for(var a=this,o=" "+pinegrow.currentUser.getName(),o=(pinegrow.currentUser.isLoggedInAndActive()||(o=""),$(".pg-start-screen .info-inner").html(`<h3>${pgf.welcome_message.replace("#NAME",o)}</h3>`)),o=$('<div class="info-inner-menu"></div>').appendTo(o),n=[],o=(pinegrow.dispatchEvent("on_get_actions_for_start_menu",null,n),pinegrow.showIllustratedMenu(o,n),$(".pg-start-screen .lessons ul").html("")),s="",l=null,c=!pinegrow.currentUser.isLoggedInAndActive(),n=this.getTutorials(),i=(n.length&&n.forEach(function(e){if(e.showOnStartScreen){var t=e.getLessons();s+=`<div class="pg-lessons-chapter"><h3>${e.name}</h3>`,e.description&&(s+=`<div class="pg-tutorial-description">${e.description}</div>`),s+=`<div class="lessons-grid">`;for(var o=0;o<t.length;o++){pgf.kids&&t[o].chapter!==l&&(l&&(s+="</div></div>"),s+=`<div class="pg-lessons-chapter"><h3>${t[o].chapter}</h3><div class="lessons-grid">`,l=t[o].chapter),0===o&&"locked"===t[o].status&&t[o].setStatus("active");var n=0<=t[o].requireProducts.indexOf("wppro")&&!pinegrow.currentUser.isPro(),i=(n&&(t[o].tags=[]),t[o].name.split(" - ")),r=`<b>${i[0]}</b>`,i=(i.shift(),i.length&&(r+="<br>"+i.join(" - ")),t[o].status);"locked"===(i=t[o].demo&&c&&"locked"===i?"demo":i)&&t[o].tutorial.allowRandomAccess&&(i="none"),t[o].image&&0?s+=`<li class="lesson-item lesson-item-with-image lesson-status-${i}" data-key="${t[o].key}"><img src="images/kids/lessons/${t[o].image}.jpg"><div class="lesson-item-desc"><span>${r}</span>
<i class="lock icon icon-Lock_open"></i>
<i class="done icon icon-check"></i></div>`:(s+=`<li class="lesson-item lesson-status-${i} ${t[o].icon?"":"lesson-item-with-image"} ${t[o].short_description?"with-description":""}" data-key="${t[o].key}">`,t[o].icon?s+=`<span>${r}</span>`:t[o].thumb?s+=a.getHtmlForProjectThumb(t[o],!0,!0,!0):s+=a.getHtmlForProjectPlaceholder(t[o],!0,!0),s+=`<i class="lock icon icon-Lock_open"></i>
<i class="done icon icon-check"></i>
<i class="preview icon icon-Lock_closed"></i>`,n&&(s+=`<div class="pg-pro-feature-badge" style="position: absolute;top: 10px;right: 10px;box-shadow: none;" title="This lesson requires the PRO edition.">Pro</div>`),t[o].icon&&(s+=`<img src="images/kids/${t[o].icon}.png" class="lesson-img">`,0===o)&&(s+=`<img src="images/kids/rocket4.png" class="lesson-img" style="left:120%;bottom:120%;transform:rotateZ(45deg);">`)),s+=`</li>`}l&&(s+="</div></div>"),s+="</div></div>"}}),[]),r=1;r<=7;r++)i.push(`rocket${r}.png`);for(r=1;r<=15;r++)i.push(`food${r}.png`);o.html(s);var p,o=$(".pg-start-screen .projects ul.my-projects");e?(e=e,p=``,pinegrow.currentUser.isLoggedInAndActive()||(n=`You are not signed in. Your projects will be stored in the browser storage.`,pinegrow.currentUser.canOnlyUseLocalProjects()&&(n=`You are using your Pinegrow license which lets you only work with local projects. <a href="${pgwpdata?.buy_url||pgf.buy_url}" target="_blank" class="subscribe">Subscribe</a> to Pinegrow Online to work with cloud projects.`),p+=`<div class="local-storage-notice">${n}</div>`),e.length?(p+=`<div class="lessons-grid">`,e.forEach(function(e){p+=`<li class="lesson-item lesson-item-with-image lesson-status-done" data-project="${e.project_id}" data-project-name="${encodeURIComponent(e.name)}" ${e.is_file?'data-file="true"':""}>`,e.thumb?p+=a.getHtmlForProjectThumb(e):p+=a.getHtmlForProjectPlaceholder(e),e.label&&(p+=`<div class="project-label">${e.label}</div>`),p+=`<div class="name-author"><span><b class="project-name">${e.name}</b></span></div></li>`}),p+="</div>"):p+=`<div class="no-projects-message"><h4>${pgf.no_projects_message}</h4><p>Use the blue buttons above <span>↑↑↑</span> to create a new project, open an existing project<br>or get up to speed with short &amp; fun interactive tutorials.</p></div>`,p+="</div>",o.html(p),pinegrow.startScreenManager.projectsWereUpdated()):(pinegrow.backend.shouldRefreshProjects()||t)&&pinegrow.backend.getProjects(function(e){},"project")}addInteractiveElementsToHTML(e){var r=new PgTutorial,a={"Watch the video":".pg-tutorial-video-button","Text section":"style:niga,[data-key=sec_open_Text_null]","Font family":!0,"Font size":!0,"Text transform":!0,"Text color":"style:color","Text align":!0,"Text decoration":!0,"Background section":"style:niga,[data-key=sec_open_Background_null]","Background image":!0,"Background color":!0,"Background position":!0,"Background size":!0,"Background attachment":!0,"Background repeat":!0,Margin:"style:niga,.margin-and-padding-container|.crsa-field-margin-top,.crsa-field-margin-left,.crsa-field-margin-bottom,.crsa-field-margin-right","Margin left / right":"style:niga,.margin-and-padding-container|.crsa-field-margin-left,.crsa-field-margin-right","Margin left":"style:niga,.margin-and-padding-container|.crsa-field-margin-left","Margin top":"style:niga,.margin-and-padding-container|.crsa-field-margin-top","Margin bottom":"style:niga,.margin-and-padding-container|.crsa-field-margin-bottom","Margin right":"style:niga,.margin-and-padding-container|.crsa-field-margin-right",Padding:"style:niga,.padding-container|.crsa-field-padding-left,.crsa-field-padding-right,.crsa-field-padding-top,.crsa-field-padding-bottom","Padding left":"style:niga,.padding-container|.crsa-field-padding-left","Padding top":"style:niga,.padding-container|.crsa-field-padding-top","Padding bottom":"style:niga,.padding-container|.crsa-field-padding-bottom","Padding right":"style:niga,.padding-container|.crsa-field-padding-right","Flex Container":"style:niga,[data-key='sec_open_Flex container_']","Dimensions section":"style:niga,[data-key=sec_open_Dimension_null]",Width:!0,Height:!0,Border:"style:niga,.border-radius-container","Border width":"style:niga,.border-radius-container|.crsa-field-border-top input.crsa-input,.crsa-field-border-left input.crsa-input,.crsa-field-border-bottom input.crsa-input,.crsa-field-border-right input.crsa-input","Border color":"style:niga,.border-radius-container|.crsa-field-border-top .sp-replacer,.crsa-field-border-left .sp-replacer,.crsa-field-border-bottom .sp-replacer,.crsa-field-border-right .sp-replacer","Border style":"style:niga,.border-radius-container|.crsa-field-border-top .border-style,.crsa-field-border-left .border-style,.crsa-field-border-bottom .border-style,.crsa-field-border-right .border-style","Border radius":"style:niga,.border-radius-container|.crsa-field-border-top-left-radius,.crsa-field-border-bottom-left-radius,.crsa-field-border-top-right-radius,.crsa-field-border-bottom-right-radius","right corners":"style:niga,.border-radius-container|.crsa-field-border-top-right-radius,.crsa-field-border-bottom-right-radius",Position:!0,Left:!0,Top:!0,Right:!0,Bottom:!0,"Z-Index":"style:z-index","Create new CSS rule":"style:niga,.pg-active-add-rule .create-dialog","Style attribute":"style:niga,.style-attribute-style-pane",Classes:"prop:rules",Id:"prop:element_id",Name:"prop:pinegrow_name","Save the style":"style:niga,.to-rule-icon","Save the inline style":"style:niga,.to-rule-icon",Float:!0,Clear:!0,Src:"prop:src",Href:"prop:html-link-href","Padding top / bottom":"style:niga,.padding-container|.crsa-field-padding-top,.crsa-field-padding-bottom","Padding left / right":"style:niga,.padding-container|.crsa-field-padding-left,.crsa-field-padding-right",Display:!0,"Display section":"style:niga,[data-key=sec_open_Display_null]",Title:"prop:page-title",Description:"prop:page-description",Keywords:"prop:page-keywords",Author:"prop:page-author","Max width":!0,"Min width":!0,"Max height":!0,"Min height":!0,"Object fit":!0,"Flex direction":!0,"Align items":"style:flex-align-items","Justify content":"style:flex-justify-content","Flex wrap":!0,"Align content":"style:flex-align-content","Box shadow":"style:niga,[data-key='sec_open_Box shadow_null']",Outline:!0,"Position section":"style:niga,[data-key=sec_open_Display_null]","Position fields":"style:niga,.position-container","Equal borders":"style:niga,.border-radius-container .change-all-icon","Equal radius":"style:niga,.border-radius-container .change-all-border-raduis","add a shadow":"style:niga,.box-shadow-container .add-btn",Distance:"style:niga,.crsa-field-box-shadow-distance-0",Angle:"style:niga,#collapse-box-shadow-0 .angle-selector",Blur:"style:niga,.crsa-field-box-shadow-blur-0","Shadow color":"style:niga,.crsa-field-box-shadow-color-0","Tree panel":"tooltip:tree_panel","Style panel":"tooltip:style","Interactions panel":"tooltip:interactions_panel","Edit animation":"animations:niga,.pg-ae-control-buttons .edit","CSS grid":"tooltip:css_grid","WordPress menu":"tooltip:wp_menu","WordPress panel":"tooltip:wp_panel","Export the plugin":"tooltip:wp_menu","Project panel":"tooltip:project_panel","Insert button":"tooltip:insert_menu","Insert panel":"tooltip:insert_menu","Library panel":"tooltip:insert_menu","Library panel in the fixed UI":"tooltip:library_panel","Activate the text editor":"tooltip:edit_text","Inner HTML":"prop:html-link-label","Properties panel":"tooltip:attributes_panel","Refresh the page":"tooltip:refresh_page","Visual CSS editor settings":"style:niga,.icon-tools","Delete the element":"tooltip:delete","Delete it":"tooltip:delete","Delete icon":"tooltip:delete","Preview the page":"tooltip:preview",Duplicate:"tooltip:duplicate","Design panel":"tooltip:design","Create a link":"prop:html-link-create","Remove the link":"prop:html-link-remove","Set the link href":"prop:html-link-href","AI Assistant panel":"tooltip:ai_panel","Learn the task icon":"ai:niga,.pg-pine-cone-chat .chat-task-container:last-child .learn-task","Run the learned task":"ai:niga,.pg-pine-cone-chat .chat-task-container:last-child .chat-item-response .run","Edit the learned task":"ai:niga,.pg-pine-cone-chat .chat-task-container:last-child .chat-item-response .edit","AI menu actions":"tooltip:ai_menu_actions","Learned actions button":"ai:niga,.presets","SMART toggle":"ai:niga,.toggle[data-key='gpt4']","Use SMART":"ai:niga,.toggle[data-key='gpt4']","Project toggle":"ai:niga,.toggle[data-key='project-files']","Prompt images":"ai:niga,.prompt-tools .pick-image","Mark elements":"ai:niga,.prompt-tools .mark-elements","Refresh the AI Library":"ai:niga,.prompt-tools .refresh-ai-lib","AI settings":"ai:niga,button.settings"},o=(isApp()&&(a["WordPress menu"]="#main-navbar .wp-menu",a["Activate WordPress"]=".activate-wp",a["Export the plugin"]="#main-navbar .wp-menu",a["File menu"]="#main-navbar .menu-file"),pinegrow.dispatchEvent("on_info_panel_get_interactive_map",null,a),""),t=($.each(a,function(e,t){o.length&&(o+="|"),o+=e}),e=e.replace(/ICON_([a-z0-9\-_]+)/g,function(e,t,o){return`<i class="icon icon-${t}"></i>`}),new RegExp("<b>("+o+")</b>","g"));return e.replace(t,function(e,t,o){var n=t.toLowerCase().replace(/\s/g,"-"),i=a[t];return"string"==typeof i&&i.startsWith("tooltip:")?(i=i.replace("tooltip:",""),`<b>${r.tooltip(t,i)}</b>`):`<b>${r.field(t,!0===i?"style:"+n+"|.crsa-field-"+n:i)}</b>`})}openProject(e,t,n,i,r){window.parent&&window.parent.postMessage({action:"pgStartedLoadingProject"},"*");function o(){var o=new CrsaProject;i&&$.each(i,function(e,t){o[e]=t}),o.fromServer(e,function(e){pinegrow.setCurrentProject(e),t&&t(e)},n,r)}pinegrow.getCurrentProject()?pinegrow.closeCurrentProject(!1,!0,function(){o()}):o()}reopenProject(e){var t=this,o=pinegrow.getCurrentProject();pinegrow.backend.saveAndCloseCurrentProject(function(){t.openProject(o.url,e,o.isLoadedFromAnotherUser)})}}