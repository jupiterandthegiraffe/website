"undefined"==typeof pgAdaptor&&(window.pgAdaptor={requestTailwindExternalConfig:async function(e,t,n){var r=require("path"),i=r.resolve(e,"./package.json");if("file"!==crsaIsFileOrDir(i))pinegrow.showAlert(`<p>Customization works with <code>npm</code> based Tailwind compilation workflow. Using other ways, such us the standalone executable Tailwind compiler are not supported.</p><p>To setup <code>npm</code> based Tailwind CSS compilation, follow the official <a href="https://tailwindcss.com/docs/installation" class="external">Tailwind CSS installation documentation</a>.</p>`,"Tailwind customization requires <code>npm</code> based workflow","Cancel","Done. Try again.",null,function(){pgAdaptor.requestTailwindExternalConfig(e,t,n)});else{var a,i=r.resolve(e,"./node_modules/@pinegrow/tailwindcss-plugin");if("dir"!==crsaIsFileOrDir(i))pinegrow.showAlert(`<p>Install the plugin to enable ${pgf.product_name_short} to gather information about the Tailwind CSS theme in the project:</p><pre>
cd ${e}
npm install @pinegrow/tailwindcss-plugin@latest -D
</pre>`,"Pinegrow Tailwind CSS plugin is required to customize visual controls","Cancel","Done. Try again.",null,function(){pgAdaptor.requestTailwindExternalConfig(e,t,n)});else{try{var o=t.replace(/(\.[a-z]+)$/i,Math.round(1e5*Math.random())+"$1"),s=(crsaCopyFileSync(null,t,o,null,!1),t=o,n.replace(/(\.[a-z]+)$/i,Math.round(1e5*Math.random())+"$1"));crsaCopyFileSync(null,n,s,null,!1),n=s;var l=await require(i).tailwindParser.init({projectRoot:e,dependencyRoot:null,watchMode:!1,postcss:null,customPostCssPath:null,configPath:t,cssPath:n,cssOutputPath:null,cssOutputMinify:null});l.logs?.forEach(e=>{"error"===e.type&&(console.log(`Pinegrow Tailwind CSS Plugin: An error occurred!`),e.logMessage&&console.log(e.logMessage),e.errMessage)&&console.log(e.errMessage)}),pgIsDev()&&console.log(l),pinegrow.dispatchEvent("on_tailwind_config_received",null,{classListRaw:l.classListRaw,config:l.config,variants:l.variants,classList:l.classList}),l.destroy&&await l.destroy()}catch(e){pinegrow.showQuickError(`Unable to get Tailwind CSS configuration: `+e.toString())}try{o&&((a=require("fs")).unlinkSync(o),a.unlinkSync(s))}catch(e){console.warn(`Unable to cleanup temp Tailwind config.`,e)}}}}});var PgTailwindHelpers=function(M,e,t){"function"!=typeof M.reqVersion&&(M.reqVersion=function(){return!0});function A(e,t){return Y(e,t)}function p(e,t,n,r,i,a,o){var s=A(e,a[i+o])+"",l="";return s.startsWith("-")&&(l="-",s=s.substr(1,s.length)),(r!=M.size_for_all?r+`:`:"")+l+t+n+"-"+s}function L(e){switch(e){case"":return["t","l","r","b"];case"x":return["l","r"];case"y":return["t","b"];default:return[e]}}function D(e,t,n){var r,i;return n?(""==(r=e)?r="inset":-1<["x","y"].indexOf(e)&&(r="inset-"+e),i="",n.startsWith("-")&&(i="-",n=n.substr(1,n.length)),(t!=M.size_for_all?t+`:`:"")+i+r+"-"+n):null}function I(e){switch(e){case"":return["top","left","right","bottom"];case"x":return["left","right"];case"y":return["top","bottom"];default:return[e]}}function V(e,t,n,r){var i;return r?((r+=i="").startsWith("-")&&(i="-",r=r.substr(1,r.length)),(n!=M.size_for_all?n+`:`:"")+i+e+t+"-"+r):null}function P(e,t,n,r,i){return r?(n==M.size_for_all?"":n+":")+i+e+"-"+(""==t?"":t+"-")+r:null}function W(e,t,n,r){return r||""==r?(n==M.size_for_all?"":n+`:`)+e+(t?"-"+t:"")+(r?"-"+r:""):null}function R(e,t){if("border"==e)return""!==t?[t]:["t","l","r","b"];if("rounded"==e)switch(t){case"":return["tl","tr","bl","br"];case"t":return["tr","tl"];case"l":return["tl","bl"];case"r":return["tr","br"];case"b":return["bl","br"];default:return[t]}}function w(e){var t=$(e.target).closest(".change-all-icon,.change-all-border-raduis");if(t.toggleClass("active"),t.hasClass("active")){function n(e,t,n){return e.replace("{type}",t).replace("{direction}",n)}for(var r=t.data("valueObject")[M.size_for_all],i=t.data("directions"),a=t.data("type"),o=0;o<i.length;o++){var s=i[o],l=t.data("frKey"),c=t.data("sdKey"),d=r,l=(l&&(d=d[n(l,a,s)]),(d=c?d[n(c,a,s)]:d).getValue());l&&d.setValue(l,!0)}}}function T(e,t){if(""==t)return!0;if("x"==t){if(-1<["right","left"].indexOf(e))return!0}else if("y"==t&&-1<["top","bottom"].indexOf(e))return!0;return!1}function a(e,a){if(M.twc.has_data())return M.twc.getOptions(e,"p"===a?"padding":"margin","p"===a?/padding/:/margin/,"m"===a,function(e){for(var t=!1,n=(0==J[a].points.length&&(t=!0),"-"),r=0;r<e.length;r++){var i=e[r]["name"];n.startsWith("-")&&!i.startsWith("-")&&""!==i&&e.splice(r,0,{key:"",name:""}),t&&J[a].points.push(i),n=i}});J[a].points=J[a].default_points;var t,n=J[a].points.slice(0),r=[],i=[],o="unshift";"p"==a?(t=n[n.length-1],n.splice(n.length-1,1),r.push({key:e+t,name:t}),r.push({key:"",name:""})):i=n.splice(n.length-2,2);for(var s=0;s<n.length;s++){var l=n[s];r[o]({key:e+n[s],name:l,num:l})}if("m"==a){for(s=0;s<i.length;s++)r.push({key:e+i[s],name:i[s]});r.push({key:"",name:""});for(s=1;s<n.length;s++){l=-1*n[s];r.push({key:"-"+e+n[s],name:l,num:l})}}return r}function o(e,t,a){if(M.twc.has_data())return M.twc.getOptions(e,t,null,!0,function(e){for(var t=!1,n=(0!=N.length||a||(t=!0),"-"),r=0;r<e.length;r++){var i=e[r]["name"];n.startsWith("-")&&!i.startsWith("-")&&""!==i&&e.splice(r,0,{key:"",name:""}),t&&N.push(i),n=i}});var n=[];N=function(){if(M.getTWVersion()<2)return c;var e=M.getSpacingPoints();e.push("1/2"),e.push("1/3"),e.push("2/3"),e.push("1/4"),e.push("2/4"),e.push("3/4");for(var t=(t=["auto","full"]).concat(e),n=0;n<e.length;n++)t.push("-"+e[n]);return t}(),n.push({key:"",name:""});for(var r=0;r<N.length;r++){var i=N[r];n.push({key:e+i,name:i})}return n}function i(e,o,t){var n;if(M.twc.has_data())return n="","border"==o?n="border"+(t?"-"+t:"")+"-width":"rounded"==o&&(n="border"+(t?"-"+t:"")+"-radius"),M.twc.getOptions(e,n,null,!1,function(e){var t=!1;0==G[o].points.length&&(t=!0);for(var n=0;n<e.length;n++){var{name:r,key:i}=e[n],a=r;r.startsWith("-")?a=r=r.substring(1,r.length):""==r&&""!=i&&("border"==o?r="1px":"rounded"==o&&(r="normal")),"normal"!==a&&"1px"!==a||(a=""),e[n]={key:i,name:r},t&&G[o].points.push(a)}});for(var r=[],i=(G[o].points=G[o].default_points,G[o].points),a=0;a<i.length;a++){var s,l=i[a];0==l.length?"border"==o?r.push({key:e,name:"1px"}):"rounded"==o&&r.push({key:e,name:"Normal"}):(s={key:e+"-"+l,name:crsaCamelize(l)},l=parseInt(l),isNaN(l)||(s["num"]=l),r.push(s))}return r}var n=M.rc,q=(M.framework_prefix="tw"+t,M.container_selector=".container",M.grid_container_selector="grid",M.style="",M.no_include_local_question=!0,M.showGridInMenu=!1,M.showColumnInMenu=!1,M.createDisplayHelpers=!1,M.makeResponsiveClass),r=M.registerClasses,d=(M.spacingPoints,new PgFrameworkHelpers("Tailwind",M,e,t,PgBSMenuPointColumnSize)),l=(new PgToggleButtonMaker,d.getCodeForLarge=function(){var e;switch(this.version){case 4:e='<pgdiv class="col-1 pinegrow-ui-helper"><pgdiv class="pinegrow-ui-helper"></pgdiv></pgdiv>';break;case 3:e='<pgdiv class="col-xs-1 pinegrow-ui-helper"><pgdiv class="pinegrow-ui-helper"></pgdiv></pgdiv>'}return e},d.getCodeForSmall=function(){var e;switch(this.version){case 4:e='<pgdiv class="col-1 pinegrow-ui-helper d-block d-sm-none" style="padding-left:0;padding-right:0;"><pgdiv class="pinegrow-ui-helper"></pgdiv></pgdiv>';break;case 3:e='<pgdiv class="col-xs-1 pinegrow-ui-helper visible-xs visible-xs-block" style="padding-left:0;padding-right:0;"><pgdiv class="pinegrow-ui-helper"></pgdiv></pgdiv>'}return e},d.getClassForSize=function(e,t,n){return null==n?n="":n+="",t+(e==M.size_for_all?"":"-"+e)+(n.length?"-"+n:"")},d.getColumnSizes=function(e){var r=new RegExp("^col(\\-("+M.sizes.join("|")+"))?(\\-([0-9]+|auto))?"),i={};return(e instanceof pgParserNode?e.getClasses():e.classList).forEach(function(e){var t,n=e.match(r);n&&(t=n[2]||M.size_for_all,n=n[4]||"",i[t]=n)}),i},new PgDelayedTasks),u=(d.executeScriptInPageDelayed=function(e,t){l.run("runCode"+t+e.uid,function(){pinegrow.executeScriptInPage(e,t)},1e3)},d.makeFieldLabelForSize=function(e,t){return'<span class="tw-label">'+e+'</span><span class="tw-device-size">'+t+"</span>"},d.getDevicesControlFactory=function(n,e,o,t,i){function r(t){["all"].forEach(function(e){t(e,e==M.size_for_all?"":"-"+e,M.prefix+n+"."+e)})}return function(){var a=new PgCustomPropertyControl(M.prefix+n);return a.onDefine=function(){r(function(e,t,n){var r=o(e,t);r.parent_section_id=i,a.registerInputField(n,r)})},a.onShow=function(){var i=$("<div/>",{class:"tw-device-control "+t});return $('<div class="tw-device-control-title">'+e+"</div>").appendTo(i),r(function(e,t,n){var r=o(e,t);a.showInputField(i,n,r).$field.attr("data-device-size",e)}),i},a.onSetValues=function(e){var i=!0;r(function(e,t,n){var r=a.get$Field(n);a.values[n]?(r.addClass("tw-has-value"),e!=M.size_for_all&&(i=!1)):r.removeClass("tw-has-value")}),i?a.$element.addClass("tw-none-or-all"):a.$element.removeClass("tw-none-or-all")},a}},{}),B=(d.onSectionWithDevicesControlsShown=function(t,e){var n,r,i,a=d,o={},s=!0,l=["all"],c=(o["all"]=!0,e.$content.get(0).querySelectorAll("[data-device-size]"));l.forEach(function(e){u[t.section_key]&&u[t.section_key][e]&&(o[e]=!0)}),c.forEach(function(e){var t,n=e.getAttribute("data-device-size");o[n]||(t=e.classList.contains("tw-has-value"),o[n]=t,s=s&&!t)}),s&&(o[M.size_for_all]=!0),c.forEach(function(e){var t=e.getAttribute("data-device-size"),n=e.getAttribute("data-device-display")||"flex";o[t]?pgShow(e,n):pgHide(e)});n=pinegrow.getSelectedPage(),c.forEach(function(e){var t=e.getAttribute("data-device-size");a.isSizeVisible(n,t)?e.classList.remove("tw-size-not-visible"):e.classList.add("tw-size-not-visible")}),r=0,i=!1,l.forEach(function(e){o[e]&&(r++,e==M.size_for_all)&&(i=!0)}),c=e.$content.find(".tw-device-control"),1<r?c.removeClass("tw-single-size"):c.addClass("tw-single-size"),i?c.addClass("tw-for-all-shown"):c.removeClass("tw-for-all-shown")},{}),Q={},J={m:{directions:["","x","y","t","l","r","b"],default_points:M.getSpacingPoints().concat(["px","auto"]),points:[]},p:{directions:["","x","y","t","l","r","b"],default_points:M.getSpacingPoints().concat(["px"]),points:[]}},j={},O={},U=["","x","y","top","left","right","bottom"],c=["0","auto"],N=[],g={},z={translate:{directions:["x","y"],default_points:M.getSpacingPoints().concat(["px","full","1/2"]),points:[]},scale:{directions:["x","y"],default_points:["0","50","75","90","95","100","105","110","125","150"],points:[]},skew:{directions:["x","y"],default_points:["0","1","2","3","6","12"],points:[]},rotate:{directions:[""],default_points:["0","1","2","3","6","12","45","90","180"],points:[]}},K={},G={border:{directions:["","t","r","b","l"],default_points:["","0","2","4","8"],points:[]},rounded:{directions:["","t","r","b","l","tl","tr","br","bl"],default_points:["none","sm","","md","lg","xl","2xl","3xl","full"],points:[]}},H={},Y=(d.onTailwindUpdated=function(){for(var e in J)J[e].points=[];for(var e in N=[],z)z[e].points=[];for(var e in G)G[e].points=[]},function(e,t){var n,r;return t&&(n=!1,(r=t).startsWith("-")&&(n=!0,r=r.substr(1,r.length)),r.startsWith(e))?(0<(r=r.replace(e,"")).length&&(r=r.substr(1,r.length)),n?`-`+r:r):null}),s=(n.add(function(){r("margin.padding.all.m",a("m-","m"),"tw.spacing")}),n.add(function(){r("margin.padding.all.mx",a("mx-","m"),"tw.spacing")}),n.add(function(){r("margin.padding.all.my",a("my-","m"),"tw.spacing")}),n.add(function(){r("margin.padding.all.mt",a("mt-","m"),"tw.spacing")}),n.add(function(){r("margin.padding.all.ml",a("ml-","m"),"tw.spacing")}),n.add(function(){r("margin.padding.all.mr",a("mr-","m"),"tw.spacing")}),n.add(function(){r("margin.padding.all.mb",a("mb-","m"),"tw.spacing")}),n.add(function(){r("margin.padding.all.p",a("p-","p"),"tw.spacing")}),n.add(function(){r("margin.padding.all.px",a("px-","p"),"tw.spacing")}),n.add(function(){r("margin.padding.all.py",a("py-","p"),"tw.spacing")}),n.add(function(){r("margin.padding.all.pt",a("pt-","p"),"tw.spacing")}),n.add(function(){r("margin.padding.all.pl",a("pl-","p"),"tw.spacing")}),n.add(function(){r("margin.padding.all.pr",a("pr-","p"),"tw.spacing")}),n.add(function(){r("margin.padding.all.pb",a("pb-","p"),"tw.spacing")}),n.add(function(){r("position.all.inset",o("inset-","top",!0),"tw.position")}),n.add(function(){r("position.all.x",o("inset-x-","left"),"tw.position")}),n.add(function(){r("position.all.y",o("inset-y-","top"),"tw.position")}),n.add(function(){r("position.dir.all.top",o("top-","top"),"tw.position")}),n.add(function(){r("position.dir.all.left",o("left-","left"),"tw.position")}),n.add(function(){r("position.dir.all.right",o("right-","right"),"tw.position")}),n.add(function(){r("position.dir.all.bottom",o("bottom-","bottom"),"tw.position")}),d.getOptionsTransform=function(e,a,t,o){if(M.twc.has_data())return M.twc.getOptions(e,"both"===t?[`--tw-${a}-x`,`--tw-${a}-y`]:`--tw-`+a+(t?"-"+t:""),null,"scale"!=a,function(e){for(var t=!1,n=(0!=z[a].points.length||o||(t=!0),"-"),r=0;r<e.length;r++){var i=e[r]["name"];n.startsWith("-")&&!i.startsWith("-")&&""!==i&&e.splice(r,0,{key:"",name:""}),t&&z[a].points.push(i),n=i}});var n=[],r=(z[a].points=z[a].default_points,z[a].points),i="unshift";"scale"==a&&(i="push",n.push({key:"",name:""}));for(var s=0;s<r.length;s++){var l=crsaCamelize(r[s]),c=parseInt(r[s]);n[i]({key:e+r[s],name:l,num:c})}if("scale"!=a){n.push({key:"",name:""});for(s=1;s<r.length;s++){var d={key:"-"+e+r[s]};isNaN(parseInt(r[s]))||-1<r[s].indexOf("/")?d["name"]="-"+crsaCamelize(r[s]):(c=-1*r[s],d["name"]=c,d["num"]=c),n.push(d)}}return n});n.add(function(){r("transform.translate.x.all",s("translate-x-","translate","x"),"tw.transform")}),n.add(function(){r("transform.translate.y.all",s("translate-y-","translate","y"),"tw.transform")}),n.add(function(){r("transform.scale.all",s("scale-","scale","both",!0),"tw.transform")}),n.add(function(){r("transform.scale.x.all",s("scale-x-","scale","x"),"tw.transform")}),n.add(function(){r("transform.scale.y.all",s("scale-y-","scale","y"),"tw.transform")}),n.add(function(){r("transform.rotate.all",s("rotate-","rotate",""),"tw.transform")}),n.add(function(){r("transform.skew.x.all",s("skew-x-","skew","x"),"tw.transform")}),n.add(function(){r("transform.skew.y.all",s("skew-y-","skew","y"),"tw.transform")});return n.add(function(){r("border.border.all",i("border","border",""),"tw.border")}),n.add(function(){r("border.border.t.all",i("border-t","border","top"),"tw.border")}),n.add(function(){r("border.border.l.all",i("border-l","border","left"),"tw.border")}),n.add(function(){r("border.border.r.all",i("border-r","border","right"),"tw.border")}),n.add(function(){r("border.border.b.all",i("border-b","border","bottom"),"tw.border")}),n.add(function(){r("border.rounded",i("rounded","rounded",""),"tw.border")}),n.add(function(){r("border.rounded.t.all",i("rounded-t","rounded","top-left"),"tw.border")}),n.add(function(){r("border.rounded.l.all",i("rounded-l","rounded","top-left"),"tw.border")}),n.add(function(){r("border.rounded.r.all",i("rounded-r","rounded","top-right"),"tw.border")}),n.add(function(){r("border.rounded.b.all",i("rounded-b","rounded","bottom-right"),"tw.border")}),n.add(function(){r("border.rounded.tl.all",i("rounded-tl","rounded","top-left"),"tw.border")}),n.add(function(){r("border.rounded.tr.all",i("rounded-tr","rounded","top-right"),"tw.border")}),n.add(function(){r("border.rounded.bl.all",i("rounded-bl","rounded","bottom-left"),"tw.border")}),n.add(function(){r("border.rounded.br.all",i("rounded-br","rounded","bottom-right"),"tw.border")}),d.getDevicesMarginAndPaddingControlFactory=function(n,f){function t(t){["all"].forEach(function(e){t(e,e==M.size_for_all?"":"-"+e,M.prefix+n+"."+e)})}return function(){function a(e,t,s){for(var n in J){var r=function(e){for(var t=s+"."+e,n=J[e].directions,r=[],i=0;i<3;i++){var a=n[i],o=h.values[t+a];o&&(o=o.split("-"),r.push({direction:a,value:o[o.length-1]}))}return 0<r.length?r:null}(n),i=Q[e][n];if(i.removeClass("active"),r&&0<r.length)for(var a=0;a<r.length;a++){for(var o=r[a],l=o.value,c=o.direction,d=J[n].directions,u=3;u<d.length;u++){var p,f,g=d[u];!function(e,t){if(""==t)return!0;if("x"==t){if(-1<["r","l"].indexOf(e))return!0}else if("y"==t&&-1<["t","b"].indexOf(e))return!0;return!1}(g,c)||h.values[f=s+"."+n+g]||(p=B[e][n+g],h.values[f]=f=n+g+(t?"-"+t:"")+"-"+l,p.setValue(f))}if(""==o.direction){i.addClass("active");break}}}}var h=new PgCustomPropertyControl(M.prefix+n);return h.onDefine=function(){t(function(e,t,n){for(var r in J)for(var i=J[r].directions,a=0;a<i.length;a++){var o=f(e,r,i[a],t),s=n+"."+r+i[a];h.registerInputField(s,o)}})},h.onShow=function(){var s,l,c,d,u,p=$('<div class="crsa-css-gui bs4-margin-and-padding"></div>');return t(function(e,t,n){var r=$('<div class="margin-and-padding-container text-center" data-device-size="'+e+'"></div>').appendTo(p),i=($("<label/>",{class:"size-label"}).html('<span class="tw-device-size">'+e+"</span>").appendTo(r),B[e]={},Q[e]={},c=f(e,s="m",l="t",t),u=n+"."+s+l,(d=h.showInputField(r,u,c)).$field.addClass("crsa-field-margin-top crsa-small-input crsa-align-center-input crsa-inline-container"),B[e][s+l]=d,c=f(e,s,l="l",t),u=n+"."+s+l,(d=h.showInputField(r,u,c)).$field.addClass("crsa-field-margin-left crsa-small-input crsa-align-center-input crsa-inline-container"),B[e][s+l]=d,$('<div class="margin-border"></div>').appendTo(r)),a=$('<div class="change-all-margin-icon change-all-icon">                        <i class="icon-same"></i>                    </div>').appendTo(i),o=J[s].directions,a=((Q[e]["m"]=a).data("frKey","{type}{direction}"),a.data("type",s),a.data("directions",o.slice(3,o.length)),a.data("valueObject",B),a.on("click",w),$('<div class="padding-container"></div>').appendTo(i)),i=(c=f(e,s="p",l="t",t),u=n+"."+s+l,(d=h.showInputField(a,u,c)).$field.addClass("crsa-field-padding-top crsa-small-input crsa-align-center-input crsa-inline-container"),B[e][s+l]=d,c=f(e,s,l="l",t),u=n+"."+s+l,(d=h.showInputField(a,u,c)).$field.addClass("crsa-field-padding-left crsa-small-input crsa-align-center-input crsa-inline-container"),B[e][s+l]=d,$('<div class="padding-border">                        <div class="change-all-padding-icon change-all-icon"><i class="icon-same"></i></div>                    </div>').appendTo(a).find("> .change-all-icon")),o=J[s].directions;(Q[e]["p"]=i).data("frKey","{type}{direction}"),i.data("type",s),i.data("directions",o.slice(3,o.length)),i.data("valueObject",B),i.on("click",w),c=f(e,s,l="r",t),u=n+"."+s+l,(d=h.showInputField(a,u,c)).$field.addClass("crsa-field-padding-right crsa-small-input crsa-align-center-input crsa-inline-container"),B[e][s+l]=d,c=f(e,s,l="b",t),u=n+"."+s+l,(d=h.showInputField(a,u,c)).$field.addClass("crsa-field-padding-bottom crsa-small-input crsa-align-center-input crsa-inline-container"),B[e][s+l]=d,c=f(e,s="m",l="r",t),u=n+"."+s+l,(d=h.showInputField(r,u,c)).$field.addClass("crsa-field-margin-right crsa-small-input crsa-align-center-input crsa-inline-container"),B[e][s+l]=d,c=f(e,s,l="b",t),u=n+"."+s+l,(d=h.showInputField(r,u,c)).$field.addClass("crsa-field-margin-bottom crsa-small-input crsa-align-center-input crsa-inline-container"),B[e][s+l]=d}),p},h.onSetValues=function(e){var i=!0;t(function(e,t,n){a(e,t,n);var r=h.$element.find('> [data-device-size="'+e+'"]');!function(e){for(var t in J)for(var n=J[t].directions,r=3;r<n.length;r++){var i=n[r];if(h.values[e+"."+t+i])return!0}return!1}(n)?r.removeClass("tw-has-value"):(r.addClass("tw-has-value"),e!=M.size_for_all&&(i=!1))}),i?h.$element.addClass("tw-none-or-all"):h.$element.removeClass("tw-none-or-all")},h}},d.getSpacingControl=function(i){return d.getDevicesMarginAndPaddingControlFactory("margin.padding",function(e,t,n,r){return{type:"select",name:null,default_value:"",drag_starting_index:J[t].points.length,options:function(){return a(t+n+"-",t)},action:"custom",can_make_change_action:"apply_class",preview_class:!0,preview_class_from_value:function(e,t,n){return e},draggable_list:!0,async_options_function:!0,fill_list_on_open:!0,parent_section_id:i,more_prop:{size:e,type:t,direction:n},responsive_class:function(e,t){return"___dummy___"===e?q(e,t):e},get_value:function(e,t,n,r){for(var i=e.getPage().classSetter,a=r.options(),o=0;o<a.length;o++)if(i.hasClass(e,q(a[o].key)))return a[o].key;var s=r.more_prop.size,l=r.more_prop.type,c=r.more_prop.direction;if(c&&"x"!=c&&"y"!=c){var d,u=M.prefix+"margin.padding."+s+"."+l;if(n[u])return d=p(l,l,c,s,u,n,""),n[u+c]=d;if("r"==c||"l"==c){if(n[u+"x"])return d=p(l+"x",l,c,s,u,n,"x"),n[u+c]=d}else if("t"==c||"b"==c)if(n[u+"y"])return d=p(l+"y",l,c,s,u,n,"y"),n[u+c]=d}return""},set_value:function(e,t,O,n,U,r){for(var i=e.getPage().classSetter,a=(i.removeClass(e,q(n)),r.more_prop.size),o=r.more_prop.type,s=r.more_prop.direction,l=A(o+s,t),c=J[o].directions,d=J[o].points,u=Q[a][o].hasClass("active"),p=[],f=0;f<c.length;f++)for(var g=c[f],h=0;h<d.length;h++){var v=d[h],m=!1,w=q(V(o,g,a,v));if(i.hasClass(e,w)?m=!0:"m"==o&&(w=q(V(o,g,a,"-"+v)),i.hasClass(e,w))&&(v="-"+v,m=!0),m){p[g]=v;for(var _=L(g),b=0;b<_.length;b++)p[_[b]]=v}}var y,C="t"==s?l:p["t"],x="l"==s?l:p["l"],S="r"==s?l:p["r"],s="b"==s?l:p["b"],k={"":p[""],x:p["x"],y:p["y"],t:p["t"],l:p["l"],r:p["r"],b:p["b"]},$={};for(g in u||C&&C==x&&x==S&&S==s?$[""]=u?l:C:(C&&C==s?$["y"]=C:($["t"]=C,$["b"]=s),x&&x==S?$["x"]=x:($["l"]=x,$["r"]=S)),k)void 0!==(y=k[g])&&(T=V(o,g,a,y),i.removeClass(e,q(T)));for(g in $)if(void 0!==(y=$[g]))for(var T=V(o,g,a,y),P=(i.addClass(e,q(T),M.classSorter),j=I=D=F=void 0,o),z=a,E=y,F=L(g),D=0;D<F.length;D++){var I=F[D],j=B[z][P+I],I=V(P,I,z,E);j&&j.setValue(I)}return t}}})},d.getDevicesPositionControlFactory=function(n,c){function t(t){["all"].forEach(function(e){t(e,e==M.size_for_all?"":e+":",M.prefix+n+"."+e)})}var d,u,p,k=["0","auto"];return function(){var S=new PgCustomPropertyControl(M.prefix+n);return S.onDefine=function(){t(function(e,t,n){for(var r=3;r<U.length;r++){var i=U[r];d=c(e,t,i),p=n+"."+i,S.registerInputField(p,d)}})},S.onShow=function(){var l=$('<div class="crsa-css-gui tw-position"></div>');return t(function(e,t,n){j[e]={};for(var r=$('<div class="position-container text-center" data-device-size="'+e+'"></div>').appendTo(l),i=($("<label/>",{class:"size-label"}).html('<span class="tw-device-size">'+e+"</span>").appendTo(r),3);i<U.length;i++){var a=U[i];d=c(e,t,a),p=n+"."+a,(u=S.showInputField(r,p,d)).$field.addClass("crsa-field-"+a+" crsa-small-input crsa-align-center-input crsa-inline-container"),j[e][a]=u}var o=$('<div class="position-overall-border"></div>').appendTo(r),s=($('<div class="position-padding-top"></div>').appendTo(o),$('<div class="position-padding-left"></div>').appendTo(o),$('<div class="position-border"></div>').appendTo(o)),o=($('<div class="position-padding-right"></div>').appendTo(o),$('<div class="position-padding-bottom"></div>').appendTo(o),O[e]=$('<div class="change-all-icon"><i class="icon-same"></i></div>').appendTo(s));o.data("frKey","{direction}"),o.data("type",""),o.data("directions",U.slice(3,U.length)),o.data("valueObject",j),o.on("click",w)}),l},S.onSetValues=function(e){var y=!0,C=this.obj,x=C.getPage().classSetter;t(function(e,t,n){for(var r=e,i=n,a=S.obj,o=t?r+":":"",s=a.getPage().classSetter,l=3;l<U.length;l++){var c=U[l],d=i+"."+c;if(!S.values[d])for(var u=0;u<3;u++)for(var p=U[u],f=o+"inset-"+(p?p+"-":""),g=0;g<k.length;g++){var h,v=k[g];s.hasClass(a,q(f+v))&&T(c,p)&&(v=o+c+"-"+v,(h=j[r][c])&&h.setValue(v),S.values[d]=v)}}var m=O[e];m.removeClass("active");for(var w=0;w<N.length;w++){var _=D("",e,N[w]);x.hasClass(C,q(_))&&m.addClass("active")}var b=S.$element.find('> [data-device-size="'+e+'"]');!function(e){for(let n=3;n<U.length;n++){var t=U[n];if(S.values[e+"."+t])return!0}return!1}(n)?b.removeClass("tw-has-value"):(b.addClass("tw-has-value"),e!=M.size_for_all&&(y=!1))}),y?S.$element.addClass("tw-none-or-all"):S.$element.removeClass("tw-none-or-all")},S}},d.getPositionControl=function(i){return d.getDevicesPositionControlFactory("position.dir",function(e,t,n){var r={type:"select",name:null,options:function(){return o((t?e+`:`:"")+n+"-",n)},action:"custom",draggable_list:!0,parent_section_id:i,async_options_function:!0,fill_list_on_open:!0,more_prop:{size:e,direction:n},preview_class:!0,responsive_class:function(e,t){return"___dummy___"===e?q(e,t):e},on_preview_class:function(e,t,n,r,i){},get_value:function(e,t,n,r){for(var i=e.getPage().classSetter,a=r.options(),o=0;o<a.length;o++)if(i.hasClass(e,q(a[o].key)))return a[o].key;for(var s=r.more_prop.size,l=r.more_prop.direction,o=0;o<3;o++){var c=U[o];if(T(l,c))for(var d=0;d<N.length;d++){var u=N[d],p=D(c,s,u);if(i.hasClass(e,q(p)))return D(l,s,u)}}return""},set_value:function(e,t,n,r,i,a){for(var o=a.more_prop.size,s=a.more_prop.direction,l=e.getPage().classSetter,c=Y(s,t),d=O[o].hasClass("active"),u=[],p=0;p<U.length;p++)for(var f=U[p],g=0;g<N.length;g++){var h=N[g],v=q(D(f,o,h));if(l.hasClass(e,v)){u[f]=h;for(var m=I(f),w=0;w<m.length;w++)u[m[w]]=h}}var _,b="top"==s?c:u["top"],y="left"==s?c:u["left"],C="right"==s?c:u["right"],s="bottom"==s?c:u["bottom"],x={"":u[""],x:u["x"],y:u["y"],top:u["top"],left:u["left"],right:u["right"],bottom:u["bottom"]},S={};for(f in d||b&&b==y&&y==C&&C==s?S[""]=d?c:b:(b&&b==s?S["y"]=b:(S["top"]=b,S["bottom"]=s),y&&y==C?S["x"]=y:(S["left"]=y,S["right"]=C)),x)void 0!==(_=x[f])&&(k=D(f,o,_),l.removeClass(e,q(k)));for(f in S)if(void 0!==(_=S[f])){var k=D(f,o,_);if(l.addClass(e,q(k),M.classSorter),!a._skip_setPosValueOnFields){F=E=z=P=void 0;for(var $=o,T=_,P=I(f),z=0;z<P.length;z++){var E=P[z],F=j[$][E],E=D(E,$,T);F&&F.setValue(E)}}}return t}};return r})},d.getDevicesTransformControlFactory=function(n,e,f){function t(t){["all"].forEach(function(e){t(e,e==M.size_for_all?"":e+":",M.prefix+n)})}return function(){var p=new PgCustomPropertyControl(M.prefix+n);return p.onDefine=function(){t(function(e,t,n){for(var r in z)for(var i=z[r].directions,a=0;a<i.length;a++){var o=i[a],s=f(e,t,r,o);p.registerInputField(n+`.${r}${o?"."+o:""}.`+e,s)}})},p.onShow=function(){var u=$('<div class="crsa-css-gui tw-transform"></div>');return t(function(e,t,n){var r,i=$('<div class="transform-container" data-device-size="'+e+'"></div>').appendTo(u),a=($("<label/>",{class:"size-label"}).html('<span class="tw-device-size">'+e+"</span>").appendTo(i),$('<div class="transform-tabs-container"></div>').appendTo(i));for(r in g[e]={},z){g[e][r]={};for(var o=z[r].directions,s=$('<div class="'+r+'-container tw-device-control"></div>').appendTo(a),l=0;l<o.length;l++){var c=o[l],d=f(e,t,r,c);g[e][r][c]=p.showInputField(s,n+`.${r}${c?"."+c:""}.`+e,d)}}}),u},p.onSetValues=function(e){},p}},d.getTransformControl=function(a,o){var T=(a=a||"")?a+":":"";return d.getDevicesTransformControlFactory(a+"transform",T,function(e,t,n,r){var i="translate"==n?"tran.":n;return{type:"select",name:crsaCamelize(i)+" "+(r?r[0].toUpperCase():""),options:function(){return s(n+"-"+(r?r+"-":""),n,r)},action:"custom",draggable_list:!0,parent_section_id:o,async_options_function:!0,fill_list_on_open:!0,more_prop:{size:e,type:n,direction:r,prefix:a,clsPrefix:T},get_value:function(e,t,n,r){for(var i=e.getPage().classSetter,a=r.options(),o=0;o<a.length;o++)if(i.hasClass(e,q(a[o].key)))return a[o].key;var s=r.more_prop.size,l=r.more_prop.type,c=r.more_prop.direction,d=r.more_prop.prefix;if("scale"==l)for(var u=z[l].points,o=0;o<u.length;o++){var p=u[o],f=s==M.size_for_all?"":s+":";if(i.hasClass(e,q(f+T+l+"-"+p)))return n[""+M.prefix+d+`transform.${l}${c?"."+c:""}.`+s]=f+T+l+"-"+c+"-"+p}return""},set_value:function(e,t,n,r,i,a){var o,s=e.getPage().classSetter,l=(s.removeClass(e,q(r)),a.more_prop.size),c=a.more_prop.type,d=a.more_prop.direction;if("scale"==c){for(var u=z[c].points,p=z[c].directions,f=Y(c+`-`+d,t),g=[],h=["",...p],v=0;v<h.length;v++)for(var m=h[v],w=0;w<u.length;w++){var _=u[w],b=q(P(c,m,l,_,T));if(s.hasClass(e,b)){g[m]=_;for(var y=""!==(o=m)?[o]:["x","y"],C=0;C<y.length;C++)g[y[C]]=_}}var x,S,p="x"==d?f:g["x"],d=null==(d="y"==d?f:g["y"])?null:d,k={"":g[""],x:g["x"],y:g["y"]},$={};for(m in(p=null==p?null:p)&&p==d?$[""]=p:($["x"]=p,$["y"]=d),k)null!=(x=k[m])&&(S=P(c,m,l,x,T),s.removeClass(e,q(S)));for(m in $)null!=(x=$[m])&&(S=P(c,m,l,x,T),s.addClass(e,q(S),M.classSorter))}else s.addClass(e,q(t),M.classSorter);return t}}})},d.getDevicesBorderControlFactory=function(n,m){function t(t){["all"].forEach(function(e){t(e,e==M.size_for_all?"":e+":",M.prefix+n)})}return function(){var v=new PgCustomPropertyControl(M.prefix+n);return v.onDefine=function(){t(function(e,t,n){for(var r in G)for(var i=G[r].directions,a=0;a<i.length;a++){var o=i[a],s=m(e,t,r,o);v.registerInputField(n+`.${r}${o?"."+o:""}.`+e,s)}})},v.onShow=function(){var h=$('<div class="crsa-css-gui tw-border"></div>');return t(function(e,t,n){K[e]={},H[e]={};var r=$('<div class="border-radius-container text-center" data-device-size="'+e+'"></div>').appendTo(h),i=($("<label/>",{class:"size-label"}).html('<span class="tw-device-size">'+e+"</span>").appendTo(r),null),a=$('<div class="control-container"></div>').appendTo(r),o="rounded";K[e][o]={};for(var i=G[o].directions,s=5;s<i.length;s++){var l=i[s],c=m(e,t,o,l),d=n+`.${o}${l?"."+l:""}.`+e,u="",p="";"tl"==l?(u="top-left",p="icon-round_lu"):"tr"==l?(u="top-right",p="icon-round_ru"):"bl"==l?(u="bottom-left",p="icon-round-ld"):"br"==l&&(u="bottom-right",p="icon-round_rd"),(f=K[e][o][l]=v.showInputField(a,d,c)).$field.addClass("crsa-radius-field crsa-small-input crsa-align-left-input crsa-inline-container has-icon-before crsa-field-border-"+u+"-radius"),$('<i class="'+p+'"></i>').insertBefore(f.$field.find("input"))}$('<div class="border-radius-border"></div>').appendTo(a),K[e][o="border"]={},i=G[o].directions;for(s=1;s<i.length;s++){var f,l=i[s],c=m(e,t,o,l),d=n+`.${o}${l?"."+l:""}.`+e,u="";"t"==l?u="top":"l"==l?u="left":"r"==l?u="right":"b"==l&&(u="bottom"),(f=K[e][o][l]=v.showInputField(a,d,c)).$field.addClass("crsa-border-field crsa-small-input crsa-align-left-input crsa-field-border-"+u)}var r=$('<div class="change-all-container"></div>').appendTo(r),g=(i=G[o="border"].directions,H[e][o]=$('<div data-type="width" class="change-all-icon"><i class="icon-same"></i></div>').appendTo(r)),g=(g.data("frKey","{type}"),g.data("sdKey","{direction}"),g.data("type",o),g.data("directions",i.slice(1)),g.data("valueObject",K),g.on("click",w),i=G[o="rounded"].directions,H[e][o]=$('<div class="change-all-border-raduis"><i class="icon-round_lu"></i><i class="icon-same"></i></div>').appendTo(r));g.data("frKey","{type}"),g.data("sdKey","{direction}"),g.data("type",o),g.data("directions",i.slice(5)),g.data("valueObject",K),g.on("click",w)}),h},v.onSetValues=function(e){var l=this.obj,c=l.getPage().classSetter;t(function(e,t,n){for(const s in G)for(var r=H[e][s],i=(r.removeClass("active"),G[s].points),a=0;a<i.length;a++){var o=W(s,"",e,i[a]);c.hasClass(l,q(o))&&r.addClass("active")}})},v}},d.getBorderControl=function(t){return d.getDevicesBorderControlFactory("border",function(e,y,n,r){return{type:"select",name:"",show_empty:!0,options:function(){var e=n+(r?"-"+r:""),t=function(e,t){if("border"==e)switch(t){case"t":return"top";case"l":return"left";case"r":return"right";case"b":return"bottom";default:return null}else if("rounded"==e)switch(t){case"tl":case"l":case"t":return"top-left";case"tr":case"r":return"top-right";case"bl":return"bottom-left";case"br":case"b":return"bottom-right";default:return null}}(n,r);return i(e,n,t)},action:"custom",can_make_change_action:"apply_class",draggable_list:!0,async_options_function:!0,fill_list_on_open:!0,parent_section_id:t,more_prop:{size:e,type:n,direction:r},responsive_class:function(e,t){return"___dummy___"===e?q(e,t):e},get_value:function(e,t,n,r){for(var i=e.getPage().classSetter,a=r.options(),o=0;o<a.length;o++)if(i.hasClass(e,q(a[o].key)))return a[o].key;var s=r.more_prop.type,l=r.more_prop.size,c=r.more_prop.direction,d=y?l+`:`:"",u=c?"-"+c:"",p=M.prefix+`border.${s}${c?"."+c:""}.`+l,f=G[s].points,g=G[s].directions,h=g.length-1;"border"==s?h=1:"rounded"==s&&(h=5);for(o=0;o<h;o++)for(var v=g[o],m=v?"-"+v:"",w=0;w<f.length;w++){var _=f[w],_=_?"-"+_:"",b=d+s;if(i.hasClass(e,q(b+m+_))&&function(e,t){if(""==t)return!0;if("t"==t){if(-1<["tl","tr"].indexOf(e))return!0}else if("r"==t){if(-1<["tr","br"].indexOf(e))return!0}else if("b"==t){if(-1<["bl","br"].indexOf(e))return!0}else if("l"==t&&-1<["tl","bl"].indexOf(e))return!0;return!1}(c,v))return n[p]=b+u+_}return""},set_value:function(e,t,U,n,A,r){for(var i=e.getPage().classSetter,a=(i.removeClass(e,q(n)),r.more_prop.type),o=r.more_prop.size,s=r.more_prop.direction,l=G[a].points,c=G[a].directions,d=(n=l,d=Y(a+`-`+s,t),-1<n.indexOf(d)?d:null),u=H[o][a].hasClass("active"),p=[],f=0;f<c.length;f++)for(var g=c[f],h=0;h<l.length;h++){var v=l[h],m=q(W(a,g,o,v));if(i.hasClass(e,m)){p[g]=v;for(var w=R(a,g),_=0;_<w.length;_++)p[w[_]]=v}}var b,y,C,x,S,k,$,T={},P={};for(g in"border"==a?(b="t"==s?d:p["t"],y="l"==s?d:p["l"],C="r"==s?d:p["r"],x="b"==s?d:p["b"],T={"":p[""],t:p["t"],l:p["l"],r:p["r"],b:p["b"]},u||(b||""==b)&&b==y&&y==C&&C==x?P[""]=u?d:b:(P["t"]=b,P["l"]=y,P["r"]=C,P["b"]=x)):"rounded"==a&&(b="tl"==s?d:p["tl"],y="tr"==s?d:p["tr"],C="bl"==s?d:p["bl"],x="br"==s?d:p["br"],S={},s=function(e){return!S[e]},k=function(e){delete P[e],S[e]=!0},T={"":p[""],t:p["t"],l:p["l"],r:p["r"],b:p["b"],tl:p["tl"],tr:p["tr"],bl:p["bl"],br:p["br"]},u||b&&b==y&&y==C&&C==x?P[""]=u?d:b:(b&&b==y?(P["t"]=b,k("tl"),k("tr")):(s("tl")&&(P["tl"]=b),s("tr")&&(P["tr"]=y)),b&&b==C?(P["l"]=b,k("tl"),k("bl")):(s("tl")&&(P["tl"]=b),s("bl")&&(P["bl"]=C)),y&&y==x?(P["r"]=y,k("tr"),k("br")):(s("tr")&&(P["tr"]=y),s("br")&&(P["br"]=x)),C&&C==x?(P["b"]=C,k("bl"),k("br")):(s("bl")&&(P["bl"]=C),s("br")&&(P["br"]=x)))),T)void 0!==($=T[g])&&(z=W(a,g,o,$),i.removeClass(e,q(z)));for(g in P)if(void 0!==($=P[g]))for(var z=W(a,g,o,$),E=(i.addClass(e,q(z),M.classSorter),O=j=I=D=void 0,a),F=o,L=$,D=R(E,g),I=0;I<D.length;I++){var j=D[I],O=K[F][E][j],j=W(E,j,F,L);O&&O.setValue(j)}return t}}})},d.init(),d},TwCustomizer=function(i,g,h,n,e,l,r){function a(e,t){var n=new CrsaProfile,a=(v=!1,w={},_=[],b={},y={},C={},x={},S=["all"],k=[],T={all:{name:"ALL",name_short:"ALL",w:0,size:"all",slug:""}},z={},0);try{function l(e){if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n.type===CSSRule.STYLE_RULE){var r=n.selectorText.replace("\\.","--dot--").match(c);if(r)for(var i,a,o,s=0;s<r.length;s++)r[s].indexOf(".pg-")<0&&((o=(o=(o=(o=(o=(o=r[s].replace(/\\3([0-9]+)\s?/,"$1")).replace(d,"$1")).replace(u,"")).replace("--dot--",".")).replace(/^dark\:/,"")).replace(/\:dark\:/,":"))in w||(w[o]=!0,0<=(i=(a=n.cssText).indexOf("{"))&&(a=a.substr(i)),_.push({class:o,rule:n,props:a}),3===(i=o.split(":")).length&&(S.indexOf(i[0])<0&&o.indexOf("dark:")<0&&(S.push(i[0]),T[i[0]]={name:i[0].toUpperCase(),name_short:i[0].toUpperCase(),w:600,size:i[0],slug:"-"+i[0]},n.parentRule)&&n.parentRule.type===CSSRule.MEDIA_RULE&&(a=n.parentRule.media.mediaText.match(/min\-width\:\s?([0-9]+)px/))&&(o=parseInt(a[1]),T[i[0]].w=o,T[i[0]].name+=`<span style="opacity:0.7;"> / ${o}px and up</span>`),k.indexOf(i[1])<0)&&k.push(i[1])))}n.cssRules&&l(n.cssRules)}}var c=/\.(\\3[0-9]+\s[a-z0-9\\\:\-\/]+|[a-z0-9\\\:\-\/]+)/gi,d=/([a-z0-9])(:[a-z:\-]+)/,u=/[\.\\]/g,o=/^text\-([a-z]+)\-([0-9]+)$/,s=["opacity"],p=["white","black","current","transparent","inherit"];t&&l(t.cssRules),P=[];for(var r=0;r<S.length;r++)r<S.length-1?T[S[r]].w_range=[T[S[r]].w,T[S[r+1]].w-1]:T[S[r]].w_range=[T[S[r]].w,9999],g.length>r?T[S[r]].icon=g[r]:T[S[r]].icon="icon-Lg",P.push(T[S[r]]);_.forEach(function(e){var t,n=e.class,r=e.rule,i=h(n,S);i.class,"all"===i.size&&(i.class.match(o),n.startsWith("text-"))&&(n=r.style.getPropertyValue("color"))&&(r=null,t="noshade",(i=i.class.split("-")).shift(),1<i.length&&(t=i.pop()),r=i.join("-"),0<=p.indexOf(r)&&"noshade"===t||s.indexOf(r)<0&&(n=n.replace("var(--text-opacity)","1").replace("var(--tw-text-opacity)","1"),b[r]||(b[r]={},a++),b[r][t]=n)),delete e.rule}),20<_.length&&1<a&&(v=!0,m=!1),n.show("TW GET CLASSES")}catch(e){}}var t="function"==typeof(l=l||{})["onTailwindUpdated"]?l["onTailwindUpdated"]:function(){},c=this,v=!1,m=!0,w=(this.has_data=function(){return v},{}),_=[],b={},y={},C={},x={},S=[],k=[],T={},P=[],z={},o={},s=(this.onProjectClosed=function(){this.useDefaults(),o={}},this.getTheme=function(){var n,e,r,i,a,o,s,t;if(3<=l.onGetTWVersion())return pgDmStore.isDesignEnabled(PgDmDesignProviderForTailwind)?l.framework.twIsUsingExternalBuild()?this.getExternalConfigSettings()?void this.requestUpdateFromJIT():void pinegrow.showAlert(`<p>Go to the Design panel and open "Compiler &amp; custom config" options to select the Tailwind CSS config and CSS files. That will allow ${pgf.product_name_short} to adjust visual controls to your custom configuration.</p>`,"Additional setup is needed"):void pinegrow.showAlert(`<p>Visual controls are automatically customized because this project is using the built-in Tailwind CSS compiler. There is nothing extra to do.</p>`,"Visual controls are already customized"):void(l.framework.twIsUsingExternalBuild()&&((e=this.getExternalConfigSettings())?this.requestUpdateFromJIT():this.editExternalConfigSettings(e,function(e,t){})));pinegrow.getCurrentProject()?(e=(n=pinegrow.getSelectedPage()).hasStylesheet(/tailwind/))&&0?c.update(n,e):(e={},0===(t=n.getAllDOMStylesheets()).length&&pinegrow.showQuickError("The page has no stylesheets to inspect!"),r=pinegrow.getCurrentProjectInfo(),i={},a=pinegrow.getCurrentProject(),o=(o=r.getSetting("tw-custom-stylesheet"))&&r.makeUrlAbsolute(o),s=!1,t=t.map(function(e){var t=pinegrow.getOriginalUrl(e.href),n=(i[t]=e,(o=!o&&e.href.match(/tailwind/)?t:o)&&t===o&&(s=!0),t);return a&&(t=a.getRelativeUrl(t)),{key:n,name:crsaGetSummaryStr(t,40)}}),s||(o=null),e.url={name:"Stylesheet",type:"select",show_empty:!0,options:t,validate:function(e,t,n){return n?null:"Please select the stylesheet with Tailwind classes."},value:o},pinegrow.showQuickDialog(`Customize Tailwind visual controls`,"Where to look for Tailwind classes?",`<p>Please select the stylesheet that contains Tailwind CSS rules so that Tailwind visual controls can be adjusted to your Tailwind theme.</p><p>This operation can take a couple of seconds to complete. Learn more about <a href="https://pinegrow.com/docs/tailwind/customized-themes/" class="external">Tailwind CSS customization</a>.</p>`,e,"Cancel","Customize visual controls",null,function(e){r.setSetting("tw-custom-stylesheet",r.makeUrlRelative(e.url)),r.save();var t=i[e.url];c.update(n,t)})):pinegrow.showQuickError("Please open the page as project to use customized Tailwind visual controls.")},this.setScreensFromConfigValues=function(e){(S=[]).push("all"),T={all:{name:"ALL",name_short:"ALL",w:0,size:"all",slug:""}},$.each(e,function(e,t){t=crsaConvertCSSValueToPx(t),S.push(e),T[e]={name:e,name_short:e,w:t,size:e,slug:e}}),P=[];for(var t=0;t<S.length;t++)t<S.length-1?T[S[t]].w_range=[T[S[t]].w,T[S[t+1]].w-1]:T[S[t]].w_range=[T[S[t]].w,9999],g.length>t?T[S[t]].icon=g[t]:T[S[t]].icon="icon-Lg",P.push(T[S[t]])},this.tailwindIsBeingUpdating=function(){t()},this.save=function(e){var t,n;!this.has_data()||m&&!e||(t={options:x,colors:b,screens:S,pseudo_states:k,screen_sizes:T,screen_defs:P},e?(n=l.framework.getResourceFile("resources/tailwind.theme.json"),require("fs").writeFileSync(n,JSON.stringify(t),{encoding:"utf8"})):pinegrow.getCurrentProjectInfo().saveFile("tailwind.theme.json",JSON.stringify(t)))},this.load=function(e){function t(){if(n)try{x={},_=[];var e="string"==typeof n?JSON.parse(n):n;e.options?x=e.options:_=e.list,b=e.colors,S=e.screens,k=e.pseudo_states,T=e.screen_sizes,P=e.screen_defs,v=!0,z={},m&&pinegrow.dispatchEvent("on_tw_default_theme_loaded",null,c),c.tailwindIsBeingUpdating(),i.reregister(),m?console.log("Default Tailwind CSS theme info loaded."):(console.log("Tailwind CSS theme info loaded from _pginfo."),pinegrow.showQuickMessage("Using custom Tailwind CSS controls.")),pinegrow.dispatchEvent("on_page_frameworks_changed",null)}catch(e){}c.requestUpdateFromJIT()}var n;v=!1,e||(n=pinegrow.getCurrentProjectInfo().loadFile("tailwind.theme.json"));if(n)m=!1;else{if(!isApp())return r=l.framework.getResourceUrl("resources/tailwind.theme.json"),void $.getJSON(r,function(e){n=e,m=!0,t()});var r=l.framework.getResourceFile("resources/tailwind.theme.json");try{n=require("fs").readFileSync(r,{encoding:"utf8"}),m=!0}catch(e){console.error("Unable to load default TW theme from "+r)}}t()},this.useDefaults=function(){v=!1,i.reregister(),pinegrow.dispatchEvent("on_page_frameworks_changed",null)},this.restoreDefaults=function(){this.useDefaults(),pinegrow.getCurrentProjectInfo().deleteFile("tailwind.theme.json"),this.load(!0),pinegrow.showQuickMessage("Visual controls now use default Tailwind CSS values.")},this.update=function(e,t){a(0,t),this.has_data()?(this.tailwindIsBeingUpdating(),i.reregister(),this.save(),pinegrow.dispatchEvent("on_page_frameworks_changed",null),pinegrow.refreshCurrentProjectDelayed(!0),pinegrow.showQuickMessage("Tailwind visual controls updated!")):pinegrow.showQuickError("Could not get the information about the Tailwind CSS theme from the selected stylesheet.")},{}),E=(this.isTailwindThemeFile=function(e){return o[e]||!1},this.editExternalConfigSettings=function(r,i){var e={},s=(r=r||this.getExternalConfigSettings(!0,e)||{},pinegrow.getCurrentProject()),t={};const a=l.framework.twIsUsingExternalBuild();"dp"!==e.source&&(t.enabled={type:"checkbox",name:"Use external Tailwind CSS compiler",helptext:"Check to connect Pinegrow with the external Tailwind CSS compiler.",value:"1",negvalue:"0",default_value:a?"1":"0"}),t.external_config_url={name:"Config file",type:"text",value:r.external_config_url,file_picker_use_project_as_parent:!0,file_picker:!0,file_picker_no_proxy:!0,show_if:"enabled==1",validate:function(e,t,n,r,i,a){var o;if("1"===a.enabled)return n?(o=s.getAbsoluteUrl(n),crsaIsFileExist(crsaMakeFileFromUrl(o))?void 0:"The file does not exist."):"Tailwind CSS config file is required."},helptext:`<p>Select the file that contains Tailwind CSS configuration. This file is usually named <code>tailwind.config.js</code>.</p>`},t.external_source_url={name:"Source CSS file",type:"text",value:r.external_source_url,file_picker_use_project_as_parent:!0,file_picker:!0,file_picker_no_proxy:!0,show_if:"enabled==1",validate:function(e,t,n,r,i,a){var o;if("1"===a.enabled)return n?(o=s.getAbsoluteUrl(n),crsaIsFileExist(crsaMakeFileFromUrl(o))?void 0:"The file does not exist."):"Source CSS file is required."},helptext:`<p>Select the source css file of your external build process. That is usually the css file that contains statements:</p>
<pre>
@tailwind base;
@tailwind components;
@tailwind utilities;
</pre>`},pinegrow.showQuickDialog("Tailwind CSS External Build Configuration",`Options`,`<p>Provide information about files that contain Tailwind configuration to customize controls with your custom colors, spacings and other properties.</p>`,t,"Cancel","Save",function(){i&&i(null,!1)},function(e){var t,n=r.external_config_url!==e.external_config_url||r.external_source_url!==e.external_source_url||e.enabled!==a;r.external_config_url=e.external_config_url,r.external_source_url=e.external_source_url,n&&((t=pinegrow.getCurrentProject().getProjectInfo()).setSetting("tw-external-config",r),t.save(),e.enabled!==a&&l.framework.twSetUsingExternalBuild("1"===e.enabled),"1"===e.enabled)&&c.requestUpdateFromJIT(),i&&i(r,n)})},this.getExternalConfigSettings=function(e,t){t=t||{};var n=pinegrow.getCurrentProject();let r;var i;return pgDmStore.isDesignEnabled(PgDmDesignProviderForTailwind)?(i=pgDmStore.getActiveDesignProvider(),r=i.settings,t.source="dp",i.useExternalBuild()||(r=null)):(i=n.getProjectInfo(),r=i.getSetting("tw-external-config",{}),t.source="project"),r&&r?.external_config_url&&r?.external_source_url||e?r:null},this.requestUpdateFromJIT=async function(){const e=pinegrow.getCurrentProject();if(e){const r=this.getExternalConfigSettings();var t,n;r&&(t=e.getAbsolutePath(r.external_config_url),n=e.getAbsolutePath(r.external_source_url),(o={})[crsaMakeUrlFromFile(t)]=!0,o[crsaMakeUrlFromFile(n)]=!0,pinegrow.showQuickMessage("Fetching custom Tailwind configuration..."),pgAdaptor.requestTailwindExternalConfig(e.getDir(),t,n))}},this.updateFromJIT=function(e){var t=this;e&&(e=e,pgIsDev()&&console.log("Got Tailwind CSS data from the external build process.",e),d(e.classListRaw,e.config,e.variants),t.has_data()?(t.tailwindIsBeingUpdating(),i.reregister(e.classList,e.variants),s=t.getCustomUnusedClasses(),pinegrow.dispatchEvent("on_page_frameworks_changed",null),pinegrow.refreshCurrentProjectDelayed(!0),pinegrow.showQuickMessage("Tailwind visual controls updated!")):pinegrow.showQuickError("Could not get the information about the Tailwind CSS theme from the external build process."))},{}),F={},d=function(e,t,n){var r,i=new CrsaProfile,a=(v=!1,w={},_=[],b={},y={},C={},x={},S=["all"],k=[],T={all:{name:"ALL",name_short:"ALL",w:0,size:"all",slug:""}},z={},F={},E={},0);try{$.each(t.theme.screens,function(e,t){var n=parseInt(t.replace("px",""));S.push(e),T[e]={name:e.toUpperCase(),name_short:e.toUpperCase(),w:600,size:e,slug:"-"+e},T[e].w=n,T[e].name+=`<span style="opacity:0.7;"> / ${n}px and up</span>`}),(k=n.filter(function(e){return!T[e]})).sort();var o=["opacity"],s=["white","black","current","transparent"],l=function(e){var n="";return $.each(e,function(e,t){n+="object"==typeof t?e+": "+l(t)+";":e+": "+t+";"}),n};(r=e)&&$.each(r,function(e,t){var n,r,i=t;e in w||(w[e]=!0,"string"==typeof(i=t)?(0<=(n=i.indexOf("{"))&&(i=i.substr(n)),_.push({class:e,props:i})):(r="{",$.each(Object.values(i)[0],function(e,t){switch(r+=e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()+":",typeof t){case"string":r+=t+";";break;case"object":r+=l(t)}}),r+="}",_.push({class:e,props:r})),F[e]=!0)}),P=[];for(var c,d,u,p,f=0;f<S.length;f++)f<S.length-1?T[S[f]].w_range=[T[S[f]].w,T[S[f+1]].w-1]:T[S[f]].w_range=[T[S[f]].w,9999],g.length>f?T[S[f]].icon=g[f]:T[S[f]].icon="icon-Lg",P.push(T[S[f]]);_.forEach(function(e){var t,n,r,i=e.class;i.startsWith("text-")&&(t=e.props.match(/\Wcolor:([^;\}]+)/m))&&(t=t[1].trim(),n=null,r="noshade",(i=i.split("-")).shift(),1<i.length&&(r=i.pop()),n=i.join("-"),0<=s.indexOf(n)&&"noshade"===r||o.indexOf(n)<0&&(t=t.replace("var(--text-opacity)","1").replace("var(--tw-text-opacity)","1"),b[n]||(b[n]={},a++),b[n][r]=t))}),20<_.length&&1<a&&(v=!0,m=!1),i.show("TW GET CLASSES"),pgIsDev()&&0&&(c=_.map(function(e){return{class:e["class"],props:e.props.replace("{","").replace("}","").split(";").map(function(e){return e.trim().replace(/ /g,"")}).filter(function(e){return!!e})}}),d={},u=[],c.forEach(function(e){1===e.props.length?d[e.props[0]]||(d[e.props[0]]=e.class):u.push(e)}),p={prop_to_class:d,screens:t.theme.screens},require("fs").writeFileSync("/Users/Matjaz/Dropbox/Development/DVWeb/DV/Pinegrow/PinegrowCodeDevTools/frameworks/tailwindcss/resources/tailwind.info.json",JSON.stringify(p)),console.log(p))}catch(e){}};this.getCustomUnusedProps=function(){return s},this.getScreens=function(){return S},this.getPseudoStates=function(){return k},this.getScreenSizeDefs=function(){return P},this.getClasses=function(e,t,n,r,i){0===_.length&&pgIsDev()&&console.error("TW Customizer: getClasses called on empty list",e,t,n,r,g);var a=/\-[0-9]+$/;if(i){Array.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++)"string"==typeof i[o]&&(i[o]+=":")}for(var s=e,l=(n&&(s=n+":"+s),t&&(s=t+":"+s),[]),o=0;o<_.length;o++){var c,d=!1,u=_[o].class;if(s?u.startsWith(s)&&(d=!0):"all"==(c=h(u,S)).size&&""==c.state&&(d=!0),d&&(!r||u.match(a))){if(i){for(var p=!1,f=0;f<i.length;f++){var g=i[f];if("string"==typeof g){if(_[o].props.indexOf(g)<0){p=!0;break}}else if(!_[o].props.match(g)){p=!0;break}}if(p)continue}l.push(_[o].class)}}return l},this.getColorsForColorPicker=function(i){var t;return y[i]||(t=[[{key:i+"current",name:"current",color:e("current")},{key:i+"transparent",name:"transparent",color:e("transparent")},{key:i+"black",name:"black",color:e("black")},{key:i+"white",name:"white",color:e("white")},{key:i+"inherit",name:"inherit",color:e("inherit")}]],$.each(b,function(n,e){var r=[];$.each(e,function(e,t){r.push({key:i+n+("noshade"===e?"":"-"+e),name:"noshade"===e?n:n+"-"+e,color:t})}),t.push(r)}),y[i]=t),y[i]},this.getColorOptions=function(e){var t;return C[e]||(t=[],n(e).forEach(function(e){e.forEach(function(e){t.push(e)})}),C[e]=t),C[e]},this.getOptions=function(t,e,n,r,i,a){var o="";if(a=a||t,e)if(Array.isArray(e))for(var s=0;s<e.length;s++)o+="_"+e[s];else o=e;var l,c=t+o;return x[c]||(l=[],r&&this.getClasses("-"+a,null,null,null,n||e).reverse().forEach(function(e){l.push({key:e,name:e.replace(t,"")})}),this.getClasses(a,null,null,null,n||e).forEach(function(e){l.push({key:e,name:e.replace(t,"")})}),i&&i(l),a!==t&&l.forEach(function(e){e.key=e.key.replace(a,t)}),x[c]=l),i&&!z[c]&&(i(x[c]),z[c]=!0),x[c].forEach(function(e){e.key in E||(E[e.key]=!0,delete F[e.key])}),x[c]},this.getCustomUnusedClasses=function(){var a=new RegExp(`^(.+)(${this.getColorOptions("").map(function(e){return pgParserEscapeRegExp(e.key)}).join("|")})$`,""),o=/^(.+?)([0-9\.\/\%]+|px|auto|full|first|last|none|[0-9]?xs|sm|md|lg|[0-9]?xl)$/,s=(Object.keys(r()).forEach(function(e){delete F[e]}),{noprop:{values:[]}});Object.keys(F).forEach(function(e){var t="noprop",n=e,r=!1,i=e.match(a),i=(i?(t=i[1],n=i[2],r=!0):(i=e.match(o))?(t=i[1],n=i[2],"-"===t.charAt(0)&&(t=t.substr(1),n="-"+n)):s[e]&&(n="normal",t=e),t);r&&(i+="_color"),s[i]||(s[i]={field_key:i,name:t.replace(/-$/,"")+(r?" color":""),values:[],type:"select"}),s[i].values.push({key:e,name:n}),0&&(s[i]||(s[i]={field_key:t,name:t.replace(/-$/,"")+(r?" color":""),values:r?c.getColorsForColorPicker(t):[],colors:r,type:r?"color":"select"}),r||s[i].values.push({key:e,name:n}))}),s["noprop"].values.forEach(function(e){s[e.key]?s[e.key].values.push(e.values):s[e.key]={name:e.key,field_key:e.key,values:[e],type:"select"}}),delete s["noprop"];{var t=s,e=Object.keys(t).sort();const n={};return e.forEach(e=>{n[e]=t[e]}),n}}};class PgTailwindFieldExtension extends PgFieldExtension{constructor(e,t,n,r){super(),this.twf=pinegrow.findFrameworkByKey("tw"),this.fn=e,this.fdef=t,this.$container=n,this.$input=r,this.info={important:!1};var i=this;this.$container.on("contextmenu",function(e){return e.preventDefault(),i.showMenu(),!1}),t.on_get_value_from_field=this.onGetValue.bind(this),t.on_set_field_value=this.onSetValue.bind(this),this.$element=$(pgE("div",{class:"pg-css-field-pill"})),this.$container.get(0).appendChild(this.$element.get(0)),n.addClass("pg-field-with-css-ext"),n.closest(".crsa-field").addClass("pg-field-with-css-ext-on-crsa-field"),this.$element.on("click",function(e){return e.preventDefault(),i.showMenu(),!1}),this.$input.on("blur",this.onBlur.bind(this)),this.updatePill()}onBlur(e){}onGetValue(e,t,n){return e=e&&this.info.important?"!"+e:e}onSetValue(e,t){return t[this.fn+".class_setter_info"]?this.info=t[this.fn+".class_setter_info"]:this.info={},this.updatePill(),e}destroy(){}updatePill(){var e=this.$element.get(0);this.info.important,e.innerHTML="!",e.setAttribute("data-important",this.info.important?"true":"false")}showMenu(){const t=this;var e=[];pinegrow.selectedElements.getLastSelected(),pinegrow.getSelectedPage();e.push({label:"!important",action:function(){var e=t.$input.val(),e=pgParseCSSValue(e);e.important&&(t.info.important=!0),t.info.important=e.important=!t.info.important,t.updatePill(),t.$input.val(e.original_without_important),t.$input.change()},check:t.info.important}),new CrsaContextMenu(e,this.$element||this.$container).showForElement(this.$element||this.$container)}}