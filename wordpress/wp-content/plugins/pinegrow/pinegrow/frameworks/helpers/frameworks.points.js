var PgMenuPointColumnSize=function(t,i,e,o,n){PgElementPageViewMenuPoint.call(this,t,i),this.options=n.options,this.gh=n,this.value=4,this.prevClass=null,this.unitSize=30,this.placement=t,this.menu=i,this.editSize=e||this.options.size_for_all,this.colSize=0,this.forceSize=e,this.autoColPoint=o,this.hidePointInDrag=null,this.factor="right"==t?1:-1,this.tooltip=!0,this.update()};extendObject(PgMenuPointColumnSize,PgElementPageViewMenuPoint),PgMenuPointColumnSize.prototype.getUnitSize=function(){var t=this.menu.$el.parent().innerWidth();return this.snapX=Math.max(10,t/this.options.num_columns*this.menu.pageView.zoom)},PgMenuPointColumnSize.prototype.getColSize=function(){return Math.max(1,Math.min(this.options.num_columns,Math.round(this.menu.$el.width()/this.unitSize)))},PgMenuPointColumnSize.prototype.update=function(){for(var t=this.options.sizes,i=(this.unitSize=this.getUnitSize(),this.colSize=this.getColSize(),this.editSize=this.forceSize||this.options.size_for_all,this.gh.getColumnSizes(this.menu.pgel)),e=0;e<t.length&&this.gh.isSizeVisible(this.menu.pageView,t[e]);e++)this.forceSize&&t[e]!=this.forceSize||t[e]in i&&(this.editSize=t[e],this.colSize=i[t[e]],this.prevClass=this.gh.getClassForSize(this.editSize,this.options.col_prefix_class,this.colSize),""!=this.colSize&&"auto"!=this.colSize||(this.colSize=Math.round(this.menu.$el.width()/this.unitSize)),this.colSize=parseInt(this.colSize));var o=this.editSize.toUpperCase();this.editSize in i?(this.setIsNotSet(!1),this.setText(this.editSize+this.gh.getColumnSizeAsShortString(i[this.editSize]," ")),this.setTooltipText("Drag the handle to resize the column for "+o+" and larger devices. Click to open the column size control.")):(this.setIsNotSet(!0),this.setText(this.editSize),this.setTooltipText("Column size for "+o+" is not set. Drag the handle to set it. Click to open the column size control.")),this.autoColPoint&&(this.autoColPoint.editSize!=this.editSize&&(this.autoColPoint.editSize!=this.options.size_for_all||this.options.size_for_all in i)?this.autoColPoint.show():this.autoColPoint.hide())},PgMenuPointColumnSize.prototype.add=function(t,i){PgElementPageViewMenuPoint.prototype.add.call(this,t,i),this.update()},PgMenuPointColumnSize.prototype.onReposition=function(){this.in_drag||this.update()},PgMenuPointColumnSize.prototype.onDragStart=function(t,i){this.setLabel(this.colSize),this.setText(this.editSize),this.hidePointInDrag&&this.hidePointInDrag.hide()},PgMenuPointColumnSize.prototype.onDrag=function(t,i){var e=this,o=Math.min(this.options.num_columns,Math.max(1,Math.round(e.colSize+e.factor*t/e.unitSize))),n=this.gh.getClassForSize(e.editSize,this.options.col_prefix_class,o);return pinegrow.getCollectionForElement(this.menu.pgel).forEachElement(function(t,i){n!=e.prevClass&&(t.removeClass(e.prevClass),t.addClass(n),e.prevClass=n,e.menu.reposition(),e.autoColPoint&&e.autoColPoint.editSize==e.editSize&&e.autoColPoint.hide(),0==i)&&e.setLabel(o)}),{x:(o-this.colSize)*this.unitSize,y:i}},PgMenuPointColumnSize.prototype.onClick=function(){this.gh.options.onClickOnColumnPoint.call(this)},PgMenuPointColumnSize.prototype.onDragStop=function(t,i){this.setLabel(),pinegrow.changeManager.didChange(pinegrow.getCollectionForElement(this.menu.pgel),"Change column size"),pinegrow.selectedElements.reselect()};