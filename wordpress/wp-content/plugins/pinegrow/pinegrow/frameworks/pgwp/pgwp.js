var libs={path:require("path"),fs:require("fs")},PgWpLoops=function(){this.ids=[],this.list=[],this.getNextId=function(){return void 0===this.ids[this.ids.length-1]?1:(this.ids.sort(function(e,t){return e-t}),this.ids[this.ids.length-1]+1)}},PgWpFilters=function(){this.list=[];function r(e,a){return e.walk(function(e){for(var t=0;t<o.list.length;t++)o.list[t](e,a);return!0}),e}var o=this;this.populate=function(e,t,a){var o;return e instanceof Array?(o="",e.forEach(function(e){e.setAttr("wp-loop-child",a),o+=r(e,t).toStringOriginal()}),o):(e.setAttr("wp-loop-child",a),r(e,t))}},PgWpData=function(){this.posts=[],this.getPost=function(e){for(var t=0;t<this.posts.length;t++)if(this.posts[t].id==e)return this.posts[t];return[]},this.getPosts=function(){return this.posts}},PgWpPhpFilter=function(w){this.list=[],this.changes=[],this.changes_end=[],this.changes_super_end=[],this.thePost=!0;function b(e){var t,a=null;for(t in e.sections)if(e.sections.hasOwnProperty(t)&&(e.sections[t].parameters||"parameters"==t)){a=e.sections[t];break}return a}function f(e){return";"==e.charAt(e.length-1)?e.substr(0,e.length-1):e}function y(e,t){var a=!1,o=[];e.walk(function(e){return!e.isElement||!e.findAttributesStartingWith("cms-block").length||(a=e,o=w.getActionTypes(e),!1)}),a&&o.length&&w.addExportError(e,"<b>Warning:</b> Some actions in "+w.current_exported_page_name+" will be ignored.",`Action${1<o.length?"s":""} <b>${o.map(function(e){return e.name}).join(", ")}</b> on <b>${a.getName()} element</b> will be ignored because the content of the <b>${e.getName()} element</b> will be replaced by the <b>${t.name} action</b>.`)}var t="<?php",a="?>",o=new Map;this.resetAfterMap=function(){o=new Map},this.before=function(e,t){(t="string"==typeof t?pgCreate(t):t).indent_text=!0,t.insertBefore(e)},this.after=function(e,t){var a=o.get(e)||e;(t="string"==typeof t?pgCreate(t):t).indent_text=!0,t.insertAfter(a),o.set(e,t)},this.getParams=function(e,o,t,r){if(void 0===t&&(t=!1),!e.hasOwnProperty("sections"))return"";var a,n,i,s=[];if(!(e=b(e)))return"";for(a in e["fields"])!e["fields"][a].hasOwnProperty("parameter_order")||e["fields"][a].hasOwnProperty("ignore_parameter")||(n=parseInt(e["fields"][a]["parameter_order"]),isNaN(n)&&(n=0),i=e["fields"][a].hasOwnProperty("getAttrValue")?e["fields"][a]["getAttrValue"]:function(e){return e},s.push([e["fields"][a]["attribute"],n,i,e["fields"][a]]));s.sort(function(e,t){return e[1]===t[1]?0:e[1]<t[1]?-1:1});var l,p,c="";return t?(c='"',s.forEach(function(e){null!==e[2](o.getAttr(e[0]))&&(c+=e[0].slice(3)+"="+w.quoteParam(e[2](o.getAttr(e[0])),e[3])+"&")}),c=c.replace(/\&$/,""),c+='"'):(l=[],p=0,s.forEach(function(e){var t=!1,a=e[2](o.getAttr(e[0]),o,e[0]);null==(a=r?r(e[0],a,o,e[3]):a)&&(e[3].default_value?(a=e[3].default_value,t=!0):e[3].value&&(a=e[3].value)),null==a||""==a?(l.push("null"),t=!0):(a=w.evaluateBlockAttrsInParam(a),l.push(w.quoteParam(a,e[3]))),t||(p=l.length)}),p<l.length&&l.splice(p,l.length-p),c=l.join(", ")),c=c.length?" "+c+" ":c},this.getNamedParams=function(e,t,a,o,r,n,i){o=o||"parameter_name",r=r||0;var s=[],l=pinegrow.getFormatHtmlOptions(),p=1+r,c=(p<0&&(p=0),pinegrow.getHtmlIndentForLevel(p,l)),u=pinegrow.getHtmlIndentForLevel(p-1,l);pinegrow.getHtmlIndentForLevel(p-2,l);if(!e.hasOwnProperty("sections"))return"";e=b(e);var m,d,h,g={};for(m in e["fields"])e["fields"][m][o]&&(d=e["fields"][m][o],h=t.getAttr(e["fields"][m]["attribute"]),e["fields"][m].hasOwnProperty("getAttrValue")&&(h=e["fields"][m]["getAttrValue"](h,t,m,e["fields"][m])),null===(h=a?a(t,d,h):h)&&(h=""),(h=!(h=w.evaluateBlockAttrsInParam(h)).length&&e["fields"][m].default_value&&"checkbox"!=e["fields"][m].type?e["fields"][m].default_value:h).length||e["fields"][m].parameter_pass_empty)&&(h=e["fields"][m].string_or_array?w.stringOrArray(h,e["fields"][m]):w.quoteParam(h,e["fields"][m],!1,t),s.push({name:d,value:h,def:e["fields"][m]}),g[d]=!0);var _,f="";return n&&$.each(n,function(e,t){g[e]||("string"==typeof t&&t.startsWith("<?=")?(t=t.replace("<?=","").replace("?>",""),s.push({name:e,value:t})):(t=w.evaluateBlockAttrsInParam(t),s.push({name:e,value:w.quoteParam(t,null,i)})))}),0==s.length?"array()":(f="array(\n",_=0,s.forEach(function(e){var t=_==s.length-1;_++,f+=c+"'"+e.name+"' => "+e.value+(t?"":",")+"\n"}),f+=u+")")},this.getPhpArrayForValues=function(o,e,t,r,n){t=t||0;var i,a=pinegrow.getFormatHtmlOptions(),s=1+t,l=(s<0&&(s=0),pinegrow.getHtmlIndentForLevel(s,a)),p=pinegrow.getHtmlIndentForLevel(s-1,a),c=(pinegrow.getHtmlIndentForLevel(s-2,a),""),u=Object.keys(o);return 0===u.length?"array()":(c="array(\n",i=0,u.forEach(function(e){var t=i===u.length-1,a=(i++,o[e]),a=w.evaluateBlockAttrsInParam(a);c+=l+"'"+e+"' => "+w.quoteParam(a,n&&n[e]||null,r)+(t?"":",")+"\n"}),c+=p+")")},this.php=function(e){return t+" "+e+" "+a},this.toPhpNode=function(t,e,a){try{var o=pgCreateNodeFromHtml(this.php(e));o.indent_text=!0,this.addToChanges(function(e,t,a){e.replaceWith(a,e.wp_detach_on_remove||!1)},this,[t,e,o],a)}catch(e){w.addExportError(t,"Could not create a PHP statement.",e,w.current_exported_page_name)}},this.toPhpHtml=function(t,e){try{var a=pgCreateNodeFromHtml(this.php(e));a.indent_text=!0,"style"!=t.tagName&&"script"!=t.tagName||(t.content=""),t.replaceContentWithElement(a)}catch(e){w.addExportError(t,"Could not create a PHP statement.",e,w.current_exported_page_name)}},this.getSetValue=function(e,t){var a=t.attribute+"-set",a=e.getAttr(a),o=(t.sections.parameters||t.sections[t.type+"_parameters"]).fields[t.attribute+"-set"]||null;return a=(a=!a&&o&&o.default_value?o.default_value:a)||"element"},this.getSetAttrValue=function(e,t,a){var o=t.attribute+"-set-attr";return e.getAttr(o)||a};this.toPhpHtmlOrNode=function(t,e,a,o){var r=this.getSetValue(t,a);try{switch(r){case"content":if(y(t,a),"svg"===t.tagName){var n=new PgReact;const _=["class","style","id","title"];var i=n.pgelAttributesToObject(t,function(e){return!!(0<=_.indexOf(e)||e.startsWith("data-")||e.startsWith("aria-"))});(e=e.endsWith(";")?e.substr(0,e.length-1):e).startsWith("echo ")&&(e=e.replace("echo ","")),e=`echo ${w.wpGetClass("PG_Blocks")}::mergeInlineSVGAttributes( ${e}, ${n.attributesObjectToPHPArrayString(i)} );`,this.toPhpNode(t,e)}else this.toPhpHtml(t,e);return!1;case"content-not-empty":return e=e.replace("echo ",""),a.return_string_code&&(e="function"==typeof a.return_string_code?a.return_string_code(t,e,a):a.return_string_code),e=f(e),t.removeAttrIfStartsWith("wp-"),e="\nif ( $tag_content = "+e+" ) : \n    printf( '"+t.getOpeningTag()+"%s"+t.getClosingTag()+"', $tag_content );\nendif;\n",this.toPhpNode(t,e),!0;case"href":return 0==(e=f(e)).indexOf("echo ")&&(e=e.replace("echo ","")),t.setAttr("href","<?php echo esc_url( "+e+" ); ?>"),!1;case"attr":var s,l=t.getAttr(a.attribute+"-set-attr"),p=t.getAttr(a.attribute+"-set-attr-append");"false"===p&&(p=!1),l&&(s="",p&&(s=t.getAttr(l)||"","nospace"!==p)&&s.length&&(s+=" "),t.hasAttr(a.attribute+"-set-get-image")&&(u=t.getAttr(a.attribute+"-set-get-image-size")||"large",e=`echo PG_Image::getUrl( ${e=e.replace("echo ","").replace(";","")}, '${u}' )`),s+="<?php "+e+" ?>",t.setAttr(l,s));break;case"add-class":var c=(c=t.getAttr("class"))?c+" <?php "+e+" ?>":"<?php "+e+" ?>";t.setAttr("class",c);break;case"style":var u,m,d,h,g=t.getAttr(a.attribute+"-set-style");g&&((d=t.getAttr("style")||"").length&&!d.endsWith(";")&&(d+=";"),t.hasAttr(a.attribute+"-set-get-image")&&(u=t.getAttr(a.attribute+"-set-get-image-size")||"large",e=`echo 'url('.PG_Image::getUrl( ${e=e.replace("echo ","").replace(";","")}, '${u}' ).')'`),m=t.hasAttr(a.attribute+"-set-style-important"),d=d+g+":<?php "+e+" ?>",m&&(d+=" !important"),d+=";",h=!1,e.match(/\Wurl\(/g)||"background-image"==g&&(h=!0),t.setInlineStylePropertyValue(g,`<?php ${e} ?>`,h,m,!0));break;case"before":this.addToChanges(function(){pgCreate(`<?php ${e} ?>`).insertBefore(t)},this,[]);break;case"after":this.addToChanges(function(){pgCreate(`<?php ${e} ?>`).insertAfter(t)},this,[]);break;default:return y(t,a),o&&(t.wp_detach_on_remove=!0),this.toPhpNode(t,e),!0}}catch(e){w.addExportError(t,"Could not create a PHP statement.",e,w.current_exported_page_name)}},this.wrapFunction=function(e,t,a){return function(){e.apply(t,a)}},this.addToChanges=function(e,t,a,o){var r;switch(o){case"end":r=this.changes_end;break;case"super_end":r=this.changes_super_end;break;default:r=this.changes}r.push(this.wrapFunction(e,t,a))},this.doubleBraces=function(e){return e.replace(/{{(.*?)}}/gi,t+"echo $1; "+a)},this.removeNullArgs=function(e){function t(e,t){return-1!==e.indexOf(t,e.length-t.length)}for(;t(e,", null");)e=e.slice(0,-6);return e=t(e,"null")?e.slice(0,-4):e},this.addThePostIfNeeded=function(){return!0===this.thePost?(this.thePost=!1,["the_post();"]):[]},this.resetFilters=function(){this.thePost=!0},this.writePhpCode=function(e,t){var a="<?php ";t.forEach(function(e){a+=e+" "}),a+="?>",e.replaceWith(pgCreateNodeFromHtml(a))}},pgWordPressUtilsInit=("function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return this.slice(0,e.length)==e}),function(D){D.getStyleHeader=function(e,t){t=t||D.current_theme_info;var a={"Theme Name":"A WordPress Theme Built With Pinegrow","Theme URI":"http://example.com",Author:"Your name","Author URI":"http://pinegrow.com/",Description:"This theme was created with "+pgf.product_name,Version:D.getThemeInfoProjectVersion(t),License:"GNU General Public License v2 or later","License URI":"http://www.gnu.org/licenses/gpl-2.0.html","Text Domain":t.slug},o=($.each(e,function(e,t){a[e]=t}),"/*");return $.each(a,function(e,t){o+="\n"+e+": "+t}),o+="\n*/"},D.hasStyleHeader=function(e){try{return new PGWPHeaderParser(e).hasHeader()}catch(e){return!1}},D.wpGetThemeHeaderValue=function(e,t){try{return new PGWPHeaderParser(e).getValue(t)}catch(e){return null}},D.wpSetThemeHeaderValue=function(e,t,a){try{var o=new PGWPHeaderParser(e);return o.setValue(t,a),o.getContent()}catch(e){D.addExportError(null,`Unable to set <code>${t}</code> to <code>${a}</code>`,`The field is not present in <code>style.css</code> or in the plugin header. Add the field and re-run the export.`)}return e};function G(e){var t={},a=r[e]||null,o=(a&&(t.skip_parse_if_html_equal=a.html),pinegrow.getSourceNodeOfUrl(e,!0,null,t));return a&&t.parse_skipped?a.node.clone(!1):(!t.page&&t.html&&(r[e]={node:o.clone(!1),html:t.html}),o)}$("body").on("crsa-page-closed",function(e,t){0});var r={},k=(D.wpClearUrlCache=function(){r={}},D.filterClasses=function(e){if(!e||!e.length)return e;for(var t=e.split(" "),a=[],o=0;o<t.length;o++)["pg-empty-placeholder"].indexOf(t[o])<0&&a.push(t[o]);return a.join(" ")},D.getMasterSourceNode=function(e,t){var a=pinegrow.getCurrentProject();if(a){var o=a.getFilesWithName(t);if(o.length){for(var r=null,n=0;n<o.length;n++){(s=G(o[n].url)).wp_node_url=o[n].url,r=r||s;var i=s.findOne("html");if(i&&(i.hasAttr("wp-site")&&i.hasAttr("wp-site-is-master-page")||i.hasAttr("wp-template-is-master-page")))return s}return r}return null}var s,a=crsaCombineUrlWith(e,t);return(s=G(a))&&(s.wp_node_url=a),s},D.findContentEnd=function(e){if(e&&e.hasAttr("wp-site-content-begin")){var t=e;do{if(t.hasAttr("wp-site-content")&&t.hasAttr("wp-site-content-end"))return t}while(t=t.next())}return null},D.findContentBegin=function(e){if(e&&e.hasAttr("wp-site-content-end")){var t=e;do{if(t.hasAttr("wp-site-content")&&t.hasAttr("wp-site-content-begin"))return t}while(t=t.prev())}return null},D.findContentArea=function(e){var t=e instanceof CrsaPage?e.sourceNode:e,a={auto:!1},o=t.findOne("[wp-site-content]"),t=(o||(o=t.findOne("body"),a.auto=!0),D.findContentEnd(o));if(t)a.just_content=!1,a.begin=o,a.end=t;else{if("body"==o.tagName){var t=o.getChildAtPos(0,!0),r=o.findLastNonScriptChild();if(t&&r)return a.just_content=!1,a.begin=t,a.end=r,a}a.just_content=!0,a.begin=o,a.end=null}return a},D.validateContentArea=function(e,t,a){var o,r={auto:!1,ok:!1,range:!1,error:"",name:t},n=e.find("[wp-site-content]");return 0==(r.list=n).length?(r.auto=!0,r.ok=!0,a&&!a.auto&&r.auto&&(r.ok=!1,r.error=`The master page has the site content area explicitly defined with the Site Content action. The child page <code>${t}</code> uses the automatic site content where the Body element is considered to be the site content. Applying the master page could lead to losing the information on the child page.<p>To fix this, use the Site Content action to mark the content area on the child page <code>${t}</code>.</p>`)):(o=function(e,t){return`The Content area is defined as a range with ${e} content, but the Site Content action with the ${t} content is missing. Both actions should be on the same tree level, within the same parent element.`},1==n.length?n[0].hasAttr("wp-site-content-begin")&&!n[0].hasAttr("wp-site-content-end")?r.error=o("Begin","End"):n[0].hasAttr("wp-site-content-end")&&!n[0].hasAttr("wp-site-content-begin")?r.error=o("End","Begin"):(n[0].hasAttr("wp-site-content-begin")&&n[0].hasAttr("wp-site-content-end")&&(r.range=!0),r.ok=!0):1<n.length?(r.error=`<p>The page has too many Site Content actions. There should be only one or two:</p><ul>
<li>Use a single Site Content action to define <b>the whole inner part</b> (without its opening and closing tags) of the element as the Content area. Bothe Begin and End content should not be checked.</li>
<li>Use a single Site Content action with both Begin and End content checked to have <b>the whole element</b>, including its opening and closing tags, as the Content area.</li>
<li>Use two Site Content actions to make <b>a range of elements</b> the Content area. The first action should have Begin content checked and the last End content. Both elements must be on the same level (have the same parent).</li></ul>`,r.error=`<p>The page has too many Site Content actions. There should be only one Site Content action on the page.</p>`):r.error="Unknown error, it should not happen."),r},D.showContentAreaError=function(t,e){PgQuickDialog("Invalid Site Content area in "+t.name,function(e){return(msg=t.error).startsWith("<")||(msg="<p>"+msg+"</p>"),t.list.length&&(msg+=`<p>Elements with the Site Content action:</p><ul>`,t.list.forEach(function(e){msg+=`<li><a href="#" data-pg-id="${e.getId()}">${e.getName()}</a></li>`}),msg+="</ul>"),e.on("click","[data-pg-id]",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).attr("data-pg-id"),t=getPgNodeByPgId(t);t&&pinegrow.selectElement(t)}),msg},{width:480,target:e})},D.wpGetAttributesFromImageTemplate=function(e){var t={},a=/^(width|height|srcset|src|alt|data-pg-|data-pgc-|wp-|cms-|wc-)/i;return e.getAttrList().forEach(function(e){e.name.match(a)||(t[e.name]=e.value)}),t},D.wpGetAttributesFromElement=function(e){var t={},a=/^(data-pg-|data-pgc-|wp-|cms-|wc-)/i;return e.getAttrList().forEach(function(e){e.name.match(a)||(t[e.name]=e.value)}),t},D.wpAddRemoveSizeAttributesCodeToImage=function(e,t,a){var o=null;return"img"===e.tagName&&(e.hasAttr("width")||e.hasAttr("height")?e.hasAttr("width")?e.hasAttr("height")||(o="height"):o="width":o="both",o)&&(t=`PG_Image::removeSizeAttributes( ${t}, '${o}' )`),a?o:t},D.wpGetCodeForShowingImage=function(e,t,a,o,r){var n=null,n=D.wpGetAttributesFromImageTemplate(e),n=(o&&(n.sizes=D.quoteParam(o,null,!0)),`wp_get_attachment_image( ${D.quoteParam(t)}, ${D.quoteParam(a)}, false, ${D.phpFilter.getPhpArrayForValues(n,e,r,!0)})`);return D.wpAddRemoveSizeAttributesCodeToImage(e,n)},D.wpGetPgelFromSelector=function(e,t,a){return t?"this"===t?e:e.findOne(t)||a:a},D.wpGetSelectorOptions=function(n,i,s,e){i=$.extend({max_depth:999},i||{});var l=[{key:null,label:"Not set",action:s,check:null===e||""===e},{type:"divider"}],p=null;return e&&(p=D.wpGetPgelFromSelector(n,e)),n.walkSelfAndChildren(function(e,t){var a,o,r;return!(t>i.max_depth||i.must_contain_or_be&&!e.isSelector(i.must_contain_or_be)&&!e.findOne(i.must_contain_or_be))&&(!e.isElement||!(!i.filter||i.filter(e))||(e.getPlainTextName({short:!1}),a=e.getName({short:!1}),(o=e.getAttr("data-pg-name"))&&(a=o+" | "+a),o=null,e===n?o="this":(r=e.getUniqueSelectors(0,9999,n,!0)).length&&(o=r[0]),l.push({key:o,label:e===n?"current element":`<span style="width:${15*t}px;display:inline-block;"></span>`+a,action:s,check:p===e}),"svg"!==e.tagName)||"skip_children")}),l},D.wpInsight=new function(){function t(e,t){t&&a[e].indexOf(t)<0&&(a[e].push(t),a[e].sort())}function r(e){return e.map(function(e){return{key:e,name:e}})}var a=null,n=this,o=(this.reset=function(){a={menus:[],taxonomies:[],customizer_sections:[],customizer_controls:[],post_types:[],template_parts:[],sidebars:[],master_pages:[],image_sizes:[],custom_funcs:[],block_categories:[]},o()},function(){var e=["post_tag","category"];e.forEach(function(e){n.addTaxonomy(e)}),(e=["post","page","attachment"]).forEach(function(e){n.addPostType(e)}),(e=["primary","social"]).forEach(function(e){n.addMenu(e)}),(e=["thumbnail","post-thumbnail","medium","medium_large","large","full"]).forEach(function(e){n.addImageSize(e)})});this.addMenu=function(e){t("menus",e)},this.addTaxonomy=function(e){t("taxonomies",e)},this.addCustomizerSection=function(e){t("customizer_sections",e)},this.addCustomizerControl=function(e){t("customizer_controls",e)},this.addPostType=function(e){t("post_types",e)},this.addTemplatePart=function(e){t("template_parts",e)},this.addSidebar=function(e){t("sidebars",e)},this.addMasterPage=function(e){t("master_pages",e)},this.addImageSize=function(e){t("image_sizes",e)},this.addCustomFunction=function(e){t("custom_funcs",e)},this.addBlockCategory=function(e){t("block_categories",e)},this.getMenus=function(){return r(a.menus)},this.getTaxonomies=function(){var e=r(a.taxonomies);return pinegrow.dispatchEvent("on_wp_get_taxonomies_options",null,e),e},this.getCustomizerSections=function(){return r(a.customizer_sections)},this.getCustomizerControls=function(){return r(a.customizer_controls)},this.getPostTypes=function(){var e=r(a.post_types);return pinegrow.dispatchEvent("on_wp_get_post_types_options",null,e),e},this.getPostTypesForQuery=function(){var e=r(a.post_types.concat(["any"]));return pinegrow.dispatchEvent("on_wp_get_post_types_options",null,e),e},this.getTemplateParts=function(){return r(a.template_parts)},this.getSidebars=function(){return r(a.sidebars)},this.getMasterPages=function(){var e=a.master_pages.slice(0),t=D.getThemeInfo(null,!0);return t&&t.master&&e.indexOf(t.master)<0&&e.unshift(t.master),r(e)},this.getImageSizes=function(){var e=r(a.image_sizes);return pinegrow.dispatchEvent("on_wp_get_image_sizes_options",null,e),e},this.getCustomFunctions=function(){return r(a.custom_funcs)},this.getBlockCategories=function(){return r(a.block_categories)},this.getQueryName=function(e){var t=null;if(e.hasAttr("wp-loop"))t=e.getAttr("wp-loop");else switch(e.getAttr("cms-post")){case"query":t=e.getAttr("cms-post-type-query-name")||(e.getAttr("cms-post-type")||"post")+"_query";break;case"rel":var a=e.getAttr("cms-post-loop-field");a&&(t=a+"_query")}return t},this.getActiveQueryNamesForPgel=function(e){var a=[];return e.getParentsBySelector("[wp-loop],[cms-post]").forEach(function(e){var t=n.getQueryName(e);t&&a.push(t)}),r(a)},this.getPreceedingQueryNamesForPgel=function(e){var a=[],o=(e.document.updatePositionInformation(),e.getPositionInDocument(!0));return e.document.find("[wp-loop],[cms-post]").forEach(function(e){var t;o>=e.getPositionInDocument(!0)&&(t=n.getQueryName(e))&&a.push(t)}),r(a)},this.getLiveFieldsList=function(e,t,a){var o=!1,r=(t.getData("wp-fields")||[]).map(function(e){return{key:e,name:e}});return!o&&(t.closest("cms-block")||t.isSelector("[cms-block]"))||r.push({key:"none",name:"Update field list...",action:async function(){var e;o?(pinegrow.showQuickMessage("Updating field list..."),(e=await ld.getPostFields(t)).length?pinegrow.showQuickMessage("Field list updated."):pinegrow.showQuickMessage("No fields found. Note, fields must have Show in Rest API enabled."),t.setData("wp-fields",e),a.find("input").focus()):D.wpGetInsightInfoFromPage(t,function(e){console.log(e),e.fields&&(t.setData("wp-fields",e.fields),a.find("input").focus())})}}),r},this.loadData=function(e){$.each(e,function(e,t){a[e]=t}),o()},this.getSaveData=function(){return a},this.reset()},D.wpUpdateThemeScreenshot=function(){var e,t,a=pinegrow.getSelectedPage();a?(t=require("path"),e=pinegrow.getCurrentProjectInfo(),t=t.join(e.getDir(),"screenshot.png"),pinegrow.takePhotoOfPage(a,t,function(){pinegrow.showQuickMessage("Done! Export the whole theme to copy the screenshot to the theme."),pinegrow.refreshCurrentProject()},1200)):pinegrow.showQuickError("Please open a page first.")},D.wpGetElementClassesOptions=function(e,t){return t.getClasses().map(function(e){return{key:e,name:e}})},D.applyMasterPage=function(e,n,t,a,o){function r(e){pinegrow.showAlert("<p>Can't apply master page to <b>"+n.name+"</b>:</p><p><b>"+e+"</b></p><p>&quot;Apply Master Page&quot; copies the master page to the current page. Only the region marked with <b>Site content action</b> is left untouched.</p><p>Use this function to easily apply changes done to the master page to all other pages in the theme.</p>","Can't apply the Master page")}var i,s,l,p,c,u,m,d,h,g,_=D.getThemeInfo(n.sourceNode),f=(_||r("Theme / plugin settings not found."),n.sourceNode),w=f.findOne("html");if(w&&(w.hasAttr("wp-site")||w.hasAttr("wp-template"))){if(!(w.hasAttr("wp-site-is-master-page")||w.hasAttr("wp-master-page")||w.hasAttr("wp-template-define-master-page")))return(_=w.getAttr("wp-template-master")||w.getAttr("wp-site-master-page")||_.master)?o&&o!==_?void(a&&a(!1)):(i=D.getMasterSourceNode(e,_))?(s=D.validateContentArea(i,"Master page")).ok?(l=D.validateContentArea(f,n.getName(),s)).ok?s.range!=l.range?(r("Site Content areas on the master page and "+n.getName()+" are not compatible: one defines the Content area as a range of elements (with two Site Content actions with Begin and End content) and the other defines the Content area with a single Site Content action without Begin and End content."),a&&a(!1),!1):(g=D.findContentArea(i),p=g.begin,c=g.end,g=D.findContentArea(f),u=g.begin,m=g.end,(d=i.findOne("html"))&&p&&u?(h=function(){var e=n.sourceNode.toStringWithIds(!0);p.withoutEvents(function(){if(c&&m){var e=m;do{var t=e,e=e.prev(!0)}while(t.insertAfter(c),e&&e!=u);var a=p;do{t=a,a=a.next(!0)}while(t.remove(),a&&a!=c)}else p.replaceContentWithContentOf(u);f.replaceContentWithContentOf(i),d.removeAttrIfStartsWith("wp-site"),d.removeAttrIfStartsWith("wp-master"),d.removeAttrIfStartsWith("wp-template");for(var o=w.getAttrList(),r=0;r<o.length;r++)d.setAttr(o[r].name,o[r].value);n.openedInEditor&&f.assignIdAndAddToCatalog(!0)}),pinegrow.selectedElements.getLastSelectedOnPage(n)&&pinegrow.selectElement(null),n.openedInEditor&&(n.addPageStateToUndoHistory(e),pinegrow.changeManager.didChangePage(n,"Apply WP master page"),n.refresh()),pinegrow.showQuickMessage(`The master page was applied on ${n.name}.`),a&&a(!0)},void(t?h():(g=g.auto?"the content of the BODY element":"the region with the Site Content action",pinegrow.showAlert("<p>Are you sure that you want to apply the master page <b>"+_+"</b>?</p><p>Everything on the page, except <b>"+g+"</b>, will be replaced by the content of the master page.</p>","Are you sure?","Cancel","Apply the Master Page",null,function(){h()})))):(r("Site Content action needs to be defined on both Master page and this page. In addition, the master page needs a properly configured WordPress site action."),a&&a(!1),!1)):(D.showContentAreaError(l),a&&a(!1),!1):(D.showContentAreaError(s),void(a&&a(!1))):(r("The master page was not found. Check the WordPress site action settings and make sure that the specified master page exists in the same folder as this page."),a&&a(!1),!1):(r("The name of the master page is not set. Edit WordPress site action on the HTML (top in the tree) element to change this."),a&&a(!1),!1);t||r("The current page IS the master page. Edit WordPress site action on the HTML (top in the tree) element to change this.")}a&&a(!1)},D.hasPhp=function(e){return!!e&&0<=e.indexOf("<?php")},D.getRenderedWordPressHTMLWithNotice=function(e){D.getRenderedWordPressHTML(e)},D.hasWPActions=function(e){return 0<e.findAttributesStartingWith("wp-").length||0<e.findAttributesStartingWith("cms-").length||0<e.findAttributesStartingWith("wc-").length},!1),t=(D.wpGetInsightInfoFromPage=function(e,t){D.getRenderedWordPressHTML(e,null,null,null,t)},D.wpShowLiveData=async function(l,p,c,u,m,d){return new Promise(async function(e,t){var r=c||new PgCollection,n=D.wpGetLiveData();if(n.isEnabled()){p||n.clearIssues(),n.changed_col=r;var i=[],a=[],s=!1;(l instanceof PgCollection?l:new PgCollection(l)).forEachElement(function(e){e.walkSelfAndChildren(function(o){if(o.isElement){if(!p&&o.hasAttribute("wp-loop-skip"))return a.push(o),"skip_children";D.getActionTypes(o).forEach(function(a){!a.on_show_live_data||u&&u!==a||(a.always_show_live_data_for_children&&(u=m=!1),"false"!==o.getAttribute(a.attribute+"-live-data")&&i.push(async function(){if(!o.isDeleted)try{var t=o.toStringOriginal(!0);await a.on_show_live_data(o,n,p);r.add(o),s=!0}catch(e){t!==o.toStringOriginal(!0)&&(t=pgCreate(t),o.replaceWith(t),o=t),p||n.reportIssue(o,e.toString(),a)}}))})}return!m})});for(var o=0;o<i.length;o++)await i[o]();s&&a.forEach(function(e){e.remove()}),p||d||(pinegrow.changeManager.didChange(r,"Import live WordPress data",{source:"wp-live-data"}),pinegrow.showQuickMessage("Live data imported.")),p||n.showIssues()}else pinegrow.showQuickMessage("WP REST API access is not enabled. Edit Project settings.");e()})},D.getRenderedWordPressHTML=function(n,b,t,e,i){if(k)return pinegrow.showQuickMessage("Importing WordPress HTML is already in progress."),"";t=t||D.getThemeInfo(n.document);function a(e){o.remove(),r.remove()}var o=pgCreateNodeFromHtml("____WPSTART____"),r=pgCreateNodeFromHtml("____WPEND____"),s="wp-temp-render-this",l=null,p=n.getPage(),y=(p&&(l=p.url),i&&n.setAttr(s),"pgwp-export-id"),c=(e=i?e:!0)?n.document:n.document.clone(!0),u=(!e&&i&&n.removeAttr(s),i&&(s=c.findOne(`[${s}]`),pgCreate(`<?php ${D.wpGetClass("PG_Helper")}::getInsightMetaFields(); ?>`).insertAfter(s)),D.hasWPActions),s="",m=!0;if(!m&&s.length)return pinegrow.showAlert("<p>Importing WordPress HTML is not possible on this element because:</p><ul>"+s+"</ul>","Importing WordPress HTML is not possible"),a();if(!m&&!0)return pinegrow.showQuickMessage("Importing WordPress HTML is not supported on this element."),a();c.walkSelfAndChildren(function(e){for(var t=D.getTypes(null,e),a=0;a<t.length;a++)t[a].dont_include_in_rendered_code&&t[a].attribute&&e.removeAttrIfStartsWith(t[a].attribute);return!0}),D.render_php_on_export_started=function(e){var t;e.isElement&&null!==(t=e.getAttr(y))&&D.phpFilter.addToChanges(function(e){pgCreate(`_WPSTART_${t}_`).insertBefore(e),pgCreate(`_WPEND_${t}_`).insertAfter(e)},D.phpFilter,[e])};require("path");function d(){try{for(var e=0;e<_.length;e++){var t=_[e]+".original";try{crsaCopyFileSync(h,t,_[e]),h.unlinkSync(t)}catch(e){console.log(e)}}}catch(e){console.log(e)}}var h=require("fs"),g=[],_=[],s=new CrsaOverwriteProtectionFileWriter(t.source_dir,t.dir),f=(s.use_export_cache=!1,s.overwrite_existing_files_without_asking=!0,s.on_before_file_written=function(e){g.push(e);try{crsaCopyFileSync(h,e,e+".original"),_.push(e)}catch(e){console.log(e)}},s.on_should_write_file=D.wpShouldWriteFile,D.resetGlobalThemeObjects(),D.exportPage(p.localFile,c,t.dir,s,t,null,p.url,!0),D.exportedOutputDocument,D.render_php_on_control_structures_complete=null,D.render_php_on_export_started=null,o.remove(),r.remove(),D.getPreviewUrlForPage(n.document,t)),v=pinegrow.showQuickMessage("Getting HTML from WordPres...",-1);k=!0,setTimeout(function(){var e=crsaAppendQueryToUrl(f,[`z=`+(new Date).getTime()]);console.log(`Fetching ${e}...`),$.ajax({url:e,data:null,dataType:"text"}).done(function(a){d(),v&&v.removeMessage(),k=!1;function o(a,e){var t=a.getId();if(n=e.match(new RegExp(`_WPSTART_${t}_([\\s\\S]*?)_WPEND_${t}_`,"g"))){var o=[];if(n.forEach(function(e){o.push($.trim(e.match(new RegExp(`_WPSTART_${t}_([\\s\\S]*?)_WPEND_${t}_`))[1]))}),e=o[0],b)b(e);else if(e&&e.length){var r=new pgParser,n=(r.assignIds=!1,r.replaceExistingIds=!1,r.parse(e),pinegrow.getCrsaPageOfPgParserNode(a));if(r.rootNode.children&&r.rootNode.children.length){var i=r.rootNode.children[0],s=i.getAttr(y),s=D.exportedOutputDocument.findOne(`[${y}="${s}"]`),s=s&&s.getData("wp-repeated-item"),l=!1,p=(a.getAttrList().forEach(function(e){e.name.startsWith("<?")&&(l=!0)}),"img"===a.tagName&&!i.hasAttr("srcset")&&a.hasAttr("srcset")&&a.removeAttr("srcset"),l||i.getAttrList().forEach(function(e){var t=!0;a.hasAttr(e.name)&&0<=(a.getAttr(e.name)||"").indexOf("<?")&&(t=!1),(t=0<=["class","id","sizes"].indexOf(e.name)||e.name.match(/^(data-pg-|pgwp-|wp-|cms-)/)?!1:t)&&a.setAttr(e.name,e.value)}),!1);if((p=a.isEmpty()||a.hasTextOnly()?p:!0)||(g=i.html())&&(a.html(g),a.children.forEach(function(e){e.isElement&&e.setAttr("wp-preview","import")})),s){function c(e){e.walkSelfAndChildren(function(e){return e.isElement&&(e.removeAttr("id"),e.removeAttr("pgwp-export-id")),!0})}for(var u=a,m=(f=f.concat(a.parent.find(`[wp-preview="import"]`)),[]),d=1;d<r.rootNode.children.length;d++){var h=r.rootNode.children[d];h.isElement&&h.getAttr(y)===a.getId().toString()&&(g=(g=h.toStringOriginal()).replace(/_(WPSTART|WPEND)_[0-9]+_/g,""),c(_=pgCreate(g,!0)),_.insertAfter(u),m.push(_),_.setAttr("wp-preview","import"),u=_)}for(var g,_,d=1;d<o.length;d++)g=(g=o[d]).replace(/_(WPSTART|WPEND)_[0-9]+_/g,""),c(_=pgCreate(g,!0)),_.insertAfter(u),m.push(_),_.setAttr("wp-preview","import"),u=_;pgf.use_selectors&&w.verifySelectorsOnPage(n).length&&m.forEach(function(e){e.remove()})}}}}}var e,f,t,r,w=new PgElementSelectorHelper;a.indexOf(`<!-- page: ${l} -->`)<0?pinegrow.showAlert(`<p>The preview URL for this page (<code>${D.getPreviewUrlForPage(n.document,D.getThemeInfo(n.document))}</code>) is probably wrong - or, this theme is not active for this WordPress site. Page ${p.name} does not export to a WordPress template that is shown with this preview url.</p>`,"Please check the Preview url","OK","Show page settings",null,function(){D.showPageSettings()}):i?((e={}).fields=(t="FIELDS",(r=a.match(new RegExp(`\\<\\!-- PG_${t}\\:(.*?)\\-\\-\\>`)))?r[1].split(","):[]),i(e)):(f=[],n.walkSelfAndChildren(function(e){var t;return e.isElement&&(t=e.getId(),t=D.exportedOutputDocument.findOne(`[${y}="${t}"]`),u(e)||t&&(t.getData("wp-repeated-item")||t.getData("wp-import")))&&o(e,a),!0}),f.forEach(function(e){e.remove()}))}).fail(function(){v.removeMessage(),d(),k=!1,pinegrow.showAlert("<p>Can't get the HTML for the element from the WordPress site <b>"+(t.url||"[Preview URL not set]")+"</b>.</p><p>Make sure that:<ul><li><b>The element is displayed on the selected preview page</b> as set in <b>WordPress site</b> action on the HTML (top in the tree) element.</li><li>The WordPress site is up and running.</li><li>Preview url is correctly set on the <b>WordPress site action</b> on the HTML (top in the tree) of the master page <b>"+t.master+"</b>.</li><li><b>This theme is activated</b> on the WordPress site.</li></ul></p>","Can't get HTML from the WordPress site"),i&&i({})})},500)},D.removeWpActionsFromNodeTree=function(e){D.wpRemoveWPAttributes(e,!0)},D.getPreviewUrlForPage=function(e,t){var a=null,o=e.findOne("html");return(a=o&&o.getAttr("wp-site-preview-url")?o.getAttr("wp-site-preview-url"):o&&o.getAttr("wp-template-preview-url")?o.getAttr("wp-template-preview-url"):(t=t||D.getThemeInfo(e))&&t.url?t.url:null)?(a=pinegrow.evaluateUserVars(a),crsaIsAbsoluteUrl(a)||(t=t||D.getThemeInfo(e))&&t.url&&(a=require("url").resolve(t.url,a)),a):null},D.getThemePGVersion=function(e){return e.options&&e.options.pg_version?parseFloat(e.options.pg_version):1},D.getThemeInfoProjectVersion=function(e){return(e=e||D.getCurrentThemeInfo())&&e.options&&e.options.project_version||"1.0.0"},D.wpGetProjectVersionForRegister=function(){var e=D.getThemeInfoProjectVersion();return e?D.quoteParam(e):"''"},D.getCurrentThemeInfo=function(){return D.current_theme_info||(D.current_theme_info=D.getThemeInfo(null,!0)),D.current_theme_info},D.getThemeInfo=function(e,t){var a=pinegrow.getCurrentProjectInfo();if(a&&(u=a.getSetting("wp-theme-info")))return{dir:isApp()?pinegrow.evaluateUserVars(u.dir):null,name:u.name,slug:u.slug,master_url:a.makeUrlAbsolute(u.page),url:isApp()?pinegrow.evaluateUserVars(u.url):null,master:crsaGetNameFromUrl(u.page),crsaPage:pinegrow.getCrsaPageByUrl(u.page),source_dir:a.getDir(),version:2,options:u};if("PGTC"!==pgf.product&&!t)if(e){var o,a=pinegrow.getCrsaPageOfPgParserNode(e)||pinegrow.getSelectedPage(),r=e.findOne("html");if(r&&r.hasAttr("wp-site")&&a&&(r.hasAttr("wp-site-is-master-page")?(o=crsaGetNameFromUrl(a.url),l=a.url):(o=r.getAttr("wp-site-master-page"))&&(r=null,n=D.getMasterSourceNode(a.url,o))&&(r=n.findOne("html"),l=n.wp_node_url,r)&&r.getAttr("wp-site-master-page")&&!r.hasAttr("wp-site-is-master-page")&&(o=r.getAttr("wp-site-master-page"),n=D.getMasterSourceNode(a.url,o))&&(r=n.findOne("html"),l=n.wp_node_url)),r){var n=r.getAttr("wp-site-themes-folder")||null,i=r.getAttr("wp-site-theme-name")||null,s=r.getAttr("wp-site-theme-slug")||D.makeSlug(i),r=r.getAttr("wp-site-preview-url"),l=libs.path.dirname(crsaMakeFileFromUrl(l));if(n&&i)return{dir:isApp()?pinegrow.evaluateUserVars(n):null,name:i,slug:s,url:isApp()?pinegrow.evaluateUserVars(r):null,master:o,crsaPage:a,source_dir:l,version:1}}}else for(var p=pinegrow.getAllPages(),c=0;c<p.length;c++){var u,m=p[c];if(m.sourceNode)if(u=D.getThemeInfo(m.sourceNode))return u}return null},D.miskolin=142776e4*1e3,D.canMiskolin=function(){return!0},D.isInSiteContent=function(e){function t(){var e=o;do{if((e=e.prev())&&e.hasAttr("wp-site-content")&&e.hasAttr("wp-site-content-end"))return!1;if(e&&e.hasAttr("wp-site-content")&&e.hasAttr("wp-site-content-begin"))return e}while(e);return!1}function a(e,t){if("script"!==t.tagName||t.parent!==e||"body"!==e.tagName)return e;for(var a=t.next();a;){if("script"!==a.tagName)return e;a=a.next()}return null}var o=e,r=t();if(r)return r;for(;o=o.parent;){if(o.hasAttr("wp-site-content"))return a(o,e);if(r=t())return a(r,e)}if(!e.document.findOne("[wp-site-content]")){var n=e.closest("body");if(n&&n!==e)return a(n,e)}return null},D.isOnMasterPage=function(e){var t,a="html"==e.tagName?e:e.closest("html");return!!a&&(t=(t=e.getPage())?t.url:null,!(!D.current_theme_info||!D.current_theme_info.master_url||D.current_theme_info.master_url!==D.current_page_url&&D.current_theme_info.master_url!==t)||a.hasAttr("wp-site-is-master-page")||a.hasAttr("wp-master-page")||a.hasAttr("wp-template-define-master-page"))},D.isOnMasterOrInContent=function(e){return D.isOnMasterPage(e)||D.isInSiteContent(e)||D.in_get_code_preview},D.warnAboutActionThatIsNotOnMasterOrInContent=function(e,t,a){},D.isNodeInConditionalComments=function(e){for(var t="\x3c!--[if",a="<![endif]",o=e;o=o.prev(!0);)if(o.textNode){var r=o.content.indexOf(a),n=o.content.indexOf(t);if(0<=r&&n<r)return!1;if(0<=n&&r<n)return!0}return!1},D.willOtherActionReplaceElement=function(e,t){for(var a=D.getTypes(null,e),o=0;o<a.length;o++)if(a[o]!==t&&(a[o].wp_has_replace_property&&"element"==D.phpFilter.getSetValue(e,a[o])||a[o].wp_will_replace_element))return!0;return!1},D.getPhpFileForHTMLFile=function(e,t){var a=(t?e:crsaGetNameFromUrl(e)).split(".");return a.length<=1?a.push("php"):a[a.length-1]="php",a.join(".")},D.getPhpFileForSourceNode=function(e){var t=pinegrow.getCrsaPageOfPgParserNode(e);return D.getPhpFileForHTMLFile(t.localFile)},D.getSourceDir=function(e){var t=pinegrow.getCurrentProject(),t=t?t.getDir():libs.path.dirname(e);return t},D.getExportDirForFile=function(e,t){var a=e.replace(D.getSourceDir(e),"");return isApp()?libs.path.dirname(libs.path.join(t,a)):a},D.getMasterPageSlug=function(e){var t=crsaGetNameFromUrl(e).replace(".html","").replace(".php","");return"index"==t?null:t},new PgDelayedTasks),a=[],R=(D.wpShowQuickExportedNotice=function(e){a.push(e),t.run("showMessages",function(){a.length<=3?a.forEach(function(e){pinegrow.showQuickMessage(e)}):pinegrow.showQuickMessage(a.length+` files exported.`),a=[]},100)},D.exportPage=function(e,t,a,o,r,n,i,s){var l=D.wpIsPlugin(r),p=(D.template_parts=[],D.required_resources_list={},D.blocks_js_code={},D.blocks_reg_code={},require("path"),null),c=!0,u=!0,m=(D.site_content_save_footer=!1,D.site_content_save_header=!1,a),d=r.master_url&&r.master_url===i,h=t.findOne("html"),d=(l?(c=!1,u=!0):h&&(h.hasAttr("wp-site")||h.hasAttr("wp-template")||d)&&(h.hasAttr("wp-site-is-master-page")||h.hasAttr("wp-master-page")||h.hasAttr("wp-template-define-master-page")||d?(D.site_content_save_footer=!0,D.site_content_save_header=!0,p=D.getMasterPageSlug(e),(w=h.getAttr("wp-template-export-as")||h.getAttr("wp-site-export-as"))&&(p=D.getMasterPageSlug(w)),d&&(p=null)):(d=h.getAttr("wp-template-master")||h.getAttr("wp-site-master-page")||r.master)&&(p=D.getMasterPageSlug(d)),(h.hasAttr("wp-site-no-export")||h.hasAttr("wp-template-no-export"))&&(c=!1),h.hasAttr("wp-site-no-export-parts")||h.hasAttr("wp-template-no-export-parts"))&&(u=!1),D.site_content_save_footer&&c&&p&&D.wpInsight.addMasterPage(p),D.export_page=c,a=D.getExportDirForFile(e,a),D.current_exported_page_name=crsaGetNameFromUrl(e),"webflow"===D.wpDetectFramework(t)&&(D.requireResource("css/wp-webflow.css","",null),D.addToFunctionsPhpSection("Enqueue Styles",`    wp_enqueue_style( 'wp-webflow-compatibility', get_template_directory_uri().'/css/wp-webflow.css', false, null);
`,!0)),D.parseToPhp(t,!1,r,D.wpExportWithIds,e,i,s));if(a){var g=D.getPhpFileForHTMLFile(e);if((w=h.getAttr("wp-template-export-as")||h.getAttr("wp-site-export-as"))&&(g=D.getPhpFileForHTMLFile(w,!0)),c||u||l){var _,f,h=d.indexOf(D.const_end_header),w=(0<=h&&(f=d.substr(0,h),d=d.substr(h+D.const_end_header.length),D.site_content_save_header)&&c&&(_=p?"header-"+p+".php":"header.php",o.writeFile(D.wpGetFilePathInExportDir(a,_),f,function(){n||D.wpShowQuickExportedNotice("WordPress file <b>"+_+"</b> exported.")},_)),d.indexOf(D.const_start_footer));if(0<=w&&(l=d.substr(w+D.const_start_footer.length),d=d.substr(0,w),D.site_content_save_footer)&&c&&(_=p?"footer-"+p+".php":"footer.php",o.writeFile(D.wpGetFilePathInExportDir(a,_),l,function(){n||D.wpShowQuickExportedNotice("WordPress file <b>"+_+"</b> exported.")},_)),(0<=h||0<=w)&&(d="<?php get_header("+(p?" '"+p+"' ":"")+"); ?>\n"+pgReindentText(d,"")+"\n\n<?php get_footer("+(p?" '"+p+"' ":"")+"); ?>"),s&&(d=`<!-- page: ${i} -->
`+d),u)for(var b=0;b<D.template_parts.length;b++){var y=D.template_parts[b],v=y.with_pgids?y.only_content?y.pgel.toString("",!0,!0,null,!0,pinegrow.getFormatHtmlOptions(),!0,!0):y.pgel.toStringWithIds(!0,pinegrow.getFormatHtmlOptions()):y.only_content?y.pgel.toString("",!0,!1,null,!0,pinegrow.getFormatHtmlOptions(),!0,!0):y.pgel.toStringOriginal(!0,pinegrow.getFormatHtmlOptions()),k=(y.filter_code&&(v=y.filter_code(v)),y.slug+(y.name?"-"+y.name:"")+".php");y.file_name=e,o.writeFile(D.wpGetFilePathInExportDir(m,k),v,function(){n||D.wpShowQuickExportedNotice("WordPress file <b>"+k+"</b> exported.")},k),D.template_parts_defs[k]||(D.template_parts_defs[k]=[]),D.template_parts_defs[k].push(y)}D.template_parts=[],$.each(D.blocks_reg_code,function(e,t){var a=D.wpGetFilePathInExportDir(m,t.file);o.writeFile(a,"<?php\n"+t.code,function(){n||D.wpShowQuickExportedNotice("Block file <b>"+a+"</b> exported.")},t.file)}),D.blocks_reg_code={},$.each(D.blocks_js_code,function(e,t){var a=D.wpGetFilePathInExportDir(m,t.file);o.writeFile(a,t.code,function(){n||D.wpShowQuickExportedNotice("Block file <b>"+a+"</b> exported.")},t.file)}),D.blocks_js_code={},D.processRequiredResources(r,o),D.page_template_name&&(d="<?php\n/*\n "+(D.page_template_name_field||"Template Name")+": "+D.page_template_name+"\n */\n?>\n"+d),D.post_template_name&&(f=`<?php
/*
 Template Name: ${D.post_template_name}
`,D.post_template_types&&(f+=` Template Post Type: ${D.post_template_types}
`),d=(f+=`*/
?>
`)+d),c&&o.writeFile(D.wpGetFilePathInExportDir(a,g),d,function(){n||D.wpShowQuickExportedNotice("WordPress file <b>"+g+"</b> exported.")},g)}}else showAlert("Theme or plugin folder is not specified. Add WordPress Site action to the Body element.","Can't export the project")},D.makeSlug=function(e){return e&&e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"_")},D.writeCodeSectionsToFunctionsPhp=function(r,n){var e=D.wpGetFunctionsFileName(r),i=D.wpGetFilePathInExportDir(r.dir,e),s="";return $.each(D.functions_php_sections,function(t,a){var e,o=a.code;try{r.crsaPage&&(e={code:o},r.crsaPage.callFrameworkHandler("on_wp_write_functions_php_section",t,e),o=e.code),D.updateGeneratedSection(i,t,o,a.add_section_code||null,n)}catch(e){o.length&&!a.silent_fail&&(s=s+"<p>Reported error: "+e+"</p>"+"<li><code>/* Pinegrow generated "+t+" Begin */\n \n/* Pinegrow generated "+t+" End */</code>",D.functions_php_sections_missing_text[t]&&(s+=D.functions_php_sections_missing_text[t]),s+="</li>")}}),!s.length||(pinegrow.showAlert(`<p><b>Could not write code to ${e}.</b></p><p>Perhaps the ${e} is missing (run WordPress -&gt; Export the theme) or the following sections are missing from <b>${e}</b> in your theme folder:</p><ul>`+s+"</ul>",`Could not update `+e,`I'll take care of it`,`Regenerate `+e,null,function(){D.wpRegenerateFunctionsPhp()}),!1)},D.wpRegenerateFunctionsPhp=function(){var o=D.getThemeInfo(),r=D.wpGetFunctionsFileName(o),n=r.replace(".php","_backup.php");pinegrow.showAlert(`<p>Are you sure you want to ceate a new <code>${r}</code> file?</p><p>Any custom changes that you added to the current ${r} file <b>will be overwritten</b>. The copy of the current file will be saved as <code>${n}</code> in the source folder.</p><p>If you didn't do any manual edits to ${r}, it is safe to regenerate the file. Otherwise it is better to do the required changes by editing the existing ${r} file.</p><p>Doing this operation will also export the whole theme / plugin.</p>`,`Do you want to overwrite ${r} file`,"Cancel","Yes, regenerate it",null,function(){var e,t,a;o?(e=D.wpGetFilePathInExportDir(o.dir,r),isApp()?((a=require("fs")).existsSync(e)&&a.unlinkSync(e),e=path.join(o.source_dir,r),a.existsSync(e)&&(t=path.join(o.source_dir,n),crsaCopyFileSync(a,e,t),a.unlinkSync(e))):(t=pinegrow.getCurrentProject(),a=D.wpIsPlugin(o)?H(o):L(o.slug),t.setContentOfUrlWithLookup(r,a)),D.exportWholeThemeWithGetFolder()):pinegrow.showQuickError(`Can't get the Theme / plugin settings.`)})},D.showFolderNotSetNotice=function(){pinegrow.showAlert("<p>Theme or plugin export folder is not set or it does not exists.</p><p>The theme export folder is normally located in wp-content/themes folder of your local WordPress installation.</p>","Error - Export folder is not set or does not exist","OK","Open Theme Settings",null,function(){D.showWordPressSiteSetupDialog()})},D.showWordPressSiteMissingNotice=function(e){e?pinegrow.showQuickMessage("Can't quick export this WP template - Theme Settings or Page Settings are incomplete.",3e3,!1,"error"):pinegrow.showAlert("<p>Theme Settings are missing or incomplete.</p>","Can't export theme - WordPress site action is missing","OK","Open Theme Settings",null,function(){D.showWordPressSiteSetupDialog()})},!0),M=(D.canUseWP=function(e){return pinegrow.hasActivatedProduct("WP")||D.isTrialActive(e)},D.wpCheckForOlderHelpers=function(o,r){function e(e,t){var a=n(e,t);r.match(a)&&((a=pinegrow.getCurrentProject())&&(o=a.getRelativePath(o)),D.addExportError(null,`Warning: Usage of older version of <code>${e}</code> was detected in your custom code.`,`Use <code>${e}_v${t}</code> instead. It is best to create helper functions that call Pinegrow helpers so that you can easily update dependencies in one place.`,o))}var n=function(e,t){for(var a=[],o=1;o<t;o++){var r=e;r+=1<o?"_v"+o:"::",a.push(escapeRegExp(r))}return new RegExp(`[^a-z0-9_]${a.join("|")}\\:\\:`,"gm")};"string"==typeof r&&(e("PG_Helper",D.wpPGHelperVersion),e("PG_Blocks",D.wpPGBlocksVersion))},D.exportWholeTheme=function(b,y,v,k,x,A){var P,S,T,C,E,I,W,F,O,q,e,N,t;D.canMiskolin()&&D.canUseWP()&&(P=require("path"),S=require("fs"),pinegrow.stats.using("wp.export"),T=!1,C=isApp()?new CrsaProject:pinegrow.getCurrentProject(),E=null,W=I=!1,F=[],D.wpInsight.reset(),D.resetGlobalThemeObjects(),O=D.current_project_info=pinegrow.getCurrentProjectInfo(),q=O.getSetting("wp-files")||{},D.resetRequireThemeExport(),t=D.wpGetFilePathInExportDir(b,"inc","custom.php"),e=`<?php
    /* 
    Use this file to add custom PHP code to your theme or plugin 
    */
    
    ?>`,isApp()?S.existsSync(t)||(crsaWriteFileWithBackup(S,t,e,"utf8"),I=!0,pinegrow.refreshCurrentProjectDelayed(!0)):C.getFile(t)||(C.setContentOfUrlWithLookup(t,e),I=!0,pinegrow.refreshCurrentProjectDelayed(!0)),D.includeInFunctions("custom.php","inc"),N=function(){pinegrow.dispatchEvent("on_wp_export_done")},t=async function(){var o=[],r=!1;if(C.too_many_files)pinegrow.showAlert("<p>The source folder <code>"+b+"</code> has <b>more than "+parseInt(C.file_size_count/1024/1024)+" MB of data in more than "+C.file_count+" files</b>. All these files would be copied to the theme export folder. That's probably not what you want, so we'll abort the export.</p><p>Did you place your HTML file on the top level of Documents, Desktop or similar folder with lots of files (for example, <em>Documents/index.html</em>)? Theme source files (HTML files and resources) should be enclosed into a folder (for example, <em>Documents/<b>MyTheme</b>/index.html</em>).</p>","Error - Exporting too many files","No, that's what I want. Proceed with export!","OK",function(){setTimeout(function(){R=!1,D.exportWholeTheme(b,y)})});else{D.current_theme_info=E=D.getThemeInfo(null,!0),T=D.wpIsPlugin(E),"1"===E.options.auto_increment_version&&D.getThemeInfoProjectVersion(E)&&(a=D.getThemeInfoProjectVersion(E))&&(e=(n=a.split(".")).length-1,isNaN(n[e])||(n[e]=(parseInt(n[e])+1).toString(),a=n.join(".")),E.options.project_version=a,e=O.getSetting("wp-theme-info"))&&(e.project_version=a,O.save()),T||"true"!==E?.options.block_theme||(D.addThemeSupportsCode(`    
//Enable site editor                    
add_theme_support('block-templates');
add_theme_support('block-template-parts');`),C.getFile(n="templates/index.html"))||(C.setContentOfUrlWithLookup(n,""),W=!0,await C.reloadAsync(!1)),C.walkThroughFiles(function(e){var t,a;e.isFile&&(".html"===(t=isApp()?P.extname(e.path):"."+crsaGetExtFromUrl(e.path))||".htm"===t)&&((t=G(e.url)).pgwp_file_name=e.name,a=t.findOne("html"))&&(E&&2===E.version?E.master_url===e.url?(o.push(crsaGetNameFromUrl(e.path)),F.push({file:e,source_node:t}),r=!0):a.hasAttr("wp-template")&&F.push({file:e,source_node:t}):a&&(a.hasAttr("wp-site")||a.hasAttr("wp-template"))&&(e.wp_copy_skip=!0,a.hasAttr("wp-site-is-master-page")&&(o.push(P.basename(e.path)),E=E||D.getThemeInfo(a.document)),F.push({file:e,source_node:t}),P.basename(e.path).startsWith("index."))&&(r=!0))});var e="",t=(T||(r||(e+="<p><b>The theme doesn't have the index page</b>. Each WordPress theme needs the <b>index.php</b> template.</p>"),1<o.length&&(e+="<p><b>Multiple WordPress site actions are defined</b>. A theme should have only one WordPress Site master page definition. Choose the master page (usually index.html) and un-check <b>This is master page</b> on <b>WordPress site action</b> in all other pages.</p><p>Use <b>Define master page</b> action if you need multiple master pages.</p><ul><li>"+o.join("</li><li>")+"</li></ul>"),0===o.length&&(e+="<p><b>The theme doesn't have a Master page</b>. Master page defines the basic layout of your theme and is used to export header.php and footer.php. Index.html is usually the theme's master page. Select the master page in Theme Settings.</p>")),e.length&&pinegrow.showAlert(e,T?"Plugin Export Warnings":"Theme Export Warnings"),E&&E.dir||null);if(isApp()){if(!E||!t||"dir"!==crsaIsFileOrDir(t,S))return void D.showFolderNotSetNotice();t=P.join(t,"/")}var l=new CrsaOverwriteProtectionFileWriter(b,t),a=(y&&(l.use_export_cache=!1,l.overwrite_existing_files_without_asking=!0),l.on_should_write_file=D.wpShouldWriteFile,l.on_before_file_written=function(e,t,a){if(e.endsWith(".php")){if(!a&&isApp())try{a=S.readFileSync(t,{encoding:"utf8"})}catch(e){}a&&D.wpCheckForOlderHelpers(t||e,a)}},T?D.wpGetPluginFileName():"style.css"),n=C.getContentOfUrlWithLookup(a);"string"==typeof n&&(n=D.wpSetThemeHeaderValue(e=n,"Version",D.getThemeInfoProjectVersion()),(n=D.wpSetThemeHeaderValue(n,(T?"Plugin":"Theme")+" Name",D.current_theme_info.name))!==e)&&C.setContentOfUrlWithLookup(a,n,!0);for(var i=0;i<F.length;i++)try{D.exportPage(F[i].file.path,F[i].source_node,t,l,E,!0,F[i].file.url)}catch(e){D.addExportError(null,"Page "+F[i].file.name+" could not be exported.",e.toString()),console.error(e)}if(!T&&D.wpGetThemeOption("themejson")){let t=!1;e={$schema:"https://schemas.wp.org/trunk/theme.json",version:2,settings:{color:{palette:[]},typography:{fontFamilies:[]}}},a=C.getContentOfUrlWithLookup("theme.json");if(a)try{e=JSON.parse(a)}catch(e){D.addExportError(null,"Error parsing theme.json",e.toString()),t=!0}if(!t){pinegrow.dispatchEvent("on_wp_get_theme_info",null,e);n={},a=C.getContentOfUrlWithLookup("custom_theme.json");if(a)try{n=JSON.parse(a),pinegrow.showNotice(`<p><code>custom_theme.json</code> is no longer needed. Just edit <code>theme.json</code> and Pinegrow will add colors and fonts during export. Note that all colors and fonts will be replaced. If you need to add colors or fonts, do that through the Design panel.</p>`,"custom_theme.json is no longer needed","wp-custom-theme-json-no-longer-needed")}catch(e){D.addExportError(null,"Error parsing custom_theme.json",e.toString()),t=!0}$.extend(!0,e,n)}t||C.setContentOfUrlWithLookup("theme.json",JSON.stringify(e,null,4))}var s,p,c,u,m,d,h,a=pinegrow.getCurrentProjectInfo(),n=(q=a.getSetting("wp-files")||{},C.copyRequiredFilesTo(t,function(e){if("."===e.name.charAt(0)||"_"===e.name.charAt(0))return!1;if(!e.isFile&&isApp()){var t=P.join(e.path,"pgwp_no_export.txt");if(crsaIsFileOrDir(t,S))return!1}return!!D.wpShouldCopyFile(e,C,q)&&!e.wp_copy_skip},l),E.options&&E.options.images&&(s="",p=[],u="    ",$.each(E.options.images,function(e,t){void 0!==t.width&&null!==t.width||(t.width=""),void 0!==t.height&&null!==t.height||(t.height="");var a=t.width.length?parseInt(t.width):null,o=t.height.length?parseInt(t.height):null,r="true"===(t.crop||"")?1:0;0===a&&(a=9999),0===o&&(o=9999),isNaN(a)&&(a=null),isNaN(o)&&(o=null),(a=(o=a&&!o?9999:o)&&!a?9999:a)&&o&&(1===e.length?t.id&&(s+=`
add_image_size( '${t.id}', ${a}, ${o}, ${r?"true":"false"} );`,t.name&&p.push(`        '${t.id}' => __( '${t.name}' )`),D.wpInsight.addImageSize(t.id)):s+="post_thumbnail"==e?`    set_post_thumbnail_size( ${a}, ${o}, ${r?"true":"false"} );`:`
update_option( '${e}_size_w', ${a} );
update_option( '${e}_size_h', ${o} );
update_option( '${e}_crop', ${r} );
`)}),s&&D.addToFunctionsPhpSection("Image Sizes",s),p.length)&&D.addToFunctionsPhpSection("Image Sizes Names",`
return array_merge( $sizes, array(
${p.join(",\n")}
) );
`),!T&&E.options&&E.options.blocks_editor_styles&&(E.options.blocks_editor_styles.length?(c=``,E.options.blocks_editor_styles.forEach(function(e){c+=`    add_editor_style( '${e.trim()}' );
`}),D.addThemeSupportsCode(`    
//Tell WP to scope loaded editor styles to the block editor                    
add_theme_support( 'editor-styles' );`),D.addToFunctionsPhpSection("Load Blocks Editor Styles",c,!0,!1,!1,`
/* Loading editor styles for blocks */

function ${E.slug}_add_blocks_editor_styles() {
// Add blocks editor styles. Don't edit anything between the following comments.
/* Pinegrow generated Load Blocks Editor Styles Begin */
/* Pinegrow generated Load Blocks Editor Styles End */
}
add_action('admin_init', '${E.slug}_add_blocks_editor_styles');

/* End of loading editor styles for blocks */

`)):D.addToFunctionsPhpSection("Load Blocks Editor Styles","",!0,!0,!1)),`    //Assets of all registered blocks will be loaded on every page
`),g=(D.wpIncludeBlockResourcesIfRendered()&&(n=`    //Load only assets of blocks that are used on the page
    add_filter( 'should_load_separate_core_block_assets', '__return_true' );
`),D.addToFunctionsPhpSection("Load Block Assets Separately",n,!0,!D.wpIncludeBlockResourcesIfRendered(),!1,D.wpIncludeBlockResourcesIfRendered()?`
/* Control how block assets are loaded on the front-end */
function ${E.slug}_should_load_separate_core_block_assets() {
    /* Pinegrow generated Load Block Assets Separately Begin */
    /* Pinegrow generated Load Block Assets Separately End */
}
add_action('init', '${E.slug}_should_load_separate_core_block_assets');
/* End of controlling how block assets are loaded on the front-end */

`:null),E?.options.block_category&&"true"===E?.options.block_category_register&&(e=E.options.block_category_name||E.options.block_category,a=E.options.block_category,D.wpRegisterBlocksCategory(a,e,E.options.block_category_icon)),T||(n={},E.name&&(n["Theme Name"]=E.name),a=D.getStyleHeader(n,E),e=D.wpGetFilePathInExportDir(t,"style.css"),isApp()?S.existsSync(e)?(m=S.readFileSync(e,{encoding:"utf8"}),D.hasStyleHeader(m)||l.writeFile(e,m=a+"\n"+m,function(){})):l.writeFile(e,a):null!==(m=C.getContentOfUrlWithLookup("style.css"))?D.hasStyleHeader(m)||(l.writeFile(e,m=a+"\n"+m,function(){}),C.setContentOfUrlWithLookup(e,m)):(l.writeFile(e,a),C.setContentOfUrlWithLookup(e,m=a)),D.enqueued_urls["style.css"])||D.enqueued_urls["/style.css"]||(e=D.getScriptHandle(n="style.css",!0),D.enqueued_urls[n]=!0,n="get_bloginfo('stylesheet_url')",a="",a=(a+="\n"+(u="    ")+"wp_deregister_style( "+D.quoteParam(e)+" );")+"\n"+u+"wp_enqueue_style( "+D.quoteParam(e)+", "+D.quoteParam(n)+", [], "+D.wpGetProjectVersionForRegister()+", "+D.quoteParam("all")+");\n",D.addToFunctionsPhpSection("Enqueue Styles",a,!0)),D.wpGetFunctionsFileName(E)),_=D.wpGetFilePathInExportDir(t,g),e=(l.fileExists(_)?T&&(m=isApp()?S.readFileSync(_,{encoding:"utf8"}):C.getContentOfUrlWithLookup(_),(u=[]).push({key:"Plugin Name",val:E.name}),m=M(m,u),l.writeFile(_,m),isApp()||C.setContentOfUrlWithLookup(_,m)):(m=T?H(E):L(E.slug),l.writeFile(_,m),isApp()||C.setContentOfUrlWithLookup(_,m)),T?D.addToFunctionsPhpSection("Load Text Domain",`    load_plugin_textdomain( '${E.slug}', false, dirname( plugin_basename( __FILE__ ) ) . '/languages' );`,!1,!0):D.addToFunctionsPhpSection("Load Text Domain","    load_theme_textdomain( '"+E.slug+"', get_template_directory() . '/languages' );",!1,!0),D.beforeGeneratingPhpSections(),D.writeCodeSectionsToFunctionsPhp(E,l)),f=!1,w=!1;isApp()&&(d=P.join(C.getDir(),g),S.existsSync(d)?e&&crsaCopyFileSync(S,_,d,null,!0):(crsaCopyFileSync(S,_,d),f=!0),T||(n=P.join(t,"style.css"),a=P.join(C.getDir(),"style.css"),S.existsSync(a))||(crsaCopyFileSync(S,n,a),w=!0)),isApp()||(h=D.wpIsTestingModeEnabled(O),$.each(l.getFiles(),function(e,t){var a=T?e===D.current_theme_info.slug+".php":"functions.php"===e;e.endsWith(".php")&&(t=D.wpProtectPHPCodeAgainsSyntaxErrors(t,a,h,h,T)),h&&(T&&a?t=D.wpSetThemeHeaderValue(t,"Plugin Name",D.current_theme_info.name+" - Staging"):T||"style.css"!==e||(t=D.wpSetThemeHeaderValue(t,"Theme Name",D.current_theme_info.name+" - Staging"))),l.setFile(e,t)}),h&&pinegrow.showQuickError("Staging mode is ON!")),O.setSetting("wp-insight",D.wpInsight.getSaveData()),O.save(),0;l.askIfNeeded(function(e,t){var a,r="";if($.each(D.template_parts_defs,function(e,t){if(1<t.length){r+="<li><b>"+e+"</b> is defined in:<ul>";for(var a=0;a<t.length;a++)r+="<li>"+P.basename(t[a].file_name)+' <small class="text-muted">('+(o=t[a].file_name,C?C.getRelativePath(o):o)+")</small></li>";r+="</ul></li>"}var o}),r.length?pinegrow.showAlert("<p>These template parts have <b>multiple definitions</b>:</p><ul>"+r+"</ul><p>Each template part should be defined just once per theme with action Define template part. It can be included multiple times with the action Include template part.</p>","Some template parts have multiple definitions"):isApp()?pinegrow.showQuickMessage((T?"Plugin":"Theme")+" export done!",3e3):(v||pinegrow.showQuickMessage("Exporting project..."),a="",$.each(l.getFiles(),function(e,t){"string"==typeof t&&(a+=t)}),a+=" screenshot.png screenshot.jpg ",pinegrow.backend.collectMappedResources(a,function(e,t){l.writeFile(e,t)},function(){if(!pinegrow.currentUser.isPro()){if(!T)return void pinegrow.currentUser.onlyForProNotice("Theme export");var a=!1;if($.each(l.getFiles(),function(e,t){!a&&"string"==typeof t&&0<=t.indexOf("data-pg-ia")&&(a=!0)}),a)return void pinegrow.currentUser.onlyForProNotice("Pinegrow Interactions")}var e,t,r=D.current_theme_info.slug;!v&&D.wpIsTestingModeEnabled(O)&&(r+="_staging"),v?(e=new PgProjectDownloader(C),t=D.current_theme_info.slug,E.options.project_version&&(t+="."+E.options.project_version),e.downloadExportedProject(l.getFiles(),T?"plugin":"theme",t,function(){})):pinegrow.backend.exportProject(C,r,T?"plugin":"theme",l.getFiles(),"1"===O.getSetting("wp-export-loopback","0"),x||!1,A||!1,function(e,t){var a,o;e?(o=a=null,0<=e.indexOf("NOT_A_PG_PROJECT")?pinegrow.showAlert(`<p>The project <code>${r}</code> has not been previously exported with Pinegrow WordPress Plugin (or, it was exported by an older version of the plugin).</p>`,"Are you sure you want to export the project?","Cancel","Yes, export it",null,function(){D.exportWholeThemeWithGetFolder(null,!1,!0)}):t?(a="Disable the validation &amp; force export",o=function(){pinegrow.showAlert(`<p>Disabling the export validation can result in fatal PHP errors crashing the site. Only disable the validation if the validation request can not be made or if you are sure that the exported project is not causing the error.</p><p>You can re-enable the validation in <b>WordPress menu -&gt; Try loading the site after export</b>.</p>`,"Are you sure?","Cancel","Yes, disable validation &amp; export",null,function(){O.setSetting("wp-export-loopback","0"),O.save(),D.exportWholeThemeWithGetFolder()})}):pinegrow.showAlert(`<p>Project export failed:</p><p>${e}</p>`,"Export failed",a,"Ok",o)):pinegrow.showQuickMessage((T?"Plugin":"Theme")+" export done!",3e3),k&&k(),console.log("EXPORT DONE",e)}),pinegrow.refreshCurrentProjectDelayed(!0),D.showExportErrors()},function(e,t){D.addExportError(null,`Unable to get the resource <code>${e}</code> that is used in the exported code.`,t)})),!e){var o,n=!0;if(t)for(var i=0;i<t.length;i++)if(t[i].source==d){n=!1;break}isApp()&&n&&(l.copyFileToCache(_),f||w||I||W?(o="<p>The following files were added to the project:</p><ul>",f&&(o+=`<li><p>File <code>${g}</code> was copied to your theme source folder <code>${C.getDir()}</code>.</p><p>You can add custom PHP code to this file. Just make sure not to edit any code inside "Code generated by Pinegrow" sections.</p><p>When you export the theme, ${g} will be copied to the exported theme folder.</p></li>`),w&&(o+=`<li><p>File <code>style.css</code> was copied to your theme source folder <code>${C.getDir()}</code>.</p><p>You can add custom CSS code to this file.</p><p>When you export the theme, style.css will be copied to the exported theme folder.</p></li>`),I&&(o+=`<li><p>File <code>inc/custom.php</code> was created in the theme source folder and is included in the ${g} file. Use this file to add custom code to ${g}.</p></li>`),W&&(o+=`<li><p>Empty file <code>templates/index.html</code> was created in the theme source folder and is copied to the exported theme. This enables the WordPress site editor.</p></li>`),o+="</ul>",pinegrow.showAlert(o,"Files were added to the project"),pinegrow.refreshCurrentProject()):crsaCopyFileSync(S,_,d));for(var s=pinegrow.stylesheets.getAll({loaded:!0,ignored:!0,imported:!0,inline:!1,locked:!0,remote:!1}),i=0;i<s.length;i++)if(s[i].needsSave()){pinegrow.showQuickError("Some of the CSS stylesheets have unsaved changes. These changes have not been exported.");break}N()}}),isApp()&&D.showExportErrors()}},isApp()?C.fromFolder(b,t,!1,R):t())},D.requireResource=function(e,t,a,o,r){D.required_resources_list[e]={resource:e,dest:t,func:a,filter_func:o,force:!0}},D.processRequiredResources=function(a,o){$.each(D.required_resources_list,function(e,t){D.copyResource(a,o,t.resource,t.dest,function(){t.func&&t.func(t.resource,t.dest)},t.filter_func,t.force)}),D.required_resources_list={}},D.wpPreloadResources=function(){},D.wpGetResourceContent=function(e){if(!pgIsLive()&&isApp())return t=libs.path.join(D.getResourceFile("resources"),e),libs.fs.readFileSync(t,{encoding:"utf8"});var t=D.wpRemoteResources.getContent(e);if(null===t)throw"Unable to get preloaded resource "+e;return t},D.copyResource=function(e,t,a,o,r,n,i){var s=D.wpGetResourceContent(a),l=(n&&(s=n(s)),D.wpGetFilePathInExportDir(e.dir,o,a));i||!t.fileExists(l)?t.writeFile(l,s,r):r&&r()},D.includeInFunctions=function(e,t,a,o){var r='require_once "'+(isApp()?libs.path.join(t,e).replace(/\\/g,"/"):t+"/"+e)+'";';o&&(r=o.startsWith("function ")?`if( !function_exists( '${o=o.replace("function ","")}' ) ) { ${r} }`:`if( !class_exists( '${o}' ) ) { ${r} }`),D.addToFunctionsPhpSection("Include Resources",r+"\n",!0)},D.replaceThemeSlugInContent=function(e){return e.replace(/PGTHEMESLUG/g,D.current_theme_info.slug)},D.isThemeInstalled=function(e){if(!isApp())return!0;var t=require("fs"),a=require("path").join(e,D.wpGetFunctionsFileName());try{return t.existsSync(a)}catch(e){}return!1},D.wpIsPlugin=function(e){return(e=e||D.current_theme_info)?e.options&&"plugin"===e.options.project_type:D.wp_force_is_plugin||!1},D.wpAreInlineSVGsAllowed=function(){return D.current_theme_info&&D.current_theme_info.options&&"true"===D.current_theme_info.options.blocks_inline_svg},D.wpIncludeBlockResourcesIfRendered=function(){return D.current_theme_info&&D.current_theme_info.options&&"true"===D.current_theme_info.options.blocks_load_if_rendered},D.wpGetPluginFileName=function(e){return(e=e||D.current_theme_info)?isApp()?libs.path.basename(e.dir)+".php":e.slug+".php":null},D.wpGetFunctionsFileName=function(e){return e=e||D.current_theme_info,D.wpIsPlugin(e)?D.wpGetPluginFileName(e):"functions.php"},D.requireSlug=function(e,t,a,o,r,n){return a?D.validateSlug(e,t,a,o,r,n):pinegrow.getValidationError(o.name,"req")},D.validateSlug=function(e,t,a,o,r,n){if(a){if(!a.match(/^[a-z0-9\_]*$/))return"Only lowercase letters, numbers and _ are allowed";if(a.match(/^[0-9]/))return"Must not start with number"}return null},D.validateVar=function(e,t,a,o,r,n){if(a){if(!a.match(/^\$*[a-z0-9\_]*$/i))return"Only letters, numbers and _ are allowed";if(a.match(/^[0-9]/))return"Must not start with number"}return null},D.getIndentForElement=function(e,t){void 0===t&&(t=0);var a=pinegrow.getFormatHtmlOptions(),o=e.getNestingLevel()+t;return o<0&&(o=0),pinegrow.getHtmlIndentForLevel(o,a)},D.wpRemoveWPAttributes=function(e,t){e.removeAttrIfStartsWith(["wp-","cms-","wc-","data-pg-sel","data-pg-name","data-pg-collapsed"],t)},D.wpRemoveClasses=function(e,t,a){a=a||"class";for(var t=(t||"").split(" "),o=e.getClasses(a),r=[],n=0;n<o.length;n++)t.indexOf(o[n])<0&&r.push(o[n]);r.length?e.setAttr(a,r.join(" ")):e.removeAttr(a)},D.wpTranslateText=function(e){var t,a,o,r,n;e.isElement&&e.walk(function(e){return e.textNode&&D.wpTranslateText(e),!0}),e.textNode&&e.content.length&&"\n"!=e.content&&(t=e.content.match(/^[\s\n]+/),a=e.content.match(/[\s\n]+$/),n=$.trim(e.content),o=D.getCurrentThemeInfo(),n.length)&&(r=$.trim(n.replace(/\&[a-z0-9\#]+;/gi,""))).length&&r.match(/\w/)&&n.indexOf("____WP")<0&&(r=" _e( '"+(n=n.replace(/\\/g,"\\").replace(/'/g,"\\'"))+"', '"+o.slug+"' ); ",t?(e.content=t[0],(n=pgCreateNodeFromHtml("<?php"+r+"?>")).insertAfter(e),e=n):e.changeToPhp(r),a)&&pgCreateNodeFromHtml(a[0]).insertAfter(e)},D.wpIsPgAttribute=function(e){return e.match(/^(wp-|wc-|cms-|data-pg-collapsed|data-pg-sel|data-pg-name)/)},D.wpHasNonWPAttributes=function(e){var t=!1;return e.getAttrList().forEach(function(e){D.wpIsPgAttribute(e.name)||(t=!0)}),t},D.wpAttributesToObject=function(e,t){var a={};return e.getAttrList().forEach(function(e){D.wpIsPgAttribute(e.name)||(!t||t.indexOf(e.name)<0)&&(a[e.name]=e.value)}),a},function(e,t){var r,n,a=/\/\*\*([\s\S]*?)\*\//,o=e.match(a);return o?(r=o[1],e=e.replace(a,""),n=21,t.forEach(function(e){var t=e.val,a=e.key,o=n-(a.length+4),t=t.padStart(t.length+o," "),o=new RegExp(` \\* ${a}\\:(.*)`,"m");r.match(o)?r=r.replace(o,` * ${a}: `+t):r+=`
 * ${a}: `+t}),r=`/**${r}*/`,(e=e.trim()).startsWith("<?php")?e.replace(/<\?php([\n\r])*/m,`<?php
${r}

`):`<?php
${r}
?>
`):M(e=`<?php
/**
*/
?>

`+e,t)}),H=function(e){var t=e.slug;return`<?php
/**
 * Plugin Name:       ${e.name}
 * Plugin URI:        https://example.com/plugins/the-basics/
 * Description:       Describe what the plugin does.
 * Version:           1.0.0
 * Requires at least: 5.5
 * Requires PHP:      5.3
 * Author:            John Smith
 * Author URI:        https://author.example.com/
 * License:           GPL v2 or later
 * License URI:       https://www.gnu.org/licenses/gpl-2.0.html
 * Update URI:        https://example.com/my-plugin/
 * Text Domain:       ${e.slug}
 * Domain Path:       /languages
*/
 

if ( ! function_exists( '${t}_plugin_base_url' ) ) :
 
function ${t}_plugin_base_url() {
    global $${t}_plugin_base_url_value;
    if(empty($${t}_plugin_base_url_value)) {
        $${t}_plugin_base_url_value = untrailingslashit( plugin_dir_url( __FILE__ ) );
    }
    return $${t}_plugin_base_url_value;
}

endif;

if ( ! function_exists( '${t}_plugin_base_path' ) ) :
 
function ${t}_plugin_base_path() {
    global $${t}_plugin_base_path_value;
    if(empty($${t}_plugin_base_path_value)) {
        $${t}_plugin_base_path_value = untrailingslashit( plugin_dir_path(  __FILE__ ) );
    }
    return $${t}_plugin_base_path_value;
}

endif;
 
if ( ! function_exists( '${t}_setup' ) ) :

function ${t}_setup() {

    ${t}_plugin_base_url();
    /*
     * Make the plugin available for translation.
     * Translations can be filed in the /languages/ directory.
     */
    /* Pinegrow generated Load Text Domain Begin */
    /* Pinegrow generated Load Text Domain End */

    /*
     * Register custom menu locations
     */
    /* Pinegrow generated Register Menus Begin */

    /* Pinegrow generated Register Menus End */
    
    /*
    * Set image sizes
     */
    /* Pinegrow generated Image sizes Begin */

    /* Pinegrow generated Image sizes End */
    
}
endif; // ${t}_setup

add_action( 'after_setup_theme', '${t}_setup' );


if ( ! function_exists( '${t}_init' ) ) :

function ${t}_init() {

    /*
     * Register custom post types. You can also move this code to a plugin.
     */
    /* Pinegrow generated Custom Post Types Begin */

    /* Pinegrow generated Custom Post Types End */
    
    /*
     * Register custom taxonomies. You can also move this code to a plugin.
     */
    /* Pinegrow generated Taxonomies Begin */

    /* Pinegrow generated Taxonomies End */

}
endif; // ${t}_setup

add_action( 'init', '${t}_init' );


if ( ! function_exists( '${t}_custom_image_sizes_names' ) ) :

function ${t}_custom_image_sizes_names( $sizes ) {

    /*
     * Add names of custom image sizes.
     */
    /* Pinegrow generated Image Sizes Names Begin*/
    /* This code will be replaced by returning names of custom image sizes. */
    /* Pinegrow generated Image Sizes Names End */
    return $sizes;
}
add_action( 'image_size_names_choose', '${t}_custom_image_sizes_names' );
endif;// ${t}_custom_image_sizes_names


if ( ! function_exists( '${t}_widgets_init' ) ) :

function ${t}_widgets_init() {

    /*
     * Register widget areas.
     */
    /* Pinegrow generated Register Sidebars Begin */

    /* Pinegrow generated Register Sidebars End */
}
add_action( 'widgets_init', '${t}_widgets_init' );
endif;// ${t}_widgets_init



if ( ! function_exists( '${t}_customize_register' ) ) :

function ${t}_customize_register( $wp_customize ) {
    // Do stuff with $wp_customize, the WP_Customize_Manager object.

    /* Pinegrow generated Customizer Controls Begin */

    /* Pinegrow generated Customizer Controls End */

}
add_action( 'customize_register', '${t}_customize_register' );
endif;// ${t}_customize_register


if ( ! function_exists( '${t}_enqueue_scripts' ) ) :
    function ${t}_enqueue_scripts() {

        /* Pinegrow generated Enqueue Scripts Begin */

        /* Pinegrow generated Enqueue Scripts End */

        /* Pinegrow generated Enqueue Styles Begin */

        /* Pinegrow generated Enqueue Styles End */

    }
    add_action( 'wp_enqueue_scripts', '${t}_enqueue_scripts' );
endif;

if ( ! function_exists( '${t}_pgwp_sanitize_placeholder' ) ) :
    function ${t}_pgwp_sanitize_placeholder($input) { return $input; }
endif;

    /*
     * Resource files included by Pinegrow.
     */
    /* Pinegrow generated Include Resources Begin */
    /* Pinegrow generated Include Resources End */
?>`},L=function(e){return"<?php\nif ( ! function_exists( '"+e+"_setup' ) ) :\n\nfunction "+e+"_setup() {\n\n    /*\n     * Make theme available for translation.\n     * Translations can be filed in the /languages/ directory.\n     */\n    /* Pinegrow generated Load Text Domain Begin */\n    load_theme_textdomain( '"+e+"', get_template_directory() . '/languages' );\n    /* Pinegrow generated Load Text Domain End */\n\n    // Add default posts and comments RSS feed links to head.\n    add_theme_support( 'automatic-feed-links' );\n\n    /*\n     * Let WordPress manage the document title.\n     */\n    add_theme_support( 'title-tag' );\n    \n    /*\n     * Enable support for Post Thumbnails on posts and pages.\n     */\n    add_theme_support( 'post-thumbnails' );\n    //Support custom logo\n    add_theme_support( 'custom-logo' );\n\n    // Add menus.\n    register_nav_menus( array(\n        'primary' => __( 'Primary Menu', '"+e+"' ),\n        'social'  => __( 'Social Links Menu', '"+e+"' ),\n    ) );\n\n/*\n     * Register custom menu locations\n     */\n    /* Pinegrow generated Register Menus Begin*/\n    /* This code will be replaced by register_nav_menu calls. */\n    /* Pinegrow generated Register Menus End */\n    \n/*\n    * Set image sizes\n     */\n    /* Pinegrow generated Image Sizes Begin*/\n    /* This code will be replaced by image size definitions. */\n    /* Pinegrow generated Image Sizes End */\n    \n    /*\n     * Switch default core markup for search form, comment form, and comments\n     * to output valid HTML5.\n     */\n    add_theme_support( 'html5', array(\n        'search-form', 'comment-form', 'comment-list', 'gallery', 'caption'\n    ) );\n\n    /*\n     * Enable support for Post Formats.\n     */\n    add_theme_support( 'post-formats', array(\n        'aside', 'image', 'video', 'quote', 'link', 'gallery', 'status', 'audio', 'chat'\n    ) );\n\n    /*\n     * Enable support for Page excerpts.\n     */\n     add_post_type_support( 'page', 'excerpt' );\n}\nendif; // "+e+"_setup\n\nadd_action( 'after_setup_theme', '"+e+"_setup' );\n\n\nif ( ! function_exists( '"+e+"_init' ) ) :\n\nfunction "+e+"_init() {\n\n    \n    // Use categories and tags with attachments\n    register_taxonomy_for_object_type( 'category', 'attachment' );\n    register_taxonomy_for_object_type( 'post_tag', 'attachment' );\n\n    /*\n     * Register custom post types. You can also move this code to a plugin.\n     */\n    /* Pinegrow generated Custom Post Types Begin*/\n    /* This code will be replaced by register_post_type calls. */\n    /* Pinegrow generated Custom Post Types End */\n    \n    /*\n     * Register custom taxonomies. You can also move this code to a plugin.\n     */\n    /* Pinegrow generated Taxonomies Begin*/\n    /* This code will be replaced by register_taxonomy calls. */\n    /* Pinegrow generated Taxonomies End */\n\n}\nendif; // "+e+"_setup\n\nadd_action( 'init', '"+e+"_init' );\n\n\nif ( ! function_exists( '"+e+"_custom_image_sizes_names' ) ) :\n\nfunction "+e+"_custom_image_sizes_names( $sizes ) {\n\n    /*\n     * Add names of custom image sizes.\n     */\n    /* Pinegrow generated Image Sizes Names Begin*/\n    /* This code will be replaced by returning names of custom image sizes. */\n    /* Pinegrow generated Image Sizes Names End */\n    return $sizes;\n}\nadd_action( 'image_size_names_choose', '"+e+"_custom_image_sizes_names' );\nendif;// "+e+"_custom_image_sizes_names\n\n\n\nif ( ! function_exists( '"+e+"_widgets_init' ) ) :\n\nfunction "+e+"_widgets_init() {\n\n    /*\n     * Register widget areas.\n     */\n    /* Pinegrow generated Register Sidebars Begin*/\n    /* This code will be replaced by register_sidebar calls. */\n    /* Pinegrow generated Register Sidebars End */\n}\nadd_action( 'widgets_init', '"+e+"_widgets_init' );\nendif;// "+e+"_widgets_init\n\n\n\nif ( ! function_exists( '"+e+"_customize_register' ) ) :\n\nfunction "+e+"_customize_register( $wp_customize ) {\n    // Do stuff with $wp_customize, the WP_Customize_Manager object.\n\n    /* Pinegrow generated Customizer Controls Begin */\n    /* Pinegrow generated Customizer Controls End */\n\n}\nadd_action( 'customize_register', '"+e+"_customize_register' );\nendif;// "+e+"_customize_register\n\n\nif ( ! function_exists( '"+e+"_enqueue_scripts' ) ) :\n    function "+e+"_enqueue_scripts() {\n\n        /* Pinegrow generated Enqueue Scripts Begin */\n        /* Pinegrow generated Enqueue Scripts End */\n\n        /* Pinegrow generated Enqueue Styles Begin */\n        /* Pinegrow generated Enqueue Styles End */\n\n    }\n    add_action( 'wp_enqueue_scripts', '"+e+"_enqueue_scripts' );\nendif;\n\nfunction pgwp_sanitize_placeholder($input) { return $input; }\n/*\n * Resource files included by Pinegrow.\n */\n/* Pinegrow generated Include Resources Begin*/\n/* Pinegrow generated Include Resources End */\n?>"};D.updateGeneratedSection=function(e,t,a,o,r){var n,i,s,l=new RegExp("\\/\\*\\s*Pinegrow generated "+t+" Begin\\s*\\*\\/[\\s\\S]*?\\/\\*\\s*Pinegrow generated "+t+" End\\s*\\*\\/","ig");if(!(s=isApp()?(n=require("fs")).readFileSync(e,{encoding:"utf8"}):(i=pinegrow.getCurrentProject()).getContentOfUrlWithLookup(e)).match(l)){if(!o)throw"Section "+t+" not found in "+e+".";if(!o.match(l))throw"Code for section "+t+" does not contain section markings.";s=s.replace("?>",o+"?>")}s=s.replace(l,"/* Pinegrow generated "+t+" Begin */\n"+a+"\n    /* Pinegrow generated "+t+" End */"),isApp()?n.writeFileSync(e,s,{encoding:"utf8"}):(r.writeFile(e,s),i.setContentOfUrlWithLookup(e,s))},D.convertNegativeCheckboxFieldsToSelect=function(e){$.each(e,function(e,t){"checkbox"==t.type&&t.value&&t.default_value&&t.negvalue&&t.value==t.default_value?(t.type="select",t.show_empty=!0,t.options=[{key:"false",name:"No"}],t.placeholder="Yes",delete t.value,delete t.negvalue,delete t.default_value):"text"===t.type&&t.options&&void 0===t.fill_list_on_open?(t.open_list_on_focus=!0,t.fill_list_on_open=!0):"select"===t.type&&void 0===t.can_add_items&&(t.can_add_items=!0),t.parameter_name})},D.autoAddActionsToPage=function(e){new PGWPHelperForWebflow(D).autoAddActionsToPage(e)},D.wpDetectFramework=function(e){return e.findOne('meta[content="Webflow"]')?"webflow":null},D.wpGetSectionLabelField=function(e,t,a){return $.extend({type:"label",name:e,action:"none",class:"pg-action-info-label",helptext:t},a||{})},D.wpGetInfoHTMLField=function(e,t){return $.extend({type:"displayhtml",name:e,action:"none",class:"pg-action-info-label-text"},t||{})},D.wpShouldWriteFile=function(e,t,a){if(a){var o=pinegrow.getCurrentProject();if(o&&o.getFile(a))return pinegrow.showQuickError(a+` was not generated because the file is present in the source project.`),!1}return!0},D.wpGetFilePathInExportDir=function(e,t,a){var o;return isApp()?(o=require("path"),a?o.join(e,t,a):o.join(e,t)):a?t+"/"+a:t},D.wpIsViewStagingInBrowserEnabled=function(){return!!pgGetCookieByName("pinegrow_staging")},D.wpIsTestingModeEnabled=function(e){return"1"===(e=e||pinegrow.getCurrentProjectInfo()).getSetting("wp-staging-mode","0")},D.wpProtectPHPCodeAgainsSyntaxErrors=function(e,t,a,o,r){var n=/(\<\?php[\s\r\n]*[^\/])(\/\*[\s\S]*?\*\/)/m,i=e.match(n),s="",l="",i=((l=i?(s=`<?php
${i[2]}
?>`,e.replace(n,"$1")):e).trim().endsWith("?>"),s),n=`pinegrow-log-${D.wpIsPlugin()?"plugin":"theme"}-`+D.current_theme_info.slug;return t&&(i+=`<?php
$pinegrow_run_code = true;

/* Begin - Prevent broken project from crashing the Pinegrow editor */
if(defined('DOING_AJAX') && DOING_AJAX && !empty($_REQUEST['action']) && strpos($_REQUEST['action'], 'pinegrow_api') === 0) {
    $pinegrow_run_code = false; //do not run during Pinegrow API calls
}
if(strpos($_SERVER['REQUEST_URI'], '/wp-admin/admin.php?page=pinegrow-projects') === 0 || strpos($_SERVER['REQUEST_URI'], '/wp-login') === 0 || (strpos($_SERVER['REQUEST_URI'], '/wp-admin/plugins.php') === 0 && strpos($_SERVER['REQUEST_URI'], '/wp-admin/plugins.php?action=activate') === false)) {
    //do not load when editor is loading, during login and plugin manipulation in admin, except when plugin is being activated
    $pinegrow_run_code = false;
}
`,r&&(i+=a?`
if(!isset($_COOKIE['pinegrow_staging']) && file_exists( dirname( dirname( __FILE__ ) ) .  '/${D.current_theme_info.slug}/${D.current_theme_info.slug}.php' ) ) {
    //exit if we are not in the staging mode and the production build exists
    $pinegrow_run_code = false;
}                
`:`
if(isset($_COOKIE['pinegrow_staging']) && file_exists( dirname( dirname( __FILE__ ) ) .  '/${D.current_theme_info.slug}_staging/${D.current_theme_info.slug}.php' ) ) {
    //exit if we are in the staging mode and the staging build exists
    $pinegrow_run_code = false;
}             
`),i=i+`if( $pinegrow_run_code ) :
`+`
/* End - Prevent broken project from crashing the Pinegrow editor */            
?>`),i+=o?`<?php
/* Run the code through eval in order to catch any syntax errors */            
try {
    eval(' ?>${D.wpEscapeSingleQuotes(l)}');
}
catch( Throwable $error ) {
    $log = get_option( '${n}' );
    if( empty($log) ) $log = '';
    $log = 'ERROR on '. wp_date( 'Y-m-d H:i:s', time() ) .":\\n\\r" . $error . "\\n\\n" . $log;
    update_option( '${n}', $log, false );
}`:l,t&&(i.trim().endsWith("?>")&&(i+="<?php"),i+=`
endif; //end if ( $pinegrow_run_plugin )
`),i}});class PGWPHeaderParser{constructor(e,t){this.header_re=/^([\s\n]*\/\*)([\s\S]*?\*\/)/m,this.content=e,this.name=t||"Theme header",this.items=this.parseHeader()}getHeader(){var e=this.content.match(this.header_re);return e?e[2]:(this.content="/*\n*/\n"+this.content,this.getHeader())}hasHeader(){return 0<this.items.length}parseHeader(){var n=[];return this.getHeader().split("\n").forEach(function(e){var t,a,o,r=e.split(":");2<=r.length?(o=r.shift(),r=r.join(":").trim(),t="",o=((a=o.match(/^([\s\*]*)(.*)$/))?(t=a[1],a[2]):o).trim(),n.push({key:o,value:r,prefix:t})):n.push({text:e})}),n}getValue(e){for(var t=0;t<this.items.length;t++)if(this.items[t]?.key===e)return this.items[t].value;return null}setValue(e,t){for(var a=0;a<this.items.length;a++)if(this.items[a]?.key===e)return void(this.items[a].value=t);this.items.push({key:e,value:t,prefix:""})}outputHeader(){var t=[];return this.items.forEach(function(e){e.key?t.push(""+e.prefix+e.key+`: `+e.value):t.push(e.text),0}),t.join("\n")}getContent(){return this.content.replace(this.header_re,"$1"+this.outputHeader())}}function wpTestHeaderParser(){console.log("Testing header parser..."),[{h:`/*
Theme Name: Twenty Twenty
Theme URI: https://wordpress.org/themes/twentytwenty/
Author: the WordPress team
Author URI: https://wordpress.org/
Description: Our default theme for 2020 is designed to take full advantage of the flexibility of the block editor.
Tags: one-column, custom-background
Version: 1.3
Text Domain: twentytwenty:muki
This theme, like WordPress, is licensed under the GPL.
Use it to make something cool, have fun, and share what you've learned with others.
*/

body {
  background-color: #fff;
  /* 
  Theme name: CSS
  */
}`},{h:`
/*
Theme Name: Twenty Twenty
Theme URI: https://wordpress.org/themes/twentytwenty/
Author: the WordPress team
Author URI: https://wordpress.org/
Description: Our default theme for 2020 is designed to take full advantage of the flexibility of the block editor.
Tags: one-column, custom-background
Version: 1.3
Text Domain: twentytwenty:muki
This theme, like WordPress, is licensed under the GPL.
Use it to make something cool, have fun, and share what you've learned with others. */

body {
  background-color: #fff;
  /* 
  Theme name: CSS
  */
}`},{h:`
/*
* Theme Name: Twenty Twenty
* Theme URI: https://wordpress.org/themes/twentytwenty/
Author: the WordPress team
Author URI: https://wordpress.org/
Description: Our default theme for 2020 is designed to take full advantage of the flexibility of the block editor.
Tags: one-column, custom-background
 * Version: 1.3
Text Domain: twentytwenty:muki
This theme, like WordPress, is licensed under the GPL.
Use it to make something cool, have fun, and share what you've learned with others. */

body {
  background-color: #fff;
  /* 
  Theme name: CSS
  */
}`},{h:`h1{} 
/*
Theme Name: Twenty Twenty
Theme URI: https://wordpress.org/themes/twentytwenty/
Author: the WordPress team
Author URI: https://wordpress.org/
Description: Our default theme for 2020 is designed to take full advantage of the flexibility of the block editor.
Tags: one-column, custom-background
Version: 1.3
Text Domain: twentytwenty:muki
This theme, like WordPress, is licensed under the GPL.
Use it to make something cool, have fun, and share what you've learned with others.
*/

body {
  background-color: #fff;
  /* 
  Theme name: CSS
  */
}`,fail:!0}].forEach(function(t){try{var e=new PGWPHeaderParser(t.h),a=(e.getContent()!==t.h&&(console.error(`Source != Result`),console.warn(t.h),console.warn(e.getContent())),e.getValue("Theme Name")),o=("Twenty Twenty"!==a&&console.error(`Wrong theme name`,a,t.h),e.setValue("Version","2.0"),e.getValue("Version")),r=("2.0"!==o&&console.error(`Wrong version`,o,t.h),e.setValue("Bubi","Cool!"),e.getValue("Bubi"));"Cool!"!==r&&console.error(`Wrong Bubi`,r,t.h)}catch(e){t.fail||console.error(`Failed parsing:`,t.h,e)}})}pgIsDev()&&wpTestHeaderParser();var PGWPHelperForWebflow=function(u){this.autoAddActionsToPage=function(e){function n(e,t){var a;return c?((a=o.get(c))||o.set(c,a={}),void 0===t?a[e]||null:void(a[e]=t)):null}var i=["primary","social"],s=0,l=new PgApi,p=new PgCollection,c=null,o=new Map;e.sourceNode.walkSelfAndChildren(function(e){if(e.isElement){if(e.hasAttr("cms-template-part")&&!e.hasAttr("cms-template-part-define")||e.hasAttr("wp-include-template-part")&&!e.hasAttr("wp-template-part"))return"skip_children";if(u.hasWPActions(e))return!0;if(e.isSelector("[cms-no-export],[wp-no-export],[wp-preview]"))return"skip_children";c=e.closest("[cms-post],[wp-loop]");var t=e.getClasses();if(0<=t.indexOf("w-nav-menu")){var a=!1,o=(i.length<=s?(r=`menu_`+s,a=`Menu `+s):r=i[s],s++,u.getWPAction("cms-menu")),r={"cms-menu":r};a&&(r["cms-menu-register"]=!0,r["cms-menu-register-description"]=a),l.addAction(e,o,{no_change_event:!0},r),p.add(e)}else if(0<=t.indexOf("w-dyn-list")){var o=u.getWPAction("cms-post"),r={"cms-post":c?"query":"loop","cms-post-items-container":e.findOne("> .w-dyn-items")?"> .w-dyn-items":null,"cms-post-repeat":e.findOne("> .w-dyn-items > .w-dyn-item")?"> .w-dyn-items > .w-dyn-item":null,"cms-post-show-empty-element":e.findOne("> .w-dyn-empty")?"> .w-dyn-empty":null};l.addAction(e,o,{no_change_event:!0},r),p.add(e)}else if(0<=t.indexOf("w-form")){var o=u.getWPAction("cms-form"),r={"cms-form-send-email":!0,"cms-form-save-as-post-type":!0,"cms-form-post-type":"form_contact","cms-form-post-type-register":!0,"cms-form-post-type-name":"Form contacts","cms-form-post-type-name-singular":"Form contact","cms-form-success-element":e.findOne("> .w-form-done")?".w-form-done":null,"cms-form-error-element":e.findOne("> .w-form-fail")?".w-form-fail":null};l.addAction(e,o,{no_change_event:!0},r),p.add(e)}else{if(0<=t.indexOf("w-pagination-wrapper"))return o=u.getWPAction("cms-pagination"),a=c?u.wpInsight.getQueryName(c):null,r={"cms-pagination-fields":!0,"cms-pagination-prev":e.findOne(".w-pagination-previous")?".w-pagination-previous":null,"cms-pagination-next":e.findOne(".w-pagination-next")?".w-pagination-next":null},a&&(r["cms-pagination-post-type"]=a),l.addAction(e,o,{no_change_event:!0},r),p.add(e),"skip_children";if(0<=t.indexOf("w-dyn-empty"))return"skip_children";if(0<=t.indexOf("w-nav-brand")&&"a"===e.tagName){var o=u.getWPAction("cms-site-link"),r={"cms-site-link":"home"};l.addAction(e,o,{no_change_event:!0},r),p.add(e)}else if(c)if("img"===e.tagName)n("featured")||(o=u.getWPAction("cms-post-image"),l.addAction(e,o,{no_change_event:!0}),p.add(e),n("featured",!0));else{if(0<=t.indexOf("w-richtext"))return o=u.getWPAction("cms-post-content"),l.addAction(e,o,{no_change_event:!0}),p.add(e),"skip_children";e.isSelector("h1,h2,h3,h4,.h1,.h2,.h3,.h4")?n("title")||(o=u.getWPAction("cms-post-title"),l.addAction(e,o,{no_change_event:!0}),p.add(e),n("title",!0)):"a"===e.tagName&&(a=e.html(),t=e.getAttr("class")||"",0<=a.indexOf("category")||0<=t.indexOf("category")?(o=u.getWPAction("cms-tags"),r={},e.isEmpty()||e.hasTextOnly()?r["cms-tags-display"]="this":r["cms-tags-display"]="child",l.addAction(e,o,{no_change_event:!0},r)):(o=0<=a.indexOf("author")||0<=t.indexOf("author")?u.getWPAction("cms-author-field"):u.getWPAction("cms-post-link"),l.addAction(e,o,{no_change_event:!0})),p.add(e))}}}return!0}),0<p.getLength()?(pinegrow.changeManager.didChange(p,"Auto WP actions"),pinegrow.showQuickMessage(p.getLength()+` WordPress actions added.`)):pinegrow.showQuickMessage(`Unable to auto-add any WordPress actions.`)}},pgWordpressSmart=function(Q,J){function I(e,t){t.removeAttrIfStartsWith(e.attribute)}function W(a,o,e){I(a,o),o.setAttribute(a.attribute,"-"in e?e["-"]:void 0),$.each(e,function(e,t){"-"!=e&&o.setAttribute(a.attribute+"-"+e,t)})}function n(e){return e+" - Smart"}function F(e){var t=e.getAttr("cms-site-terms"),a=[],o=(t||a.push("Taxonomy is not selected."),{taxonomy:t}),r=(e.getAttr("cms-site-terms-order")||"name ASC").split(" "),r=(o.orderby=r[0],o.order=r[1],"meta_value"===o.orderby&&((r=e.getAttr("cms-site-terms-meta-name"))?(o.meta_key=r,e.hasAttr("cms-site-terms-meta-num")&&(o.orderby="meta_value_num")):o.orderby="name"),Q.wpGetPgelFromSelector(e,e.getAttr("cms-site-terms-items"),null)),n=Q.wpGetPgelFromSelector(e,e.getAttr("cms-site-terms-item")),i=Q.wpGetPgelFromSelector(e,e.getAttr("cms-site-terms-empty")),s=(e.getAttr("cms-site-terms-items")&&!r&&a.push("Invalid Items container selector."),e.getAttr("cms-site-terms-item")&&!n&&a.push("Invalid Repeated item container selector."),e.getAttr("cms-site-terms-empty")&&!i&&a.push("Invalid Show if empty selector."),r=(r=n||!r||(n=r.getFirstChild())?r:null)||e,"a"===(n=n||e).tagName?n:n.findOne("a")),l=(s=(s=Q.wpGetPgelFromSelector(n,e.getAttr("cms-site-terms-item-link"),s))||n,Q.wpGetPgelFromSelector(e,e.getAttr("cms-site-terms-item-name"))),p=Q.wpGetPgelFromSelector(e,e.getAttr("cms-site-terms-item-count")),c=(e.getAttr("cms-site-terms-item-name")&&!l&&a.push("Invalid Item name selector."),e.getAttr("cms-site-terms-item-count")&&!p&&a.push("Invalid Item count selector."),l=l||s,{}),u=(Q.parseRangeValue(e.getAttr("cms-site-terms-range"),"$dummy",c),0),m=9999999,d=("start"in c&&c.start.match(/^[0-9]+$/)&&(u=parseInt(c.start)),"end"in c&&c.end.match(/^[0-9]+$/)&&(m=parseInt(c.end)),"false"!==e.getAttr("cms-site-terms-hide-empty"));return o.hide_empty=d,{taxonomy:t,args:o,container:r,item:n,empty:i,a:s,item_name:l,item_count:p,hide_empty:d,range_info:c,range_start:u,range_end:m,errors:a}}for(var e=[],a=(J.list.push(function(e){"body"==e.tagName&&(e.document.findOne("[wp-body-class]")||e.setAttribute("wp-body-class"),e.document.findOne("[wp-site-content]")||(e.setAttribute("wp-site-content"),e.setAttribute("wp-site-content-auto")))}),Q.addTag("cms-site-name",n("Site name"),null,function(e){E(a,e,a.mapAction)})),o=(a.mapAction=function(e,t){t.setAttribute("wp-site-name"),"a"===t.tagName&&(t.setAttribute("wp-href","url"),t.hasAttribute("rel")||t.setAttribute("rel","home"))},a.autoAdd=function(e,t){if("h1"===e.tagName&&!t.getHasAction(a))return W(a,e,{}),t.setHasAction(a),!0},a.on_show_live_data=async function(e,t){t.setHtml(e,await t.getSiteName(),a),"a"===e.tagName&&(t.setAttribute(e,"href",await t.getSiteHomeUrl(),a),e.hasAttribute("rel")||t.setAttribute(e,"rel","home",a))},a.addMeta({tags:[Q.tag_ret_string,Q.tag_ret_url,Q.tag_set_attr_href,Q.tag_set_content,Q.tag_use_site],helptext:"Display the site title and set a href to home if the element is an A element.",helplink:"site-name",extra_name:null}),e.push(a),Q.addTag("cms-site-desc",n("Site description"),null,function(e){E(o,e,o.mapAction)})),O=(o.mapAction=function(e,t){t.setAttribute("wp-site-desc")},o.on_show_live_data=async function(e,t){t.setHtml(e,await t.getSiteDescription(),o)},o.addMeta({tags:[Q.tag_ret_string,Q.tag_set_content,Q.tag_use_site],helptext:"Display the site title description.",helplink:"site-description",extra_name:null}),e.push(o),Q.addTag("cms-site-link",n("Site link"),null,function(e){if(e.hasAttr("cms-site-link")){var t=null;switch(e.getAttr("cms-site-link")){case"home":t="home_url()";break;case"latest_posts":t=`get_post_type_archive_link( 'post' )`;break;case"posts_archive":(o=e.getAttr("cms-site-link-post-type")||"post")&&(t=`get_post_type_archive_link( ${Q.quoteParam(o)} )`);break;case"post":var a=e.getAttr("cms-site-link-post"),o=e.getAttr("cms-site-link-post-post-type")||"post";a&&o&&(t=`get_the_permalink( ${Q.wpGetClass("PG_Helper")}::getPostFromSlug( ${Q.quoteParam(a)}, ${Q.quoteParam(o)} ) )`);break;case"page":o="page";(a=e.getAttr("cms-site-link-post"))&&o&&(t=`get_page_link( ${Q.wpGetClass("PG_Helper")}::getPostFromSlug( ${Q.quoteParam(a)}, 'page' ) )`);break;case"category":o=e.getAttr("cms-site-link-category");o&&(t=`get_category_link( ${Q.wpGetClass("PG_Helper")}::getTermFromSlug( ${Q.quoteParam(o)}, 'category' ) )`);break;case"tag":(r=e.getAttr("cms-site-link-tag"))&&(t=`get_category_link( ${Q.wpGetClass("PG_Helper")}::getTermFromSlug( ${Q.quoteParam(r)}, 'post_tag' ) )`);break;case"term":var r=e.getAttr("cms-site-link-term"),a=e.getAttr("cms-site-link-taxonomy");r&&a&&(t=`get_category_link( ${Q.wpGetClass("PG_Helper")}::getTermFromSlug( ${Q.quoteParam(r)}, ${Q.quoteParam(a)} ) )`)}t&&e.setAttr("href",`<?php echo esc_url( ${t} ); ?>`)}},{"cms-site-link":{type:"select",name:"Link to",action:"element_attribute",keep_attribute_if_empty:!0,validate:Q.required,options:[{key:"home",name:"Home"},{key:"latest_posts",name:"Latest posts"},{key:"posts_archive",name:"Post type archive"},{key:"post",name:"Post"},{key:"page",name:"Page"},{key:"category",name:"Category"},{key:"tag",name:"Tag"},{key:"term",name:"Term"}],helptext:`<p>Choose the link destination:</p><ul>
<li><b>Home</b> - home page</li>
<li><b>Latest posts</b> - the page showing the latest posts</li>
<li><b>Post type archive</b> - the latest posts page for a custom post type</li>
<li><b>Post</b> - link to a specific post</li>
<li><b>Page</b> - link to a specific page</li>
<li><b>Category</b> - category archive</li>
<li><b>Tag</b> - tag archive</li>
<li><b>Term</b> - term archive, also for custom taxonomies</li>
</ul>`},"cms-site-link-post-type":{type:"text",name:"Post type",action:"element_attribute",placeholder:Q.defaultValue("post"),options:Q.wpInsight.getPostTypes,open_list_on_focus:!0,show_if:"cms-site-link==posts_archive",helptext:`<p>Select to which post type archive the link should go.</p>`},"cms-site-link-post":{type:"text",name:"Post slug or id",action:"element_attribute",placeholder:Q.forExample("my-post"),validate:Q.required,show_if:"cms-site-link==post||page",helptext:`<p>Enter the post slug or ID. If you want to link to the current post within the Show Posts action use Post Link action instead.</p>`},"cms-site-link-post-post-type":{type:"text",name:"Post type if using slug",action:"element_attribute",placeholder:Q.defaultValue("post"),validate:function(e,t,a){if((e.getAttr("cms-site-link-post")||"").match(/[a-z]/i)&&!a)return"Post type is required"},options:Q.wpInsight.getPostTypes,open_list_on_focus:!0,show_if:function(e,t){var a=t.getAttr("cms-site-link-post")||"";return!("post"!==t.getAttr("cms-site-link")||!a||!a.match(/[a-z]/i))},helptext:`<p>If you're addressing the post by its slug, you also need to specify the post type. WordPress needs the post type information in order to lookup posts by their slugs.</p>`},"cms-site-link-category":{type:"text",name:"Category slug or id",action:"element_attribute",placeholder:Q.forExample("featured"),validate:Q.required,show_if:"cms-site-link==category",helptext:`<p>Enter the category slug or ID.</p>`},"cms-site-link-tag":{type:"text",name:"Tag slug or id",action:"element_attribute",placeholder:Q.forExample("product"),validate:Q.required,show_if:"cms-site-link==tag",helptext:`<p>Enter the tag slug or ID.</p>`},"cms-site-link-term":{type:"text",name:"Term slug or id",action:"element_attribute",placeholder:Q.forExample("development"),validate:Q.required,show_if:"cms-site-link==term",helptext:`<p>Enter the term slug or ID.</p>`},"cms-site-link-taxonomy":{type:"text",name:"Taxonomy",action:"element_attribute",placeholder:Q.forExample("post_tag"),validate:Q.required,options:Q.wpInsight.getTaxonomies,open_list_on_focus:!0,show_if:"cms-site-link==term",helptext:`<p>Select the taxonomy to which the term belongs.</p>`}})),r=(O.on_show_live_data=async function(e,t){var a=e.getAttr("cms-site-link"),o=e.getAttr("cms-site-link-post"),r=null,n=await t.getSiteUrls();switch(a){case"home":r=n?.home;break;case"latest_posts":r=n?.posts||n?.home;break;case"posts_archive":(i=e.getAttr("cms-site-link-post-type")||"post")&&(r=await t.getPostTypeArchive(i));break;case"post":var i=e.getAttr("cms-site-link-post-post-type")||"post";o&&i&&(r=(await t.getPostByIdOrSlug(o,i))?.link);break;case"page":i="page";o&&i&&(r=(await t.getPostByIdOrSlug(o,i))?.link);break;case"category":i=e.getAttr("cms-site-link-category");i&&(r=(await t.getTerm("category",i))?.link);break;case"tag":(s=e.getAttr("cms-site-link-tag"))&&(r=(await t.getTerm("post_tag",s))?.link);break;case"term":var s=e.getAttr("cms-site-link-term"),i=e.getAttr("cms-site-link-taxonomy");s&&i&&(r=(await t.getTerm(i,s))?.link)}r&&t.setAttribute(e,"href",r,O)},O.mapAction=function(e,t){t.setAttribute("wp-site-desc")},O.addMeta({tags:[Q.tag_ret_string,Q.tag_set_content,Q.tag_use_site],helptext:"Set a link to home, archives and other pages.",helplink:"site-link",extra_name:null}),e.push(O),Q.addTag("cms-site-logo",n("Site logo"),null,function(e){E(r,e,r.mapAction)})),u=(r.mapAction=function(e,t){var a;"a"===t.tagName?(t.setAttribute("wp-call-function","get_custom_logo()"),t.setAttribute("wp-call-function-echo","true")):(t.setAttribute(a="wp-cz-theme-mod","custom_logo"),t.setAttribute(a+"-check","true"),t.setAttribute(a+"-set","attr"),t.setAttribute(a+"-set-attr","src"),t.setAttribute(a+"-set-get-image"),t.setAttribute(a+"-set-get-image-size","full"),"img"!==t.tagName&&"svg"===t.tagName&&(t.setAttribute("wp-change-tag","img"),t.setAttribute("wp-change-tag-attrs","src,alt,style,class,aria*,data*,id"),t.setAttribute("wp-change-tag-remove-children","true")))},r.on_can_add_action=function(e,t,a){return"a"===e.tagName||"img"===e.tagName||"svg"===e.tagName||(pinegrow.showQuickError("Site Logo can only be displayed on &lt;a&gt;, &lt;img&gt; and &lt;svg&gt; elements."),!1)},r.on_show_live_data=async function(e,t){var a=await t.getSiteLogo();a?(t.setAttribute(e,"src",a,r),t.showPgel(e)):t.hidePgel(e)},r.addMeta({tags:[Q.tag_ret_string,Q.tag_set_content,Q.tag_use_site],helptext:"Display the site custom logo, as set in the Customizer.",helplink:"site-logo",extra_name:null}),e.push(r),Q.addTag("cms-site-terms",n("Site Tags &amp; Categories"),null,function(a){var e,o,r,n,i,s,l,p,c,u,m,t,d,h;a.hasAttr("cms-site-terms")&&(e=(t=F(a)).taxonomy)&&(o=t.args,r=t.container,n=t.item,i=t.empty,s=t.a,n.setData("wp-repeated-item",!0),s.setData("wp-import",!0),l=t.item_name,p=t.item_count,c=a.hasAttr("cms-site-terms-continue"),u="$term_i",m=Q.parseRangeValue(a.getAttr("cms-site-terms-range"),u),a.hasAttr(t="cms-site-terms-register")&&(d=a.getAttribute(t+"-name"),h=a.getAttribute(t+"-name-plural")||d+"s",d)&&h&&(a.setAttribute("wp-taxonomy",e),a.setAttribute("wp-taxonomy-types",a.getAttribute(t+"-types")||"post, page"),a.setAttribute("wp-taxonomy-name",h),a.setAttribute("wp-taxonomy-name-singular",d)),J.addToChanges(function(){var e=J,t=(e.resetAfterMap(),`get_terms( ${e.getPhpArrayForValues(o,a)} )`);e.before(a,`<?php $terms = ${t=c?`isset( $terms ) ? $terms : `+t:t} ?>`),e.before(r,`<?php if( !empty( $terms ) && !is_wp_error( $terms ) ) : ?>`),m&&e.before(n,`<?php ${u} = 0; ?>`),e.before(n,`<?php foreach( $terms as $term ) : ?>`),m&&(e.before(n,m),e.after(n,`<?php endif; ?>`)),m&&e.after(n,`<?php ${u}++; ?>`),e.after(n,`<?php endforeach; ?>`),e.after(r,`<?php endif; ?>`),i&&(e.before(i,`<?php if( empty( $terms ) ) : ?>`),e.after(i,`<?php endif; ?>`)),"a"===s.tagName&&(s.setAttr("href",`<?php echo esc_url( get_term_link( $term ) ); ?>`),s.setAttr("rel","tag")),e.toPhpHtml(l,`echo $term->name;`),p&&e.toPhpHtml(p,`echo $term->count;`)},this,[]))},{"cms-site-terms":{type:"text",name:"Taxonomy",action:"element_attribute",validate:Q.required,placeholder:Q.forExample("post_tag"),options:Q.wpInsight.getTaxonomies,open_list_on_focus:!0,helptext:`<p>Select the taxonomy, like category, post_tag or any of custom taxonomies.</p>`},"cms-site-terms-register":{type:"checkbox",name:"Register taxonomy",action:"element_attribute",value:"true",empty_attribute:!0,show_if:function(e,t){return["post_tag","category"].indexOf(e["cms-site-terms"]||"")<0},helptext:`<p>Register a new custom taxonomy.</p>`},"cms-site-terms-register-name":{type:"text",name:"Name singular",action:"element_attribute",validate:Q.required,placeholder:Q.forExample("Tag"),show_if:"cms-site-terms-register",helptext:`<p>Name of the singular term, for example Car brand</p>`},"cms-site-terms-register-name-plural":{type:"text",name:"Name plural",action:"element_attribute",placeholder:Q.defaultValue("<name>s"),show_if:"cms-site-terms-register",helptext:`<p>Plural name, for example Car brands.</p>`},"cms-site-terms-register-types":{type:"text",name:"Post types",action:"element_attribute",placeholder:Q.defaultValue("post, page"),options:Q.wpInsight.getPostTypes,open_list_on_focus:!0,show_if:"cms-site-terms-register",helptext:`<p>List the post types that will use this taxonomy.</p>`},"cms-site-terms-options":{type:"label",name:"Options",action:"element_attribute",attribute:"cms-site-terms-structure",class:"pg-action-info-label"},"cms-site-terms-order":{type:"select",name:"Order by",action:"element_attribute",default_value:"name ASC",options:[{key:"name ASC",name:"name - Up"},{key:"name DESC",name:"name - Down"},{key:"slug ASC",name:"slug - Up"},{key:"slug DESC",name:"slug - Down"},{key:"id ASC",name:"id - Up"},{key:"id DESC",name:"id - Down"},{key:"description ASC",name:"description - Up"},{key:"description DESC",name:"description - Down"},{key:"count ASC",name:"count - Up"},{key:"count DESC",name:"count - Down"},{key:"meta_value ASC",name:"meta_value - Up"},{key:"meta_value DESC",name:"meta_value - Down"}],helptext:`<p>How to order the displayed terms.</p>`},"cms-site-terms-meta-name":{type:"text",name:"Meta field name",action:"element_attribute",show_if:"cms-site-terms-order==meta_value ASC||meta_value DESC",validate:Q.required,helptext:`<p>Enter the name of a term field that will be used for ordering the terms.</p>`,options:Q.wpInsight.getLiveFieldsList},"cms-site-terms-meta-num":{type:"checkbox",name:"Meta value is numeric",action:"element_attribute",value:"true",empty_attribute:!0,show_if:"cms-site-terms-order==meta_value ASC||meta_value DESC",helptext:`<p>Are values of this field numbers?</p>`},"cms-site-terms-hide-empty":{type:"checkbox",name:"Hide empty",action:"element_attribute",value:"true",negvalue:"false",default_value:"true",helptext:`<p>Don't show terms that are not associated with any posts. For example, not showing empty categories.</p>`},"cms-site-terms-range":{type:"text",name:"Range of items to show",action:"element_attribute",placeholder:Q.forExample("2 or 0-5 (0 is first)"),validate:Q.validateRangeValue,helptext:`<p>Display only certain terms. Use number - for example 2, or range - for example 0-5. 0 is the first element.</p><p>This is useful when having to display terms in fixed positions on the page, for example in CSS grid items. For example, we can display the first five terms (0-4) in one grid cell and the rest (5-99) in another.</p>`},"cms-site-terms-continue":{type:"checkbox",name:"Continue previous query",action:"element_attribute",value:"true",empty_attribute:!0,show_if:function(e,t){return null!==t.getAttr("cms-site-terms-range")},helptext:`<p>This is useful in connection with using the Range of items to show. Instead of fetching the terms from the database again we can just continue displaying a different range of terms that were returned by the preceeding Site Terms action.</p><p>Note, using this without actually having a preceeding Site Terms action can lead to a PHP error.</p>`},"cms-site-terms-structure":{type:"label",name:"Display structure",action:"element_attribute",attribute:"cms-site-terms-structure",class:"pg-action-info-label",helptext:`<p>By default, the main Site Tags &amp; Categories element is repeated for all returned terms. Term link and name is added to the first link element within the repeated element, or to the repeated element itself.</p><p>You can customize the display structure by setting:</p>
<ul>
<li><b>The items container</b> element, that is only shown if terms are returned.</li>
<li><b>Repeated item</b> element, within the container, that is repeated for each displayed term.</li>
<li><b>Item name</b> element that should display the name of the term. By default, that is the link element, or the repeated element.</li>
<li><b>Item usage count</b> the element that should display the term count. By default, this information is not displayed</li>
<li><b>Show if empty</b> element that is shown if no terms are found. This element must be on the same level as the container element.</li>
</ul>
<p>Take a look at the example:</p>
<pre>
section              &lt;- The Site Terms element 
  h2 Categories
  div.container      &lt;- Items container
    div.row
      div.item       &lt;- Item to repeat
        a.link
          span.name  &lt;- Item name
          span.count &lt;- Item count
  div.empty          &lt;- Show if no terms found
    p No categories!
</pre>`},"cms-site-terms-items":{type:"selector",name:"Items container",action:"element_attribute",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that contains the terms.`,placeholder:Q.defaultValue("current element"),validate:Q.wpValidateSelector,helptext:`<p>Choose the element that contains the terms. This element will only be displayed if any terms are found.</p>`},"cms-site-terms-item":{type:"selector",name:"Repeated item",action:"element_attribute",placeholder:Q.defaultValue("current element"),get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will be repeated for each term.`,validate:function(e,t,a){return Q.wpValidateSelector(e,t,a)},helptext:`<p>Choose the element that will be repeated for each term.</p>`},"cms-site-terms-item-name":{type:"selector",name:"Item name",action:"element_attribute",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will display the term name.`,validate:function(e,t,a){return Q.wpValidateSelector(e,t,a)},placeholder:Q.defaultValue("repeated element"),helptext:`<p>Choose the element that should display the term name. By default, this will be the first link within the repeated element, or the repeated element itself.</p>`},"cms-site-terms-item-count":{type:"selector",name:"Item usage count",action:"element_attribute",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will display the term count.`,validate:function(e,t,a){return Q.wpValidateSelector(e,t,a)},helptext:`<p>Choose the element that should display the term count. By default, this information is not displayed.</p>`},"cms-site-terms-empty":{type:"selector",name:"Show if empty",action:"element_attribute",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will be shown if no terms are found.`,validate:Q.wpValidateSelector,helptext:`<p>Select the element that will be shown if no terms are found. This element should be on the same level as the container element.</p>`}})),w=(u.on_action_added=function(e,t,a){},u.on_changed=function(){},u.on_show_live_data=async function(e,o){var t=F(e);if(t.errors.length)throw new Error(t.errors.join(" - "));if(t.taxonomy){var a=await o.getTerms(t.taxonomy,t.args);if(t.container.find("[wp-loop-skip]").forEach(function(e){e.remove()}),console.log("terms",a),0<a.length){function r(e,t){var a=e.findOneIncludingSelf(`[${i}]`),a=(o.setHtml(a,t.name,u),a.removeAttribute(i),e.findOneIncludingSelf(`[${s}]`)),a=(a&&(o.setHtml(a,t.count.toString(),u),a.removeAttribute(s)),e.findOneIncludingSelf("a"));a&&o.setAttribute(a,"href",t.link,u)}for(var n,i="data-pg-mark-name",s="data-pg-mark-count",l=(t.item_name.setAttribute(i),t.item_count&&t.item_count.setAttribute(s),t.item.clone(!1)),p=t.item,c=t.range_start;c<a.length&&t.range_end!==c;c++)0===c?r(t.item,a[c]):((n=l.clone(!1)).setAttribute("wp-loop-skip"),r(n,a[c]),n.insertAfter(p),p=n);o.showPgel(t.container),t.empty&&o.hidePgel(t.empty)}else o.hidePgel(t.container),t.empty&&o.showPgel(t.empty)}},u.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image,Q.tag_t_post,Q.tag_use_loop],helptext:`Display a list of site tags, categories or other terms using the current element as a template.`,helplink:"site-tags-categories",extra_name:null}),e.push(u),Q.addTag("cms-post",n("Show posts"),null,function(e){E(w,e,w.mapAction)},{"cms-post":{type:"select",name:"Loop type",action:"element_attribute",attribute_keep_if_empty:!0,options:[{key:"loop",name:"the main loop"},{key:"query",name:"custom query"},{key:"rel",name:"relationship"},{key:"block",name:"block"}],helptext:`<p>Select the loop type:</p><ul>
<li><b>The main loop</b> - display default collection of posts for the current template (latest posts for home, selected post or page for singular...)</li>
<li><b>Custom query</b> - select the type of posts to show, search parameters, ordering... Optionally, register a new custom post type.</li>
<li><b>Relationship</b> - show posts from Advanced Custom Fields relationship field. Optionally, register a new custom post type.</li>
<li><b>Block</b> - show posts listed in a Block attribute. Only valid when used inside the native Block.</li>
</ul>`},"cms-post-display-label3":{type:"label",name:"Relationship options",action:"element_attribute",attribute:"cms-post-display-label3",class:"pg-action-info-label",show_if:"cms-post==rel"},"cms-post-loop-field":{type:"text",name:"Field name",placeholder:Q.forExample("projects"),action:"element_attribute",validate:Q.validateSlug,options:Q.wpInsight.getLiveFieldsList,show_if:"cms-post==rel",helptext:`<p>Name of the field that contains the list of connected post ids.</p><p>ACF get_field is used if ACF plugin is activated, otherwise standard WordPress functions are used.</p><p>ACF (Advanced Custom Fields, free version) plugin is the recommended approach to implementing relationship fields.</p>`},"cms-post-display-label4":{type:"label",name:"Block attribute options",action:"element_attribute",attribute:"cms-post-display-label4",class:"pg-action-info-label",show_if:"cms-post==block"},"cms-post-loop-block-attribute":{type:"text",name:"Attribute id",placeholder:Q.forExample("projects"),action:"element_attribute",validate:Q.validateSlug,show_if:"cms-post==block",helptext:`<p>Id of the block attribute that contains the list of the linked posts.</p>`},"cms-post-loop-block-attribute-title":{type:"text",name:"Attribute title",placeholder:Q.forExample("Featured Projects"),action:"element_attribute",show_if:"cms-post==block",helptext:`<p>Title (descriptive name) of the block attribute.</p>`},"cms-post-loop-block-attribute-type":{type:"text",name:"Attribute post type",placeholder:Q.defaultValue("post"),action:"element_attribute",show_if:"cms-post==block",helptext:`<p>Post type that is queried. Default is post.</p>`},"cms-post-loop-block-attribute-help":{type:"text",name:"Attribute description",placeholder:Q.forExample("The list of featured projects."),textarea:!1,action:"element_attribute",show_if:"cms-post==block",helptext:`<p>Optional, describe what this attribute stands for. The description is displayed as a help message in the Block editor panel.</p>`},"cms-post-display-label1":{type:"label",name:"Custom query options",action:"element_attribute",attribute:"cms-post-display-label1",class:"pg-action-info-label",show_if:"cms-post==query"},"cms-post-type":{type:"text",name:"Post type",placeholder:"post",action:"element_attribute",placeholder:Q.defaultValue("post"),options:Q.wpInsight.getPostTypesForQuery,open_list_on_focus:!0,show_if:"cms-post==query",helptext:`<p>Select the post type to be shown. Both, built-in and custom post types are supported.</p>`},"cms-post-type-mime":{type:"text",name:"Media type",placeholder:"post",action:"element_attribute",validate:Q.validateSlug,placeholder:Q.defaultValue("any media type"),options:[{key:"image",name:"image"},{key:"audio",name:"audio"},{key:"video",name:"video"}],open_list_on_focus:!0,show_if:"cms-post==query&&cms-post-type==attachment||any",helptext:`<p>Select what kind of attachments to show.</p>`},"cms-post-type-register":{type:"checkbox",name:"Register custom post type",action:"element_attribute",value:"true",empty_attribute:!0,show_if:function(e,t){return"query"===e["cms-post"]&&e["cms-post-type"]&&["any","post","page","attachment"].indexOf(e["cms-post-type"]||"")<0||"rel"===e["cms-post"]},on_changed:function(){Q.setRequireThemeExport("Custom post types")},helptext:`<p>Register a custom post type.</p>`},"cms-post-type-query-name":{type:"text",name:"Query name",action:"element_attribute",validate:Q.validateSlug,placeholder:Q.defaultValue("<post_type>_query"),show_if:"cms-post==query",helptext:`<p>Give the query a name. A PHP variable with this name will be used to hold the query. The name is referenced in other actions, for example in Pagination.</p>`},"cms-post-type-load-posts":{type:"text",name:"Posts to load",action:"element_attribute",placeholder:Q.forExample("id list or function"),options:[{key:"featured_image",name:"Featured image"},{key:"post_parent",name:"Post parent"},{key:"post_children",name:"Post children"}],show_if:"cms-post==query",helptext:`<p>Load specific post(s). Enter list of ids, function or choose one of predefined values like featured image, parent or children.</p>`},"cms-post-type-order":{type:"select",name:"Order by",empty_attribute:!1,action:"element_attribute",default_value:"date ASC",options:[{key:"date ASC",name:"Created date - Up"},{key:"date DESC",name:"Created date - Down"},{key:"modified ASC",name:"Modified date - Up"},{key:"modified DESC",name:"Modified date - Down"},{key:"name ASC",name:"Slug - Up"},{key:"name DESC",name:"Slug - Down"},{key:"title ASC",name:"Title - Up"},{key:"title DESC",name:"Title - Down"},{key:"menu_order ASC",name:"Menu order - Up"},{key:"menu_order DESC",name:"Menu order - Down"},{key:"rand",name:"Random"}],show_if:"cms-post==query"},"cms-post-tags":{type:"text",name:"Post tags",action:"element_attribute",placeholder:Q.forExample("best,popular"),show_if:"cms-post==query",helptext:"<p>Search by tags. Use <code>tag1,tag2,tag3</code> to select posts that have either of these tags or <code>tag1+tag2+tag3</code> to select posts that have all the tags.</p>"},"cms-post-categories":{type:"text",name:"Post categories",action:"element_attribute",placeholder:Q.forExample("blog,stories"),show_if:"cms-post==query",helptext:"<p>Search by tags. Use <code>cat1,cat2,cat3</code> to select posts from these categories.</p>"},"cms-post-type-count":{type:"text",name:"Posts per page",action:"element_attribute",placeholder:Q.forExample("10"),show_if:"cms-post==query",helptext:"<p>Leave empty to return all posts. Be careful, loading too many posts can lead to slow performance.</p>"},"cms-post-type-paginate":{type:"checkbox",name:"Paginate results",action:"element_attribute",value:"true",negvalue:"false",default_value:"true",show_if:"cms-post==query&&cms-post-type-count",helptext:`<p>Paginate the query. Use Post Pagination action to implement pagination controls. There should be only one paginated query per page.</p>`},"cms-post-type-sticky":{type:"select",name:"Sticky",action:"element_attribute",options:[{key:"ignore",name:"ignore"},{key:"only",name:"only sticky"},{key:"none",name:"not sticky"}],show_if:"cms-post==query",helptext:`<p>Decide what to do with sticky posts:</p><ul><li>Ignore the sticky flag, and return posts regardless of their stickiness.</li><li>Return only sticky posts.</li><li>Return only non-sticky posts.</li></ul><p>Leave empty to return the sticky posts at the top.</p>`},"cms-post-type-ignore-shown":{type:"checkbox",name:"Skip shown posts",action:"element_attribute",value:"true",empty_attribute:!0,show_if:"cms-post==query",helptext:`<p>Don't fetch posts that were already displayed elsewhere on the page (up to this point).</p><p>This is great in cases when the same posts would otherwise be returned and displayed with multiple queries.</p><p>For example, a featured post could also be shown in the latest posts section below. This option will exclude the previously shown featured post from the latest posts section.</p>`},"cms-post-type-by-field":{type:"checkbox",name:"Search by field value",action:"element_attribute",value:"true",empty_attribute:!0,show_if:"cms-post==query",helptext:`<p>Search posts by meta field value.</p>`},"cms-post-type-by-field-name":{type:"text",name:"Field name",action:"element_attribute",show_if:"cms-post==query&&cms-post-type-by-field",validate:Q.required,options:Q.wpInsight.getLiveFieldsList},"cms-post-type-by-field-value":{type:"text",name:"Field value",action:"element_attribute",show_if:"cms-post==query&&cms-post-type-by-field",validate:Q.required},"cms-post-display-label2":{type:"label",name:"Post type options",action:"element_attribute",attribute:"cms-post-display-label2",class:"pg-action-info-label",show_if:"cms-post-type-register&&cms-post==query||rel"},"cms-post-type-register-type":{type:"text",name:"Custom post type",placeholder:"post",action:"element_attribute",validate:Q.validateSlug,placeholder:Q.forExample("project"),show_if:"cms-post==rel&&cms-post-type-register",helptext:`<p>Enter the id for the new custom post type.</p>`},"cms-post-type-name":{type:"text",name:"Name, plural",placeholder:"Team members",action:"element_attribute",validate:Q.required,show_if:"cms-post-type-register&&cms-post==query||rel",on_changed:function(){Q.setRequireThemeExport("Custom post types")},helptext:`<p>Plural name of the post type collection. For example, Cars.</p>`},"cms-post-type-name-singular":{type:"text",name:"Name, singular",placeholder:"Team member",action:"element_attribute",validate:Q.required,show_if:"cms-post-type-register&&cms-post==query||rel",on_changed:function(){Q.setRequireThemeExport("Custom post types")},helptext:`<p>Singular name of the post type item. For example, Car.</p>`},"cms-post-label6":{type:"label",name:"Display options",action:"element_attribute",attribute:"cms-post-display-options",class:"pg-action-info-label"},"cms-post-first-classes":{type:"text",name:"Classes for the first item",placeholder:"post",action:"element_attribute",placeholder:Q.forExample("active first"),helptext:`<p>Add one or more classes (separated with space characters) to the first item element in the loop.</p>`},"cms-post-range":{type:"text",name:"Range of items to show",action:"element_attribute",placeholder:Q.forExample("2 or 0-5 (0 is first)"),validate:Q.validateRangeValue,helptext:`<p>Display only certain returned posts. Use number, for example 2 or range, for example 0-5. 0 is the first element. Note that this setting doesn't affect which posts are returned by the query, only which of the returned posts are displayed.</p><p>This is useful when having to display posts in fixed positions on the page, for example in CSS grid items.</p>`},"cms-post-set-id":{type:"select",name:"Set id attribute of the post item",action:"element_attribute",options:[{key:"auto",name:"Only if no id is set"},{key:"true",name:"Always"},{key:"false",name:"Never"}],default_value:"auto",aaashow_if:function(e,t){return"false"===e["cms-post-set-id"]||null!==(t.findOne("[wp-loop-item]")||t).getAttribute("id")},helptext:`<p>Check this to set the id attribute of the element to the value provided by WordPress. Note that this might clash with CSS styling or Javascript code that is connected with the id of the item element.</p>`},"cms-post-show-empty-text":{type:"checkbox",name:"Show &quot;No posts&quot; text",action:"element_attribute",value:"true",negvalue:"false",default_value:"true",show_if:"!cms-post-show-empty-element",helptext:`<p>Show the &quot;No posts found&quot; text if no posts are found. The <b>Show element if empty</b> setting in the Loop structure section takes precedence if both are defined.</p>`},"cms-post-label5":{type:"label",name:"Loop structure",action:"element_attribute",attribute:"cms-post-display-options",class:"pg-action-info-label",helptext:`<p>By default, the Show Posts element is shown and repeated for all returned posts.</p><p>You can customize the loop structure by setting:</p><ul><li><b>The items container</b> element, that is only shown if posts are returned.</li><li><b>The item</b> element, within the container, that is repeated for each displayed post.</li><li><b>Last repeated</b> element lets you repeat a range of elements</li><li><b>The empty loop</b> element that is shown if no posts are found. This element must directly follow the Items container element.</li></ul><p>Take a look at the example:</p>
<pre>
section          &lt;- The element with Show Posts
  h2 News
  div.container  &lt;- Items container
    div.row
      div.item   &lt;- Item to repeat
  div.empty      &lt;- Show if no posts found
    p No news!
</pre>`},"cms-post-items-container":{type:"selector",name:"Items container",action:"element_attribute",placeholder:Q.defaultValue("current element"),get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that contains the loop items. The container will be hidden if there are no items to show.`,validate:Q.wpValidateSelector,helptext:`<p>The items container is only shown if posts are found.</p>`},"cms-post-repeat":{type:"selector",name:"Repeated loop item",action:"element_attribute",fill_list_on_open:!0,open_list_on_focus:!0,get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that represents the loop item.`,placeholder:Q.defaultValue("current element"),default_value:"this",validate:Q.wpValidateSelector,helptext:`<p>Select the element that will be repeated for each shown post.</p>`},"cms-post-repeat-end":{type:"selector",name:"The last repeated element",helptext:"<p>By default, a single element is repeated in the loop. Use this setting to define a range of repeated elements by selecting the last element of the range.</p><p>The start of the range is defined by the &quot;Repeated loop item&quot; setting or the main action element, if the loop item is not set.</p><p>Both elements must be on the same level of the HTML structure.</p>",action:"element_attribute",fill_list_on_open:!0,open_list_on_focus:!0,get_selector_base:function(e){return w.wpGetLoopStructure(e).rep.parent},get_selector_options:function(e,t,a,o){var r=w.wpGetLoopStructure(t).rep,n=r.index();return Q.wpGetSelectorOptions(r.parent,{filter:function(e){return r.parent===e.parent&&!(e.index()<=n)}},a,o)},selector_info:"Select the end of the repeated range.",placeholder:Q.defaultValue("current element"),default_value:"this",aaavalidate:function(e,t,a){if(a=a||"this"){var o="this"===a?e:e.findOne(a);if(!o)return"The element is not found."}},helptext:`<p>Define a range of elements to be repeated for each post, instead of just repeating a single item element.</p><p><b>The item element</b> defines the start of the range, and <b>The last repeated element</b> defines the end of the range.</p><p>The start and the end elements must be on the same level in the HTML structure.</p><p>This is very useful on templates for single posts where post display often spans multiple sections.</p><p>Here's an example where all three sections will be enclosed with the main loop:</p>
<pre>
body
  nav
  ----
  section.header    &lt;- Show Posts element
  section.content   
  section.projects  &lt;- The last element
  ----
  footer
</pre>
`},"cms-post-show-empty-element":{type:"selector",name:"Show element if empty",action:"element_attribute",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will be shown if no posts are found.`,validate:Q.wpValidateSelector,helptext:`<p>Show this element if no posts are found.</p><p>This element must directly follow the Items container element.</p>`},"cms-post-label8":{type:"label",name:"Live data preview",action:"element_attribute",attribute:"cms-post-live-preview",class:"pg-action-info-label",helptext:`<p>List post ids that should be used for live data preview of this Show Posts action. By default, action parameters will be used to get posts from the WordPress site. If you want to preview the action with specific posts, list their ids here.</p>`},"cms-post-preview-posts":{type:"text",name:"Preview posts",placeholder:"List of post ids: 12, 16, 20...",action:"element_attribute",helptext:`<p>A comma separated list of post ids.</p>`},"cms-post-preview-posts-lookup":{type:"button",name:"Add post...",helptext:`<p>Select a post and add it to the list of Preview posts.</p>`,func:async function(e,t,a,o,r){r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation();var n,i,s=pinegrow.getSelectedPage(),s=new PgWordPressApiUrlSelector(Q.wpGetApi(),s,Q,s.activeView),s=(s.only_select_posts=!0,await s.showMenu(t));return s&&(s.post_id?((i=(n=t.closest(".crsa-action").find(".crsa-field-cms-post-preview-posts input")).val()||"").length&&(i+=", "),i+=s.post_id,n.val(i).trigger("change"),pinegrow.showQuickMessage(`Post ${s.name} with id ${s.post_id} was added to the list.`)):pinegrow.showQuickError("The selected URL does not have a post id.")),!1}}})),q=(w.on_action_after_get_values=function(e,t,a){a["cms-post-type"]&&!a["cms-post"]&&(a["cms-post"]="query")},w.on_can_add_action=function(e,t,a){return!(0<=["html","body","head","script"].indexOf(e.tagName)&&(pinegrow.showQuickError(`Show Posts can't be added to ${e.tagName} element.`),1))},w.on_action_added=function(e,t,a){e.getAttr("cms-post")||e.setAttr("cms-post","loop")},w.get_action_tag=function(e,t,a){var o=[],r="";switch(e.getAttribute("cms-post")||"loop"){case"loop":r="Main";break;case"query":r=`Query `+(e.getAttr("cms-post-type")||"");break;case"rel":r=`Rel `+(e.getAttr("cms-post-loop-field")||"");break;case"block":r=`Block `+(e.getAttr("cms-post-loop-block-attribute")||"")}return o.push(r),Q.getExpressiveActionTag(e,t,o,"Loop",a)},w.wpGetLoopStructure=Q.wpGetLoopStructure=function(e){var t={container:e,rep:e,rep_end:e,loop_type:e.getAttr("cms-post")},a=Q.wpGetPgelFromSelector(e,e.getAttr("cms-post-items-container"),e),o=Q.wpGetPgelFromSelector(e,e.getAttr("cms-post-repeat"));return o||!a||a===e||(o=a.getFirstChild())||(a=null),o=o||e,t.container=a,t.rep=o,t},w.mapAction=function(o,r){var n=r.getAttribute(o.attribute+"-type"),e=r.getAttribute(o.attribute+"-type-query-name"),t=r.getAttr("cms-post"),a=("rel"===t&&(n=r.getAttr("cms-post-type-register-type")),t=(t=!t&&n?"query":t)||"loop",w.wpGetLoopStructure(r)),i=a.container,s=a.rep,a=(i&&i!==r&&i.setAttr("wp-loop-items-container",null),s!==r&&s.setAttr("wp-loop-item",null),Q.wpGetPgelFromSelector(r,r.getAttr("cms-post-show-empty-element"))),i=(a&&a.setAttr("wp-loop-empty",null),r.getAttr("cms-post-categories")),a=r.getAttr("cms-post-tags"),i=("query"===t&&(g={},(i||a)&&(f=[],i&&f.push(`${Q.wpGetClass("PG_Helper")}::getTaxonomyQuery( 'category', ${Q.quoteParam(Q.evaluateBlockAttrsInParam(i))} )`),a&&f.push(`${Q.wpGetClass("PG_Helper")}::getTaxonomyQuery( 'post_tag', ${Q.quoteParam(Q.evaluateBlockAttrsInParam(a))} )`),g["tax_query"]=`array_filter( array(${f.join(", ")}) )`),r.setDataUncloned("loopOptions",{after_args_code:null,extra_query_params:g})),r.getAttr("cms-post-repeat-end"));if(i&&s.parent){for(var a="[cms-post-loop-end]",l=s.parent.find(i),p=s.index(),c=null,u=0;u<l.length;u++)if(l[u].index()>=p&&l[u].parent===s.parent){c=l[u];break}if(c&&c.setAttr("cms-post-loop-end",null),!s.isSelector(a)&&(c=s.nextWithSelector(a)))for(var m=s.next();m&&(m.setAttr("wp-loop-add",null),m!==c);)m=m.next()}switch(s.hasAttr("cms-post-image")||s.hasAttr("wp-the-post-thumbnail")||s.setAttribute("wp-post-class"),r.getAttribute("cms-post-set-id")){case"true":s.setAttribute("wp-the-id",s.getAttribute("id"));break;case"false":break;default:s.getAttribute("id")||s.setAttribute("wp-the-id",null)}r.hasAttribute("cms-post-show-empty-text")&&r.setAttribute("wp-loop-show-empty-text",r.getAttribute("cms-post-show-empty-text"));function d(){var e,t=r.getAttribute(o.attribute+"-type-name"),a=r.getAttribute(o.attribute+"-type-name-singular")||t;t&&n&&(r.setAttribute(e="wp-post-type",n),r.setAttribute(e+"-name",t),r.setAttribute(e+"-name-singular",a),r.setAttribute(e+"-public","true"),r.setAttribute(e+"-supports","title,editor,author,thumbnail,excerpt,custom-fields,revisions,page-attributes"),r.setAttribute(e+"-show-in-menu","true"),r.setAttribute(e+"-rest","true"))}var h;if("loop"===t)r.setAttribute("wp-loop");else if("query"===t){n=n||"post";r.setAttribute("wp-loop",e||n+"_query"),0<=["post","page","attachment","any"].indexOf(n)?r.setAttribute("wp-loop-post-type",n):r.setAttribute("wp-loop-post-type-custom",n),"any"!==n&&"attachment"!==n||(f=r.getAttr("cms-post-type-mime"))&&r.setAttr("wp-loop-post-mime-type",f);var g=(g=r.getAttribute(o.attribute+"-type-order")||"date ASC").split(" "),i=(r.setAttribute("wp-loop-orderby",g[0]||"date"),r.setAttribute("wp-loop-order",g[1]||"ASC"),r.getAttribute(o.attribute+"-type-count"));switch(i?(r.setAttribute("wp-loop-posts-per-page",i),"false"!==r.getAttribute("cms-post-type-paginate")&&r.setAttribute("wp-loop-paged",`get_query_var( 'paged' ) ?: 1`)):r.setAttribute("wp-loop-nopaging","true"),r.getAttr("cms-post-type-sticky")){case"ignore":r.setAttr("wp-loop-ignore-sticky","true");break;case"only":r.setAttr("wp-loop-ignore-sticky","true"),r.setAttribute("wp-loop-post",`in:get_option( 'sticky_posts' )`);break;case"none":r.setAttr("wp-loop-ignore-sticky","true"),r.setAttribute("wp-loop-post",`not_in:get_option( 'sticky_posts' )`)}r.hasAttr("cms-post-type-ignore-shown")&&("none"===r.getAttr("cms-post-type-sticky")?r.setAttribute("wp-loop-post",`not_in:array_merge( get_option( 'sticky_posts' ), ${Q.wpGetClass("PG_Helper")}::getShownPosts() )`):r.setAttribute("wp-loop-post",`not_in:${Q.wpGetClass("PG_Helper")}::getShownPosts()`));var _=r.getAttr("cms-post-type-load-posts");if(_){switch(_){case"featured_image":_=`get_post_thumbnail_id()`;break;case"post_parent":_=`wp_get_post_parent_id( get_the_ID() )`;break;case"post_children":r.setAttribute("wp-loop-post_parent",`get_the_ID()`),_=null}_&&(r.setAttribute("wp-loop-post",`in:${Q.wpGetClass("PG_Helper")}::getPostIdList( ${Q.quoteParam(_)} )`),r.setAttribute("wp-loop-post-type","any"),r.setAttribute("wp-loop-post-status","any"))}r.hasAttr("cms-post-type-by-field")&&(a=r.getAttr("cms-post-type-by-field-name"),e=r.getAttr("cms-post-type-by-field-value"),a)&&null!==e&&(r.setAttr("wp-loop-meta-key",a),r.setAttr("wp-loop-meta-value",e)),r.hasAttribute(o.attribute+"-type-register")&&d()}else"rel"===t?((h=r.getAttr("cms-post-loop-field"))&&(r.setAttribute("wp-loop",h+"_query"),r.setAttribute("wp-loop-post-type","any"),r.setAttribute("wp-loop-post-status","any"),r.setAttribute("wp-loop-posts-per-page","-1"),r.setAttribute("wp-loop-orderby","post__in"),r.setAttribute("wp-loop-post",`in:${Q.wpGetClass("PG_Helper")}::getRelationshipFieldValue( ${Q.quoteParam(h)} ) ?: array('')`),r.setAttribute("wp-loop-ignore-sticky","true")),r.hasAttribute(o.attribute+"-type-register")&&d()):"block"===t&&(h=r.getAttr("cms-post-loop-block-attribute"))&&(r.setAttribute("wp-loop",h+"_query"),r.setAttribute("wp-loop-post-type","any"),r.setAttribute("wp-loop-post-status","any"),r.setAttribute("wp-loop-posts-per-page","-1"),r.setAttribute("wp-loop-orderby","post__in"),r.setAttribute("wp-loop-post",`in:${Q.wpGetClass("PG_Blocks")}::getAttributeAsPostIds( $args, ${Q.quoteParam(h)} )`),r.setAttribute("wp-loop-ignore-sticky","true"),r.hasAttr("cms-post-loop-block-only-preview"))&&r.setAttr("wp-loop-only-preview","true");var f=r.getAttribute("cms-post-first-classes"),g=(f&&r.setAttribute("wp-loop-first-classes",f),r.getAttribute("cms-post-range"));g&&r.setAttribute("wp-loop-range",g)},w.always_show_live_data_for_children=!0,w.on_show_live_data=async function(e,t){var a=w,o=w.wpGetLoopStructure(e),r=o.rep,n={loop_type:o.loop_type},o=[],i=e.getAttribute(a.attribute+"-preview-posts");if((o=i?i.split(/[, ]/).filter(function(e){return!!e?.trim()}).map(function(e){return e.trim()}):o).length)n.include=o,n.post_type="any",n.orderby="include",n.order="asc",n.per_page=o.length;else{if("rel"===n.loop_type)return void t.reportIssue(e,"Show Posts of type <code>Relationship</code> can not be previewed. Use <b>Preview posts</b> section of the Show Posts action to pick displayed posts.",w);if("block"===n.loop_type)return void t.reportIssue(e,"Show Posts of type <code>Block</code> can not be previewed. Use <b>Preview posts</b> section of the Show Posts action to pick displayed posts.",w);if("query"===n.loop_type){i=e.getAttribute(a.attribute+"-type"),i=(i&&"any"!==i&&(n.post_type=i),"attachment"===i&&(o=e.getAttr("cms-post-type-mime"))&&(n.mime_type=o),e.getAttribute(a.attribute+"-type-order")),o=(i&&2===(i=i.split(" ")).length&&(n.orderby=i[0],n.order=i[1].toLowerCase()),e.getAttribute(a.attribute+"-type-count")),i=(o&&(n.per_page=o),"only"===e.getAttr("cms-post-type-sticky")&&(n.sticky=!0),e.getAttr("cms-post-type-load-posts"));if(i){var s=null,l=t.getPostId(e);if(!l)return void t.reportIssue(e,`Unable to get the post id in order to show `+i,w);switch(i){case"featured_image":s=await t.getPostFeaturedImageId(e);break;case"post_parent":s=await t.getPostParentId(e);break;case"post_children":var p=await t.api.getPostTypeInfo(n.post_type);if(!p||!p.hierarchical)return void t.reportIssue(e,`Unable to show post children because post type ${n.post_type} is not hierarchical.`,w);n.parent=l}s&&(n.include=[s])}if(e.hasAttr("cms-post-type-by-field"))return void t.reportIssue(e,`Searching posts by field name and value is not supported.`,w)}}var c=await t.queryPosts(n),u=r.clone(!1);if(u.removeAttribute("cms-post"),c.length){t.showPgel(r);for(var m,d=r,h=0;h<c.length;h++)0===h?t.setPostId(r,c[h].id):((m=u.clone()).insertAfter(d),t.setPostId(m,c[h].id),m.setAttribute("wp-loop-skip"),await Q.wpShowLiveData(m,!0,t.changed_col),m.removeAttrIfStartsWith(["wp-","cms-","wc-","data-pg-sel","data-pg-name"],!0,null,/wp\-loop\-skip/),d=m)}else t.hidePgel(r)},w.autoAdd=function(e,t){if("article"==e.tagName)return W(w,e,{}),!0},w.addMeta({tags:[Q.tag_set_attr_class,Q.tag_set_attr_id,Q.tag_t_post,Q.tag_use_loop],helptext:`Display a collection of posts. Wrap the element with the loop and add post id and classes. Optionally, run a custom query, load posts from ACF field, get posts from block attribute or register a custom post type.`,helplink:"show-posts",extra_name:null}),e.push(w),Q.addTag("cms-post-loop-end",n("Post loop end"),null,function(e){E(q,e,q.mapAction)})),i=(q.mapAction=function(e,t,a){},q.addMeta({tags:[Q.tag_set_attr_href,Q.tag_ret_url,Q.tag_t_post,Q.tag_use_loop],helptext:`End the loop here. Includes this and all preceeding elements into the repeated part of the loop. Use together with Post &amp; Loop action.`,helplink:"show-posts",extra_name:null}),Q.addTag("cms-post-link",n("Post link"),null,function(e){E(i,e,i.mapAction)},{"cms-post-link":{type:"select",name:"Condition",action:"element_attribute",show_empty:!0,attribute_keep_if_empty:!0,options:[{key:"not_singular",name:"only if not singular"}],helptext:`<p>Select when to add the link: always (default) or only if the template is not displaying a single post.</p>`}})),s=(i.on_action_added=function(e,t,a){"a"==e.tagName||e.getAttribute("cms-post-link")||e.setAttribute("cms-post-link","not_singular")},i.mapAction=function(e,t,a){var o,r,n=!(a=void 0===a?!1:a),i=t.getAttribute(e.attribute)||"always";"a"===t.tagName?(t.setAttribute("wp-href","get_permalink"),"not_singular"===i&&t.setAttribute("wp-if-is-singular","!")):i&&("img"!=(o=t).tagName?("not_singular"==i&&(o=t.clone(n),I(e,o),o.insertAfter(t),t.setAttribute("wp-if-is-singular"),o.setAttribute("wp-else-if")),(r=o.findOne(">a"))||(r=pgCreate('<a href="#"></a>',!n),o.moveChildrenToElement(r),o.append(r),o.hasAttribute(s.attribute)&&(r.setAttribute(s.attribute),I(s,o))),r.setAttribute("wp-href","get_permalink")):("not_singular"!=i&&!1||(o=t.clone(n),I(e,o),o.insertAfter(t),t.setAttribute("wp-if-is-singular")),(r=pgCreate('<a href="#"></a>',!n)).insertBefore(o),r.append(o),r.setAttribute("wp-href","get_permalink"),"not_singular"==i?r.setAttribute("wp-else-if"):a||J.addToChanges(function(e){e.remove()},this,[t]),o.hasAttribute(c.attribute)&&r.setAttribute("wp-if-has-post-thumbnail")))},i.on_show_live_data=async function(e,t){"a"===e.tagName&&t.setAttribute(e,"href",await t.getPostLink(e),i)},i.addMeta({tags:[Q.tag_set_attr_href,Q.tag_ret_url,Q.tag_t_post,Q.tag_use_loop],helptext:`Set post link to href. Adds the "a" element if needed. Optionally, add the link only if page is not singular.`,helplink:"post-link",extra_name:null}),Q.addTag("cms-post-title",n("Post title"),null,function(e){E(s,e,s.mapAction)})),l=(s.on_action_added=function(e,t,a){},s.mapAction=function(e,t){t.setAttribute("wp-the-title")},s.on_show_live_data=async function(e,t){t.setHtml(e,await t.getPostTitle(e),s)},s.addMeta({tags:[Q.tag_set_content,Q.tag_ret_string,Q.tag_t_post,Q.tag_use_loop],helptext:`Display the post title.`,helplink:"post-title",extra_name:null}),e.push(s),e.push(i),Q.addTag("cms-post-content",n("Post content"),null,function(e){E(l,e,l.mapAction)})),p=(l.mapAction=function(e,t){t.setAttribute("wp-the-content"),fe(t.tagName)||t.setAttribute("wp-the-content-set","content")},l.on_show_live_data=async function(e,t,a){fe(e.tagName)?a||t.reportIssue(e,`Live content can not be shown if the Post Content action is placed on <code>${_e.join("</code>, <code>")}</code> elements. Change the tag into <code>div</code>, <code>section</code> or similar block element.`,l):t.setHtml(e,await t.getPostContent(e),l)},l.addMeta({tags:[Q.tag_set_content,Q.tag_set_element,Q.tag_ret_html,Q.tag_t_post,Q.tag_use_loop],helptext:`Display the post content. Auto decides is it needs to replace the whole element or just the content.`,helplink:"post-content",extra_name:null}),e.push(l),Q.addTag("cms-post-excerpt",n("Post excerpt"),null,function(e){E(p,e,p.mapAction)},{"cms-post-excerpt-if":{type:"checkbox",name:"Only display if excerpt is set",action:"element_attribute",value:"true",empty_attribute:!0,helptext:`<p>Only display the excerpt if the post has the excerpt. Without this option, the excerpt snippet generated from the post content will be shown in case the post doesn't have the excerpt.</p>`}})),c=(p.mapAction=function(e,t){var a=!1;("p"!==t.tagName||Q.wpHasNonWPAttributes(t)?0<t.find("p").length?(a=!0,!1):a=!0:a=!1)?t.setAttribute("wp-get-the-excerpt"):(t.setAttribute("wp-the-excerpt"),t.setAttribute("wp-the-excerpt-set",a?"content":"element")),t.hasAttr("cms-post-excerpt-if")&&t.setAttr("wp-if-has-excerpt",null)},p.on_show_live_data=async function(e,t){var a=(await t.getPostExcerpt(e)||"").trim(),o=new pgParser,o=(o.assignIds=!1,o.parse(a),o.rootNode.first()?.html()||"");"p"===e.tagName&&!Q.wpHasNonWPAttributes(e)||(0<e.find("p").length?!1:!0)?t.setHtml(e,o,p):t.setHtml(e,a,p),e.hasAttr("cms-post-excerpt-if")&&(a?t.showPgel(e):t.hidePgel(e))},p.addMeta({tags:[Q.tag_set_content,Q.tag_set_element,Q.tag_ret_html,Q.tag_t_post,Q.tag_use_loop],helptext:`Display the post excerpt. If adden on &ltp&gt; element without classes, it will replace the whole element, otherwise it will modify the the content.`,helplink:"post-excerpt",extra_name:null}),e.push(p),Q.addTag("cms-post-image",n("Post featured image"),null,function(e){E(c,e,c.mapAction)},{"cms-post-image":{type:"text",name:"Size",placeholder:Q.defaultValue("large"),attribute_keep_if_empty:!0,action:"element_attribute",options:Q.wpInsight.getImageSizes,open_list_on_focus:!0},"cms-post-image-sizes":{type:"text",name:"Responsive sizes",placeholder:Q.forExample("max-width(1200px) 100vw, 1200px"),action:"element_attribute",helptext:`<p>Listing the sizes that image takes on different screen sizes helps browser choose the best sized image for the display.</p><p>Use the <b>Guess responsive sizes</b> button below to let Pinegrow do that.</p>`,show_if:function(e,t){return"img"===t.tagName}},"cms-post-image-sizes-button":{type:"button",name:"Guess responsive sizes",func:function(t){t.getPage().activeView.calculateImageResponsiveSizes(t,function(e){e.length&&(pinegrow.makeChanges(t,"Guess sizes",function(){t.setAttr("cms-post-image-sizes",e.join(", "))}),pinegrow.selectedElements.reselect())})},show_if:function(e,t){return"img"===t.tagName}}})),N=(c.mapAction=function(e,t){var a,o=t.getAttribute(e.attribute)||"large";"img"===t.tagName?(a=!1,"a"===t.parent.tagName&&1===t.parent.getChildren().length&&(a=!0),t.setAttribute("wp-the-post-thumbnail",o),a||t.setAttribute("wp-the-post-thumbnail-if","true"),(a=t.getAttr("cms-post-image-sizes"))&&t.setAttribute("wp-the-post-thumbnail-sizes",a)):(t.setAttribute("wp-featured-bck"),t.setAttribute("wp-featured-bck-size",o))},c.on_show_live_data=async function(e,t){var a=e.getAttribute(c.attribute)||"large",a=await t.getPostFeaturedImage(e,a);"img"===e.tagName?a?(t.setAttribute(e,"src",a,c),t.removeAttribute(e,"srcset",c),t.showPgel(e)):t.hidePgel(e):e.setInlineBackgroundImage(a)},c.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image,Q.tag_t_post,Q.tag_use_loop],helptext:`Display the featured image of the post when added on &lt;img&gt;. Sets the background image when used on any other element.`,helplink:"post-featured-image",extra_name:null}),e.push(c),Q.addTag("cms-post-images",n("Post images"),null,function(e){E(N,e,N.mapAction)},{"cms-post-images":{type:"text",name:"Image size",attribute_keep_if_empty:!0,action:"element_attribute",placeholder:Q.defaultValue("large"),options:Q.wpInsight.getImageSizes,open_list_on_focus:!0,helptext:`<p>Image size for the displayed image.</p>`},"cms-post-images-size-linked":{type:"text",name:"Linked image size",action:"element_attribute",placeholder:Q.defaultValue("large"),helptext:`<p>Image size for the linked image. Only matters if the image is enclosed in a link element.</p>`},"cms-post-images-repeat":{type:"selector",name:"Repeated element selector",action:"element_attribute",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will be repeated for each image.`,placeholder:Q.defaultValue("current element"),default_value:"this",validate:function(e,t,a){var o;if(a=a||"this")return(o="this"===a?e:e.findOne(a))?"img"!==o.tagName&&null===o.findOne("img")?"The element doesn't have an &lt;img&gt; element.":void 0:"The element is not found."},helptext:`<p>By default the element with this action is repeated for each image. Here you can specify which element should be repeated. The repeate element must be an image or must contain an image.</p>`},"cms-post-images-range":{type:"text",name:"Range of items to show",action:"element_attribute",placeholder:Q.forExample("2 or 0-5 (0 is first)"),validate:Q.validateRangeValue,helptext:`<p>Display only certain images. Use number, for example 2 or range, for example 0-5. 0 is the first element.</p><p>This is useful when having to display posts in fixed positions on the page, for example in CSS grid items.</p>`},"cms-post-images-skip-featured":{type:"checkbox",name:"Skip the featured image",empty_attribute:!0,value:"true",action:"element_attribute",helptext:`<p>Don't show the featured image.</p>`},"cms-post-images-sizes":{type:"text",name:"Responsive sizes",placeholder:Q.forExample("max-width(1200px) 100vw, 1200px"),action:"element_attribute",helptext:`<p>Listing the sizes that image takes on different screen sizes helps browser choose the best sized image for the display.</p><p>Use the <b>Guess responsive sizes</b> button below to let Pinegrow do that.</p>`},"cms-post-images-sizes-button":{type:"button",name:"Guess sizes",func:function(t){t.getPage().activeView.calculateImageResponsiveSizes(t,function(e){e.length&&(pinegrow.makeChanges(t,"Guess sizes",function(){t.setAttr("cms-post-images-sizes",e.join(", "))}),pinegrow.selectedElements.reselect())})}}})),t=(N.mapAction=function(e,t){t.getAttribute(e.attribute);var a=t.getAttribute("cms-post-images-repeat")||"this",o=t.getAttr("cms-post-images-sizes");"this"!==a&&(a=t.findOne(a))&&a.setAttr("wp-post-media-item"),t.setAttr("wp-post-media",null),t.setAttr("wp-post-media-size",t.getAttribute("cms-post-images")),t.setAttr("wp-post-media-size-linked",t.getAttribute("cms-post-images-size-linked")),o&&t.setAttr("wp-post-media-sizes",o),t.hasAttr("cms-post-images-range")&&t.setAttr("wp-post-media-range",t.getAttr("cms-post-images-range")),t.hasAttr("cms-post-images-skip-featured")&&t.setAttr("wp-post-media-skip-featured",null)},N.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image,Q.tag_t_post,Q.tag_use_loop],helptext:`Display post images.`,helplink:"post-images",extra_name:null}),{"cms-post-field-acf":{type:"checkbox",name:"Use ACF <nocaps>get_field()</nocaps>",attribute:"cms-post-field-acf",empty_attribute:!0,value:"true",action:"element_attribute",helptext:`<p>Use Advanced Custom Fields get_field function instead of get_post_meta function. Check this if your using the ACF plugin for custom post fields. Note that the theme will not work if this setting is checked and ACF plugin is not activated.</p>`}}),T=5,m=1;m<=T;m++)t["cms-post-field"+(S=1<m?`-`+m:"")]={type:"text",name:"Field id",action:"element_attribute",validate:Q.required,options:Q.wpInsight.getLiveFieldsList,start_repeat_item:"Post field "+m,reorder_repeat_items:!0,helptext:`<p>The field id, for example <b>job_location</b></p>`},t["cms-post-field-type"+S]={type:"select",name:"Edit",action:"element_attribute",validate:Q.required,options:[{key:"content",name:"Content"},{key:"element",name:"Element"},{key:"image",name:"Image"},{key:"background-image",name:"Background image"},{key:"link",name:"Link"},{key:"style",name:"Style"},{key:"attr",name:"Attribute"},{key:"class",name:"Class"}],helptext:`<p>Where on the selected element would you like to display the field value?</p><p>Selecting Image requires an img element, and selecting the Link requires the link element.</p>`},t["cms-post-field-image-size"+S]={type:"text",name:"Image size",action:"element_attribute",placeholder:Q.defaultValue("large"),options:Q.wpInsight.getImageSizes,open_list_on_focus:!0,show_if:"cms-post-field-type"+S+"==image||background-image"},t["cms-post-field-style"+S]={type:"text",name:"Style property",action:"element_attribute",placeholder:Q.forExample("color"),validate:Q.required,show_if:"cms-post-field-type"+S+"==style",helptext:`<p>Which style property to set? For example, color, background-color, font-size...</p>`},t["cms-post-field-attribute"+S]={type:"text",name:"Element attribute",action:"element_attribute",placeholder:Q.forExample("title"),validate:Q.required,show_if:"cms-post-field-type"+S+"==attr",helptext:`<p>Which element attribute to set? For example, href, alt, title...</p>`},t["cms-post-field-class-replace"+S]={type:"text",name:"Replace classes",action:"element_attribute",placeholder:Q.forExample("red big"),show_if:"cms-post-field-type"+S+"==class",helptext:`<p>List classes that should be replaced by the field value, optional.</p>`,fill_list_on_open:!0,open_list_on_focus:!0,options:Q.wpGetElementClassesOptions},t["cms-post-field-if"+S]={type:"checkbox",name:"Add <nocaps>IF</nocaps> statement",empty_attribute:!0,value:"true",action:"element_attribute",helptext:`<p>Only show the element if field has a value.</p>`};for(var d=Q.addTag("cms-post-field",n("Post Field"),null,function(e){E(d,e,d.mapAction)},t),h=(d.on_action_added=function(r,e,t){function a(e,t,a){var o=d.attribute+(e?`-`+e:"")+(1<t?`-`+t:"");r.getAttribute(o)||("function"==typeof a&&(a=a()),r.setAttribute(o,a))}var o;"a"==r.tagName?(a("type",1,"content"),a("type",2,"link"),a("",2,"field2")):"img"==r.tagName?a("type",1,"image"):(o=r.get$DOMElement())&&"none"!=o.css("backgroundImage")?a("type",1,"background-image"):a("type",1,"content")},d.mapAction=function(e,t){for(var a,o,r=t.hasAttribute(e.attribute+"-acf"),n=[],i=1;i<=T;i++){var s=1<i?`-`+i:"",l=V(t,e,"",null,s),p=V(t,e,"type",null,s),c=V(t,e,"style",null,s),u=V(t,e,"attribute",null,s),m=V(t,e,"class-replace",null,s),d=V(t,e,"image-size",null,s)||"large",h=t.hasAttribute(e.attribute+"-if"+s);if(l){var g="wp-meta-value"+s,_="wp-meta-value-key"+s;switch(r&&(_=g="wp-acf-get-field"+s),t.setAttribute(g),p){case"content":t.setAttribute(_,l),t.setAttribute(g+"-set","content");break;case"element":t.setAttribute(_,l),t.setAttribute(g+"-set","element");break;case"image":t.setAttribute(_,l),t.setAttribute(g+"-set","attr"),t.setAttribute(g+"-set-attr","src"),t.setAttribute(g+"-set-get-image"),t.setAttribute(g+"-set-get-image-size",d);break;case"background-image":t.setAttribute(_,l),t.setAttribute(g+"-set","style"),t.setAttribute(g+"-set-style","background-image"),t.setAttribute(g+"-set-get-image"),t.setAttribute(g+"-set-get-image-size",d);break;case"link":t.setAttribute(_,l),t.setAttribute(g+"-set","attr"),t.setAttribute(g+"-set-attr","href");break;case"style":t.setAttribute(_,l),t.setAttribute(g+"-set","style"),t.setAttribute(g+"-set-style",c);break;case"attr":t.setAttribute(_,l),t.setAttribute(g+"-set","attr"),t.setAttribute(g+"-set-attr",u);break;case"class":t.setAttribute(_,l),t.setAttribute(g+"-set","attr"),t.setAttribute(g+"-set-attr","class"),t.setAttribute(g+"-set-attr-append","true"),m&&Q.wpRemoveClasses(t,m)}h&&n.push(l)}}n.length&&(r||1!=n.length?(a=r?"get_field(":"get_post_meta( get_the_ID(),",o=[],n.forEach(function(e){o.push(a+` '${e}'${r?"":", true"} )`)}),t.setAttribute("wp-if-custom",o.join(" && "))):t.setAttribute("wp-if-get-post-meta","|"+n[0]))},d.get_action_tag=function(e,t,a){for(var o=[],r=1;r<=T;r++){var n=V(e,d,"",null,1<r?`-`+r:"");n&&o.push(n)}return Q.getExpressiveActionTag(e,t,o,"PF",a)},e.push(d),d.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image],helptext:`Display or use the Post meta field. ACF is supported.`,helplink:"post-field",extra_name:null}),Q.wpCreatePostTagsCatsAction=function(t,e,p,c){t=t||"cms-tags",e=e||n("Post Tags &amp; Categories"),void 0===p&&(p=!0);function r(e){return"cms-tags"===t?e:e.replace("cms-tags",t)}var a={},o=(c||(a[r("cms-tags")]={type:"text",name:"Taxonomy",action:"element_attribute",placeholder:Q.defaultValue("post_tag"),options:Q.wpInsight.getTaxonomies,helptext:`<p>Select the taxonomy. For example, post_tag, category or any of custom taxonomies.</p>`}),a[r("cms-tags-display")]={type:"select",name:"Display",action:"element_attribute",options:[{key:"list",name:"link list"},{key:"this",name:"use this element as template"},{key:"child",name:"use the first child as template"}],helptext:`<p>Terms can be displayed as a list of links or using an element as a template.</p>`},a[r("cms-tags-delimiter")]={type:"text",name:"Delimiter",action:"element_attribute",placeholder:Q.forExample(", "),helptext:`<p>Display the delimiter (such as comma) between the terms.</p>`,show_if:r("cms-tags-display==this||child")},a[r("cms-tags-range")]={type:"text",name:"Range of items to show",action:"element_attribute",placeholder:Q.forExample("2 or 0-5 (0 is first)"),validate:Q.validateRangeValue,helptext:`<p>Display only certain terms. Use number - for example 2, or range - for example 0-5. 0 is the first element.</p><p>This is useful when having to display terms in fixed positions on the page, for example in CSS grid items. For example, we can display the first five terms (0-4) in one grid cell and the rest (5-99) in another.</p>`,show_if:r("cms-tags-display==this||child")},p&&(a[r("cms-tags-register")]={type:"checkbox",name:"Register taxonomy",action:"element_attribute",value:"true",empty_attribute:!0,aaashow_if:function(e,t){return e["cms-tags"]&&"post_tag"!==e["cms-tags"]},helptext:`<p>Register a new custom taxonomy.</p>`},a[r("cms-tags-name")]={type:"text",name:"Name singular",action:"element_attribute",validate:Q.required,placeholder:Q.forExample("Tag"),show_if:r("cms-tags-register"),helptext:`<p>Name of the singular term, for example Car brand</p>`},a[r("cms-tags-name-plural")]={type:"text",name:"Name plural",action:"element_attribute",placeholder:Q.defaultValue("<name>s"),show_if:r("cms-tags-register"),helptext:`<p>Plural name, for example Car brands.</p>`},a[r("cms-tags-types")]={type:"text",name:"Post types",action:"element_attribute",placeholder:Q.defaultValue("post, page"),options:Q.wpInsight.getPostTypes,open_list_on_focus:!0,show_if:r("cms-tags-register"),helptext:`<p>List the post types that will use this taxonomy.</p>`}),Q.addTag(t,e,null,function(e){E(o,e,o.mapAction)},a));return o.mapAction=function(e,t){var a=t.getAttribute(e.attribute)||c||"post_tag",o=p&&t.hasAttribute(e.attribute+"-register"),r=t.getAttribute(e.attribute+"-display");if("list"===r)t.setAttr("wp-the-terms","get_the_ID()"),t.setAttr("wp-the-terms-taxonomy",a);else{t.setAttr("wp-terms-template",null),t.setAttr("wp-terms-template-element",r),t.setAttr("wp-terms-template-taxonomy",a);var n=t.getAttribute(e.attribute+"-delimiter");if(null!==n&&t.setAttr("wp-terms-template-delimiter",n),t.hasAttribute(e.attribute+"-range")&&t.setAttr("wp-terms-template-range",t.getAttribute(e.attribute+"-range")),"this"!==r&&"child"===r&&0===t.find(">[wp-no-export],>[cms-no-export]").length){var i=t.getChildren(!0),s=[],r=t.first();if(r)for(var l=t.getChildPos(r,!1)+1;l<i.length;l++)(i[l].isElement&&0===i[l].findAttributesStartingWith("wp-").length&&0===i[l].findAttributesStartingWith("cms-").length&&0===i[l].findAttributesStartingWith("wc-").length||i[l].textNode&&null!==n&&i[l].content===n)&&s.push(i[l]);for(l=0;l<s.length;l++)s[l].remove();s=null}}o&&(r=t.getAttribute(e.attribute+"-name"),o=t.getAttribute(e.attribute+"-name-plural")||r+"s",r)&&o&&(t.setAttribute("wp-taxonomy",a),t.setAttribute("wp-taxonomy-types",t.getAttribute("cms-tags-types")||"post, page"),t.setAttribute("wp-taxonomy-name",o),t.setAttribute("wp-taxonomy-name-singular",r))},o.on_action_added=function(e,t,a){var o="list";"a"===e.tagName?o="this":e.text().indexOf(",")<0&&(o=e.hasTextOnly()?"this":"child"),e.setAttr(r("cms-tags-display"),o)},p&&(o.on_changed=function(){Q.setRequireThemeExport("Taxonomies")}),o},Q.wpCreatePostTagsCatsAction()),D=(h.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image,Q.tag_t_post,Q.tag_use_loop],helptext:`Display a list of post terms and optionaly, register a taxonomy.`,helplink:"post-tags-categories",extra_name:null}),e.push(h),[{key:"display_name",name:"Display name"},{key:"user_firstname",name:"First name"},{key:"user_lastname",name:"Last name"},{key:"user_nicename",name:"Nicename"},{key:"user_login",name:"User login"},{key:"user_email",name:"Email"},{key:"user_url",name:"Profile link"},{key:"posts_url",name:"Posts link"},{key:"avatar_image",name:"Avatar image"},{key:"count",name:"Posts count"},{key:"description",name:"Description"},{key:"custom",name:"Custom meta field"}]),g={"cms-author-field-author-id":{type:"text",name:"Author id",action:"element_attribute",placeholder:Q.defaultValue("current post author"),helptext:`<p>By default, the information about the author of the current post is shown.</p><p>To show another user, enter their id or a PHP variable holding the value.</p>`}},T=5,m=1;m<=T;m++)g["cms-author-field"+(S=1<m?`-`+m:"")]={type:"select",name:"Field id",action:"element_attribute",validate:Q.required,show_empty:!0,start_repeat_item:"Author field "+m,reorder_repeat_items:!0,options:D},g["cms-author-field-avatar-size"+S]={type:"text",name:"Avatar size",action:"element_attribute",placeholder:Q.defaultValue("96"),show_if:`cms-author-field${S}==avatar_image`},g["cms-author-field-meta-key"+S]={type:"text",name:"Field name",action:"element_attribute",placeholder:Q.forExample("profile_image"),validate:Q.required,show_if:`cms-author-field${S}==custom`},g["cms-author-field-acf"+S]={type:"checkbox",name:"Use ACF <nocaps>get_field()</nocaps>",empty_attribute:!0,value:"true",action:"element_attribute",show_if:`cms-author-field${S}==custom`,helptext:`<p>Use Advanced Custom Fields get_field function instead of get_post_meta function. Check this if your using the ACF plugin for custom post fields. Note that the theme will not work if this setting is checked and ACF plugin is not activated.</p>`},g["cms-author-field-type"+S]={type:"select",name:"Edit",action:"element_attribute",validate:Q.required,options:[{key:"content",name:"Content"},{key:"image",name:"Image"},{key:"background-image",name:"Background image"},{key:"link",name:"Link"},{key:"style",name:"Style"},{key:"attr",name:"Attribute"},{key:"class",name:"Class"}],helptext:`<p>Where on the selected element would you like to display the field value?</p><p>Selecting Image requires an img element, and selecting the Link requires the link element.</p>`},g["cms-author-field-image-size"+S]={type:"text",name:"Image size",action:"element_attribute",placeholder:Q.defaultValue("large"),options:Q.wpInsight.getImageSizes,open_list_on_focus:!0,show_if:"cms-author-field-type"+S+"==image||background-image"},g["cms-author-field-style"+S]={type:"text",name:"Style property",action:"element_attribute",placeholder:Q.forExample("color"),validate:Q.required,show_if:"cms-author-field-type"+S+"==style",helptext:`<p>Which style property to set? For example, color, background-color, font-size...</p>`},g["cms-author-field-attribute"+S]={type:"text",name:"Style property",action:"element_attribute",placeholder:Q.forExample("title"),validate:Q.required,show_if:"cms-author-field-type"+S+"==attr",helptext:`<p>Which element attribute to set? For example, href, alt, title...</p>`},g["cms-author-field-class-replace"+S]={type:"text",name:"Replace classes",action:"element_attribute",placeholder:Q.forExample("red big"),show_if:"cms-author-field-type"+S+"==class",helptext:`<p>List classes that should be replaced by the field value, optional.</p>`,fill_list_on_open:!0,open_list_on_focus:!0,options:Q.wpGetElementClassesOptions};for(var _=Q.addTag("cms-post-date",n("Post date"),null,function(e){E(_,e,_.mapAction)}),f=(_.mapAction=function(e,t){t.setAttribute("wp-the-time",`get_option( 'date_format' )`),t.setAttribute("wp-the-time-set","content")},_.on_show_live_data=async function(e,t){t.setHtml(e,new Date(await t.getPostDate(e)).toLocaleString(),_)},_.addMeta({tags:[Q.tag_set_content,Q.tag_ret_string,Q.tag_t_post,Q.tag_use_loop],helptext:`Display the post date in the format defined in WordPress settings.`,helplink:"post-date",extra_name:null}),e.push(_),Q.addTag("cms-author-field",n("Post Author"),null,function(e){E(f,e,f.mapAction)},g)),b=(f.on_action_added=function(r,e,t){function a(e,t,a){var o=f.attribute+(e?`-`+e:"")+(1<t?`-`+t:"");r.getAttribute(o)||("function"==typeof a&&(a=a()),r.setAttribute(o,a))}var o;"a"==r.tagName?(a("type",1,"content"),a("",1,"display_name"),a("type",2,"link"),a("",2,"posts_url")):"img"==r.tagName?(a("type",1,"image"),a("",1,"avatar_image")):(o=r.get$DOMElement())&&"none"!=o.css("backgroundImage")?(a("type",1,"background-image"),a("",1,"avatar_image")):a("type",1,"content")},f.mapAction=function(e,t){for(var a,o=[],r=1;r<=T;r++){var n=1<r?`-`+r:"",i=V(t,e,"",null,n),s=V(t,e,"type",null,n),l=V(t,e,"style",null,n),p=V(t,e,"image-size",null,n)||"large",c=V(t,e,"attribute",null,n),u=V(t,e,"class-replace",null,n),m=t.hasAttribute(e.attribute+"-if"+n),d=V(t,e,"meta-key",null,n),h=t.hasAttribute(e.attribute+"-acf"+n);if(i){var g="wp-call-function"+n,_=t.getAttr("cms-author-field-author-id")||Q.wpGetClass("PG_Helper")+`::getCurrentPost()->post_author`,f=t.getAttr("cms-author-field-author-id")||`false`;switch(i){case"display_name":case"user_nicename":case"user_login":case"user_firstname":case"user_lastname":case"user_email":case"user_url":case"description":b=`get_the_author_meta( ${Q.quoteParam(i)}, ${f} )`;break;case"posts_url":b=`get_author_posts_url( ${_}, get_the_author_meta( 'user_nicename', ${f} ) )`;break;case"avatar_image":var w={size:V(t,e,"avatar-size",null,n)||"96"},b=`get_avatar_url( ${_}, ${J.getPhpArrayForValues(w)} )`;break;case"count":b=`count_user_posts( get_the_author_meta( 'ID', ${f} ), 'post', true)`;break;case"custom":b=h?`get_field( ${Q.quoteParam(d)}, 'user_'.get_the_author_meta( 'ID', ${_} ))`:`get_user_meta( get_the_author_meta( 'ID', ${f} ), ${Q.quoteParam(d)}, true )`}switch(s){case"content":t.setAttribute(g+"-set","content");break;case"image":b=`PG_Image::getUrl( ${b}, ${Q.quoteParam(p)} )`,t.setAttribute(g+"-set","attr"),t.setAttribute(g+"-set-attr","src");break;case"background-image":b=`PG_Image::getUrl( ${b}, ${Q.quoteParam(p)} )`,t.setAttribute(g+"-set","style"),t.setAttribute(g+"-set-style","background-image"),t.setAttribute(g+"-set-style-mode","get_image_url");break;case"link":t.setAttribute(g+"-set","attr"),t.setAttribute(g+"-set-attr","href");break;case"style":t.setAttribute(g+"-set","style"),t.setAttribute(g+"-set-style",l);break;case"attr":t.setAttribute(g+"-set","attr"),t.setAttribute(g+"-set-attr",c);break;case"class":t.setAttribute(g+"-set","attr"),t.setAttribute(g+"-set-attr","class"),t.setAttribute(g+"-set-attr-append","true"),u&&Q.wpRemoveClasses(t,u)}t.setAttribute(g,`echo `+b),m&&o.push(i)}}o.length&&(h||1!=o.length?(a=h?"get_field(":"get_post_meta( get_the_ID(),",b=[],o.forEach(function(e){b.push(a+` '${e}'${h?"":", true"} )`)}),t.setAttribute("wp-if-custom",b.join(" && "))):t.setAttribute("wp-if-get-post-meta","|"+o[0]))},f.get_action_tag=function(e,t,a){for(var o=[],r=1;r<=T;r++){var n=V(e,f,"",null,1<r?`-`+r:"");n&&o.push(n)}return Q.getExpressiveActionTag(e,t,o,"Author",a)},e.push(f),f.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image],helptext:`Display or use Author fields. ACF is supported.`,helplink:"post-author",extra_name:null}),{}),T=5,m=1;m<=T;m++)b["cms-editable"+(S=1<m?`-`+m:"")]={type:"text",name:"Field id",action:"element_attribute",validate:Q.required,options:Q.wpInsight.getCustomizerControls,open_list_on_focus:!0,start_repeat_item:"Editable field "+m,reorder_repeat_items:!0,helptext:`<p>The field id, for example <b>job_location</b>.</p>
<p>Parent section id will be prefixed to the field id, if the section is defined on one of element's parents and prefixing section id is enabled on the section.</p>`},b["cms-editable-label"+S]={type:"text",name:"Label",action:"element_attribute",validate:Q.required,show_if:"!cms-editable-no-register"+S,helptext:`<p>The field label that will be shown in Customizer.</p>`},b["cms-editable-section"+S]={type:"text",name:"Section",action:"element_attribute",placeholder:Q.defaultValue("default section"),options:Q.wpInsight.getCustomizerSections,open_list_on_focus:!0,show_if:"!cms-editable-no-register"+S,helptext:`<p>Select a customizer section for this field.</p>
<p>By default, the field will be displayed in the first section defined on one of element's parents. Section id will be used as the field id prefix, if that's enabled on the section.</p>
<p>If the parent section is not found, a default section will be created.</p>`},b["cms-editable-type"+S]={type:"select",name:"Edit",action:"element_attribute",validate:Q.required,options:function(e,t){return"style"==t.tagName?[{key:"content",name:"Content"},{key:"text-color",name:"Text color"},{key:"background-color",name:"Background color"},{key:"background-image",name:"Background image"},{key:"style-prop",name:"Other Style property"}]:[{key:"content",name:"Content"},{key:"image",name:"Image"},{key:"text-color",name:"Text color"},{key:"background-color",name:"Background color"},{key:"background-image",name:"Background image"},{key:"link",name:"Link"},{key:"class",name:"Class"},{key:"page",name:"Select & load page"},{key:"css_rule",name:"CSS rule"},{key:"show",name:"Show element"}]},helptext:`<p>Where on the selected element would you like to display the field value?</p><p>Selecting Image requires an img element, and selecting the Link requires the link element.</p><p><b>Select &amp; Load page</b> will create a customizer field for selecting a page that is then loaded at this point on the page with a custom query. The fields and content of the page can then be displayed with Post actions.</p><p><b>CSS rule</b> will create an inline style element in the template header with a CSS rule that will set the selected style property to the field value. That is useful for customizing multiple styles on the page, for example all paragraphs within the post content.</p><p><b>Show element</b> will show the element if the control value is set. A checkbox customizer control will be created.</p>`},b["cms-editable-style-prop"+S]={type:"text",name:"Style property",action:"element_attribute",placeholder:Q.forExample("font-size"),validate:Q.required,show_if:"cms-editable-type"+S+"==style-prop",helptext:`<p>Which style property to set? For example, color, background-color, font-size...</p>`},b["cms-editable-style-selector"+S]={type:"text",name:"CSS Selector",action:"element_attribute",placeholder:Q.forExample("h1, h2, h3"),validate:Q.required,show_if:function(e,t){return"style"==t.tagName&&"content"!=e["cms-editable-type"+S]||"css_rule"===e["cms-editable-type"+S]},helptext:`<p>The CSS selector for a CSS rule that will set the selected style property to the field value. For example, div.content</p>`},b["cms-editable-class-replace"+S]={type:"text",name:"Replace classes",action:"element_attribute",placeholder:Q.forExample("red big"),show_if:"cms-editable-type"+S+"==class",helptext:`<p>List classes that should be replaced by the field value, optional.</p>`,fill_list_on_open:!0,open_list_on_focus:!0,options:Q.wpGetElementClassesOptions},b["cms-editable-textarea"+S]={type:"checkbox",name:"Use textarea field",attribute:"cms-editable-textarea"+S,empty_attribute:!0,value:"true",action:"element_attribute",show_if:"cms-editable-type"+S+"==content",helptext:`<p>Use textarea for editing the field. Useful for longer texts.</p>`},b["cms-editable-page-label-dummy"+S]={type:"displayhtml",name:"The custom loop around this element will load the selected page. Use actions like Post Content to display the page data inside this element. The IF statement is also added.",action:"none",attribute:"wp-site-content-label",show_if:"cms-editable-type"+S+"==page",class:"pg-action-info-label-text"},b["cms-editable-image-size"+S]={type:"text",name:"Image size",action:"element_attribute",placeholder:Q.defaultValue("large"),options:Q.wpInsight.getImageSizes,open_list_on_focus:!0,show_if:"cms-editable-type"+S+"==background-image||image"},b["cms-editable-style-important"+S]={type:"checkbox",name:"Add <nocaps>!important to style</nocaps>",action:"element_attribute",empty_attribute:!0,value:"true",show_if:"cms-editable-type"+S+"==background-image||background-color||text-color||style-prop|css_rule",helptext:`<p>Add !important to the style property value in order to override stronger CSS declarations.</p>`},b["cms-editable-no-register"+S]={type:"checkbox",name:"Don't create the control, just display it",action:"element_attribute",empty_attribute:!0,value:"true",helptext:`<p>Check this if the control is already defined elsewhere and you just wantto display its value here.</p>`},b["cms-editable-if"+S]={type:"checkbox",name:"Add <nocaps>IF</nocaps> statement",empty_attribute:!0,value:"true",action:"element_attribute",show_if:"!cms-editable-type"+S+"==show",helptext:`<p>Add the if statement around the element, so that the element will only be shown if all fields have values.</p>`};function Z(e,t){if(!t){var a=e.findOne("> [cms-block]");if(!a)return"";t=a.getAttr("cms-block")}if(!t||ee(t))return"";for(var o=e.getChildren().length,r=("${this}/"+t).replace(/_/g,"-"),n="[\n",i=0;i<o&&!(20<i);i++)n+=`    [ '${r}', {} ]${i<o-1?",":""}
`;return n+="]"}for(var y=Q.addTag("cms-editable",n("Customizer Field"),null,function(e){E(y,e,y.mapAction)},b),G=(y.mapAction=function(e,t){for(var a,o,r,n={},i=!1,s=[],l=1;l<=T;l++){var p=1<l?`-`+l:"",c="wp-cz-control",u=V(t,e,"",null,p),m=V(t,e,"label",null,p),d=V(t,e,"section",null,p),h=V(t,e,"type",null,p),g=V(t,e,"class-replace",null,p),_=V(t,e,"image-size",null,p)||"large",f=t.hasAttribute("cms-editable-style-important"+p),w=t.hasAttribute("cms-editable-if"+p),b=t.hasAttribute("cms-editable-no-register"+p);if(u){var y=!1,v=u,k=Q.wpGetCustomizerSectionInfo(t);if(k&&k.prefix&&(v=Q.isPhpValue(u)?Q.quoteParam(k.prefix)+"."+Q.quoteParam(u):Q.quoteParam(k.prefix+u)),"style"==t.tagName&&"content"!=h||"css_rule"===h){k=V(t,e,"style-selector",null,p);if(k){var x,A=`get_theme_mod( '${u}' )`;switch(h){case"background-color":x=h;break;case"background-image":x=h,A=`'url('.wp_get_attachment_image_url( ${A}, '${_}' ).')'`;break;case"text-color":x="color";break;default:x=V(t,e,"style-prop",null,p)}f&&(A+=`.' !important'`),!x||n[k]||(n[k]=""),n[k]+=`'${x}:'.${A}.';'`,y=i=!0}}b||(t.setAttribute(c+p,u),t.setAttribute(c+"-label"+p,m),d&&t.setAttribute(c+"-section"+p,d));var P="wp-cz-theme-mod",S="text";switch(h){case"content":case"style-prop":S=t.hasAttribute("cms-editable-textarea"+p)?"textarea":"text",b||t.setAttribute(c+"-type"+p,S),y||t.setAttribute(P+p,u);break;case"page":S="dropdown-pages",b||t.setAttribute(c+"-type"+p,S),t.setAttribute("wp-loop",u+"_query"),t.setAttribute("wp-loop-show-empty-text","false"),t.setAttribute("wp-loop-posts-per-page","1"),t.setAttribute("wp-loop-page",`get_theme_mod('${u}')`),t.setAttribute("wp-if-get-theme-mod",u);break;case"image":S="media",b||(t.setAttribute(c+"-type"+p,S),t.setAttribute(c+"-mime-type"+p,"image")),t.setAttribute(P+p,u),t.setAttribute(P+p+"-set","attr"),t.setAttribute(P+p+"-set-attr","src"),t.setAttribute(P+p+"-set-get-image"),t.setAttribute(P+p+"-set-get-image-size",_);break;case"text-color":S="color",b||t.setAttribute(c+"-type"+p,S),y||(t.setAttribute(P+p,u),t.setAttribute(P+p+"-set","style"),t.setAttribute(P+p+"-set-style","color"),f&&t.setAttribute(P+p+"-set-style-important"));break;case"background-color":S="color",b||t.setAttribute(c+"-type"+p,S),y||(t.setAttribute(P+p,u),t.setAttribute(P+p+"-set","style"),t.setAttribute(P+p+"-set-style","background-color"),f&&t.setAttribute(P+p+"-set-style-important"));break;case"background-image":S="media",b||(t.setAttribute(c+"-type"+p,S),t.setAttribute(c+"-mime-type"+p,"image")),y||(t.setAttribute(P+p,u),t.setAttribute(P+p+"-set","style"),t.setAttribute(P+p+"-set-style","background-image"),t.setAttribute(P+p+"-set-get-image"),t.setAttribute(P+p+"-set-get-image-size",_),f&&t.setAttribute(P+p+"-set-style-important"));break;case"link":S="url",b||t.setAttribute(c+"-type"+p,S),y||(t.setAttribute(P+p+"-set","attr"),t.setAttribute(P+p,u),t.setAttribute(P+p+"-set-attr","href"));break;case"class":S="text",b||t.setAttribute(c+"-type"+p,S),y||(t.setAttribute(P+p,u),t.setAttribute(P+p+"-set","attr"),t.setAttribute(P+p+"-set-attr","class"),t.setAttribute(P+p+"-set-attr-append","true"),g&&(Q.wpRemoveClasses(t,g),t.setAttribute(P+"-default"+p,g),t.setAttribute(c+"-default"+p,g)));break;case"show":S="checkbox",b||t.setAttribute(c+"-type"+p,S),y||(w=!0)}w&&"css_rule"!==h&&s.push(v)}}i&&(r="",$.each(n,function(e,t){r.length&&(r+="."),r+=`'${e} { '.${t}.' }'`}),"style"===t.tagName?(t.setAttribute("wp-call-function",r),t.setAttribute("wp-call-function-set","content"),t.setAttribute("wp-call-function-echo","true"),t.closest("body")&&t.setAttribute("scoped")):(a=t.closest("html"),J.addToChanges(function(){var e,t;a&&(e=pgCreate(`<style>${r}</style>`),t=a.findOne("head"))&&t.append(e)},this,[]))),s.length&&(1==s.length?t.setAttribute("wp-if-get-theme-mod",s[0]):(o="get_theme_mod",r=[],s.forEach(function(e){r.push(o+`( '${e}' )`)}),t.setAttribute("wp-if-custom",r.join(" && "))))},y.get_action_tag=function(e,t,a){for(var o=[],r=1;r<=T;r++){var n=V(e,y,"",null,1<r?`-`+r:"");n&&o.push(n)}return Q.getExpressiveActionTag(e,t,o,"CF",a)},y.on_action_added=function(r,e,t){function a(e,t,a){var o=y.attribute+(e?`-`+e:"")+(1<t?`-`+t:"");r.getAttribute(o)||("function"==typeof a&&(a=a()),r.setAttribute(o,a))}var o;"a"==r.tagName?(a("type",1,"content"),a("type",2,"link")):"img"==r.tagName?a("type",1,"image"):(o=r.get$DOMElement())&&"none"!=o.css("backgroundImage")?a("type",1,"background-image"):a("type",1,"content")},y.on_changed=function(){Q.setRequireThemeExport("Editable fields")},e.push(y),y.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image],helptext:`Make the element editable in the Customizer. Defines the control and displays its value.`,helplink:"customizer-field",extra_name:null}),Q.addTag("cms-section",n("Customizer Section"),null,function(e){E(G,e,G.mapAction)},{"cms-section":{type:"text",name:"Section Id",action:"element_attribute",validate:Q.validateSlug,placeholder:Q.forExample("contact_info"),helptext:`<p>The Id of the new section. This id is used in the section setting of Customizer fields action to place them in a section.</p>`},"cms-section-title":{type:"text",name:"Title",action:"element_attribute",placeholder:Q.forExample("Contact Information"),helptext:`<p>The section name that will be displayed in the customizer.</p>`},"cms-section-prefix":{type:"checkbox",name:"Use section id as prefix for enclosed fields",action:"element_attribute",value:"true",negvalue:"false",default_value:"false",helptext:`<p>Use the section id as a prefix for ids of all customizer fields that are defined and used within this element.</p><p>When checked, all fields will be referenced as {section id}_{field id}.</p><p>This is very useful for creating reusable customizable blocks. All that you have to do when using - or duplicating - such block, is to change its section id to a unique value. All field ids used in the block will automatically get correct and unique ids.</p>`}})),h=(G.mapAction=function(e,t){t.setAttribute("wp-cz-section",t.getAttribute("cms-section")),t.setAttribute("wp-cz-section-title",t.getAttribute("cms-section-title")),t.setAttribute("wp-cz-section-prefix",t.getAttribute("cms-section-prefix"))},G.get_action_tag=function(e,t,a){var o=[e.getAttribute(t.attribute)];return Q.getExpressiveActionTag(e,t,o,"CS",a)},G.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image],helptext:`Register a Customizer section. Section id will be used as a prefix of all fields enclosed in this section.`,helplink:"customizer-section",extra_name:null}),e.push(G),Q.wpCreatePaginationSmartAction=function(t,e,a,d,h){d=d||"PG_Pagination";function g(e){return"cms-pagination"===t?e:e.replace("cms-pagination",t)}var o,r={"cms-pagination-post-type":{type:"text",name:"Query name",action:"element_attribute",placeholder:Q.defaultValue("the main loop"),options:function(e,t){return Q.wpInsight.getPreceedingQueryNamesForPgel(t)},helptext:`<p>Leave empty to show the pagination for the main WordPress loop, or specify the name of the custom query to show pagination for a custom query.</p>`},"cms-pagination-fields":{type:"checkbox",name:"Use this element as the pagination template",action:"element_attribute",value:"true",empty_attribute:!0,helptext:`<p>There are two ways to use this action:</p><ul><li>Uncheck this field to show the classical WordPress navigation block. Bootstrap 3 and 4 are auto-detected and supported.</li><li>Or, check this checkbox to use the current element as a template for the pagination display.</li></ul>`},"cms-pagination-prev":{type:"selector",name:"Previous page item",action:"element_attribute",placeholder:"element selector",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{filter:function(e){return!0}},a,o)},selector_info:`Select the element for the previous page link.`,validate:function(e,t,a){return Q.wpValidateSelector(e,t,a)},show_if:"cms-pagination-fields",helptext:`<p>Select the link element for the previous page link.</p>`},"cms-pagination-next":{type:"selector",name:"Next page item",action:"element_attribute",placeholder:"element selector",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{filter:function(e){return!0}},a,o)},selector_info:`Select the element for the next page link.`,validate:function(e,t,a){return Q.wpValidateSelector(e,t,a)},show_if:"cms-pagination-fields",helptext:`<p>Select the link element for the next page link.</p>`},"cms-pagination-repeat-item":{type:"selector",name:"Page item (repeated for each page)",action:"element_attribute",placeholder:"element selector",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will be repeated for each available page.`,validate:Q.wpValidateSelector,show_if:"cms-pagination-fields",helptext:`<p>Select the element that will be repeated for displaying all available pages. The item should be a link or it should contain a link.</p>`},"cms-pagination-repeat-item-active-class":{type:"text",name:"Class for the active repeated element",action:"element_attribute",placeholder:Q.defaultValue("auto detect"),show_if:"cms-pagination-fields&&cms-pagination-repeat-item",helptext:`<p>Select the link element that will be repeated for displaying all available pages.</p>`},"cms-pagination-repeat-item-active":{type:"selector",name:"Active Page item",action:"element_attribute",placeholder:"element selector",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will be used to show the current page.`,validate:Q.wpValidateSelector,show_if:"cms-pagination-fields",helptext:`<p>Select the element that will be used to show the current page. The item should be a link or it should contain a link.</p>`},"cms-pagination-dots":{type:"selector",name:"Dots Page item",action:"element_attribute",placeholder:"element selector",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will be used to show the dots between page numbers.`,validate:Q.wpValidateSelector,show_if:"cms-pagination-fields",helptext:`<p>Select the element that will be used to show the dots between the page numbers.</p>`},"cms-pagination-current":{type:"selector",name:"Show &quot;current page&quot; in",placeholder:"element selector",action:"element_attribute",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will display the current page number.`,validate:Q.wpValidateSelector,show_if:"cms-pagination-fields",helptext:`<p>Select the element that will display the current page number.</p>`},"cms-pagination-total":{type:"selector",name:"Show &quot;total pages&quot; in",placeholder:"element selector",action:"element_attribute",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will display the number of total pages.`,validate:Q.wpValidateSelector,show_if:"cms-pagination-fields",helptext:`<p>Select the element that will display the number of total pages.</p>`},"cms-pagination-field-hide":{type:"checkbox",name:"Hide inactive links",action:"element_attribute",value:"true",empty_attribute:!0,show_if:"cms-pagination-fields",helptext:`<p>Check this to hide inactive previous and next page links.</p>`}},n=("cms-pagination"!==t?(o={},$.each(r,function(e,t){e=g(e),(t=cloneObject(t)).show_if&&(t.show_if=g(t.show_if)),o[e]=t})):o=r,a&&a(o),Q.addTag(g("cms-pagination"),e,null,function(e){E(n,e,n.mapAction)},o));return n.mapAction=function(e,t){var a=t.getAttribute(g("cms-pagination-post-type"));if(t.hasAttr(g("cms-pagination-fields"))){function o(e,t){e.setAttr("wp-pagination-field",null),e.setAttr("wp-pagination-field-item",t),e.setAttr("wp-pagination-field-query",a),e.setDataUncloned("pagination-helper",d),u&&0<=t.indexOf("_link")&&e.setAttr("wp-pagination-field-if",null)}var r=Q.wpGetPgelFromSelector(t,t.getAttr(g("cms-pagination-prev"))),n=Q.wpGetPgelFromSelector(t,t.getAttr(g("cms-pagination-next"))),i=Q.wpGetPgelFromSelector(t,t.getAttr(g("cms-pagination-total"))),s=Q.wpGetPgelFromSelector(t,t.getAttr(g("cms-pagination-current"))),l=Q.wpGetPgelFromSelector(t,t.getAttr(g("cms-pagination-repeat-item"))),p=Q.wpGetPgelFromSelector(t,t.getAttr(g("cms-pagination-repeat-item-active"))),c=Q.wpGetPgelFromSelector(t,t.getAttr(g("cms-pagination-dots"))),u=t.hasAttr(g("cms-pagination-field-hide")),r=(r&&o(r,"prev_link"),n&&o(n,"next_link"),l&&(l.setDataUncloned("active_page_html",null),l.setDataUncloned("dots_page_html",null),l.setDataUncloned("pagination-helper",d),o(l,"repeat"),l.setAttr("wp-pagination-field-active-class",t.getAttr("cms-pagination-repeat-item-active-class")||R([l],"active")),p&&(l.setDataUncloned("active_page_html",p.toStringOriginal(!1)),p.remove()),c)&&(l.setDataUncloned("dots_page_html",c.toStringOriginal(!1)),c.remove()),i&&o(i,"total"),s&&o(s,"page"),a&&!a.startsWith("$")&&(a="$"+a),d+`::isPaginated(${a=a||""})`);t.setAttr("wp-if-custom",r)}else{var m=null;switch(ge(t)){case"3":t.setAttribute("wp-bs-post-pagination"),m="wp-bs-pagination-custom-query";break;case"4":t.setAttribute("wp-bs-post-pagination"),t.setAttribute("wp-bs-pagination-version","4"),m="wp-bs-pagination-custom-query";break;default:t.setAttribute("wp-post-navigation")}a&&m&&t.setAttribute(m,"$"+a)}h&&h(t,l)},n},Q.wpCreatePaginationSmartAction("cms-pagination",n("Post Pagination"))),v=(h.on_action_added=function(e,t,a){e.setAttr("cms-pagination-fields",null),Q.setRequireThemeExport("Pagination")},h.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image,Q.tag_t_post,Q.tag_use_loop],helptext:`Display post pagination. Auto detects Bootstrap 3 and 4.`,helplink:"post-pagination",extra_name:null}),e.push(h),Q.addTag("cms-breadcrumbs",n("Post Breadcrumbs"),null,function(o){var r,n,e,i,s,l,p,c,u,m,d,h,g,t,a,_,f,w;o.hasAttr(v.attribute)&&(r=o.getAttribute(v.attribute)||"parents",o.removeAttribute(v.attribute),n=v.wpGetRepeatedElement(o),h=!0,g=o.hasAttr("cms-breadcrumbs-home"),n?(e=n.parent,i=v.wpGetRepeatedElementName(o,n,o.getAttribute("cms-breadcrumbs-item-name")),s=n.findOneIncludingSelf("a")):(e=pgCreate(`<ul></ul>`),o.append(e),n=pgCreate(`<li></li>`),e.append(n),s=i=pgCreate(`<a></a>`),n.append(s)),(l=Q.wpGetPgelFromSelector(o,o.getAttribute("cms-breadcrumbs-first-item")))&&((t=o.getAttribute("cms-breadcrumbs-first-item-name"))&&(p=v.wpGetRepeatedElementName(o,l,t)),c=l.findOneIncludingSelf("a")),(u=Q.wpGetPgelFromSelector(o,o.getAttribute("cms-breadcrumbs-last-item")))&&(t=o.getAttribute("cms-breadcrumbs-last-item-name"))&&(m=v.wpGetRepeatedElementName(o,u,t)),d=Q.wpGetPgelFromSelector(o,o.getAttribute("cms-breadcrumbs-separator")),n&&e?(a=[],_=[n],l&&_.push(l),u&&_.push(u),d&&d.detach(),e.children.forEach(function(e){_.indexOf(e)<0&&a.push(e)}),a.forEach(function(e){e.remove()}),f=l?"1":"0",w=u?`count( $breadcrumbs ) - 1`:`count( $breadcrumbs )`,J.addToChanges(function(){var e,t=J,a=(t.resetAfterMap(),`${Q.wpGetClass("PG_Helper")}::getBreadcrumbs( '${r}', ${!!g}, '${g?o.getAttr("cms-breadcrumbs-home-name")||"Home":""}');`);t.before(o,`<?php $breadcrumbs = ${a} ?>`),h&&t.before(o,`<?php if( !empty( $breadcrumbs ) ) : ?>`),t.before(n,`<?php for( $breadcrumbs_i = ${f}; $breadcrumbs_i < ${w}; $breadcrumbs_i++) : ?>`),t.before(n,`<?php $breadcrumb = $breadcrumbs[ $breadcrumbs_i ]; ?>`),i&&t.toPhpHtml(i,`echo $breadcrumb[ 'name' ];`),s&&s.setAttr("href",`<?php echo esc_url( $breadcrumb[ 'link' ] ); ?>`),t.after(n,`<?php endfor; ?>`),d&&((e=d.clone(!0)).insertAfter(n),t.before(e,`<?php if( $breadcrumbs_i < count( $breadcrumbs ) - 1 ) : ?>`),t.after(e,`<?php endif; ?>`)),l&&(t.before(l,`<?php $breadcrumb = $breadcrumbs[ 0 ]; ?>`),p&&t.toPhpHtml(p,`echo $breadcrumb[ 'name' ];`),c&&c.setAttr("href",`<?php echo esc_url( $breadcrumb[ 'link' ] ); ?>`),d)&&((e=d.clone(!0)).insertAfter(l),t.before(e,`<?php if( count( $breadcrumbs ) > 1 ) : ?>`),t.after(e,`<?php endif; ?>`)),u&&(t.before(u,`<?php $breadcrumb = $breadcrumbs[ count( $breadcrumbs ) - 1 ]; ?>`),m)&&t.toPhpHtml(m,`echo $breadcrumb[ 'name' ];`),h&&t.after(o,`<?php endif; ?>`)},this,[])):Q.addExportError(o,"Could not display Post Breadcrumbs.","Repeated element and other required parameters are not set.",Q.current_exported_page_name))},{"cms-breadcrumbs":{type:"select",name:"Show",action:"element_attribute",options:[{key:"parents",name:"Post parents"},{key:"categories",name:"Post categories"}],default_value:"parents",helptext:`<p>Select what type of breadcrumbs to show:</p><ul>
<li>Post parents - display the current post and all its parents. Useful for pages and other hierarchical post types.</li>
<li>Post categories - display the current post and all its parent categories.</li>
</ul>`},"cms-breadcrumbs-home":{type:"checkbox",name:"Add home",action:"element_attribute",value:"true",empty_attribute:!0,helptext:`<p>Check to add link to the site home to breadcrumbs.</p>`},"cms-breadcrumbs-home-name":{type:"text",name:"Home label",action:"element_attribute",value:"true",placeholder:Q.defaultValue("Home"),helptext:`<p>Text for the home link, default is Home.</p>`,show_if:"cms-breadcrumbs-home"},"cms-breadcrumbs-label1":{type:"label",name:"Repeated item",action:"element_attribute",class:"pg-action-info-label",helptext:`<p>This action tries to detect the correct layout for displaying breadcrumbs. If it can't find a suitable structure, it will create an unordered list of links.</p><p>Optionally, use the following settings to select element that should be used as a template for breadcrumbs items, alongside the element that should display the breadcrumb name and, if needed, the separator that should be placed between items.</p>`},"cms-breadcrumbs-item":{type:"selector",name:"Repeated element",action:"element_attribute",placeholder:"element selector",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{aafilter:function(e){return"a"===e.tagName||e===t}},a,o)},selector_info:`Select the element that will be repeated for each breadcrumb.`,validate:function(e,t,a){return Q.wpValidateSelector(e,t,a)},helptext:`<p>Select the element that will be repeated for each breadcrumb.</p>`},"cms-breadcrumbs-item-name":{type:"selector",name:"Name element",action:"element_attribute",placeholder:"element selector",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will display the name of each breadcrumb.`,validate:function(e,t,a){return Q.wpValidateSelector(e,t,a,"a")},helptext:`<p>Select the element that will display the name of each breadcrumb.</p><p>By default, this will be the first text element of the link element within the repeated element, or of the repeated element itself.</p>`,show_if:"cms-breadcrumbs-item"},"cms-breadcrumbs-separator":{type:"selector",name:"Separator element",action:"element_attribute",placeholder:"element selector",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that separates breadcrumbs.`,validate:Q.wpValidateSelector,helptext:`<p>Select the element that separates breadcrumbs.</p>`},"cms-breadcrumbs-label2":{type:"label",name:"First item (optional)",action:"element_attribute",class:"pg-action-info-label",helptext:`<p>Use this setting to select the element for displaying the first breadcrumb item.</p><p>This is useful in cases where the first item is displayed in a different way than the rest of breadcrumbs.</p>`},"cms-breadcrumbs-first-item":{type:"selector",name:"First breadcrumb element",action:"element_attribute",placeholder:"element selector",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element for the first breadcrumb.`,validate:Q.wpValidateSelector,helptext:`<p>Select the element for the first breadcrumb, if different from the repeated element.</p>`},"cms-breadcrumbs-first-item-name":{type:"selector",name:"First breadcrumb name element",action:"element_attribute",placeholder:"element selector",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will display the name of the first breadcrumb.`,validate:Q.wpValidateSelector,helptext:`<p>Select the element that will display the name of the first breadcrumb.</p><p>By default, this will be the first text element of the link element within the first breadcrumb element, or the element itself.</p>`,show_if:"cms-breadcrumbs-first-item"},"cms-breadcrumbs-label3":{type:"label",name:"Last item (optional)",action:"element_attribute",class:"pg-action-info-label",helptext:`<p>Use this setting to select the element for displaying the last breadcrumb item.</p><p>This is useful in cases where the last item is displayed in a different way than the rest of breadcrumbs.</p>`},"cms-breadcrumbs-last-item":{type:"selector",name:"Last breadcrumb element",action:"element_attribute",placeholder:"element selector",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element for the last breadcrumb.`,validate:Q.wpValidateSelector,helptext:`<p>Select the element for the last breadcrumb, if different from the repeated element.</p>`},"cms-breadcrumbs-last-item-name":{type:"selector",name:"Last breadcrumb name element",action:"element_attribute",placeholder:"element selector",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will display the name of the last breadcrumb.`,validate:Q.wpValidateSelector,helptext:`<p>Select the element that will display the name of the last breadcrumb.</p><p>By default, this will be the first text element of the link element within the last breadcrumb element, or the element itself.</p>`,show_if:"cms-breadcrumbs-last-item"}})),R=(v.wpGetRepeatedElement=function(e){var t=e.getAttribute("cms-breadcrumbs-item");return t?Q.wpGetPgelFromSelector(e,t):e.findOne("ul,div,a")},v.wpGetRepeatedElementName=function(e,t,a){var o,r=null;return a?r=Q.wpGetPgelFromSelector(e,a):t&&(o=t.findOneIncludingSelf("a"),r=o?(o.walk(function(e,t){return!e.hasTextOnly()||(r=e,!1)}),r||o):(t.walk(function(e,t){return!e.hasTextOnly()||(r=e,!1)}),r||t)),r},v.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image,Q.tag_t_post,Q.tag_use_loop],helptext:`Display post breadcrumbs (a chain of post parents) using the element as a template.`,helplink:"post-breadcrumbs",extra_name:null}),e.push(v),Q.wpGuessActiveClass=function(e,t){var a={},o=null,r=(e.forEach(function(e){e.getClasses().forEach(function(e){a[e]||(a[e]=0),a[e]++})}),[]),o=($.each(a,function(e,t){1===t&&r.push(e)}),null);if(0&&1===r.length)o=r[0];else for(var n=0;n<r.length;n++)if(0<=r[n].indexOf("active")||0<=r[n].indexOf("current")||0<=r[n].indexOf("selected")){o=r[n];break}return o||t}),k=Q.addTag("cms-menu",n("Menu"),null,function(e){E(k,e,k.mapAction)},{"cms-menu":{type:"text",name:"Location",action:"element_attribute",can_add_items:!0,open_list_on_focus:!0,validate:Q.requireSlug,options:Q.wpInsight.getMenus,helptext:`<p>Choose the menu location. In WordPress dashboard menu location is then connected with the menu that will be displayed in the location.</p>`},"cms-menu-register":{type:"checkbox",name:"Register the menu location",action:"element_attribute",value:"true",empty_attribute:!0,on_changed:function(){Q.setRequireThemeExport("Menus")},helptext:`<p>Register a new menu location.</p>`},"cms-menu-register-description":{type:"text",name:"Description",action:"element_attribute",placeholder:Q.forExample("The footer menu"),show_if:"cms-menu-register",on_changed:function(){Q.setRequireThemeExport("Menus")},validate:function(e,t,a){if(e.hasAttribute("cms-menu-register")&&!a)return"Description is required."},helptext:`<p>The location description that will be shown in WordPress dashboard.</p>`},"cms-menu-dropdown":{type:"selector",name:"Menu item with dropdown",action:"element_attribute",placeholder:Q.defaultValue(".dropdown"),helptext:"The top menu item element that has a submenu (dropdown).",start_section:"Multi-level options"}}),x=(k.wp_will_replace_element=!0,k.mapAction=function(e,t){var a=t.getAttribute(e.attribute);if(a){t.setAttribute("wp-nav-menu",null),t.setAttribute("wp-nav-menu-theme-location",a);var o=ge(t);switch(o=o&&!t.hasClass("nav")?null:o){case"3":t.setAttribute("wp-nav-menu-type","bootstrap");break;case"4":t.setAttribute("wp-nav-menu-type","bootstrap4");break;default:t.setAttribute("wp-nav-menu-type","smart"),t.setAttribute("wp-nav-menu-dropdown",t.getAttribute("cms-menu-dropdown")||".dropdown");var r=R(t.find("*"));r&&t.setAttribute("wp-nav-menu-current-class",r)}t.setAttribute("wp-if-has-nav-menu",t.getAttribute(e.attribute)),t.hasAttr("cms-menu-register")&&(t.setAttr("wp-register-menu",a),t.setAttr("wp-register-menu-description",t.getAttribute(e.attribute+"-register-description")))}},k.on_show_live_data=async function(e,n){var t=e.getAttribute(k.attribute);if(t){var a=await n.getMenuForMenuLocation(t);if(a){var o,t=e.getAttribute("cms-menu-dropdown")||".dropdown",i=(t&&(t=e.findOne(t))&&(o=t.clone(!1)),R(e.find("*")));if("a"===e.tagName||"li"===e.tagName)n.reportIssue(e,"Can not import live data if Menu action is placed directly on the LI or A element.",k);else{function r(e,t,a){var o,r=e.findOneIncludingSelf("a")||e;Q.wpNavMenu_setupAttributes(e,r,!0),e.setAttribute("class",e.getAttribute("class").replace("{CLASSES}","")),"a"===r.tagName&&n.setAttribute(r,"href",t.url,k),n.setAttribute(r,"title",t.attr_title,k),n.setHtml(r,r.html().replace("{TITLE}",t.title.rendered),k),!a&&i&&(o=i.trim().split(/\s+/)[0],e.findIncludingSelf("."+o).forEach(function(e){e.removeClass(o)}))}for(var s=(e.first()||e).clone(!1),l=(e.removeAllChildren(),null),p=0;p<a.items.length;p++){var c=a.items[p];if(0===c.items.length)r(u=s.clone(),c,0===p),l?u.insertAfter(l):e.prepend(u),l=u;else if(o){var u=o.clone(),m=Q.wpNavMenu_getDropdownSublevel(u);if(m){var d=m.first();if(d)for(var h=d.parent,g=(h.detachAllChildren(),r(u,c),l?u.insertAfter(l):e.prepend(u),l=u,null),_=0;_<c.items.length;_++){var f=d.clone();r(f,c.items[_],!0),g?f.insertAfter(g):h.prepend(f),g=f}}}}}}}},k.on_action_added=function(e,t,a){},k.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image,Q.tag_t_post,Q.tag_use_loop],helptext:`Display - and optionally register - a menu. Auto detects Bootstrap 3 and 4 .nav menus, otherwise uses the smart menu that auto-detects the menu item structure.`,helplink:"menu",extra_name:null}),e.push(k),Q.addTag("cms-sidebar",n("Sidebar"),null,function(e){E(x,e,x.mapAction)},{"cms-sidebar":{type:"text",name:"Sidebar id",action:"element_attribute",validate:Q.required,options:Q.wpInsight.getSidebars,open_list_on_focus:!0,helptext:`<p>Sidebar id that will be displayed here.</p>`},"cms-sidebar-register":{type:"checkbox",name:"Register sidebar",action:"element_attribute",value:"true",empty_attribute:!0,helptext:`<p>Register a new sidebar that can then be customized in WordPress dashboard or customizer.</p>`},"cms-sidebar-name":{type:"text",name:"Name",action:"element_attribute",validate:Q.required,show_if:"cms-sidebar-register",helptext:`<p>Sidebar name that will be shown in the WordPress dashboard.</p>`}})),M=(x.mapAction=function(e,t){var a=t.getAttribute(e.attribute),o=t.hasAttribute(e.attribute+"-register"),r=t.getAttribute(e.attribute+"-name")||a;if(o){t.setAttribute("wp-register-sidebar",r),t.setAttribute("wp-register-sidebar-id",a);for(var n="h3",i=1;i<=6;i++)if(t.findOne("h"+i)){n="h"+i;break}"h3"!=n&&(t.setAttribute("wp-register-sidebar-before-title",`<${n} class="widgettitle">`),t.setAttribute("wp-register-sidebar-after-title",`</${n}>`))}t.setAttribute("wp-dynamic-sidebar",a);function s(e){t.setAttribute("wp-register-sidebar-before",`<${e} id="%1$s" class="widget %2$s">`),t.setAttribute("wp-register-sidebar-after",`</${e}>`)}fe(t.tagName)?(t.setAttribute("wp-dynamic-sidebar-set","element"),o&&s("div")):"ol"!=t.tagName&&"ul"!=t.tagName&&o&&s("div")},x.on_show_live_data=async function(e,t){var a,o=e.getAttribute(x.attribute);o&&(o=await t.getSidebar(o),a="",o.widgets.forEach(function(e){a+=e.rendered}),t.setHtml(e,a,x))},x.on_action_added=function(e,t,a){},x.on_changed=function(){Q.setRequireThemeExport("Sidebars")},x.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image,Q.tag_t_post,Q.tag_use_loop],helptext:`Register and display a sidebar.`,helplink:"sidebar",extra_name:null}),e.push(x),Q.addTag("cms-template-part",n("Reusable Template part"),null,function(e){E(M,e,M.mapAction)},{"cms-template-part":{type:"text",name:"Name",action:"element_attribute",validate:function(e,t,a){return a?e.hasAttr("cms-template-part-define")&&a.indexOf("/")<0?`HINT: Use folders, for example parts/`+a:void 0:"Template name is required"},placeholder:Q.forExample("content-long"),options:Q.wpInsight.getTemplateParts,open_list_on_focus:!0,helptext:`<p>A template part name, for example contact or post-header.</p><p>You can append a folder, for example parts/post-content, so that all template parts are neatly organized in subfolders. That prevents the risk of template part name clashing with another theme file.</p>`},"cms-template-part-define":{type:"checkbox",name:"Define template part",action:"element_attribute",value:"true",empty_attribute:!0,helptext:`<p>Define and use the template part here.</p>`},"cms-template-part-define-label":{type:"displayhtml",name:"Note: Actions that replace the content of the whole element might clash with the Reusable Template Part action. If that happens, add a wrapper element and place Reusable Template Part on the wrapper element.",action:"none",show_if:function(e,t){if(t.hasAttr("cms-template-part-define"))return 1<Q.getActionTypes(t).length}}})),ee=(M.mapAction=function(e,t){var a,o=t.getAttr("cms-template-part"),r=null;o&&(2===(a=o.split("-")).length&&(o=a[0],r=a[1]),t.hasAttr("cms-template-part-define")&&(t.setAttr("wp-template-part",null),t.setAttr("wp-template-part-slug",o),t.setAttr("wp-template-part-name",r)),t.setAttr("wp-include-template-part",null),t.setAttr("wp-include-template-part-slug",o),t.setAttr("wp-include-template-part-name",r))},M.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image,Q.tag_t_post,Q.tag_use_loop],helptext:`Includes and optionally defines a template part.`,helplink:"reusable-template-part",extra_name:null}),e.push(M),function(e){if(e){if(!e.match(/^\$*[a-z0-9\-]*$/))return"Only letters, numbers and - are allowed";if(e.match(/^[0-9]/))return"Must not start with number"}return null}),te=Q.addTag("cms-block","Block",null,null,{"cms-block":{type:"text",name:"Unique Id",action:"element_attribute",placeholder:Q.forExample("my-block"),force_quotes:!0,translate:!1,parameter_name:"name",validate:function(e,t,a){return ee(a)},helptext:`<p>Unique slug/id that identifies the block. The best practice is to add the class with the same name to the block and use it for styling.</p>`},"cms-block-title":{type:"text",name:"Title",action:"element_attribute",force_quotes:!0,parameter_name:"title",placeholder:Q.forExample("My Block"),helptext:`<p>Title is a human-readable name of the block.</p>`,translate:!0},"cms-block-description":{type:"text",name:"Description",action:"element_attribute",parameter_name:"description",helptext:`<p>Describe the block.</p>`,force_quotes:!0,translate:!0},"cms-block-icon":{type:"text",name:"Icon",action:"element_attribute",parameter_name:"icon",force_quotes:!0,helptext:`<p>Icon can be one of the predefined WordPress icons or SVG code.</p>`,placeholder:Q.forExample("book-alt or SVG")},"cms-block-icon-browse":{type:"button",name:"Browse icons",helptext:`<p>Open the list of built-in WordPress Dashicons gallery and other SVG icons in a browser window. For Dashicons, Copy the icon name without <code>dashicons-</code> prefix. For others, copy the SVG code.</p>`,func:function(e,t,a,o,r){a=[{label:"WordPress dashicons",helptext:`Copy the name without the dashicons- prefix.`,action:function(){pinegrow.openExternalUrl("https://developer.wordpress.org/resource/dashicons")},link_url:isApp()?null:"https://developer.wordpress.org/resource/dashicons",dont_handle_click:!isApp()},{label:"Remix icons",helptext:`Copy the SVG code.`,action:function(){pinegrow.openExternalUrl("https://remixicon.com/")},link_url:isApp()?null:"https://remixicon.com/",dont_handle_click:!isApp()},{label:"Bootstrap icons",helptext:`Copy the SVG code.`,action:function(){pinegrow.openExternalUrl("https://icons.getbootstrap.com/")},link_url:isApp()?null:"https://icons.getbootstrap.com/",dont_handle_click:!isApp()}];return new CrsaContextMenu(a,t).showForElement(t,null,8),r.preventDefault(),r.stopPropagation(),!1}},"cms-block-category":{type:"select",name:"Category",action:"element_attribute",parameter_name:"category",show_empty:!0,force_quotes:!0,placeholder:Q.wpGetDefaultBlocksCategory(),helptext:`<p>Select the category in which the block will be listed in Block editor. Use custom to use a custom value.</p>`,options:[{key:"text",name:"Text"},{key:"media",name:"Media"},{key:"design",name:"Design"},{key:"widgets",name:"Widgets"},{key:"theme",name:"Theme"},{key:"embed",name:"Embed"},{key:"custom",name:"Custom"}]},"cms-block-category-custom":{type:"text",name:"Custom category id",action:"element_attribute",placeholder:Q.forExample("my_category"),show_if:"cms-block-category==custom",force_quotes:!0,options:Q.wpInsight.getBlockCategories,helptext:`<p>Enter the id of the custom category.</p>`,open_list_on_focus:!0},"cms-block-category-custom-register":{type:"checkbox",name:"Register category",action:"element_attribute",value:"true",helptext:`<p>Register a custom category. Each category should be registered only once per theme.</p>`,show_if:"cms-block-category==custom"},"cms-block-category-custom-register-name":{type:"text",name:"Category name",action:"element_attribute",placeholder:Q.forExample("My Category"),force_quotes:!0,helptext:`<p>A human-readable name of the custom category.</p>`,show_if:"cms-block-category-custom-register"},"cms-block-category-custom-register-icon":{type:"text",name:"Category icon",action:"element_attribute",force_quotes:!0,placeholder:Q.forExample("wordpress"),helptext:`<p>One of the predefined WordPress icons.</p>`,show_if:"cms-block-category-custom-register"},"cms-block-auto-create":{type:"button",name:'<i class="icon icon-wand"></i> Auto create',helptext:"Use the AI Assistant to automatically create an editable block.",func:async function(e,t,a,o,r,n){Q.aiAutoCreateEditableBlock?(t.html('<i class="icon icon-wand"></i> Please wait...').attr("disabled","disabled"),await Q.aiAutoCreateEditableBlock(e),pinegrow.selectedElements.reselect()):pinegrow.showQuickError("AI Assistant is not loaded.")}},"cms-block-type":{type:"select",name:"Block type",action:"element_attribute",default_value:"auto",start_section:"More options",options:[{key:"auto",name:"Auto (use project setting)"},{key:"native",name:"Regular JavaScript/React block (if no PHP WP actions)"},{key:"native-dynamic",name:"Dynamic PHP block"},{key:"native-hybrid",name:"Hybrid (React in the editor, PHP on the front-end)"},{key:"acf",name:"ACF"}],helptext:`<p>Select how the block is implemented in the exported theme:</p>
<ul>
<li><b>Auto</b> - use the global Theme / Plugin setting (default is Regular JavaScript blocks).</li>
<li><b>Regular JavaScript/React blocks</b> - generate a native WordPress block that renders with JavaScrip in the browser at the time you edit the post. Only Block Attributes and Block Inner Content actions are allowed in such blocks.</li>
<li><b>Dynamic PHP blocks</b> - generate a native WordPress block that renders with PHP every time it is displayed. The block can use display posts and use all WordPress actions.</li>
<li><b>Hybrid blocks</b> - the best of both worlds: React in the editor, PHP on the front-end. Hybrid blocks are always up-to-date. No block recovery, no re-saving posts.</li>
<li><b>ACF PRO</b> - generate the ACF PRO block. This option requires the ACF PRO plugin.</li>
</ul>`},"cms-block-folder":{type:"text",name:"Folder",action:"element_attribute",placeholder:Q.defaultValue("blocks/[block_id]"),force_quotes:!0,helptext:`<p>By default, block php template is exported in the folder blocks/[block_id], for example blocks/product.</p>`,translate:!1},"cms-block-keywords":{type:"text",name:"Keywords",action:"element_attribute",parameter_name:"keywords",force_array:!0,string_or_array:!0,helptext:`<p>Keywords are comma separated list of terms that help user locate the block in the Block editor.</p>`,placeholder:Q.forExample("product, shop, promo")},"cms-block-post-types":{type:"select",name:"Post types",action:"element_attribute",parameter_name:"post_types",force_array:!0,string_or_array:!0,show_empty:!0,options:Q.wpInsight.getPostTypes,open_list_on_focus:!0,helptext:`<p>Use post types field to limit the availability of the block to selected post types.</p>`,multiple:!0,show_if:function(e,t){return"acf"===Y(A(t)).block_type}},"cms-block-style":{type:"text",name:"Style",action:"element_attribute",parameter_name:"enqueue_style",placeholder:Q.forExample("blocks/my_block/style.css"),helptext:`<p>Select a CSS stylesheet that contains block styling. The stylesheet will be included both on the backend in the block editor and on the front end. Do not include stylesheets that are already included in the theme, such as framework stylesheets.</p>`,file_picker:isApp(),file_picker_no_proxy:!0,file_picker_use_project_as_parent:!0,validate:Q.fieldIsValidFile},"cms-block-editor-style":{type:"text",name:"Editor style",action:"element_attribute",parameter_name:"enqueue_editor_style",placeholder:Q.forExample("blocks/my_block/editor_style.css"),helptext:`<p>Select a CSS stylesheet that contains any special block styling that should be only included when editing the site in the block editor.</p>`,file_picker:isApp(),file_picker_no_proxy:!0,file_picker_use_project_as_parent:!0,validate:Q.fieldIsValidFile},"cms-block-script":{type:"text",name:"Script",action:"element_attribute",parameter_name:"enqueue_script",placeholder:Q.forExample("blocks/my_block/script.js"),helptext:`<p>Include a script file that runs the dynamic Javascript code for the block on the front-end and in the editor.</p>`,file_picker:isApp(),file_picker_no_proxy:!0,file_picker_use_project_as_parent:!0,validate:Q.fieldIsValidFile},"cms-block-editor-script":{type:"text",name:"Editor script",action:"element_attribute",parameter_name:"enqueue_editor_script",placeholder:Q.forExample("blocks/my_block/script.js"),helptext:`<p>Include a script file that runs the dynamic Javascript code for the block in the block editor.</p>`,file_picker:isApp(),file_picker_no_proxy:!0,file_picker_use_project_as_parent:!0,validate:Q.fieldIsValidFile},"cms-block-view-script":{type:"text",name:"View script",action:"element_attribute",parameter_name:"enqueue_view_script",placeholder:Q.forExample("blocks/my_block/script.js"),helptext:`<p>Include a script file that runs the dynamic Javascript code for the block only in the front end (not in the editor).</p>`,file_picker:isApp(),file_picker_no_proxy:!0,file_picker_use_project_as_parent:!0,validate:Q.fieldIsValidFile},"cms-block-parent":{name:"Parents",type:"text",textarea:!0,action:"element_attribute",placeholder:Q.defaultValue("all"),helptext:`<p>Optional. Allowed parent block types, comma or new line separated. Useful if the block should be listed only for specific parent blocks when adding an inner block. You can omit namespace for blocks from this project. Example:</p>
<pre>
aboutme
showcase
core/heading
mytheme/project
mytheme/experience
</pre>`},"cms-block-supports":{type:"select",name:"Supports",action:"element_attribute",multiple:!0,show_empty:!0,options:[{key:"anchor",name:"Anchor",html:"Anchor - link directly to a block"},{key:"align",name:"Align",html:"Align - change blocks alignment"},{key:"alignWide=false",name:"alignWide=false",html:"alignWide=false - disable wide alignment"},{key:"ariaLabel",name:"ARIA label",html:"ARIA label - define accessible label"},{key:"className=false",name:"className=false",html:"className=false - disable auto class"},{key:"color=true",name:"color=true",html:"Enable default color settings. Use suboptions to modify."},{key:"color.background=false",name:"color.background=false",html:"Background color=false - disable background color"},{key:"color.gradients",name:"color.gradients",html:"Gradients - enable gradient background"},{key:"color.link",name:"color.link",html:"Link color - enable link color"},{key:"color.text=false",name:"color.text=false",html:"Text color=false - disable text color"},{key:"customClassName=false",name:"customClassName=false",html:"customClassName=false - disable custom class name"},{key:"defaultStylePicker=false",name:"defaultStylePicker=false",html:"defaultStylePicker=false - remove default style picker"},{key:"dimensions.minHeight",name:"Min height",html:"Min height - enable min height control"},{key:"filter.duotone",name:"Duotone",html:"Duotone - enable duotone filter"},{key:"html=false",name:"html=false",html:"html=false - disable HTML editing"},{key:"inserter=false",name:"inserter=false",html:"inserter=false - hide block from inserter"},{key:"layout.allowSwitching",name:"Allow layout switching",html:"Allow layout switching - toggle between layout types"},{key:"layout.allowEditing=false",name:"layout.allowEditing=false",html:"layout.allowEditing=false - hide layout controls"},{key:"layout.allowInheriting=false",name:"layout.allowInheriting=false",html:"layout.allowInheriting=false - disable inheriting layout"},{key:"layout.allowSizingOnChildren",name:"Allow sizing on children",html:"Allow sizing on children - enable sizing controls on child blocks"},{key:"layout.allowVerticalAlignment=false",name:"layout.allowVerticalAlignment=false",html:"layout.allowVerticalAlignment=false - disable vertical alignment"},{key:"layout.allowJustification=false",name:"layout.allowJustification=false",html:"layout.allowJustification=false - disable justification control"},{key:"layout.allowOrientation=false",name:"layout.allowOrientation=false",html:"layout.allowOrientation=false - disable orientation control"},{key:"layout.allowCustomContentAndWideSize=false",name:"layout.allowCustomContentAndWideSize=false",html:"layout.allowCustomContentAndWideSize=false - disable custom content and wide size"},{key:"multiple=false",name:"multiple=false",html:"multiple=false - use block only once per post"},{key:"reusable=false",name:"reusable=false",html:"reusable=false - prevent conversion to reusable block"},{key:"lock=false",name:"lock=false",html:"lock=false - remove locking UI"},{key:"position.sticky",name:"Sticky",html:"Sticky - enable sticky position control"},{key:"spacing.margin",name:"Margin",html:"Margin - enable margin control"},{key:"spacing.padding",name:"Padding",html:"Padding - enable padding control"},{key:"spacing.blockGap",name:"Block gap",html:"Block gap - enable block gap control"},{key:"typography.fontSize",name:"Font size",html:"Font size - enable font size control"},{key:"typography.lineHeight",name:"Line height",html:"Line height - enable line height control"}],helptext:`<p>Enable support of common WordPress block controls and block options. Notes:</p><ul>
<li><b>multiple=false</b> - allow only one instance of the block on the post.</li>
<li><b>className=false</b> - do not auto generate block class names.</li>
</ul>`},"cms-block-load-edited-post":{type:"checkbox",name:"Load edited post",action:"element_attribute",value:"true",empty_attribute:!0,helptext:`<p>If this is a Dynamic PHP block, load the edited post so that actions such as Post Title, Post Excerpt and so on display the correct data when editing the post in the block editor.</p><p>This option only affects the block editor, and is not used when the block is displayed on the front-end.</p>`,show_if:function(e,t){var{block_type:a,use_react:o}=Y(A(t));return"native"===a&&!o}}}),A=function(e){var t,a=e.getDataUncloned("cms-block-pgel");return(a=a||e.closest("[cms-block]"))||e.clonedFromPgId&&(t=getPgNodeByPgId(e.clonedFromPgId))&&(a=t.closest("[cms-block]")),a},ae=function(e,a){var o=null,r=/^(cms\-block|cms\-no\-export|wp\-no\-export|wp\-preview|wp\-loop\-skip)/;return e.walkSelfAndChildren(function(t){return t.isElement&&t.getAttrList().forEach(function(e){(e.name.startsWith("cms-")||e.name.startsWith("wp-")||e.name.startsWith("wc-"))&&!e.name.match(r)&&(o=t)}),null===o&&!0!==a}),o},Y=function(e){var t=!1,a=!1,o=e.getDataUncloned("cmsBlockType");return o||("native-auto"===(o="auto"===(o="native"===(o="auto"===(o=e&&e.getAttribute("cms-block-type")||"auto")&&Q.current_theme_info&&Q.current_theme_info.options?Q.current_theme_info.options.blocks_type||"native-hybrid":o)?"native-auto":o)?"native-auto":o)?null===ae(e,!1)?(o="native",a=t=!0):o="native":"native-dynamic"===o?(o="native",t=!1):"native-hybrid"===o&&(o="native",t=!1,a=!0),{block_type:o,use_react:t,use_react_for_edit:a})},oe=(Q.wpExportAllBlocks=function(e){e.walkSelfAndChildren(function(e){return!e.isElement||!e.hasAttribute("cms-block")||(oe(e),"skip_children")})},function(r){Q.requireResource("wp_pg_blocks_helpers.php","inc",null),Q.includeInFunctions("wp_pg_blocks_helpers.php","inc",null,Q.wpGetClass("PG_Blocks")),r.find("[cms-block]").forEach(function(e){oe(e)}),r.setDataUncloned("cmsBlockType",null);var e,o,t,n,D,y,v,i,a,k,s,x,A,P,l,G,R,p,M,H,c,u,m,d,h,g,_,S,f,w,b,T,C,E,I,L,B,W,F={},O=(r.setDataUncloned("cmsBlockGetAuthors",F),Y(r)),{block_type:j,use_react:q,use_react_for_edit:z}=O,N=j,U=Q.wpExportWithIds&&"native"===N&&!q,V=ne(r),O=(r.setData("list_of_attributes",V),r.setDataUncloned("cmsBlockType",O),r.getAttr("cms-block"));ee(O)?Q.addExportError(r,`<b>Invalid block id:</b> <b>${O}</b>`,`Block ids can only contain letters, numbers and the - character.`):O&&("native"!==j||q||ae(r,!0)===r&&Q.addExportError(r,`<b>WP Actions on Block definition:</b> <b>${O}</b>`,`Non-Block WP actions should not be placed on the main element with the Block action. Create a wrapper element with the Block action and keep the rest of WP actions on ${r.getName({short:!0})}. <a href="https://pinegrow.com/docs/wordpress/actions/block/#using-wordpress-actions-on-dynamic-php-blocks" class="external">More information.</a>`),r.parent&&r.parent.hasAttribute("cms-block-inner-content")&&r.parent.setDataUncloned("inner-blocks-template",Z(r.parent,O)),e="blocks/"+O+"/",(L=r.getAttr("cms-block-folder"))&&((e=L).endsWith("/")||(e+="/"),e.startsWith("/"))&&(e=e.replace("/","")),L="acf"===N?"acf_register_block_type":Q.wpGetClass("PG_Blocks")+`::register_block_type`,Q.isOnMasterOrInContent(r)?(o=r.getAttribute("cms-block"),t=Q.current_theme_info.slug,n=r.getAttribute("cms-block-category")||Q.wpGetDefaultBlocksCategory(),D=r.hasAttribute("cms-block-load-edited-post"),"custom"===n&&(n=r.getAttr("cms-block-category-custom")||Q.wpGetDefaultBlocksCategory()),y=!1,(v=r).walkSelfAndChildren(function(e){if(e.isElement){if(e.hasAttribute("cms-block")&&e!==v)return"skip_children";(e.hasAttribute("cms-block-field")||e.hasAttribute("cms-block-condition"))&&e.setDataUncloned("cms-block-pgel",v),e.hasAttribute("cms-block-inner-content")&&(y=e).setDataUncloned("cms-block-pgel",v)}return!0}),a=(r.getAttribute("cms-block-supports")||"").split(","),i={},a.forEach(function(e){var t,a,o,r;e&&(t=!0,o=(r=e.split("="))[0],2===r.length&&(t="true"===r[1]),r=1===(r=o.split(".")).length?i:(a=r[0],o=r[1],i[a]||(i[a]={}),"object"!=typeof i[a]&&(i[a]={}),i[a]),!0===t&&"object"==typeof r[o]||(r[o]=t))}),I=(a=new PgReact).attributesObjectToObjectString(i),a=a.attributesObjectToPHPArrayString(i,!0),k=function(e){return e.replace(/'/g,"\\'")},s=t.replace(/_/g,"-")+"/"+o,"native"===N&&(S={},x=!1,A=function(e){var t=e.clone(!0);return t.removeAttrIfStartsWith("wp-",!0),t.removeAttrIfStartsWith("cms-",!0),t.removeAttrIfStartsWith("wc-",!0),t},P=function(e,t,a){return a||(S[e]&&S[e][t]?S[e][t]:a)},r.walkSelfAndChildren(function(e){if(e.isElement){if(e.hasAttribute("cms-block")&&e!==v)return"skip_children";for(var t,a,o,r,n,i=1;i<=ie;i++){var s=1===i?"":`-`+i,l=e.getAttribute("cms-block-field"+s);if(K(e,l))break;if(l&&!S[l]){var p=e.getAttribute("cms-block-field-type"+s),c=e.hasAttribute("cms-block-field-if"+s),u=e.getAttribute("cms-block-field-image-size"+s),m=e.getAttribute("cms-block-field-style"+s),d=e.getAttribute("cms-block-field-attribute"+s),h=e.getAttribute("cms-block-field-class-replace"+s),g=e.getAttribute("cms-block-field-default-value"+s),_=e.getAttribute("cms-block-field-control"+s),_=P(l,"control",_)||"auto",f=e.getAttribute("cms-block-field-post-prop"+s);if(f&&(w=(f=f.split(":"))[0],!f[1].split(".")[1].startsWith("author")||w in F||(F[w]=!0)),S[l]={type:p,attribute_type:"string",add_if:c,control:_,default:`''`,default_php:`''`,example:`''`,example_php:`''`,use_default_if_empty:P(l,"use_default_if_empty","default"===(e.getAttribute("cms-block-field-if-empty"+s)||"default")),image_size:u,set_style:m,attribute:d,class_replace:h,title:P(l,"title",e.getAttribute("cms-block-field-title"+s)||l),help:P(l,"help",e.getAttribute("cms-block-field-help"+s)),checkbox_value:e.getAttribute("cms-block-field-checkbox-value"+s)||""},""===g&&(g=null),"image"===p||"background-image"===p||"image"===_){S[l].control="image",S[l].attribute_type="object",S[l].default=`{id: 0, url: '', size: '', svg: '', alt: null}`,S[l].default_php=`array('id' => 0, 'url' => '', 'size' => '', 'svg' => '', 'alt' => null)`;var f="",w="null";"image"===p?(f=e["wp_original_src"]||e.getAttribute("src"),w=Q.quoteParam(e.getAttribute("alt"))):"background-image"===p&&(f=e.getInlineStylePropertyValue("background-image",!0)),f?(c=crsaIsAbsoluteUrl(f)?`'${f}'`:Q.makeUrlRelativeToThemeCode(f),S[l].example=`{id: 0, url: ${se(f)}, size: '', svg: '', alt: ${w}}`,S[l].example_php=`array('id' => 0, 'url' => ${c}, 'size' => '', 'svg' => '', 'alt' => ${w})`):"svg"===e.tagName&&"image"===p?(e.fixSVGIfNeeded(),u=A(e).toStringOriginal(!0),S[l].example=`{id: 0, url: '', size: '', svg: \`${u}\`, alt: null}`,S[l].example_php=`array('id' => 0, 'url' => '', 'size' => '', 'svg' => '${k(u)}', 'alt' => null)`):f||(S[l].example=`{id: 0, url: '', size: '', svg: '', alt: null}`,S[l].example_php=`array('id' => 0, 'url' => '', 'size' => '', 'svg' => '', 'alt' => null)`),S[l].use_default_if_empty&&(S[l].default=S[l].example,S[l].default_php=S[l].example_php)}else if("style"===p&&(0<=m.indexOf("color")&&"auto"===S[l].control&&(S[l].control="color"),S[l].example=S[l].example_php=`'${e.getInlineStylePropertyValue(m)||""}'`,S[l].use_default_if_empty)&&null===g&&(S[l].default=S[l].example,S[l].default_php=S[l].example_php),"select"===S[l].control&&(h=e.getAttribute("cms-block-field-values"+s))&&(_=pgSplitKeyEqualsValueString(h)).length&&(S[l].values=_),S[l].values||("link"===p||"none"===p&&"link"===S[l].control)&&(S[l].control="link",S[l].attribute_type="object",S[l].default=`{post_id: 0, url: '', title: '', 'post_type': null}`,S[l].default_php=`array('post_id' => 0, 'url' => '', 'post_type' => '', 'title' => '')`,S[l].example=`{post_id: 0, url: '${e.getAttribute("href")||""}', title: '', 'post_type': null}`,S[l].example_php=`array('post_id' => 0, 'url' => '${e.getAttribute("href")||""}', 'post_type' => '', 'title' => '')`,S[l].use_default_if_empty)&&(S[l].default=S[l].example,S[l].default_php=S[l].example_php),S[l].default===`''`){switch(p){case"content":var b="svg"===e.tagName?(e.fixSVGIfNeeded(),A(e).toStringOriginal(!1)):(b=A(e).html().trim()).replace(/\s*\n\s+/gm," ");S[l].example=`\`${b}\``,S[l].example_php=`'${k(b)}'`;break;case"element":S[l].example=S[l].example_php=`'${k(A(e).html())}'`;break;case"attr":e.hasAttribute(d)?S[l].example=S[l].example_php=`'${k(e.getAttribute(d)||"")}'`:S[l].example=S[l].example_php="null";break;case"link":S[l].example=S[l].example_php=`'${k(e.getAttribute("href")||"")}'`;break;case"class":"toggle"===S[l].control?S[l].example=S[l].example_php=`''`:S[l].class_replace&&(S[l].example=S[l].example_php=`'${S[l].class_replace}'`);break;case"tag":S[l].example=S[l].example_php=`'${k(e.tagNameOriginal)}'`}S[l].use_default_if_empty&&null===g&&(S[l].default=S[l].example,S[l].default_php=S[l].example_php),null!==g&&("_none_"===g&&(g=""),S[l].default=``+Q.quoteParam(g,null,!0),S[l].default_php=``+Q.quoteParam(g,null,!0))}"auto"===S[l].control&&("svg"===e.tagName&&"content"===S[l].type?S[l].control="textarea":S[l].control="text"),x=!0}}"block"===e.getAttribute("cms-post")&&(t="loop",r=e.getAttribute("cms-post-loop-block-attribute"))&&!K(e,r)&&(o=e.getAttribute("cms-post-loop-block-attribute-title"),a=e.getAttribute("cms-post-loop-block-attribute-type")||"post",n=e.getAttribute("cms-post-loop-block-attribute-help"),S[r]={control:"posts",attribute_type:"array",default:"[]",default_php:"array()",example:"[]",example_php:"array()",type:t,post_type:a,title:P(r,"title",o),help:P(r,"help",n)},x=!0),"block"===e.getAttribute("wc-show-products")&&(t="loop",a=e.getAttribute("wc-show-products-block-attribute"))&&!K(e,a)&&(o=e.getAttribute("wc-show-products-block-attribute-title"),r="product",n=e.getAttribute("wc-show-products-block-attribute-help"),S[a]={control:"posts",attribute_type:"array",default:"[]",default_php:"array()",example:"[]",example_php:"array()",type:t,post_type:r,title:P(a,"title",o),help:P(a,"help",n)},x=!0),e.hasAttribute("cms-block-inner-content")&&(y=e)}return!0}),l=``,G=[],R=[],p=[],M=[],H=[],x&&(c=``,$.each(S,function(e,t){switch(t.control||"text"){case"posts":l+=`
                        pgPostSelectorControl('${e}', setAttributes, props, ${Q.quoteParam(t.title||"")}, ${Q.quoteParam(t.help||"")}, ${Q.quoteParam(t.post_type)} ),
                                        `,p.push(`
            const ${e}_posts = useSelect(function( select ) {
                const s = {};
                if(props.attributes.${e}) {
                    props.attributes.${e}.forEach(function(p) {
                        s['${e}_' + p.id] = select('core').getEntityRecord('postType', ${Q.quoteParam(t.post_type)}, p.id);
                    })
                }  
                
                return s;
            }, [props.attributes.${e}] );
            
            if(props.attributes.${e}) {
                props.attributes.${e}.forEach(function(p) {
                    props['${e}_' + p.id] = ${e}_posts['${e}_' + p.id];
                })
            }  
            `);break;case"image":l+=`
                        pgMediaImageControl('${e}', setAttributes, props, ${Q.quoteParam(t.image_size||"full")}, ${Q.wpAreInlineSVGsAllowed()?"true":"false"}, ${Q.quoteParam(t.title||"")}, ${Q.quoteParam(t.help||"")} ),
                                        `,p.push(`
            props.${e} = useSelect(function( select ) {
                return {
                    ${e}: props.attributes.${e}.id ? select('core').getMedia(props.attributes.${e}.id) : undefined
                };
            }, [props.attributes.${e}] ).${e};
            `),!0===F[e]&&(F[e]=!1,p.push(`
            props.${e}__author = useSelect(function( select ) {
                return {
                    ${e}__author: props.${e} ? select('core').getUser(props.${e}.author) : undefined
                };
            }, [props.${e}] ).${e}__author;            
            `));break;case"color":c.length,c+=`
                                    pgColorControl('${e}', setAttributes, props, ${Q.quoteParam(t.title||"")}, ${Q.quoteParam(t.help||"")}),
`;break;case"select":var a=[];a.push(`{ value: '', label: '-' }`),t.values&&t.values.forEach(function(e){a.push(`{ value: '${e.two||e.one}', label: '${e.one}' }`)}),c+=`
                                    el(SelectControl, {
                                        value: props.attributes.${e},
                                        label: __( '${t.title}' ),
                                        onChange: function(val) { setAttributes({${e}: val}) },
                                        options: [
                                            ${a.join(",\n                                            ")}
                                        ]
                                    }),`;break;case"toggle":c+=`
                                    el(ToggleControl, {
                                        checked: props.attributes.${e} === '${t.checkbox_value}',
                                        label: __( '${t.title}' ),
                                        onChange: function(val) { setAttributes({${e}: val ? '${t.checkbox_value}' : ''}) },
                                        help: __( '${t.help||""}' ),
                                    }),`;break;case"link":var o=null;c+=`
                                    pgUrlControl('${e}', setAttributes, props, ${Q.quoteParam(t.title||"")}, ${Q.quoteParam(t.help||"")}, ${Q.quoteParam(o)} ),`;break;case"richtext":c+=`
                                    el(BaseControl, {
                                        help: __( '${t.help||""}' ),
                                        label: __( '${t.title||e}' ),
                                    }, [
                                        el(RichText, {
                                            value: props.attributes.${e},
                                            style: {
                                                    border: '1px solid black',
                                                    padding: '6px 8px',
                                                    minHeight: '80px',
                                                    border: '1px solid rgb(117, 117, 117)',
                                                    fontSize: '13px',
                                                    lineHeight: 'normal'
                                                },
                                            onChange: function(val) { setAttributes({${e}: val}) },
                                        })
                                    ]),`;break;case"textarea":c+=`
                                    el(TextareaControl, {
                                        value: props.attributes.${e},
                                        help: __( '${t.help||""}' ),
                                        label: __( '${t.title||e}' ),
                                        onChange: function(val) { setAttributes({${e}: val}) },
                                    }),`;break;case"none":break;default:c.length,c+=`
                                    el(TextControl, {
                                        value: props.attributes.${e},
                                        help: __( '${t.help||""}' ),
                                        label: __( '${t.title||e}' ),
                                        onChange: function(val) { setAttributes({${e}: val}) },
                                        type: 'text'
                                    }),`}G.push(`
            ${e}: {
                type: ['${t.attribute_type}', 'null'],
                default: ${t.default},
            }`),R.push(`                '${e}' => array(
                    'type' => array('${t.attribute_type}', 'null'),
                    'default' => ${t.default_php}
                )`),M.push(e+`: `+t.example),H.push(`'${e}' => `+t.example_php)}),u=`
                    el( InspectorControls, {},
                        [
                            `+l,c.trim().length&&(u+=`
                            el(Panel, {},
                                el(PanelBody, {
                                    title: __('Block properties')
                                }, [
                                    ${c}    
                                ])
                            )`),u+=`
                        ]
                    )                            
`),p.length&&p.join(""),E=!q,_=new PgReact,d="",E&&(E=r.clone(!0),U&&(E.walkSelfAndChildren(function(e){return e.pgId=e.clonedFromPgId||null,!0}),r.walkSelfAndChildren(function(e){return e.pgId=e.clonedFromPgId||null,!0})),X.mapAction(X,E,"edit",!0,!0),E=E.replacedWith||E,le(E,!0),m=_.pgelAttributesToObject(E),$.each(m,function(e,t){var a;e.endsWith("_blockProps")&&(a=e.replace("_blockProps",""),m[a="class"===a?"className":a]=t,delete m[e])}),d=_.attributesObjectToObjectString(m),h=`
        save: function(props) {
            return null;
        }                        
`),E=function(e,t){var a=e.clone(!0);return a.findIncludingSelf("[cms-no-export],[wp-no-export],[wp-loop-skip]").slice(0).forEach(function(e){e.remove()}),a.walkSelfAndChildren(function(e){return e.isElement&&(X.mapAction(X,e,t,!0),ce(e,t),me(e,void 0,null,null,V)),!0}),(a=a.replacedWith?a.replacedWith:a).getAttrList().slice(0).forEach(function(e){"data-block-props"!==e.name&&a.removeAttribute(e.name)}),e===y&&"save"!==t||a.setAttribute("data-block-props","{{ ...blockProps }}"),a.removeAttrIfStartsWith("wp-",!0),a.removeAttrIfStartsWith("cms-",!0),a.removeAttrIfStartsWith("wc-",!0),a.removeAttrIfStartsWith("data-pg-collapsed",!0),le(a),_.pgelToReact(a)},q&&(X.mapAction(X,r,"edit",!0),g=r.replacedWith||r,le(g,!0),m=_.pgelAttributesToObject(g),h=`
        save: function(props) {
            const blockProps = useBlockProps.save(${d=_.attributesObjectToObjectString(m)});
            return ${E(r,"save")};
        }                        
`),f=g="",y?(W=(y.getAttribute("cms-block-inner-content-allowed")||"").trim(),w=y.getAttribute("cms-block-inner-content-orientation")||"",_=new PgReact,(T=y)!==r&&(T=y.clone(!1,!1,!0),X.mapAction(X,T,"edit",!0,!0),z)&&le(T,!0),S=_.pgelAttributesToObject(T),f=`
            const innerBlocksProps = useInnerBlocksProps(${y===r?"blockProps":_.attributesObjectToObjectString(S)}, {`,W&&(f+=`
                allowedBlocks: ${ue(W)},`),(T=y.getAttribute("cms-block-inner-content-template")||y.getDataUncloned("inner-blocks-template"))&&(f+=`
                template: ${B=T,W=Q.current_theme_info.slug.replace(/_/g,"-"),B&&B.replace(/\$\{this\}/gi,W)},`),(T=y.getAttribute("cms-block-inner-content-template-lock"))&&(f+=`
                templateLock: ${Q.quoteParam(T)},`),w&&(f+=`
                orientation: '${w}',`),f+=`
            } );
                            `,q||(h=`
            save: function(props) {
                return el(InnerBlocks.Content);
            }                        
    `)):f=`
            const innerBlocksProps = null;
            `,W=`'div'`,T="blockProps",w="",(C=(r.getAttribute("cms-block-parent")||"").trim())&&(w=`
        parent: ${ue(C)},
`),z?(b=E(r,"edit")+",",W="Fragment",T="{}"):b=`
                        el( ServerSideRender, {
                            block: '${s}',
                            httpMethod: 'POST',
                            attributes: props.attributes,
                            innerBlocksProps: innerBlocksProps,
                            blockProps: blockProps
                        } ),`,C=`
( function ( blocks, element, blockEditor ) {
    const el = element.createElement,
        registerBlockType = blocks.registerBlockType,
        ServerSideRender = PgServerSideRender${Q.wpServerRendererVersion},
        InspectorControls = blockEditor.InspectorControls,
        useBlockProps = blockEditor.useBlockProps;
        
    const {__} = wp.i18n;
    const {ColorPicker, TextControl, ToggleControl, SelectControl, Panel, PanelBody, Disabled, TextareaControl, BaseControl} = wp.components;
    const {useSelect} = wp.data;
    const {RawHTML, Fragment} = element;
   
    const {InnerBlocks, URLInputButton, RichText} = wp.blockEditor;
    const useInnerBlocksProps = blockEditor.useInnerBlocksProps || blockEditor.__experimentalUseInnerBlocksProps;
    
    const propOrDefault = function(val, prop, field) {
        if(block.attributes[prop] && (val === null || val === '')) {
            return field ? block.attributes[prop].default[field] : block.attributes[prop].default;
        }
        return val;
    }
    
    const block = registerBlockType( '${s}', {
        apiVersion: 2,
        title: ${Q.quoteParam(r.getAttribute("cms-block-title")||o,null,!0)},
        description: ${Q.quoteParam(r.getAttribute("cms-block-description")||"",null,!0)},
        icon: ${function(){var e=r.getAttribute("cms-block-icon")||"block-default";if(!e.startsWith("<svg"))return`'${e}'`;try{var t=new pgParser,a=(t.assignIds=!1,t.parse(e),t.rootNode.children[0]);return _.pgelToReact(a)}catch(e){return console.warn("Error parsing SVG icon for "+o),`'block-default'`}}()},
        category: '${n}',${w}
        keywords: ${Q.jsCommaListToArray(r.getAttribute("cms-block-keywords")||"",null,!0)},
        supports: ${I},
        attributes: {${G.join(",")}
        },
        example: { attributes: { ${M.join(", ")} } },
        edit: function ( props ) {
            const blockProps = useBlockProps(${d});
            const setAttributes = props.setAttributes; 
            ${p.join("\n")}
            ${f}
            `+[].join("\n"),Q.blocks_js_code[o]={file:""+e+O+`.js`,code:C=C+(z?`
            return el(${W}, ${T}, [
                ${b}                        
                ${g}${u||""}
            ]);`:`
            return el(Fragment, {}, [
                ${b}                        
                ${g}${u||""}
            ]);`)+`
        },
${h}
    } );
} )(
    window.wp.blocks,
    window.wp.element,
    window.wp.blockEditor
);                        
`},Q.requireResource(`pg-blocks-controls-${Q.wpBlockControlsVersion}.js`,"blocks",null),Q.requireResource(`pg-blocks-controls-${Q.wpBlockControlsVersion}.css`,"blocks",null)),E={render_template:""+e+O+`.php`,supports:``+a,base_url:Q.wpGetThemeUrl(),base_path:Q.wpGetThemePath()},"native"===N?(E.js_file=""+e+O+`.js`,E.attributes=`array(
${R.join(",\n")}
            )`,E.example=`array(
${H.join(", ")}
            )`,E.dynamic=!q,q&&delete E.render_template,y&&(E.has_inner_blocks=!0),E.version=Q.getThemeInfoProjectVersion()):"acf"===N&&(E.render_template=Q.wpGetThemePath()+" . '/"+E.render_template+"'",y)&&(E.supports=`array('align' => true, 'mode' => false, 'jsx' => true)`),w="\n"+"        "+L+"( "+J.getNamedParams(te,r,function(e,t,a){return!a||"enqueue_style"!==t&&"enqueue_script"!==t&&"enqueue_editor_style"!==t&&"enqueue_editor_script"!==t&&"enqueue_view_script"!==t&&"enqueue_view_style"!==t?"category"===t&&"custom"===a?a=n:"name"===t&&(a=a&&s):(Q.current_project_info&&Q.wpSetShouldCopyFile(a,"true",Q.current_project_info),a=Q.makeUrlRelativeToThemeCode(a,!0)),a},null,2,E)+" );\n","acf"===N?Q.addToFunctionsPhpSection("Register Blocks",w,!0,!1,!1,`
/* Creating Editor Blocks with ACF PRO */

function ${t}_acf_blocks_init() {

    // Check if ACF PRO function exists.
    if( function_exists('acf_register_block_type') ) :

        // Register blocks. Don't edit anything between the following comments.
        /* Pinegrow generated Register Blocks Begin */
        /* Pinegrow generated Register Blocks End */
    endif;
}
add_action('acf/init', '${t}_acf_blocks_init');

/* End of creating Editor Blocks with ACF PRO */

`):"native"===N&&(Q.blocks_reg_code[o]={file:""+e+o+`_register.php`,code:w},Q.addToFunctionsPhpSection("Register Pinegrow Blocks",`    require_once '${e}${o}_register.php';
`,!0,!1,!1,`
/* Creating Editor Blocks with Pinegrow */

if ( ! function_exists('${t}_blocks_init') ) :
function ${t}_blocks_init() {
    // Register blocks. Don't edit anything between the following comments.
    /* Pinegrow generated Register Pinegrow Blocks Begin */
    /* Pinegrow generated Register Pinegrow Blocks End */
}
add_action('init', '${t}_blocks_init');
endif;

/* End of creating Editor Blocks with Pinegrow */

`)),"acf"===N&&(r.setAttr("wp-call-function",`echo (!empty($block['className']) ? $block['className'] : '') . (!empty($block['align']) ? ( ' align' . $block['align']) : '') `),r.setAttr("wp-call-function-set","attr"),r.setAttr("wp-call-function-set-attr","class"),r.setAttr("wp-call-function-set-attr-append","true"),r.setAttr("wp-call-function-2",`echo '${crsaGetNameFromUrl(O)}-' . $block['id']`),r.setAttr("wp-call-function-2-set","attr"),r.setAttr("wp-call-function-2-set-attr","id")),"custom"===r.getAttr("cms-block-category")&&"true"===r.getAttr("cms-block-category-custom-register")&&r.getAttr("cms-block-category-custom")&&(I=r.getAttr("cms-block-category-custom"),Q.wpRegisterBlocksCategory(I,r.getAttr("cms-block-category-custom-register-name"),r.getAttr("cms-block-category-custom-register-icon"))),"native"!==j||q||J.addToChanges(function(){var o="array(",e=(r.getAttrList().slice(0).forEach(function(e){var t,a;"data-pg-collapsed"===e.name||e.name.startsWith("wp-")||e.name.startsWith("cms-")||e.name.startsWith("wc-")||(null!==e.value?(t=e.quote||'"',a=(a=(a=(a=`'${e.name}' => ${t}${e.value}${t}, `).replace(/<\?php echo /g,t+`.`)).replace(/<\?php /g,t+`.`)).replace(/[;\s]*\?>/g,`.`+t),o+=a):o+=`'${e.name}' => null, `,r.removeAttribute(e.name))}),""),e=`<?php if(empty($_GET['context']) || $_GET['context'] !== 'edit') echo get_block_wrapper_attributes( ${o+=")"} ); else echo 'data-wp-block-props="true"${e=y&&y===r?" data-wp-inner-blocks":e}'; ?>`;r.setAttribute(e)},this,[]),q||Q.template_parts.push({pgel:r,slug:e+O,name:null,only_content:!1,with_pgids:U,file_name:r.document.pgwp_file_name||null,filter_code:function(e){return e=D?`<?php ${Q.wpGetClass("PG_Blocks")}::setupEditedPost(); ?>
`+e:e}}),r.removeAttribute("cms-block"),r.walkSelfAndChildren(function(e){return e.isElement&&me(e,void 0,null,null,V),!0}),Q.runActionsAndFilters(r,!1),r.detach()):Q.warnAboutActionThatIsNotOnMasterOrInContent(r,te))}),P=(te.get_action_tag=function(e,t,a){var o=[],r=e.getAttribute("cms-block-title")||e.getAttribute("cms-block");return r&&o.push(r),Q.getExpressiveActionTag(e,t,o,"B",a)},te.addMeta({tags:[],helptext:"Create a custom Gutenberg block.",helplink:"block",aaaextra_name:"acf_register_block_type"}),te.addNotPlaceable("Add this action to an existing element on the page to register a new Block."),e.splice(0,0,te),{}),re={image:{title:{php:`( ${Q.wpGetClass("PG_Blocks")}::getAttributeForAction( $args, '_PROP_', 'id' ) ? get_the_title( ${Q.wpGetClass("PG_Blocks")}::getAttributeForAction( $args, '_PROP_', 'id') ) : null )`,js:`props?._PROP_?.title.raw`},alt:{php:`( ${Q.wpGetClass("PG_Blocks")}::getAttributeForAction( $args, '_PROP_', 'id' ) ? PG_Image::getAltText( ${Q.wpGetClass("PG_Blocks")}::getAttributeForAction( $args, '_PROP_' ) ) : null )`,js:`props?._PROP_?.alt_text`},caption:{php:`( ${Q.wpGetClass("PG_Blocks")}::getAttributeForAction( $args, '_PROP_', 'id' ) ? wp_get_attachment_caption( ${Q.wpGetClass("PG_Blocks")}::getAttributeForAction( $args, '_PROP_', 'id') ) : null )`,js:`props?._PROP_?.caption.raw`},description:{php:`( ${Q.wpGetClass("PG_Blocks")}::getAttributeForAction( $args, '_PROP_', 'id' ) ? get_the_content( null, false, ${Q.wpGetClass("PG_Blocks")}::getAttributeForAction( $args, '_PROP_', 'id') ) : null )`,js:`props?._PROP_?.description.raw`},author_name:{get_author:!0,php:`( ${Q.wpGetClass("PG_Blocks")}::getAttributeForAction( $args, '_PROP_', 'id' ) ? get_the_author_meta( 'display_name', get_post_field( 'post_author', ${Q.wpGetClass("PG_Blocks")}::getAttributeForAction( $args, '_PROP_', 'id') ) ) : null )`,js:`(props?._PROP___author?.name || props?._PROP___author?.nickname)`}}},ne=function(i,e){var s=[],l={};if(i=A(i)){if(!e&&i.getData("list_of_attributes"))return i.getData("list_of_attributes");i.walkSelfAndChildren(function(e){if(e.isElement){if(i!==e&&e.hasAttribute("cms-block"))return"skip_children";for(var t=1;t<=ie;t++){var a,o,r=1<t?`-`+t:"",n=e.getAttribute("cms-block-field"+r);!n||K(e,n,!0)||l[n]||(a=e.getAttribute("cms-block-field-type"+r),o=pe(e,a,r),s.push({id:n,type:a,control:o,title:e.getAttribute("cms-block-field-title"+r)}),l[n]=!0)}}return!0})}return s},ie=Q.wp_ba_max_editable=24,K=function(e,t,a){return!!Q.validateSlug(null,null,t)&&(a||Q.addExportError(e,`<b>Invalid block attribute id:</b> <b>${t}</b>`,`Attribute ids can only contain letters, numbers and the _ character.`),!0)},m=1;m<=ie;m++)!function(o){P["cms-block-field"+o]={type:"text",name:"Attribute id",action:"element_attribute",validate:Q.validateSlug,force_quotes:!0,start_repeat_item:"Block attribute "+m,add_repeat_item_label:"Add attribute",reorder_repeat_items:!0,delete_first_repeat_item:!0,helptext:`<p>The field id, for example <b>job_location</b></p>`},P["cms-block-field-title"+o]={type:"text",name:"Title",placeholder:Q.forExample("Featured Projects"),action:"element_attribute",force_quotes:!0,show_if:function(e,t){return"native"===Y(A(t)).block_type},helptext:`<p>Title (descriptive name) of the block attribute that will be shown in the Block editor sidebar. If the attribute is used multiple times within a block, it is enough to set the title just once. <b>Only for Native blocks.</b></p>`},P["cms-block-field-type"+o]={type:"select",name:"Use as",action:"element_attribute",validate:Q.required,options:[{key:"content",name:"Content"},{key:"image",name:"Image"},{key:"background-image",name:"Background image"},{key:"link",name:"Link"},{key:"style",name:"Style"},{key:"attr",name:"Attribute"},{key:"class",name:"Class"},{key:"tag",name:"Tag"},{key:"none",name:"None"}],helptext:`<p>Where on the selected element would you like to use the attribute value?</p><p>Selecting Image requires an img element, and selecting the Link requires the link element.</p><p>Use None in combination with Remove if not set to show the element only if the attribute is set.</p>`},P["cms-block-field-image-size"+o]={type:"text",name:"Image size",action:"element_attribute",placeholder:Q.defaultValue("full"),force_quotes:!0,options:Q.wpInsight.getImageSizes,open_list_on_focus:!0,show_if:"cms-block-field-type"+o+"==image||background-image"},P["cms-block-field-image-alt"+o]={type:"select",name:"Use image ALT",action:"element_attribute",options:[{key:"auto",name:"Auto"},{key:"true",name:"Yes"},{key:"false",name:"No"}],default_value:"auto",show_if:"cms-block-field-type"+o+"==image",helptext:`<p>Use the image ALT description:</p>
<ul>
<li><b>Auto</b> - Use it if ALT is not set by another WordPress action.</li>
<li><b>Yes</b> - Use it if it is set.</li>
<li><b>No</b> - Do not use it.</li>
</ul>
<p>The current ALT value is used as the default value.</p>`},P["cms-block-field-style"+o]={type:"text",name:"Style property",action:"element_attribute",placeholder:Q.forExample("color"),force_quotes:!0,validate:Q.required,show_if:"cms-block-field-type"+o+"==style",helptext:`<p>Which style property to set? For example, color, background-color, font-size...</p>`},P["cms-block-field-style-important"+o]={type:"checkbox",name:"Set <nocaps>!important</nocaps>",action:"element_attribute",empty_attribute:!0,value:"true",show_if:"cms-block-field-type"+o+"==style",on_changed:function(e,t,a,o,r,n,i){var s;a&&"change"===i&&(s=A(e))&&Y(s).use_react&&pinegrow.showAlert(`<p>Setting <code>!important</code> is not supported on Regular JavaScript blocks. Please change the block type to Dynamic PHP.</p>`,"Not supported on JavaScript blocks.")},helptext:`<p>Add !important to the style declaration. <b>Only available on Native Dynamic and ACF blocks.</b></p>`},P["cms-block-field-attribute"+o]={type:"text",name:"Element attribute",action:"element_attribute",placeholder:Q.forExample("title"),validate:Q.required,force_quotes:!0,show_if:"cms-block-field-type"+o+"==attr",helptext:`<p>Which element attribute to set? For example, href, alt, title...</p>`},P["cms-block-field-class-replace"+o]={type:"text",name:"Replace classes",action:"element_attribute",placeholder:Q.forExample("red big"),show_if:"cms-block-field-type"+o+"==class",force_quotes:!0,helptext:`<p>List classes that should be replaced by the field value, optional.</p>`,fill_list_on_open:!0,open_list_on_focus:!0,options:Q.wpGetElementClassesOptions},P["cms-block-field-if-empty"+o]={type:"select",name:"If empty",empty_attribute:!1,default_value:"default",options:[{key:"default",name:"Use default value"},{key:"if",name:"Remove the element"}],action:"element_attribute",helptext:`<p>What to do if the attribute is not defined? Remove will remove the whole HTML element from the output if the attribute is empty.</p>`,start_section:"Attribute options"},P["cms-block-field-post-prop"+o]={type:"menu",name:"Use post property",action:"element_attribute",helptext:`<p>Use a property of a post or media block attribute, if the attribute value is not set. To simply output the property, set the Control type to None. If you do not to want to use the default value when post and custom value are not set, set Default value to _none_.</p>`,get_menu_options:function(e,t){var a=ne(t).filter(function(e){return"image"===e.type||"background-image"===e.type}),n=[];return 0===a.length?n.push({type:"header",label:"The block contains no image attributes."}):a.forEach(function(a){var o="image",r=[];$.each(re[o],function(e,t){r.push({label:a.id+"."+e,key:a.id+":"+o+"."+e})}),n.push({label:a.title,submenu:r})}),n}},P["cms-block-field-default-value"+o]={type:"text",name:"Default value",action:"element_attribute",force_quotes:!0,helptext:`<p>Default value of the attribute. Leave empty to auto detect the value from the context of how the attribute is used on the element.</p><p>Use <code>_none_</code> to set empty default value.</p><!-- <p>If the value includes () or $, enclose it with single quotes, for example <code>'var(--bs-primary)'</code>.</p>-->`,show_if:function(e,t){var a;return"native"===Y(A(t)).block_type&&"image"!==(a=e["cms-block-field-type"+o])&&"background-image"!==a&&"link"!==a}},P["cms-block-field-control"+o]={type:"select",name:"Control type",empty_attribute:!1,default_value:"auto",options:[{key:"auto",name:"Auto"},{key:"input",name:"Input"},{key:"textarea",name:"Textarea"},{key:"richtext",name:"Rich Text"},{key:"select",name:"Select"},{key:"toggle",name:"Toggle"},{key:"link",name:"Link"},{key:"image",name:"Image"},{key:"color",name:"Color"},{key:"none",name:"None (use with expressions)"}],action:"element_attribute",show_if:function(e,t){return"native"===Y(A(t)).block_type},helptext:`<p>What type of control to show in the inspector sidebar? Auto should work fine in most cases. <b>Native blocks only.</b></p><p>Use None in combination with Expressions where the value is composed with values of other block properties.</p>`},P["cms-block-field-values"+o]={type:"text",name:"Values",action:"element_attribute",textarea:!0,show_if:"cms-block-field-control"+o+"==select",helptext:`<p>List the values for the select control.  <b>Native blocks only.</b></p><p>Just values:</p><pre>red
blue
green</pre><p>Named values:</p><pre>
Red=text-red
Green Large=text-green text-xl
Blue=text-blue
</pre>`},P["cms-block-field-values-presets"+o]={type:"button",name:"Select value preset",action:"element_attribute",func:function(e,t,a,o,r){r.stopPropagation();var n=[];if(pinegrow.dispatchEvent("on_wp_block_attributes_get_values_presets",e.getPage(),n,function(e){e&&(t.closest(".crsa-field").prev(".crsa-field").find("textarea").val(e).focus().trigger("change"),pinegrow.showQuickMessage("Values preset applied."))}),n.length)return new CrsaContextMenu(n,t).showForElement(t,null,8),!1;pinegrow.showQuickError("Sorry, no values presets found.")},show_if:"cms-block-field-control"+o+"==select",helptext:`<p>Select one of the values presets, such as Show Posts ordering.</p>`},P["cms-block-field-checkbox-value"+o]={type:"text",name:"Value",action:"element_attribute",textarea:!1,show_if:"cms-block-field-control"+o+"==toggle",helptext:`<p>The value that should be set when the toggle or checkbox is checked.</p>`},P["cms-block-field-set-value"+o]={type:"select",name:"Replace or append",empty_attribute:!1,default_value:"replace",options:[{key:"replace",name:"Replace current value"},{key:"append",name:"Append with space"},{key:"nospace",name:"Append without space"}],action:"element_attribute",show_if:"cms-block-field-type"+o+"==attr",helptext:`<p>How to set the value?</p><ul>
<li><b>Replace</b> will replace the current value of the attribute.</li>
<li><b>Append with space</b> will append the attribute value to the current value of the attribute, seperated by space.</li>
<li><b>Append without space</b> will append the attribute value to the current value of the attribute without the space separator.</li>
</ul>
<p>Example: href is set to # and the attribute is appended to create a hash link.</p>`},P["cms-block-field-expression"+o]={type:"text",name:"Expression",action:"element_attribute",textarea:!0,helptext:`<p>Define the expression instead of using just plain attribute values. Expression must be in the format:</p><pre>
Hello {{ name }}, how are you {{ day }}?
</pre><p><code>name</code> and <code>day</code> in the above example are attribute ids.</p><p>Default values are not used.</p>`,show_if:function(e,t){var a=e["cms-block-field-type"+o]||"content";return("content"===a||"attr"===a||"style"===a||"class"===a)&&"native"===Y(A(t)).block_type}},P["cms-block-field-help"+o]={type:"text",name:"Help",textarea:!0,force_quotes:!0,placeholder:Q.forExample("The list of featured projects."),action:"element_attribute",show_if:function(e,t){return"native"===Y(A(t)).block_type},helptext:`<p>Optional, describe what this attribute stands for. The description is displayed as a help message in the Block editor panel. If the attribute is used multiple times within a block, it is enough to set the help just once. <b>Native blocks only.</b></p>`}}(S=1<m?`-`+m:"");function H(){return!!isApp()||pinegrow.currentUser.isPro()}function L(e){var t=[{key:"current_year",label:"Display current year",code:`echo date( 'Y' );`},{key:"code",label:"Custom code"}];return pinegrow.dispatchEvent("on_wp_function_get_options",e.getPage(),e,t),t}function B(e,t){for(var a=0;a<t.length;a++){if(t[a].key&&t[a].key===e)return t[a].code;if(t[a].submenu){var o=B(e,t[a].submenu);if(o)return o}}return null}for(var S,X=Q.addTag("cms-block-field",n("Block Attributes"),null,function(e){E(X,e,X.mapAction)},P),se=(X.max_repeat_items=ie,X.on_can_add_action=function(e,t,a){return!!A(e)||(pinegrow.showQuickError(`Block attributes can only be used inside a Block.`),!1)},X.on_action_added=function(r,e,t){function a(e,t,a){var o=X.attribute+(e?`-`+e:"")+(1<t?`-`+t:"");r.getAttribute(o)||("function"==typeof a&&(a=a()),r.setAttribute(o,a))}var o;"a"===r.tagName?a("type",1,"link"):"img"===r.tagName||"svg"===r.tagName?a("type",1,"image"):(o=r.get$DOMElement())&&"none"!=o.css("backgroundImage")?a("type",1,"background-image"):a("type",1,"content")},function(e,t){var a="",o=Q.current_theme_info.slug.replace(/\-/g,"_");return crsaIsAbsoluteUrl(e)||((a=`(pg_project_data_${o} ? pg_project_data_${o}.url : '')`).length&&t?a="{{ "+a+" }}":a+=" + "),t?a+e:a+`'${e}'`}),le=function(o,r){o.goThroughAllUrls(function(e,t,a){return(!r||o===a)&&e.indexOf("{{")<0&&("img"===a.tagName||"video"===a.tagName||"audio"===a.tagName||"source"===a.tagName)?se(e,!0):e});var e=["background","background-image"],n=/url\(['"]*([^'"\)]*)['"]*\)/gi;o.walkSelfAndChildren(function(o){return o.isElement&&e.forEach(function(e){var t,a=o.getInlineStylePropertyValue(e,!1);a&&a.indexOf("{{")<0&&0<=a.indexOf("url(")&&(t=a.replace(n,function(e,t){var a=0<=e.indexOf('"')?'"':"'",o=se(t,!0);return t!==o?"url("+a+o+a+")":e}))!==a&&o.setInlineStylePropertyValue(e,t,!1)}),!r})},pe=function(e,t,a){var o=e.getAttribute("cms-block-field-control"+a)||"auto";if("auto"===o)switch(t){case"image":case"background-image":o="image";break;case"link":o="link";break;default:o="input"}return o},ce=(X.mapAction=function(N,D,G,e,R){var M=[],H=A(D);if(H){for(var{block_type:L,use_react:B,use_react_for_edit:t}=Y(H),a=("edit"===G&&t&&(B=!0),[]),o={style:1,link:1,attr:1,class:1},r=1;r<=ie;r++){var n=1<r?`-`+r:"",i=V(D,N,"",null,n);i&&!K(D,i)&&(i=V(D,N,"type",null,n),a.push({priority:o[i]||10,idx:r}))}a.sort(function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0});var j=[],z=null,U=(a.forEach(function(e){var t,a,o,r=e.idx,r=1<r?`-`+r:"",n=V(D,N,"",null,r);n&&!K(D,n)&&(t=V(D,N,"type",null,r),a=V(D,N,"class-replace",null,r),o=pe(D,t,r),"class"===t&&"toggle"===o&&(a=a||D.getAttribute(N.attribute+"-checkbox-value"+r)),"class"===t&&null!==a&&""!==a&&(Q.wpRemoveClasses(D,a),R)&&D.hasAttribute("class_blockProps")&&Q.wpRemoveClasses(D,a,"class_blockProps"),"tag"===t)&&(z=`{{ propOrDefault( props.attributes.${n}, '${n}' ) }}`)}),Q.wpInnerFunctionsOffset-1);D.getDataUncloned("cmsBlockGetAuthors");a.forEach(function(e){var t=e.idx,a=1<t?`-`+t:"",o=V(D,N,"",null,a);if(o&&!K(D,o)){var r,n=o,i=V(D,N,"type",null,a),s=V(D,N,"style",null,a),l=V(D,N,"attribute",null,a),p=V(D,N,"class-replace",null,a),c=V(D,N,"image-size",null,a)||"full",u="if"===D.getAttribute(N.attribute+"-if-empty"+a),m=D.getAttribute(N.attribute+"-post-prop"+a),d=(m&&(w=(h=m.split(":"))[0],h=h[1].split("."),m=re[h[0]][h[1]][B?"js":"php"].replace(/_PROP_/g,w)),pe(D,i,a)),h="-"+(t+U),g="wp-call-function"+h,_=g;if(B||D.setAttribute("wp-call-function-echo"+h,"true"),"native"===L)switch(d){case"image":case"background-image":r=`${Q.wpGetClass("PG_Blocks")}::getImageUrl( $args, ${Q.quoteParam(o)}, ${Q.quoteParam(c)}, false )`,o=`${Q.wpGetClass("PG_Blocks")}::getImageUrl( $args, ${Q.quoteParam(o)}, ${Q.quoteParam(c)} )`;break;case"link":r=`${Q.wpGetClass("PG_Blocks")}::getLinkUrl( $args, ${Q.quoteParam(o)}, false )`,o=`${Q.wpGetClass("PG_Blocks")}::getLinkUrl( $args, ${Q.quoteParam(o)} )`;break;default:r=`${Q.wpGetClass("PG_Blocks")}::getAttribute( $args, ${Q.quoteParam(o)}, false )`,o=`${Q.wpGetClass("PG_Blocks")}::getAttribute( $args, ${Q.quoteParam(o)} )`,m&&(o=`( ${Q.wpGetClass("PG_Blocks")}::getAttribute( $args, ${Q.quoteParam(n)}, false, true ) ?? ${m} ?? ${o})`,r=`( ${Q.wpGetClass("PG_Blocks")}::getAttribute( $args, ${Q.quoteParam(n)}, false, true ) ?? ${m} )`)}else o=`get_field( ${Q.quoteParam(o)} )`;B?o=`props.attributes.`+n:D.setAttribute(g);var f=u||m?m?`{{ props.attributes.${n} || ${m} || propOrDefault( props.attributes.${n}, '${n}' ) }}`:`{{ props.attributes.${n} }}`:`{{ propOrDefault( props.attributes.${n}, '${n}' ) }}`,w=V(D,N,"expression",null,a),b=(!w||"content"!==i&&"attr"!==i&&"style"!==i&&"class"!==i||(B?f=w=w.replace(/\{\{([^\}]+)\}\}/g,function(e,t){return`{{ ${`props.attributes.`+(t=t.trim())} }}`}):((w=(w=(w=w.replace(/(.)\{\{/gm,"$1' . {{")).replace(/\}\}(.)/gm,"}} . '$1")).startsWith("{{")?w:"'"+w).endsWith("}}")||(w+="'"),o=w.replace(/\{\{([^\}]+)\}\}/g,function(e,t){return t=t.trim(),Q.wpGetClass("PG_Blocks")+`::getAttribute( $args, '${t}' )`}))),`props.attributes.`+n);switch(d){case"image":case"link":f=`{{ props.attributes.${n}.url }}`,b=`props.attributes.${n} && props.attributes.${n}.url`,u||(f=`{{ propOrDefault( props.attributes.${n}.url, '${n}', 'url' ) }}`)}var y=D.getAttribute(N.attribute+"-set-value"+a);switch(y){case"append":y="true";break;case"nospace":break;default:y=!1}function v(e,t){return"true"===y&&0<e.length&&(e+=" "),e+t}var k,x;switch(i){case"none":break;case"content":if(B)if((A=(P=new PgReact).pgelAttributesToObject(D,function(e){return!e.startsWith("wp-")&&!e.startsWith("cms-")&&!e.startsWith("wc-")})).value=f,"richtext"===d)D=("edit"===G?(A.onChange=`{{ function(val) { setAttributes( {${n}: val }) } }}`,D.replaceWith(pgCreate(`<RichText tagName="${z||D.tagName}" ${P.attributesObjectToString(A)} />`))):D.replaceWith(pgCreate(`<RichText.Content tagName="${z||D.tagName}" ${P.attributesObjectToString(A)} />`)),D.replacedWith);else if("none"===d)D.html(f);else if(["svg"].indexOf(D.tagName)<0)"edit"===G?(A.onChange=`{{ function(val) { setAttributes( {${n}: val }) } }}`,A.withoutInteractiveFormatting=`{{ true }}`,A.allowedFormats=`{{ [] }}`,D.replaceWith(pgCreate(`<RichText tagName="${z||D.tagName}"  ${P.attributesObjectToString(A)} />`))):D.replaceWith(pgCreate(`<RichText.Content tagName="${z||D.tagName}" ${P.attributesObjectToString(A)}/>`));else{const O=["class","style","id","title"];var A=P.pgelAttributesToObject(D,function(e){return!!(0<=O.indexOf(e)||e.startsWith("data-")||e.startsWith("aria-"))});D.replaceWith(pgCreate(`<RawHTML>{{ pgMergeInlineSVGAttributes(propOrDefault( props.attributes.${n}, '${n}' ), ${P.attributesObjectToObjectString(A)}) }}</RawHTML>`)),D=D.replacedWith}else if("svg"===D.tagName){var P=new PgReact;D.fixSVGIfNeeded();const q=["class","style","id","title"];A=P.pgelAttributesToObject(D,function(e){return!!(0<=q.indexOf(e)||e.startsWith("data-")||e.startsWith("aria-"))}),o=`${Q.wpGetClass("PG_Blocks")}::mergeInlineSVGAttributes( ${o}, ${P.attributesObjectToPHPArrayString(A)} )`;D.setAttribute(_,o),D.setAttribute(g+"-set","element")}else D.setAttribute(_,o),D.setAttribute(g+"-set","content");break;case"element":D.setAttribute(_,o),D.setAttribute(g+"-set","element");break;case"image":P=new PgReact;const F=["class","style","id","title"];var S,T,C,$,A=P.pgelAttributesToObject(D,function(e){return!!(0<=F.indexOf(e)||e.startsWith("data-")||e.startsWith("aria-"))}),E=!1;switch(V(D,N,"image-alt",null,a)||"auto"){case"true":E=!0;break;case"false":E=!1;break;case"auto":var I=D.getAttribute("alt")||"";"img"===D.tagName&&I.indexOf("<?")<0&&I.indexOf("{{ ")<0&&(E=!0)}B?(S=`{{ (props.attributes.${n}.id ? ('wp-image-' + props.attributes.${n}.id) : '') }}`,u?(T=`props.attributes.${n} && props.attributes.${n}.svg`,b=`props.attributes.${n} && props.attributes.${n}.url`):(b="svg"===D.tagName?(T=`props.attributes.${n} && !props.attributes.${n}.url && propOrDefault( props.attributes.${n}.svg, '${n}', 'svg' )`,`props.attributes.${n} && props.attributes.${n}.url`):(T=`props.attributes.${n} && props.attributes.${n}.svg`,`props.attributes.${n} && !props.attributes.${n}.svg && propOrDefault( props.attributes.${n}.url, '${n}', 'url' )`),u=!0),C=pgCreate(`<RawHTML>{{ pgMergeInlineSVGAttributes(propOrDefault( props.attributes.${n}.svg, '${n}', 'svg' ), ${P.attributesObjectToObjectString(A)}) }}</RawHTML>`),me(D,T=[T],B,H,null,!0),C.insertBefore(D),C.setDataUncloned("react-ifs",T),C.setDataUncloned("react-func","pgCreateSVG3"),D.setAttribute("src",f),"img"===D.tagName&&(E&&D.setAttribute("alt",`{{ propOrDefault( props.attributes.${n}?.alt, '${n}', 'alt' ) }}`),D.addClass(S)),"svg"===D.tagName&&(A.src=f,E&&(A.alt=`{{ propOrDefault( props.attributes.${n}?.alt, '${n}', 'alt' ) }}`),A.className?A.className+=" "+S:A.className=S,me(D,T=[b],B,H,null,!0),($=pgCreate(`<img ${P.attributesObjectToString(A)} />`)).insertBefore(D),$.setDataUncloned("react-ifs",T),D.remove())):(A=P.pgelAttributesToObject(D,function(e){return!!(0<=F.indexOf(e)||e.startsWith("data-")||e.startsWith("aria-"))},!0),S=`<?php echo (${Q.wpGetClass("PG_Blocks")}::getImageField( $args, '${n}', 'id', true) ? ('wp-image-' . ${Q.wpGetClass("PG_Blocks")}::getImageField( $args, '${n}', 'id', true)) : '') ?>`,me(D,T=[],B,H,null,!0),"svg"!==D.tagName?(C=pgCreate("<div></div>"),W=`echo ${Q.wpGetClass("PG_Blocks")}::mergeInlineSVGAttributes( ${Q.wpGetClass("PG_Blocks")}::getImageSVG( $args, '${n}' ), ${P.attributesObjectToPHPArrayString(A)} )`,C.insertAfter(D),C.setAttribute(_,W),C.setAttribute(g+"-set","element"),C.setAttribute("wp-if-custom",Q.wpGetClass("PG_Blocks")+`::getImageSVG( $args, '${n}', false)`+(T.length?` && `+T.join(" && "):"")),u?r=`!${Q.wpGetClass("PG_Blocks")}::getImageSVG( $args, '${n}', false) && ${Q.wpGetClass("PG_Blocks")}::getImageUrl( $args, '${n}', ${Q.quoteParam(c)}, false )`:(r=`!${Q.wpGetClass("PG_Blocks")}::getImageSVG( $args, '${n}', false) && ${Q.wpGetClass("PG_Blocks")}::getImageUrl( $args, '${n}', ${Q.quoteParam(c)} )`,u=!0),T.length&&(r+=" && "+T.join(" && ")),D.setAttribute(_,o),D.setAttribute(g+"-set","attr"),D.setAttribute(g+"-set-attr","src"),D.setAttribute(g+"-set-get-image-size",c),D.addClass(S,null,!1),E&&D.setAttribute("alt",`<?php echo ${Q.wpGetClass("PG_Blocks")}::getImageField( $args, '${n}', 'alt', true); ?>`)):(W=`${Q.wpGetClass("PG_Blocks")}::mergeInlineSVGAttributes( ${Q.wpGetClass("PG_Blocks")}::getImageSVG( $args, '${n}' ), ${P.attributesObjectToPHPArrayString(A)} )`,D.setAttribute(_,W),D.setAttribute(g+"-set","element"),u?r=`${Q.wpGetClass("PG_Blocks")}::getImageUrl( $args, '${n}', ${Q.quoteParam(c)}, false ) && ${Q.wpGetClass("PG_Blocks")}::getImageSVG( $args, '${n}', false )`:(r=`!${Q.wpGetClass("PG_Blocks")}::getImageUrl( $args, '${n}', ${Q.quoteParam(c)}, false ) && ${Q.wpGetClass("PG_Blocks")}::getImageSVG( $args, '${n}' )`,u=!0),T.length&&(r+=" && "+T.join(" && ")),A.src=`<?php echo ${Q.wpGetClass("PG_Blocks")}::getImageUrl( $args, '${n}', ${Q.quoteParam(c)} ); ?>`,E&&(A.alt=`<?php echo ${Q.wpGetClass("PG_Blocks")}::getImageField( $args, '${n}', 'alt', true); ?>`),A.className&&(A.class=A.className,delete A.className),A.class||(A.class=""),A.class+=" "+S,($=pgCreate(`<img ${P.attributesObjectToString(A)} />`)).setAttribute("wp-if-custom",`${Q.wpGetClass("PG_Blocks")}::getImageUrl( $args, '${n}', ${Q.quoteParam(c)}, false )`+(T.length?` && `+T.join(" && "):"")),$.insertAfter(D)));break;case"background-image":B?(k=f.replace("{{ ","").replace(" }}",""),D.setInlineStylePropertyValue("background-image",`{{ ${k} ? ('url(' + ${k} + ')') : null }}`,!1)):((C=crsaSetInlineStylePropertyValue(D.getAttribute("style"),"background-image","",!0,!1,!1)).endsWith(";")||(C+=";"),C+=`<?php echo ( ${o} ? ( 'background-image: url('.${Q.wpGetClass("PG_Blocks")}::getImageUrl( $args, '${n}', ${Q.quoteParam(c)} ).')' ) : '' ); ?>`,R?(k=f.replace("{{ ","").replace(" }}",""),s=crsaSetInlineStylePropertyValue(D.getAttr("style_blockProps")||D.getAttr("style"),"background-image",`{{ ${k} ? ('url(' + ${k} + ')') : null }}`,!0,!1,!1),D.setAttr("style_blockProps",s)):D.setAttribute("style",C));break;case"link":B?(y&&(f=v(D.getAttribute("href")||"",f)),"edit"!==G||D.hasAttribute("onClick")||D.setAttribute("onClick","{{ function(e) { e.preventDefault(); } }}"),D.setAttribute("href",f)):(y&&(f=v(D.getAttribute("href")||"",f)),D.setAttribute(_,`(!empty($_GET['context']) && $_GET['context'] === 'edit') ? 'javascript:void()' : `+o),D.setAttribute(g+"-set","attr"),D.setAttribute(g+"-set-attr","href"),y&&D.setAttribute(g+"-set-attr-append",y));break;case"style":B?D.setInlineStylePropertyValue(s,f,"background-image"===s):(D.setAttribute(_,o),D.setAttribute(g+"-set","style"),D.setAttribute(g+"-set-style",s),D.hasAttribute("cms-block-field-style-important"+a)&&D.setAttribute(g+"-set-style-important",""),R&&(s=crsaSetInlineStylePropertyValue(D.getAttr("style_blockProps")||D.getAttr("style"),s,f,"background-image"===s,!1,!1),D.setAttr("style_blockProps",s)));break;case"attr":(B||R)&&("target"===l&&(x=f,j.push(function(){var e;(D=D.replacedWith||D).getAttribute("rel")||(e=x.replace("{{ ","").replace(" }}",""),D.setAttribute("rel",`{{ ${e} ? 'noopener' : null }}`))})),y&&(f=v(D.getAttribute(l+"_blockProps")||D.getAttribute(l)||"",f)),R?D.setAttribute(l+"_blockProps",f):D.setAttribute(l,f)),B||(D.setAttribute(_,o),D.setAttribute(g+"-set","attr"),D.setAttribute(g+"-set-attr",l),y&&D.setAttribute(g+"-set-attr-append",y));break;case"class":"toggle"===d&&(p||D.getAttribute(N.attribute+"-checkbox-value"+a));var W=D.getAttribute("class_blockProps")||D.getAttribute("class");B?D.setAttribute("class",W?W+` `+f:f):(D.setAttribute("class",W?W+` <?php echo ${o} ?>`:`<?php echo ${o} ?>`),R&&D.setAttribute("class_blockProps",W?W+` `+f:f));break;case"tag":B?D.setDataUncloned("dynamic-tag",f):D.setTagNameQuick(`<?php echo ${o} ?>`)}u&&M.push(B?b:r)}}),j.forEach(function(e){e()}),me(D,M,B,H),M.length&&(B?(D.replacedWith||D).setDataUncloned("react-ifs",M):(D.replacedWith||D).setAttribute("wp-if-custom",M.join(" && ")))}else e||Q.addExportError(D,`<b>Used outside of a Block:</b> <b>${X.name}</b>`,`The action is ignored because it can only be used inside a Block.`)},X.get_action_tag=function(e,t,a){for(var o=[],r=1;r<=ie;r++){var n=V(e,X,"",null,1<r?`-`+r:"");n&&o.push(n)}return Q.getExpressiveActionTag(e,t,o,"BA",a)},e.splice(1,0,X),X.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image],helptext:`Display or use the Block attribute. Can only be used inside a block.`,helplink:"block-attributes",extra_name:null}),Q.jsCommaListToArray=function(e,t,a,o){var r,n;return""===e||null===e?"[]":0<=e.indexOf("(")||e.startsWith("[")?e:(r=e.split(/[,\n]/),n=[],r.forEach(function(e){null!==e&&(e=e.trim(),(e=t?t(e):e).length)&&n.push(a?`__(${Q.quoteParam(e)})`:``+Q.quoteParam(e,o))}),`[ ${n.join(", ")} ]`)},Q.wpCommaListToPHPArray=function(e,t,a,o){var r,n;return""===e||null===e?"array()":0<=e.indexOf("(")||e.startsWith("[")?e:(r=e.split(/[,\n]/),n=[],r.forEach(function(e){null!==e&&(e=e.trim(),(e=t?t(e):e).length)&&n.push(a?`__(${Q.quoteParam(e)})`:``+Q.quoteParam(e,o))}),`array( ${n.join(", ")} )`)},function(e,t){if(e.hasAttr(j.attribute))if(H()){var a=A(e);if(a){var{block_type:o,use_react:r,use_react_for_edit:n}=Y(a),n=("edit"===t&&n&&(r=!0),(e.getAttribute("cms-block-inner-content-allowed")||"").trim()),i=e.getAttribute("cms-block-inner-content-orientation")||"";if("native"===o)if(r){var s,o=new PgReact,r=o.pgelAttributesToObject(e),r={},l=e.getAttribute("cms-block-inner-content-set")||"content";switch(n&&(r.allowedBlocks=`{{ ${ue(n)} }}`),i&&(r.orientation=i),s="save"===t?`<InnerBlocks.Content ${o.attributesObjectToString(r)} />`:`<InnerBlocks ${o.attributesObjectToString(r)} />`,l){case"content":"edit"===t?(e.replaceWith(pgCreate(`<${e.tagName} data-block-props="{{ ...innerBlocksProps }}"></${e.tagName}>`)),e.html("")):e.html(s);break;case"element":e.replaceWith(pgCreate(s));break;case"before":pgCreate(s).insertBefore(e);break;case"after":pgCreate(s).insertAfter(e)}}else e!==a&&e.setAttribute(`<?php if(!empty($_GET['context']) && $_GET['context'] === 'edit') echo 'data-wp-inner-blocks'; ?>`),e.html(`<?php if(empty($_GET['context']) || $_GET['context'] !== 'edit') echo ${Q.wpGetClass("PG_Blocks")}::getInnerContent( $args ); ?>`);else n=n&&` allowedBlocks="{{ ${JSON.stringify(ue(n))} }}"`,e.html(s=`<InnerBlocks${n}${i?' orientation="'+i+'"':""} />`)}}else Q.addExportError(e,"Block Inner Content action is not supported in the free version.","Please upgrade to the Pro edition to use inner blocks and all other features.",Q.current_exported_page_name)}),ue=function(e){return Q.jsCommaListToArray(e,function(e){return e=e.indexOf("/")<0?(e=Q.current_theme_info.slug+"/"+e).replace(/_/g,"-"):e})},j=Q.addTag("cms-block-inner-content","Block Inner Content",null,ce,{"cms-block-inner-content-allowed":{name:"Allowed block types",type:"text",textarea:!0,action:"element_attribute",placeholder:Q.defaultValue("all"),helptext:`<p>Optional. Allowed block types, comma or new line separated. You can omit namespace for blocks from this project. Example:</p>
<pre>
aboutme
navigation
core/heading
theme/project
theme/experience
</pre>`},"cms-block-inner-content-orientation":{name:"Orientation",type:"select",show_empty:!0,options:[{key:"vertical",name:"Vertical"},{key:"horizontal",name:"Horizontal"}],action:"element_attribute",placeholder:Q.defaultValue("vertical"),helptext:`<p>Indicates whether inner blocks are shown horizontally or vertically.</p>`},"cms-block-inner-content-template":{type:"text",name:"Template",action:"element_attribute",textarea:!0,start_section:"Template",helptext:`<p>Template. Leave empty to auto generate or click on the Generate button and then customize it. Use <code>\${this}</code> instead of the current project slug. The format is:</p>
<pre>[
    [ '\${this}/block1', {attr1: 'val'} ],
    [ 'anotherproject/block2', {attr1: 'val'} ]
]</pre><p><b>Important:</b> in case of syntax errors in the template definition, the exported block will not work.</p>`},"cms-block-inner-content-template-generate":{type:"button",name:"Generate",action:"element_attribute",helptext:`<p>Generate the template.</p>`,func:function(e,t){var a=Z(e);e.setAttribute("cms-block-inner-content-template",a),pinegrow.selectedElements.reselect(),pinegrow.showQuickMessage("Template generated.")}},"cms-block-inner-content-template-lock":{name:"Lock",type:"select",show_empty:!0,options:[{key:"all",name:"All (no adding, deleting, moving)"},{key:"insert",name:"Insert (no adding and deleting)"}],action:"element_attribute",placeholder:Q.defaultValue("none"),helptext:`<p>Indicates whether inner blocks are shown horizontally or vertically.</p>`}}).addMeta({tags:[Q.tag_ret_string,Q.tag_use_post],helplink:"block-inner-content",helptext:"Display inner content of a Block."}),me=(j.on_can_add_action=function(e,t,a){var o,r;return H()?(o=A(e))?(r=!1,o.walkSelfAndChildren(function(e){if(e.isElement){if(o!==e&&e.hasAttribute("cms-block"))return"skip_children";if(e.hasAttribute("cms-block-inner-content"))return r=e,!1}return!0}),!r||(pinegrow.showQuickError(`A block can have only one Block Inner Content. Another Block Inner Content is already defined on ${r.getName({short:!0})}.`),!1)):(pinegrow.showQuickError(`Block Inner Content can only be used inside a Block.`),!1):(pinegrow.currentUser.onlyForProNotice("Block Inner Content action"),!1)},e.splice(2,0,j),function(e,t,a,o,r,n){if(e.hasAttribute("cms-block-condition")){var i=!1;if(void 0===t){if(t=[],!(o=A(e)))return;a=Y(o).use_react,i=!0}var s=[],l=(o.clonedFromPgId&&(o=getPgNodeByPgId(o.clonedFromPgId)||o),r=r||ne(o),e.getAttribute("cms-block-condition"));if(l){var p,c,u=e.getAttribute("cms-block-condition-value"),m="true"===e.getAttribute("cms-block-condition-not"),d={},h=(r.forEach(function(e){d[e.id]=e}),c=a?`props.attributes.`+l:`${Q.wpGetClass("PG_Blocks")}::getAttribute( $args, ${Q.quoteParam(l)}, false )`,m?" != ":" == ");if(d[l])switch(d[l].control){case"link":c=a?`(props.attributes.${l} && props.attributes.${l}.url)`:`${Q.wpGetClass("PG_Blocks")}::getLinkUrl( $args, ${Q.quoteParam(l)}, false )`,u=null;break;case"image":c=a?`(props.attributes.${l} && (props.attributes.${l}.url || props.attributes.${l}.svg))`:`( ${Q.wpGetClass("PG_Blocks")}::getImageField( $args, ${Q.quoteParam(l)}, 'url' , false ) || ${Q.wpGetClass("PG_Blocks")}::getImageField( $args, ${Q.quoteParam(l)}, 'svg' , false ) )`,u=null}null!==u&&(c=(c=(p=e.getAttribute("cms-block-condition-operator"))&&"=="!==(h=p)&&"!="!==h?a?`parseFloat(${c})`:`floatval(${c})`:c)+` ${h} `+Q.quoteParam(u,{numeric:!0}),m=!1),t.push(c=m?`!`+c:c),s.push(c)}n||e.removeAttrIfStartsWith("cms-block-condition"),i&&t.length&&(a?e.setDataUncloned("react-ifs",t):e.setAttribute("wp-if-custom",t.join(" && "))),e.setDataUncloned("block-conditions",s)}}),h=Q.addTag("cms-block-condition","Block Condition",null,function(e){},{"cms-block-condition":{name:"Attribute id",type:"select",textarea:!1,options:function(e,t){return ne(t,!0).map(function(e){return{key:e.id,name:e.title+" ("+e.id+")"}})},fill_list_on_open:!0,action:"element_attribute",placeholder:Q.forExample("link"),keep_attribute_if_empty:!0,helptext:`<p>Id of the block attribute that is used when deciding if the element should be shown. If the attribute value is set, the element will be shown. Use the Not field to negate this, or specify a custom expression below.</p>`},"cms-block-condition-value":{name:"Value",type:"text",textarea:!1,action:"element_attribute",placeholder:Q.forExample("blue"),helptext:`<p>Instead of just checking if the attribute value is set or not, compare the attribute value to the value specified here. </p><p>Not supported for link and image attributes.</p>`},"cms-block-condition-operator":{name:"Operator",type:"select",action:"element_attribute",show_empty:!0,show_if:"cms-block-condition-value",options:[{key:"==",name:"== (equal)"},{key:"!=",name:"!= (not equal)"},{key:"<",name:"< (smaller)"},{key:">",name:"> (larger)"},{key:"<=",name:"<= (smaller or equal)"},{key:">=",name:">= (larger or equal)"}],placeholder:Q.defaultValue("=="),helptext:`<p>Operator to be used with the value. Default is == (equal).</p>`},"cms-block-condition-not":{name:"Not",type:"checkbox",value:"true",action:"element_attribute",show_if:"!cms-block-condition-value",helptext:`<p>Negate the condition - if checked, the element will be shown if the attribute value is not set.</p>`}}).addMeta({tags:[Q.tag_ret_string,Q.tag_use_post],helplink:"block-condition",helptext:"Add condition for displaying the block element."}),z=(h.on_can_add_action=function(e,t,a){return!0},e.splice(3,0,h),Q.addTag("cms-form",n("Form"),null,function(e){if(e.hasAttribute("cms-form")){Q.requireResource("wp_simple_form_mailer.php","inc",null),Q.includeInFunctions("wp_simple_form_mailer.php","inc",null,"PG_Simple_Form_Mailer");var t,a,o,n,i,s,r,l,p,c,u=["attachment","attachment_id","author","author_name","cat","calendar","category_name","comments_popup","cpage","day","error","exact","feed","hour","m","minute","monthnum","more","name","order","orderby","p","page_id","page","paged","pagename","pb","post_type","posts","preview","robots","s","search","second","sentence","static","subpost","subpost_id","taxonomy","tag","tag_id","tb","term","w","withcomments","withoutcomments","year","category__in","category__not_in","category__and","comments_per_page","offset","perm","post__in","post__not_in","post_mime_type","post_parent__in","tag__and","tag__in","tag__not_in","tag_id","tag_slug__and","tag_slug__in","meta_key","meta_value"],m="form"===e.tagName?e:e.findOne("form"),d=(e.getAttr("cms-form")||"contact_form")+"_mailer_id";if(e.setAttr("id",d),e.hasAttribute("cms-form-post-type-register")&&(a=e.getAttribute("cms-form-post-type-name"),c=e.getAttribute("cms-form-post-type-name-singular")||a,t=e.getAttr("cms-form-post-type"))&&a&&(e.setAttribute(o="wp-post-type",t),e.setAttribute(o+"-name",a),e.setAttribute(o+"-name-singular",c),e.setAttribute(o+"-public","false"),e.setAttribute(o+"-supports","title,editor,author"),e.setAttribute(o+"-show-in-menu","true"),e.setAttribute(o+"-show-ui","true"),e.setAttribute(o+"-rest","false")),m)return m.setAttribute("action",`<?php echo '#${d}'; ?>`),m.setAttribute("method","post"),"false"!==e.getAttr("cms-form-clear-handlers")&&m.setAttribute("onsubmit","event.stopImmediatePropagation();event.stopPropagation();"),t=null,m.findOne(`[name="${d}"]`)||(t=pgCreate(`<input type="hidden" name="${d}" value="1"/>`)),a=null,(c=e.getAttr("cms-form-success-element"))&&"this"!==c&&(a=e.findOne(c))&&a.contains(m)&&(a=null),o=null,(c=e.getAttr("cms-form-error-element"))&&"this"!==c&&(o=e.findOne(c))&&o.contains(m)&&(o=null),n={},i=0,s=function(e,t){for(var a=e.getAttrList(),o=0;o<a.length;o++)if(!t||a[o].name===t){if(0<=a[o].name.indexOf("<?"))return!0;if(a[o].value&&0<=a[o].value.indexOf("<?"))return!0}return!1},m.find("input,select,textarea").forEach(function(e){i++;var t,a,o,r=e.getAttr("name");r||(r=d+`_`+i,e.setAttr("name",r)),r in n?n[r]++:n[r]=1,0<=u.indexOf(r)&&(r=r+"_field"+(1==n[r]?"":``+n[r]),e.setAttr("name",r)),"input"===e.tagName?(o=e.getAttr("type")||"text",["submit","button","image","file"].indexOf(o)<0&&("checkbox"===o?s(e)||(a=e.getAttr("value")||"",t="",e.hasAttr("checked")&&(t="checked"),e.removeAttribute("checked"),e.setAttribute(`<?php echo ( isset( $_POST['${r}'] ) ? 'checked' : ${Q.quoteParam(t)} ); ?>`,null)):"radio"===o?s(e)||(a=e.getAttr("value")||"",t="",e.hasAttr("checked")&&(t="checked"),e.removeAttribute("checked"),e.setAttribute(`<?php echo ( (isset( $_POST['${r}'] ) && $_POST['${r}'] == ${Q.quoteParam(a,null,!0)}) ? 'checked' : ${Q.quoteParam(t)} ); ?>`,null)):s(e,"value")||(a=e.getAttr("value")||"",o=`<?php echo ( isset( $_POST['${r}'] ) ? $_POST['${r}'] : ${Q.quoteParam(a,null,!0)} ); ?>`,e.setAttr("value",o)))):"textarea"===e.tagName?(a=$.trim(e.html()||"")).indexOf("<?")<0&&e.html(`<?php echo ( isset( $_POST['${r}'] ) ? $_POST['${r}'] : ${Q.quoteParam(a,null,!0)} ); ?>`):"select"===e.tagName&&e.find("option").forEach(function(e){var t,a;s(e)||(t=null,t=e.hasAttr("value")?e.getAttr("value"):e.text(),a="",e.hasAttr("selected")&&(a="selected"),e.removeAttribute("selected"),e.setAttribute(`<?php echo ( (isset( $_POST['${r}'] ) && $_POST['${r}'] == ${Q.quoteParam(t,null,!0)} ) ? 'selected' : ${Q.quoteParam(a)} ); ?>`,null))})}),e.hasAttr("cms-form-captcha")&&(e.hasAttr("cms-form-captcha-customizer")?(r=`get_theme_mod( 'captcha_key' )`,l=`get_theme_mod( 'captcha_secret' )`,e.setAttr("wp-cz-control","captcha_key"),e.setAttr("wp-cz-control-2","captcha_secret"),e.setAttr("wp-cz-section","captcha_settings"),e.setAttr("wp-cz-section-title","Captcha settings"),e.setAttr("wp-cz-control-label","ReCaptcha API Key"),e.setAttr("wp-cz-control-label-2","ReCaptcha API Secret"),e.setAttr("wp-cz-control-section","captcha_settings"),e.setAttr("wp-cz-control-section-2","captcha_settings")):(r=e.getAttr("cms-form-captcha-key"),l=e.getAttr("cms-form-captcha-secret")),(c=m.findOne(".g-recaptcha"))||(c=pgCreate(`<div class="g-recaptcha" style="margin:10px 0;"></div>`),p=m.findOne('input[type="submit"]'),J.addToChanges(function(e,t,a,o){a?o.insertBefore(a):t.append(o)},this,[e,m,p,c])),c.setAttr("data-sitekey",`<?php echo ${Q.quoteParam(r)} ?>`),c.removeClass("g-recaptcha-error"),c.removeClass("g-recaptcha-disabled"),c.removeClass("g-recaptcha-invalid-key"),Q.addToFunctionsPhpSection("Enqueue Scripts",p="\n"+"    "+`wp_enqueue_script( 'g-recaptcha', 'https://www.google.com/recaptcha/api.js' );`,!0)),c=[],(p=[]).push(pgCreate(`<?php $mailer = new PG_Simple_Form_Mailer(); ?>`)),p.push(pgCreate(`<?php $mailer->process( ${J.getNamedParams(z,e,function(e,t,a){return"form_id"===t?d:"captcha_key"===t&&e.hasAttr("cms-form-captcha-customizer")?r:"captcha_secret"===t&&e.hasAttr("cms-form-captcha-customizer")?l:a})} ); ?>`)),p.push(pgCreate(`<?php if( !$mailer->processed || $mailer->error) : ?>`)),c.push(pgCreate(`<?php endif; ?>`)),e.hasAttr("cms-form-show-message")&&c.push(pgCreate(`<?php if( !$mailer->error ) echo $mailer->html; ?>`)),a||o?(c.push(pgCreate(`<?php endif; ?>`)),a?(c.push(a),a.setInlineStylePropertyValue("display","block")):c.push(pgCreate(`<?php echo $mailer->message; ?>`)),c.push(pgCreate(`<?php else : ?>`)),o?(c.push(o),o.setInlineStylePropertyValue("display","block")):c.push(pgCreate(`<?php echo $mailer->message; ?>`)),c.push(pgCreate(`<?php if( $mailer->error ) : ?>`))):c.push(pgCreate(`<?php echo $mailer->message; ?>`)),c.push(pgCreate(`<?php if( $mailer->processed ) : ?>`)),c.push(pgCreate(`<?php endif; ?>`)),J.addToChanges(function(e,t,a,o,r){if(t.parent){for(var n=0;n<a.length;n++)a[n].insertBefore(t),a[n].indent_text=!0;for(n=0;n<o.length;n++)o[n].insertAfter(t),o[n].indent_text=!0;r&&t.append(r)}},this,[e,m,p,c,t]),!1}},{"cms-form":{type:"text",name:"Form id",action:"element_attribute",attribute_keep_if_empty:!0,placeholder:Q.defaultValue("contact_form"),parameter_name:"form_id",helptext:`<p>Give the form a unique id. By default, contact_form is used. The id is not shown anywhere, its just used for processing the form.</p>`},"cms-form-send-email":{type:"checkbox",name:"Send to email",action:"element_attribute",parameter_name:"send_to_email",value:"true",helptext:`<p>Send form submissions by email?</p>`},"cms-form-save-as-post-type":{type:"checkbox",name:"Save as post type",action:"element_attribute",parameter_name:"save_to_post_type",value:"true",helptext:`<p>Check to save form submission as a WordPress custom type post. The posts are private and can only be viewed by admin in WordPress dashboard. Doing this is recommended, so that you have a backup of all submissions even if email delivery fails.</p>`},"cms-form-label1":{type:"label",name:"Email options",action:"element_attribute",class:"pg-action-info-label",show_if:"cms-form-send-email"},"cms-form-email":{type:"text",name:"Email address",action:"element_attribute",parameter_name:"email",placeholder:Q.defaultValue("Admin email address"),show_if:"cms-form-send-email",helptext:`<p>Email address for mailing the form submissions. This should be the email address of a person or team that is responsible for handling the form submissions.</p>`},"cms-form-label2":{type:"label",name:"Post type options",action:"element_attribute",class:"pg-action-info-label",show_if:"cms-form-save-as-post-type"},"cms-form-post-type":{type:"text",name:"Post type",placeholder:"post",action:"element_attribute",validate:Q.validateSlug,parameter_name:"post_type",placeholder:Q.forExample("contact"),options:Q.wpInsight.getPostTypes,open_list_on_focus:!0,show_if:"cms-form-save-as-post-type",helptext:`<p>Enter the custom post type that will be used for saving form submissions.</p>`},"cms-form-post-type-register":{type:"checkbox",name:"Register custom post type",action:"element_attribute",value:"true",empty_attribute:!0,show_if:"cms-form-save-as-post-type",helptext:`<p>Register the custom post type, unless you know that it is already registered somewhere else.</p>`},"cms-form-post-type-name":{type:"text",name:"Name",placeholder:"Contacts",action:"element_attribute",validate:Q.required,show_if:"cms-form-save-as-post-type&&cms-form-post-type-register",on_changed:function(){Q.setRequireThemeExport("Custom post types")},helptext:`<p>Plural name of the post collection. For example, Contacts.</p>`},"cms-form-post-type-name-singular":{type:"text",name:"Name, singular",placeholder:"Contact",action:"element_attribute",show_if:"cms-form-save-as-post-type&&cms-form-post-type-register",on_changed:function(){Q.setRequireThemeExport("Custom post types")},helptext:`<p>Singular name of individual post item, for example, Contact.</p>`},"cms-form-label3":{type:"label",name:"Texts &amp; Messages",action:"element_attribute",class:"pg-action-info-label"},"cms-form-subject":{type:"text",name:"Email / post title",action:"element_attribute",placeholder:Q.defaultValue("Contact form submission"),parameter_name:"title",helptext:`<p>The title used as the email message subject or as the title of the saved post.</p>`},"cms-form-intro":{type:"text",name:"Message intro text",placeholder:"post",action:"element_attribute",parameter_name:"intro",placeholder:Q.defaultValue("We received a new contact form submission:"),helptext:`<p>Intro text to include at the beginning of the email message and saved post.</p>`},"cms-form-success-element":{type:"selector",name:"Success element selector",action:"element_attribute",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{filter:function(e){return e!==t}},a,o)},selector_info:`Select the element that will be shown after the form is successfuly submitted.`,helptext:`<p>Select the element that will be shown after the form is successfuly submitted.</p>`},"cms-form-success-message":{type:"text",name:"Success message",action:"element_attribute",parameter_name:"success_message",placeholder:Q.forExample("<p>Thank you for contacting us.</p>"),show_if:"!cms-form-success-element",helptext:`<p>Enter the message that will be shown after the form is successfuly submitted. This is only used if the sucess element is not defined.</p>`},"cms-form-error-element":{type:"selector",name:"Error element selector",action:"element_attribute",get_selector_options:function(e,t,a,o){return Q.wpGetSelectorOptions(t,{filter:function(e){return e!==t}},a,o)},selector_info:`Select the element that will be shown in case of problems with submitting the form.`,helptext:`<p>Select the element that will be shown in case of problems with submitting the form.</p>`},"cms-form-error-message":{type:"text",name:"Error message",action:"element_attribute",parameter_name:"error_message",placeholder:Q.forExample("<p>Thank you for contacting us.</p>"),show_if:"!cms-form-error-element",helptext:`<p>Enter the message that will be shown in case of problems with submitting the form. This is only used if the error element is not defined.</p>`},"cms-form-show-message":{type:"checkbox",name:"Show submitted data to the user",action:"element_attribute",value:"true",helptext:`<p>Show submitted data to the user after the form is successfuly submitted?</p>`},"cms-form-label5":{type:"label",name:"Captcha",action:"element_attribute",class:"pg-action-info-label"},"cms-form-captcha":{type:"checkbox",name:"Use ReCaptcha v2",action:"element_attribute",parameter_name:"captcha",value:"true",helptext:`<p>Use reCaptcha 2 for form validation. reCaptcha control is inserted into an existing element with the class g-recaptcha or, if that is not found, it is inserted right before the submit button. Make sure to sign up for the ReCaptcha version 2 with checkbox when getting the API key.</p>`},"cms-form-captcha-customizer":{type:"checkbox",name:"Use Customizer to store API key and secret",action:"element_attribute",value:"true",empty_attribute:!0,show_if:"cms-form-captcha",helptext:`<p>Make reCaptcha API key and secret be customizable in the theme Customizer, instead of hard coding them here. That's recommended.</p>`},"cms-form-captcha-key":{type:"text",name:"Key",action:"element_attribute",parameter_name:"captcha_key",show_if:"cms-form-captcha&&!cms-form-captcha-customizer",validate:Q.required,helptext:`<p>ReCaptcha API key. Note, it's better to use the Customizer option than to hard code the key here.</p>`},"cms-form-captcha-secret":{type:"text",name:"Secret",action:"element_attribute",parameter_name:"captcha_secret",show_if:"cms-form-captcha&&!cms-form-captcha-customizer",validate:Q.required,helptext:`<p>ReCaptcha API secret. Note, it's better to use the Customizer option than to hard code the secret here.</p>`},"cms-form-captcha-button":{type:"button",name:"Get the API key &amp; secret",func:function(){pinegrow.openExternalUrl("https://developers.google.com/recaptcha/")},show_if:"cms-form-captcha"},"cms-form-label4":{type:"label",name:"Advanced",action:"element_attribute",class:"pg-action-info-label"},"cms-form-clear-handlers":{type:"checkbox",name:"Clear JS submit handlers",action:"element_attribute",value:"true",negvalue:"false",default_value:"true",helptext:`<p>Some websites come with custom Javascript code that handles the form submissions. That prevents the form to be processed by WordPress. Checking this option will try to remove such handlers from the form.</p>`},"cms-form-callback":{type:"text",name:"Call function",action:"element_attribute",parameter_name:"callback",helptext:`<p>The name of the function to call when the form is submitted successfully. Data is passed as the first argument, stored in the array. Form options array is passed in the second argument. The functions should return true on success and false on failure.</p>`}})),U=(z.addMeta({tags:[Q.tag_set_attr_class,Q.tag_set_attr_id,Q.tag_t_post,Q.tag_use_loop],helptext:`Handle form submissions by emailing the information or storing it in a custom post type.`,helplink:"form",extra_name:null}),e.push(z),{}),T=5,m=1;m<=T;m++)U["cms-function"+(S=1<m?`-`+m:"")]={type:"menu",name:"Function",action:"element_attribute",validate:Q.required,get_menu_options:function(e,t){return L(t)},start_repeat_item:"Function "+m,reorder_repeat_items:!0,add_repeat_item_label:"Add function",helptext:`<p>Select the function to run on this element.</p><p>Hint, <b>Display current year</b> is useful for dynamic copyright notices.</b></p>`},U["cms-function-code"+S]={type:"text",name:"Custom code",textarea:!0,action:"element_attribute",validate:Q.required,show_if:"cms-function"+S+"==code",options:Q.wpInsight.getCustomFunctions,helptext:`<p>Select one of predefined functions or enter custom code.</p>`},U["cms-function-type"+S]={type:"select",name:"Set",action:"element_attribute",validate:Q.required,options:[{key:"content",name:"Content"},{key:"element",name:"Replace element"},{key:"before",name:"Insert before"},{key:"after",name:"Insert after"},{key:"image",name:"Image"},{key:"background-image",name:"Background image"},{key:"link",name:"Link"},{key:"style",name:"Style"},{key:"attr",name:"Attribute"}],helptext:`<p>Where on the selected element would you like to display the function value?</p><p>Use Insert before and after for if statments, assigning values to variables...</p>`},U["cms-function-style"+S]={type:"text",name:"Style property",action:"element_attribute",placeholder:Q.forExample("color"),validate:Q.required,show_if:"cms-function-type"+S+"==style",helptext:`<p>Which style property to set? For example, color, background-color, font-size...</p>`},U["cms-function-attribute"+S]={type:"text",name:"Element attribute",action:"element_attribute",placeholder:Q.forExample("title"),validate:Q.required,show_if:"cms-function-type"+S+"==attr",helptext:`<p>Which element attribute to set? For example, href, alt, title...</p>`};function de(){return[{icon:"icon-Property",title:"Change the smart action into regular WP actions.",func:function(e,t,a){t.mapAction?canMakeChange(e,"remove_action",t)&&pinegrow.showNotice(`<p>Do you want to change this Smart action into Regular WordPress actions so that you can customize them further?</p><p>Hint: use Undo if you change your mind and want to get the Smart action back.</p>`,"Would you like to customize this Smart action?","wp-change-smart-to-regular",function(){pinegrow.makeChanges(e,"Customize "+t.name,function(){t.mapAction(t,e,!0),$.fn.crsa("removeActionFromElement",e,t,e.getPage()),pinegrow.showQuickMessage("<b>"+t.name+"</b> changed into regular WP action(s). Use Undo to get it back.")})},null,null,!0,!0):pinegrow.showQuickError("Sorry, this action can't be turned into a regular WP action.")}}]}var C=Q.addTag("cms-function",n("Function"),null,function(e){E(C,e,C.mapAction)},U),he=(C.on_action_added=function(r,e,t){function a(e,t,a){var o=C.attribute+(e?`-`+e:"")+(1<t?`-`+t:"");r.getAttribute(o)||("function"==typeof a&&(a=a()),r.setAttribute(o,a))}var o;"a"==r.tagName?(a("type",1,"content"),a("type",2,"link"),a("",2,"field2")):"img"==r.tagName?a("type",1,"image"):(o=r.get$DOMElement())&&"none"!=o.css("backgroundImage")?a("type",1,"background-image"):a("type",1,"content")},C.mapAction=function(e,t){for(var a=[],o=L(t),r=1;r<=T;r++){var n=1<r?`-`+r:"",i=V(t,e,"",null,n),s=V(t,e,"type",null,n),l=V(t,e,"style",null,n),p=V(t,e,"attribute",null,n),c=V(t,e,"code",null,n);if(i){var u=null;if("code"===i?(u=c)&&Q.wpInsight.addCustomFunction(u):u=B(i,o),u){var m="wp-call-function"+n;switch(t.setAttribute(m),s){case"content":t.setAttribute(m,u),t.setAttribute(m+"-set","content");break;case"element":t.setAttribute(m,u),t.setAttribute(m+"-set","element");break;case"before":t.setAttribute(m,u),t.setAttribute(m+"-set","before");break;case"after":t.setAttribute(m,u),t.setAttribute(m+"-set","after");break;case"image":t.setAttribute(m,u),t.setAttribute(m+"-set","attr"),t.setAttribute(m+"-set-attr","src");break;case"background-image":t.setAttribute(m,u),t.setAttribute(m+"-set","style"),t.setAttribute(m+"-set-style","background-image");break;case"link":t.setAttribute(m,u),t.setAttribute(m+"-set","attr"),t.setAttribute(m+"-set-attr","href");break;case"style":t.setAttribute(m,u),t.setAttribute(m+"-set","style"),t.setAttribute(m+"-set-style",l);break;case"attr":t.setAttribute(m,u),t.setAttribute(m+"-set","attr"),t.setAttribute(m+"-set-attr",p)}}}}a.length&&(acf||1!=a.length?(i=acf?"get_field(":"get_post_meta( get_the_ID(),",u=[],a.forEach(function(e){u.push(`${i} '${e}'${acf?"":", true"} )`)}),t.setAttribute("wp-if-custom",u.join(" && "))):t.setAttribute("wp-if-get-post-meta","|"+a[0]))},C.get_action_tag=function(e,t,a){for(var o=[],r=1;r<=T;r++){var n=V(e,C,"",null,1<r?`-`+r:"");n&&o.push(n)}return Q.getExpressiveActionTag(e,t,o,"Func",a)},e.push(C),C.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image],helptext:`Run a function snippet or custom PHP code.`,helplink:"function",extra_name:null}),Q.addTag("cms-no-export",n("Don't Export"),null,function(e){E(he,e,he.mapAction)})),V=(he.mapAction=function(e,t){t.setAttribute("wp-no-export")},he.on_show_live_data=async function(e,t){t.hidePgel(e)},he.addMeta({tags:[Q.tag_set_content,Q.tag_set_attr,Q.tag_ret_image,Q.tag_t_post,Q.tag_use_loop],helptext:`Do not export this element to the WordPress theme.`,helplink:"dont-export",extra_name:null}),e.push(he),J.list.push(function(e){e.removeAttrIfStartsWith("cms-")}),Q.areActionsCompatible=function(e,t,a){try{var o=Q.getActionTypes(e);if(t.mapAction){if(!t.skip_compatibility_check){(i=e.clone(!0)).removeAttrIfStartsWith("wp-"),t.mapAction(t,i);for(var r=i.getAttrList(),n=0;n<r.length;n++)if(r[n].name.startsWith("wp-")&&e.hasAttribute(r[n].name))return!1}}else{for(var i=null,n=0;n<o.length;n++)o[n].mapAction&&(i||(i=e.clone(!0)).removeAttrIfStartsWith("wp-"),o[n].skip_compatibility_check||o[n].mapAction(o[n],i));if(i&&i.hasAttribute(t.attribute))return!1}}catch(e){}return!0},function(e,t,a,o,r){var n=e.getAttribute(t.attribute+(a?"-"+a:"")+(r||""));return n=null===n&&void 0!==o?o:n}),ge=function(e){if(t=(t=(t=Q.current_theme_info?Q.current_theme_info.crsaPage:t)||e.getPage())||pinegrow.getSelectedPage()){var t=t.findFrameworkOfType("bootstrap");if(t){if(t.key.startsWith("bs3"))return"3";if(t.key.startsWith("bs4"))return"4"}}return null},_e=["p","span","a","h1","h2","h3","h4","h5","h6"],fe=function(e){return 0<=_e.indexOf(e)},E=(Q.isContentTag=fe,Q.wpMapAction=function(e,t,a){t.hasAttr(e.attribute)&&a(e,t)}),we=[],be=[],ye=[];return e.forEach(function(e){e.name.startsWith("Block")||(e.on_get_action_icons=de),e.short_name=e.name.replace(" - Smart",""),e.meta.helplink="https://pinegrow.com/docs/wordpress/actions/"+e.meta.helplink+"/",Q.addQuickAction(e),(e.name.startsWith("Post")||e.name.startsWith("Show posts")?we:e.name.startsWith("Block")?ye:be).push(e)}),{post:we,site:be,blocks:ye,func_action:C,no_export_action:he}},pgWordpressAuthor=function(e,t){var a=[],o=new PgComponentType("wp_the_author","The author"),r=(o.selector="[wp-the-author]",o.code="<wp-the-title>Vivamus ac dolor blandit</wp-the-title>",o.attribute="wp-the-author",o.sections={parameters:{name:"Options",fields:{wp_the_author:{type:"text",name:"Post id",live_update:!0,action:"element_attribute",attribute:"wp-the-author",attribute_keep_if_empty:!0,parameter_order:1,placeholder:e.defaultValue("current author")}}}},e.addComponentType(o),a.push(o),e.addHtmlOrNodeField(o),t.list.push(function(e){if(e.hasAttr(o.attribute))return t.toPhpHtmlOrNode(e,"the_author("+t.getParams(o,e)+");",o)}),o.meta={tags:[e.tag_ret_string,e.tag_set_element,e.tag_set_content,e.tag_t_author,e.tag_use_loop],helptext:"Display the author of the post.",helplink:"https://codex.wordpress.org/Function_Reference/the_author",extra_name:"the_author"},o.code="<span wp-the-author>admin</span>",new PgComponentType("wp_the_author_link","The author link")),n=(r.selector="[wp-the-author-link]",r.code="<wp-the-title>Vivamus ac dolor blandit</wp-the-title>",r.attribute="wp-the-author-link",e.addComponentType(r),a.push(r),e.addHtmlOrNodeField(r),t.list.push(function(e){if(e.hasAttr(r.attribute))return t.toPhpHtmlOrNode(e,"the_author_link();",r)}),r.meta={tags:[e.tag_ret_link,e.tag_set_element,e.tag_set_content,e.tag_t_author,e.tag_use_loop],helptext:"Display the link to author's website.",helplink:"https://codex.wordpress.org/Function_Reference/the_author_link",extra_name:"the_author_link"},r.code='<a href="#" title="Visit admin&#8217;s website" rel="author external" wp-the-author-link>admin</a>',new PgComponentType("wp_the_author_meta","The author meta")),i=(n.selector="[wp-the-author-meta]",n.code="<wp-the-title>Vivamus ac dolor blandit</wp-the-title>",n.attribute="wp-the-author-meta",n.sections={parameters:{name:"Options",fields:{wp_the_author:{type:"select",name:"Field",live_update:!0,action:"element_attribute",attribute:"wp-the-author-meta",attribute_keep_if_empty:!0,show_empty:!0,options:[{key:"user_login",name:"user_login"},{key:"user_pass",name:"user_pass"},{key:"user_nicename",name:"user_nicename"},{key:"user_email",name:"user_email"},{key:"user_url",name:"user_url"},{key:"user_registered",name:"user_registered"},{key:"user_activation_key",name:"user_activation_key"},{key:"user_status",name:"user_status"},{key:"display_name",name:"display_name"},{key:"nickname",name:"nickname"},{key:"first_name",name:"first_name"},{key:"last_name",name:"last_name"},{key:"description",name:"description"},{key:"jabber",name:"jabber"},{key:"aim",name:"aim"},{key:"yim",name:"yim"},{key:"user_level",name:"user_level"},{key:"user_firstname",name:"user_firstname"},{key:"user_lastname",name:"user_lastname"},{key:"user_description",name:"user_description"},{key:"rich_editing",name:"rich_editing"},{key:"comment_shortcuts",name:"comment_shortcuts"},{key:"admin_color",name:"admin_color"},{key:"plugins_per_page",name:"plugins_per_page"},{key:"plugins_last_view",name:"plugins_last_view"},{key:"ID",name:"ID"}],parameter_order:1},wp_the_author_id:{type:"text",name:"Author id",action:"element_attribute",attribute:"wp-the-author-meta-id",parameter_order:2,placeholder:e.defaultValue("current author")}}}},e.addComponentType(n),a.push(n),e.addHtmlOrNodeField(n),t.list.push(function(e){if(e.hasAttr(n.attribute))return t.toPhpHtmlOrNode(e,"the_author_meta("+t.getParams(n,e)+");",n)}),n.meta={tags:[e.tag_ret_link,e.tag_set_element,e.tag_set_content,e.tag_t_author,e.tag_use_loop],helptext:"Display the author's meta field.",helplink:"https://codex.wordpress.org/Function_Reference/the_author_meta",extra_name:"the_author_meta"},n.code='<p wp-the-author-meta="description">This is a biographical info from the author\'s profile page.</p>',new PgComponentType("wp_the_author_posts","The author posts")),s=(i.selector="[wp-the-author-posts]",i.code="<wp-the-title>Vivamus ac dolor blandit</wp-the-title>",i.attribute="wp-the-author-posts",e.addComponentType(i),a.push(i),e.addHtmlOrNodeField(i),t.list.push(function(e){if(e.hasAttr(i.attribute))return t.toPhpHtmlOrNode(e,"the_author_posts();",i)}),i.meta={tags:[e.tag_ret_string,e.tag_set_element,e.tag_set_content,e.tag_t_author,e.tag_use_loop],helptext:"Display the number of post the author has published.",helplink:"https://codex.wordpress.org/Function_Reference/the_author_posts",extra_name:"the_author_posts"},i.code="<span wp-the-author-posts>5</span>",new PgComponentType("wp_the_author_posts_link","The author posts link")),l=(s.selector="[wp-the-author-posts-link]",s.code="<wp-the-title>Vivamus ac dolor blandit</wp-the-title>",s.attribute="wp-the-author-posts-link",e.addComponentType(s),a.push(s),e.addHtmlOrNodeField(s),t.list.push(function(e){if(e.hasAttr(s.attribute))return t.toPhpHtmlOrNode(e,"the_author_posts_link();",s)}),s.meta={tags:[e.tag_ret_link,e.tag_set_element,e.tag_set_content,e.tag_t_author,e.tag_use_loop],helptext:"Display the link to author's posts.",helplink:"https://codex.wordpress.org/Function_Reference/the_author_posts_link",extra_name:"the_author_posts_link"},s.code='<a href="#" title="Posts by admin" rel="author" wp-the-author-posts-link>admin</a>',new PgComponentType("wp_dropdown_users","Dropdown users")),p=(l.selector="[wp-dropdown-users]",l.code='<select name="user" id="user" wp-dropdown-users>    <option value="1">admin</option>    <option value="2">user 2</option>    <option value="3">user 3</option>    </select>',l.attribute="wp-dropdown-users",l.sections={parameters:{name:"Parameters",fields:{wp_dropdown_users_show_option_all:{type:"text",name:"Show option all",action:"element_attribute",attribute:"wp-dropdown-users-show-option-all",parameter_name:"show_option_all",placeholder:e.forExample("All users"),translate:!0},wp_dropdown_users_show_option_none:{type:"text",name:"Show option none",action:"element_attribute",attribute:"wp-dropdown-users-show-option-none",parameter_name:"show_option_none",placeholder:e.forExample("None"),translate:!0},wp_dropdown_users_orderby:{type:"select",name:"Order by",action:"element_attribute",attribute:"wp-dropdown-users-orderby",show_empty:!0,options:[{key:"ID",name:"ID"},{key:"user_nicename",name:"user_nicename"},{key:"display_name",name:"display_name"}],parameter_name:"orderby"},wp_dropdown_users_order:{type:"select",name:"Order",action:"element_attribute",attribute:"wp-dropdown-users-order",show_empty:!0,options:[{key:"ASC",name:"Ascending"},{key:"DESC",name:"Descending"}],parameter_name:"order"},wp_dropdown_users_include:{type:"text",name:"Include",action:"element_attribute",attribute:"wp-dropdown-users-include",parameter_name:"include",placeholder:e.forExample("4,12")},wp_dropdown_users_exclude:{type:"text",name:"Exclude",action:"element_attribute",attribute:"wp-dropdown-users-exclude",parameter_name:"exclude",placeholder:e.forExample("4,12")},wp_dropdown_users_multi:{type:"checkbox",name:"Multi",action:"element_attribute",attribute:"wp-dropdown-users-multi",value:"true",parameter_name:"multi"},wp_dropdown_users_show:{type:"select",name:"Show field",action:"element_attribute",attribute:"wp-dropdown-users-show",show_empty:!0,options:[{key:"ID",name:"ID"},{key:"user_nicename",name:"user_nicename"},{key:"display_name",name:"display_name"}],parameter_name:"show"},wp_dropdown_users_selected:{type:"text",name:"Selected",action:"element_attribute",attribute:"wp-dropdown-users-selected",parameter_name:"selected"},wp_dropdown_users_include_selected:{type:"checkbox",name:"Include selected",action:"element_attribute",attribute:"wp-dropdown-users-include-selected",value:"true",parameter_name:"include_selected"},wp_dropdown_users_name:{type:"text",name:"Name",action:"element_attribute",attribute:"wp-dropdown-users-name",parameter_name:"name",placeholder:e.defaultValue("user")},wp_dropdown_users_before:{type:"text",name:"Before",action:"element_attribute",attribute:"wp-dropdown-users-before",parameter_name:"before"},wp_dropdown_users_class:{type:"text",name:"Class",action:"element_attribute",attribute:"wp-dropdown-users-class",parameter_name:"class"},wp_dropdown_users_id:{type:"text",name:"Id",action:"element_attribute",attribute:"wp-dropdown-users-id",parameter_name:"id",placeholder:e.defaultValue("user")},wp_dropdown_users_blog_id:{type:"text",name:"Blog id",action:"element_attribute",attribute:"wp-dropdown-users-blog-id",parameter_name:"blog_id"},wp_dropdown_users_who:{type:"text",name:"Who",action:"element_attribute",attribute:"wp-dropdown-users-who",parameter_name:"who",placeholder:e.defaultValue("authors")}}}},e.addComponentType(l),a.push(l),e.addHtmlOrNodeField(l),t.list.push(function(e){if(e.hasAttr(l.attribute))return t.toPhpHtmlOrNode(e,"wp_dropdown_users("+t.getNamedParams(l,e,function(e,t,a){return a||("id"==t?a=e.getAttr("id"):"class"==t&&(a=e.getAttr("class"))),a})+");",l)}),l.meta={tags:[e.tag_ret_html,e.tag_set_element,e.tag_set_content,e.tag_t_user],helptext:"Display select control with users.",helplink:"https://codex.wordpress.org/Function_Reference/wp_dropdown_users",extra_name:"wp_dropdown_users"},new PgComponentType("wp_list_authors","List authors"));return p.selector="[wp-list-authors]",p.code='<ul wp-list-authors wp-list-authors-exclude-admin="false" wp-list-authors-show-fullname="true" wp-list-authors-optioncount="true" wp-list-authors-set="content">    <li><a href="#" title="Posts by admin">Forrest Pine</a> (4)</li>    <li><a href="#" title="Posts by user 1">Tree Green</a> (3)</li>    <li><a href="#" title="Posts by user 2">Bush McEvergreen</a> (2)</li>    </ul>',p.attribute="wp-list-authors",p.sections={parameters:{name:"Parameters",fields:{wp_list_authors_orderby:{type:"select",name:"Order by",action:"element_attribute",attribute:"wp-list-authors-orderby",show_empty:!0,options:[{key:"name",name:"name"},{key:"email",name:"email"},{key:"url",name:"url"},{key:"registered",name:"registered"},{key:"id",name:"id"},{key:"user_login",name:"user_login"},{key:"post_count",name:"post_count"}],parameter_name:"orderby"},wp_list_authors_order:{type:"select",name:"Order",action:"element_attribute",attribute:"wp-list-authors-order",show_empty:!0,options:[{key:"ASC",name:"Ascending"},{key:"DESC",name:"Descending"}],parameter_name:"order"},wp_list_authors_number:{type:"text",name:"Max number",action:"element_attribute",attribute:"wp-list-authors-number",parameter_name:"number",placeholder:e.defaultValue("show all users"),translate:!0},wp_list_authors_optioncount:{type:"checkbox",name:"Display post count",action:"element_attribute",attribute:"wp-list-authors-optioncount",value:"true",parameter_name:"optioncount"},wp_list_authors_exclude_admin:{type:"checkbox",name:"Exclude admin",action:"element_attribute",attribute:"wp-list-authors-exclude-admin",value:"true",negvalue:"false",default_value:"true",parameter_name:"exclude_admin"},wp_list_authors_show_fullname:{type:"checkbox",name:"Show_fullname",action:"element_attribute",attribute:"wp-list-authors-show-fullname",value:"true",parameter_name:"show_fullname"},wp_list_authors_hide_empty:{type:"checkbox",name:"Hide empty",action:"element_attribute",attribute:"wp-list-authors-hide-empty",value:"true",negvalue:"false",default_value:"true",parameter_name:"hide_empty"},wp_list_authors_feed:{type:"text",name:"Feed",action:"element_attribute",attribute:"wp-list-authors-feed",parameter_name:"feed",placeholder:e.defaultValue("no feed"),translate:!0},wp_list_authors_feed_image:{type:"text",name:"Feed image",action:"element_attribute",attribute:"wp-list-authors-feed-image",parameter_name:"feed_image"},wp_list_authors_feed_type:{type:"select",name:"Feed type",action:"element_attribute",attribute:"wp-list-authors-feed-type",show_empty:!0,options:[{key:"rss2",name:"rss2"},{key:"atom",name:"atom"},{key:"rss",name:"rss"},{key:"rdf",name:"rdf"}],parameter_name:"feed_type"},wp_list_authors_style:{type:"select",name:"Style",action:"element_attribute",attribute:"wp-list-authors-style",show_empty:!0,options:[{key:"list",name:"list"},{key:"none",name:"none"}],parameter_name:"style"},wp_list_authors_html:{type:"checkbox",name:"HTML",action:"element_attribute",attribute:"wp-list-authors-html",value:"true",negvalue:"false",default_value:"true",parameter_name:"html"},wp_list_authors_exclude:{type:"text",name:"Exclude",action:"element_attribute",attribute:"wp-list-authors-exclude",parameter_name:"exclude"},wp_list_authors_include:{type:"text",name:"Include",action:"element_attribute",attribute:"wp-list-authors-include",parameter_name:"include"}}}},e.addComponentType(p),a.push(p),e.addHtmlOrNodeField(p),t.list.push(function(e){if(e.hasAttr(p.attribute))return t.toPhpHtmlOrNode(e,"wp_list_authors("+t.getNamedParams(p,e,function(e,t,a){return a||("id"==t?a=e.getAttr("id"):"class"==t&&(a=e.getAttr("class"))),a})+");",p)}),p.meta={tags:[e.tag_ret_html,e.tag_set_element,e.tag_set_content,e.tag_t_user],helptext:"Display the list of authors.",helplink:"https://codex.wordpress.org/Function_Reference/wp_list_authors",extra_name:"wp_list_authors"},a.push(e.addTag("wp-get-avatar","Get avatar",{type:"text",name:"Id or email",action:"element_attribute",attribute:"wp-get-avatar",attribute_keep_if_empty:!0,placeholder:e.defaultValue("get_the_author_meta( 'ID' )"),getAttrValue:function(e,t,a){return e=e||"get_the_author_meta( 'ID' )"}},"echo get_avatar",{"wp-get-avatar-size":{type:"text",name:"Size",action:"element_attribute",attribute:"wp-get-avatar-size",placeholder:e.defaultValue("96"),on_changed:function(e,t,a,o,r,n,i,s){e.is("img")&&(e.attr("width",a),e.attr("height",a))}},"wp-get-avatar-default":{type:"text",name:"Default",action:"element_attribute",attribute:"wp-get-avatar-default",placeholder:e.defaultValue("Mystery Man")},"wp-get-avatar-alt":{type:"text",name:"Alt",action:"element_attribute",attribute:"wp-get-avatar-alt",translate:!0}}).addMeta({tags:[e.tag_ret_image,e.tag_t_comment],helptext:"Display user's avatar.",helplink:"https://codex.wordpress.org/Function_Reference/get_avatar",extra_name:"get_avatar"}).addCode('<img alt="" src="http://0.gravatar.com/avatar/2c5ed187aeaf9af473a1a24a82a99eb2?s=96&amp;d=identicon&amp;r=G" class="avatar avatar-96 photo" height="96" width="96" wp-get-avatar/>')),a},pgWordpressLoop=function(G,R){function e(s,e,t,a,o){o=o||s;for(var n=H.sections.parameters.fields,r=(n["wp-loop-"+s]={type:"text",name:e,action:"custom",attribute:"wp-loop-"+s,class:"wp-loop-wp-query",get_value:function(e,t,a){var o=e.attr("wp-loop-"+s)||"";return p(o)},set_value:function(e,t,a,o,r){var n="wp-loop-"+s,i=l(e.attr(n)),i=(i?i+":":"")+(t||"");return i.length?e.attr(n,i):e.removeAttr(n),t},placeholder:a},[{key:"and",name:"and"},{key:"in",name:"in"},{key:"not_in",name:"not in"},{key:"not",name:"not"}]),l=function(e){if(e)for(var t=0;t<r.length;t++)if(0===e.indexOf(r[t].key+":"))return r[t].key;return null},p=function(e){var t=l(e);return e=e&&e.replace(t+":","")},i=[],c=0;c<r.length;c++)0<=t.indexOf(r[c].key)&&i.push(r[c]);for(i.length&&(n["wp-loop-"+s+"-opt"]={type:"select",name:e+" opts",action:"custom",show_empty:!0,class:"wp-loop-wp-query",options:i,get_value:function(e,t,a){var o=e.attr("wp-loop-"+s)||"";return l(o)},set_value:function(e,t,a,o,r){var n="wp-loop-"+s,i=(t?t+":":"")+p(e.attr(n)||"");return i.length?e.attr(n,i):e.removeAttr(n),t}}),n["wp-loop-param-"+s]={type:"hidden",name:e,action:"element_attribute",class:"wp-loop-wp-query",attribute:"wp-loop-param"+s,string_or_array:!0,parameter_name:o,getAttrValue:function(e,t,a){var o=t.getAttr("wp-loop-"+s)||"";return!l(o)&&o.length?o:null}},c=0;c<i.length;c++)!function(r){n["wp-loop-param-"+s+"-"+r.key]={type:"hidden",name:e,action:"element_attribute",class:"wp-loop-wp-query",string_or_array:!0,attribute:"wp-loop-param"+s+"-"+r.key,parameter_name:s+"__"+r.key,getAttrValue:function(e,t,a){var o=t.getAttr("wp-loop-"+s)||"";return l(o)==r.key?p(o):null}}}(i[c])}function t(e){o++,H.sections.parameters.fields["wp-loop-label-"+o]={type:"label",name:e,action:"element_attribute",attribute:"wp-loop-label-"+o,class:"pg-action-info-label"}}for(var a=[],M="Sorry, no posts matched your criteria.",H=G.addTag("wp-loop","The loop",null,function(t){if(t.hasAttr("wp-loop")){for(var e=t.getAttr("wp-loop-empty-text")||M,a="false"!==t.getAttr("wp-loop-show-empty-text"),o="true"===t.getAttr("wp-loop-continue"),r=t.getAttr("wp-loop-show-items")||0,n=0<r,i=t.getDataUncloned("loopOptions")||{},s=t.hasAttr("wp-loop-clear-columns"),l=t.getAttr("wp-loop"),p=l?"$"+l+"->":"",c=l?l+"_":"",u="true"==t.getAttr("wp-loop-separate-args"),m=[],d=[],h=[],g=[],_=[],f="",w=(t.walk(function(e){return e.isElement&&(e.hasAttribute("wp-loop")||e.hasAttribute("cms-post"))&&(!(e.getAttribute("wp-loop")||e.getAttribute("cms-post"))==!l||!l&&"loop"===e.getAttribute("cms-post"))&&(G.addExportError(e,"Warning - Nested main loop",`A main WordPress loop is nested inside another main loop on element ${t.getName()}. This can lead to endless loops and broken sites.`),0),!0}),t.findOne("[wp-loop-item]")),b=t.findOne("[wp-loop-items-container]"),y=t.findOne("[wp-loop-empty]"),v=(y&&(T=y.closest("[wp-loop],[cms-post]"))&&T!=t&&(y=null),b=(b=b&&(T=b.closest("[wp-loop],[cms-post]"))&&T!=t?null:b)||t,w=(w=w&&(T=w.closest("[wp-loop],[cms-post]"))&&T!=t?null:w)||b,y&&y.parent!==b.parent&&(y=null),w.setData("wp-repeated-item",!0),y&&(a=!0),w),k=b,N=w==t,x=v.next();x&&x.hasAttr("wp-loop-add");)N&&(k=x),x=(v=x).next();if(t.hasAttr("wp-loop-first-classes"))if((W=t.getAttr("wp-loop-first-classes").replace(/,/g," ").split(" ")).length){for(var A=w.getClasses(),P=[],S=0;S<A.length;S++)W.indexOf(A[S])<0&&P.push(A[S]);w.setAttr("class",P.join(" ")+"<?php if( $"+c+"item_number == 0) echo '"+(P.length?" ":"")+W.join(" ")+"'; ?>"),n=!0}var T=t.getAttribute("wp-loop-range"),T=G.parseRangeValue(T,`$${c}item_number`),C=(T&&(n=!0,l&&!o||(m.push(`<?php ${p}rewind_posts(); ?>`),0)),[]);if(s){for(var $,E={},I=["xs","sm","md","lg"],W=w.getClasses(),S=0;S<W.length;S++){var F=W[S].match(/col\-(xs|sm|md|lg)-([0-9]+)/);F&&(E[F[1]]=parseInt(F[2]))}for($ in E){var D=parseInt(12/E[$]),O=[],q=I.indexOf($);if(0<=q)for(S=q;S<I.length;S++)if($!=I[S]&&I[S]in E){if(I[S]in E)break}else O.push("visible-"+I[S]+"-block");C.push("<?php if( $"+c+"item_number % "+D+" == 0 ) echo '<div class=\"clearfix "+O.join(" ")+"\"></div>'; ?>")}}C.length&&(n=!0),l&&!o&&(u||m.push("<?php\n"+H.getWpQueryArgs(l,t,i.extra_query_params||{})+"\n?>"),i.after_args_code&&m.push(i.after_args_code),m.push(`<?php $${l} = ${1?"new WP_Query":G.wpGetClass("PG_Blocks")+`::getWPQuery`}( $${l}_args ); ?>`)),l||o||m.push(`<?php rewind_posts(); ?>`),T&&_.push("<?php endif; ?>"),n&&(g.push("<?php $"+c+"item_number = 0; ?>"),r?f=" && $"+c+"item_number++ < "+r:_.push("<?php $"+c+"item_number++; ?>"));s=i.have_posts_condition||p+"have_posts()";if(a){d.push(`<?php if ( ${s} ) : ?>`),g.push("<?php while ( "+p+"have_posts()"+f+" ) : "+p+"the_post(); ?>"),T&&g.push(T),i.inner_code_before&&g.push(i.inner_code_before),g.push(`<?php ${G.wpGetClass("PG_Helper")}::rememberShownPost(); ?>`);for(S=0;S<C.length;S++)_.push(C[S]);_.push("<?php endwhile; ?>"),l&&_.push("<?php wp_reset_postdata(); ?>"),h.push("<?php else : ?>");e=G.quoteParam(e),u=(t.getAttr("wp-loop-empty-text-wrapper")||"<p>$1</p>").replace("$1","<?php _e( "+e+", '"+G.current_theme_info.slug+"' ); ?>");y&&((o=y.clone(!0)).removeAttr("wp-loop-empty"),G.hasWPActions(o)&&G.addExportError(y,"<b>Warning:</b> WordPress actions on empty loop elements are ignored.",`Actions on <b>${y.getName()} element</b> are ignored. Use <code>&lt;?php ...code... ?&gt;</code> blocks directly on the empty element.`),G.wpRemoveWPAttributes(o,!0),G.wpTranslateText(o),u=o.toStringOriginal()),h.push(u)}else{d.push(`<?php if ( ${s} ) : ?>`),g.push("<?php while ( "+p+"have_posts()"+f+" ) : "+p+"the_post(); ?>"),i.inner_code_before&&g.push(i.inner_code_before),g.push(`<?php ${G.wpGetClass("PG_Helper")}::rememberShownPost(); ?>`),T&&g.push(T);for(S=0;S<C.length;S++)_.push(C[S]);_.push("<?php endwhile; ?>"),l&&_.push("<?php wp_reset_postdata(); ?>")}h.push("<?php endif; ?>");for(S=0;S<m.length;S++)m[S]=pgCreateNodeFromHtml(m[S]);for(S=0;S<d.length;S++)d[S]=pgCreateNodeFromHtml(d[S]);for(S=0;S<h.length;S++)h[S]=pgCreateNodeFromHtml(h[S]);for(S=0;S<g.length;S++)g[S]=pgCreateNodeFromHtml(g[S]);for(S=0;S<_.length;S++)_[S]=pgCreateNodeFromHtml(_[S]);return R.addToChanges(function(e,t,a,o,r,n,i,s){if(e.parent){for(var l=0;l<m.length;l++)m[l].insertBefore(e),m[l].indent_text=!0;for(l=0;l<t.length;l++)t[l].insertBefore(b),t[l].indent_text=!0;for(l=0;l<o.length;l++)o[l].insertBefore(n),o[l].indent_text=!0;for(l=a.length-1;0<=l;l--)a[l].insertAfter(s),a[l].indent_text=!0;for(l=r.length-1;0<=l;l--)r[l].insertAfter(i),r[l].indent_text=!0;y&&y.remove()}},this,[t,d,h,g,_,w,v,k]),!1}},{"wp-loop-show-empty-text":{type:"checkbox",name:"Show &quot;No posts&quot; text",action:"element_attribute",attribute:"wp-loop-show-empty-text",value:"true",negvalue:"false",default_value:"true"},"wp-loop-empty-text":{type:"text",name:"&quot;No posts&quot; text",action:"element_attribute",attribute:"wp-loop-empty-text",placeholder:G.defaultValue(M),show_if:"!wp-loop-show-empty-text==false"},"wp-loop-empty-text-wrapper":{type:"text",name:"&quot;No posts&quot; text wrapper",action:"element_attribute",attribute:"wp-loop-empty-text-wrapper",placeholder:G.defaultValue("<p>$1</p>"),show_if:"!wp-loop-show-empty-text==false"},"wp-loop-clear-columns":{type:"checkbox",name:"Clear Bootstrap 3 columns",action:"element_attribute",attribute:"wp-loop-clear-columns",empty_attribute:!0,value:"true",on_changed:function(e,t,a,o,r,n,i,s){"true"==a&&pinegrow.showNotice("<p>When this option is selected Pinegrow will take care of clearing Bootstrap columns, so that different heights of columns don't mess up the grid (that's a common Bootstrap problem).</p><p>This is accomplished by inserting <code>&lt;div class=\"clearfix visible-md-block visible-lg-block\"&gt;&lt;/div&gt;</code> and similar statements at appropriate places during the loop output. Check the PHP Preview to see this in action while playing with different column span settings.</p><p>Obviously, this only works if the repeated element is a Bootstrap column.</p><p>Calculating these breaks by hand is really boring and error-prone. Hopefully this feature will save you from that. Enjoy :)</p>","About clearing columns","wp-loop-clear-columns")},show_if:function(e,t){if("true"===e["wp-loop-clear-columns"])return!0;var a=t.getPage();if(a){a=a.findFrameworkOfType("bootstrap");if(a&&a.key.startsWith("bs3"))return!0}return!1}},"wp-loop-first-classes":{type:"text",name:"Classes for the first item",action:"element_attribute",attribute:"wp-loop-first-classes",placeholder:G.forExample("active")},"wp-loop-range":{type:"text",name:"Range of items to show",action:"element_attribute",attribute:"wp-loop-range",placeholder:G.forExample("2 or 0-5 (0 is first)"),validate:G.validateRangeValue},"wp-loop":{type:"text",name:"Custom WP Query name",action:"element_attribute",attribute:"wp-loop",placeholder:G.forExample("myquery"),attribute_keep_if_empty:!0,on_changed:function(e,t,a,o,r,n,i,s){var l;H.hideShowWpQuery(a,n,e,s),o&&a&&(l=e.closest("body"))&&(l=l.findOne('[wp-loop-args="'+o+'"]'))&&l.attr("wp-loop-args",a),H.updateWpQueryArgsPHPBlock(e)},on_fields_created:function(e,t,a,o,r,n){H.hideShowWpQuery(a,r,e,n)}},"wp-loop-separate-args":{type:"checkbox",name:"Args in own PHP block",action:"element_attribute",attribute:"wp-loop-separate-args",class:"wp-loop-wp-query",value:"true",negvalue:"false",default_value:"false",on_changed:function(e,t,a,o,r,n,i,s){H.updateWpQueryArgsPHPBlock(e,a)}}}).addMeta({tags:[G.tag_use_loop],helptext:"Display default or custom WP_Query loop.",helplink:"http://codex.wordpress.org/The_Loop",extra_name:"default loop, WP_Query..."}),o=(H.getWpQueryArgs=function(e,t,a){return"$"+e+"_args = "+R.getNamedParams(H,t,null,null,null,a)},H.on_can_add_action=function(e,t,a){return!(0<=["html","body","head","script"].indexOf(e.tagName)&&(pinegrow.showQuickError(`Show Posts can't be added to ${e.tagName} element.`),1))},H.updateWpQueryArgsPHPBlock=function(e,t){try{void 0===t&&(t=e.attr("wp-loop-separate-args"));var a,o,r,n,i=e.attr("wp-loop");i&&(a=e.getDataUncloned("loopOptions")||{},o="\n"+H.getWpQueryArgs(i,e,a.extra_query_params||{})+"\n",r=e.closest("body"))&&(n=r.findOneWithAttrValue("wp-loop-args",i),"true"==t?n?n.html(o):((n=pgCreate("<php>"+o+"</php>")).insertBefore(e),n.attr("wp-loop-args",i),0):n&&(n.remove(),0))}catch(e){}},0),r=(t("Author Parameters"),e("author","Author",["and","in","not_in"],"author id or list of ids"),H.sections.parameters.fields["wp-loop-author-name"]={type:"text",name:"Author name",action:"element_attribute",attribute:"wp-loop-author-name",string_or_array:!0,parameter_name:"author_name",class:"wp-loop-wp-query",placeholder:G.use("user_nicename, not name")},t("Category Parameters"),e("category","Category",["and","in","not_in"],"category id or list of ids","cat"),H.sections.parameters.fields["wp-loop-category-name"]={type:"text",name:"Category name",action:"element_attribute",attribute:"wp-loop-category-name",string_or_array:!1,parameter_name:"category_name",class:"wp-loop-wp-query",placeholder:G.use("slug or slug1,slug2 or slug1+slug2")},t("Tag Parameters"),e("tag","Tag",["and","in","not_in"],"tag id or list of ids","tag_id"),e("tag_slug","Tag slug",["and","in"],"tag slug or list of slugs","tag"),t("Taxonomy Parameters"),H.sections.parameters.fields["wp-loop-tax"]={type:"text",name:"Taxonomy",action:"element_attribute",attribute:"wp-loop-tax",class:"wp-loop-wp-query",tax_parameter_name:"taxonomy"},H.sections.parameters.fields["wp-loop-tax-field"]={type:"select",name:"Taxonomy field",action:"element_attribute",attribute:"wp-loop-tax-field",class:"wp-loop-wp-query",show_empty:!0,options:[{key:"term_id",name:"term_id"},{key:"name",name:"name"},{key:"slug",name:"slug"}],tax_parameter_name:"field"},H.sections.parameters.fields["wp-loop-tax-terms"]={type:"text",name:"Taxonomy terms",action:"element_attribute",attribute:"wp-loop-tax-terms",string_or_array:!0,class:"wp-loop-wp-query",tax_parameter_name:"terms"},H.sections.parameters.fields["wp-loop-tax-children"]={type:"checkbox",name:"Taxonomy include children",action:"element_attribute",attribute:"wp-loop-tax-children",value:"true",negvalue:"false",default_value:"true",class:"wp-loop-wp-query",tax_parameter_name:"include_children"},H.sections.parameters.fields["wp-loop-tax-operator"]={type:"select",name:"Taxonomy operator",action:"element_attribute",attribute:"wp-loop-tax-operator",show_empty:!0,options:[{key:"IN",name:"in"},{key:"NOT IN",name:"not in"},{key:"AND",name:"and"}],class:"wp-loop-wp-query",tax_parameter_name:"operator"},H.sections.parameters.fields["wp-loop-tax-param"]={type:"hidden",name:"Tax query",action:"element_attribute",attribute:"wp-loop-param-dummy",class:"wp-loop-wp-query",parameter_name:"tax_query",getAttrValue:function(e,t,a){if((n=R.getNamedParams(H,t,null,"tax_parameter_name",2)).length&&"array()"!=n)var o=pinegrow.getFormatHtmlOptions(),r=1,n="array( \n"+pinegrow.getHtmlIndentForLevel(r+1,o)+n+"\n"+pinegrow.getHtmlIndentForLevel(r,o)+")";else if("array()"==n)return null;return n}},t("Search Parameters"),H.sections.parameters.fields["wp-loop-search"]={type:"text",name:"Search",action:"element_attribute",attribute:"wp-loop-search",class:"wp-loop-wp-query",parameter_name:"s"},t("Post &amp; Page Parameters"),e("post","Post",["in","not_in"],null,"p"),e("post_parent","Post parent",["in","not_in"]),e("page","Page",["in","not_in"],null,"page_id"),H.sections.parameters.fields["wp-loop-has-password"]={type:"select",name:"Has password",action:"element_attribute",attribute:"wp-loop-has-password",class:"wp-loop-wp-query",show_empty:!0,options:[{key:"true",name:"True"},{key:"false",name:"False"}],parameter_name:"has_password"},H.sections.parameters.fields["wp-loop-post-password"]={type:"text",name:"Post password",action:"element_attribute",attribute:"wp-loop-post-password",string_or_array:!0,class:"wp-loop-wp-query",parameter_name:"post_password"},H.sections.parameters.fields["wp-loop-post-type"]={type:"select",name:"Post type",action:"element_attribute",attribute:"wp-loop-post-type",class:"wp-loop-wp-query",show_empty:!1,string_or_array:!0,multiple:!0,options:[{key:"post",name:"post"},{key:"page",name:"page"},{key:"revision",name:"revision"},{key:"attachment",name:"attachment"},{key:"nav_menu_item",name:"nav_menu_item"},{key:"any",name:"any"}],parameter_name:"post_type"},H.sections.parameters.fields["wp-loop-post-type-custom"]={type:"text",name:"Custom post types",action:"element_attribute",attribute:"wp-loop-post-type-custom",string_or_array:!0,class:"wp-loop-wp-query",options:G.wpInsight.getPostTypes,open_list_on_focus:!0,parameter_name:"post_type"},H.sections.parameters.fields["wp-loop-post-status"]={type:"text",name:"Post status",action:"element_attribute",attribute:"wp-loop-post-status",string_or_array:!0,class:"wp-loop-wp-query",show_empty:!1,open_list_on_focus:!0,options:[{key:"publish",name:"publish"},{key:"pending",name:"pending"},{key:"draft",name:"draft"},{key:"auto-draft",name:"auto-draft"},{key:"future",name:"future"},{key:"private",name:"private"},{key:"inherit",name:"inherit"},{key:"trash",name:"trash"},{key:"any",name:"any"}],parameter_name:"post_status",helptext:`<p>One or more values, separated by commas.</p>`},H.sections.parameters.fields["wp-loop-post-mime-type"]={type:"text",name:"Post mime type",action:"element_attribute",attribute:"wp-loop-post-mime-type",string_or_array:!0,class:"wp-loop-wp-query",show_empty:!1,open_list_on_focus:!0,multiple:!0,options:[{key:"image",name:"image"},{key:"audio",name:"audio"},{key:"video",name:"video"}],parameter_name:"post_mime_type",helptext:`<p>One or more values, separated by commas.</p>`},t("Pagination Parameters"),H.sections.parameters.fields["wp-loop-nopaging"]={type:"checkbox",name:"No pagination (show all)",action:"element_attribute",attribute:"wp-loop-nopaging",class:"wp-loop-wp-query",value:"true",negvalue:"false",default_value:"false",parameter_name:"nopaging"},H.sections.parameters.fields["wp-loop-posts-per-page"]={type:"text",name:"Posts per page",action:"element_attribute",attribute:"wp-loop-posts-per-page",class:"wp-loop-wp-query",numeric:!0,parameter_name:"posts_per_page"},H.sections.parameters.fields["wp-loop-posts-per-archive-page"]={type:"text",name:"Posts per archive page",action:"element_attribute",attribute:"wp-loop-posts-per-archive-page",class:"wp-loop-wp-query",parameter_name:"posts_per_archive_page"},H.sections.parameters.fields["wp-loop-offset"]={type:"text",name:"Pagination offset",action:"element_attribute",attribute:"wp-loop-offset",class:"wp-loop-wp-query",parameter_name:"offset"},H.sections.parameters.fields["wp-loop-paged"]={type:"text",name:"Index of current page",action:"element_attribute",attribute:"wp-loop-paged",class:"wp-loop-wp-query",parameter_name:"paged",placeholder:G.defaultValue("automatic")},H.sections.parameters.fields["wp-loop-paging-page"]={type:"text",name:"Current page for static page",action:"element_attribute",attribute:"wp-loop-paging-page",class:"wp-loop-wp-query",parameter_name:"page",placeholder:G.defaultValue("automatic")},H.sections.parameters.fields["wp-loop-ignore-sticky"]={type:"checkbox",name:"Ignore sticky",action:"element_attribute",attribute:"wp-loop-ignore-sticky",value:"true",negvalue:"false",default_value:"false",class:"wp-loop-wp-query",parameter_name:"ignore_sticky_posts"},H.sections.parameters.fields["wp-loop-only-preview"]={type:"checkbox",name:"Ignore sticky",action:"element_attribute",attribute:"wp-loop-only-preview",value:"true",class:"wp-loop-wp-query",parameter_name:"pg_only_during_editing",show_if:function(){return!1}},t("Order Parameters"),H.sections.parameters.fields["wp-loop-order"]={type:"select",name:"Order",action:"element_attribute",attribute:"wp-loop-order",class:"wp-loop-wp-query",show_empty:!0,options:[{key:"ASC",name:"Ascending"},{key:"DESC",name:"Descending"}],parameter_name:"order"},H.sections.parameters.fields["wp-loop-orderby"]={type:"select",name:"Order by",action:"element_attribute",attribute:"wp-loop-orderby",class:"wp-loop-wp-query",show_empty:!0,options:[{key:"none",name:"none"},{key:"ID",name:"ID"},{key:"author",name:"author"},{key:"title",name:"title"},{key:"name",name:"name"},{key:"type",name:"type"},{key:"date",name:"date"},{key:"modified",name:"modified"},{key:"parent",name:"parent"},{key:"rand",name:"rand"},{key:"comment_count",name:"comment_count"},{key:"menu_order",name:"menu_order"},{key:"meta_value",name:"meta_value"},{key:"meta_value_num",name:"meta_value_num"},{key:"post__in",name:"post__in"}],parameter_name:"orderby"},t("Date &amp; Time Parameters"),["Year","Month","Week","Day","Hour","Minute","Second"]),n=0;n<r.length;n++){var i="wp-loop-date-"+r[n].toLowerCase();H.sections.parameters.fields[i]={type:"text",name:r[n],action:"element_attribute",class:"wp-loop-wp-query",attribute:i,date_parameter_name:r[n].toLowerCase()}}var i="wp-loop-date-after",s=(H.sections.parameters.fields[i]={type:"text",name:"Date after",action:"element_attribute",class:"wp-loop-wp-query",attribute:i,date_parameter_name:"after",placeholder:G.forExample("January 1st, 2013")},H.sections.parameters.fields[i="wp-loop-date-before"]={type:"text",name:"Date before",action:"element_attribute",class:"wp-loop-wp-query",attribute:i,date_parameter_name:"before",placeholder:G.forExample("January 1st, 2013")},H.sections.parameters.fields["wp-loop-date-inclusive"]={type:"checkbox",name:"Inclusive after and before",action:"element_attribute",attribute:"wp-loop-date-inclusive",class:"wp-loop-wp-query",value:"true",negvalue:"false",default_value:"false",date_parameter_name:"inclusive"},H.sections.parameters.fields[i="wp-loop-date-compare"]={type:"text",name:"Date compare",action:"element_attribute",class:"wp-loop-wp-query",attribute:i,date_parameter_name:"compare",placeholder:G.forExample(">=")},H.sections.parameters.fields[i="wp-loop-date-column"]={type:"text",name:"Date column",action:"element_attribute",attribute:i,date_parameter_name:"column",class:"wp-loop-wp-query",placeholder:G.defaultValue("post_date")},H.sections.parameters.fields[i="wp-loop-date-relation"]={type:"select",name:"Date relation",action:"element_attribute",attribute:i,date_parameter_name:"relation",class:"wp-loop-wp-query",show_empty:!0,options:[{key:"AND",name:"AND"},{key:"OR",name:"OR"}],placeholder:G.defaultValue("post_date")},H.sections.parameters.fields["wp-loop-date-param-dummy"]={type:"hidden",name:"Date query",action:"element_attribute",attribute:"wp-loop-date-param-dummy",class:"wp-loop-wp-query",parameter_name:"date_query",getAttrValue:function(e,t,a){if((n=R.getNamedParams(H,t,null,"date_parameter_name",2)).length&&"array()"!=n)var o=pinegrow.getFormatHtmlOptions(),r=1,n="array( \n"+pinegrow.getHtmlIndentForLevel(r+1,o)+n+"\n"+pinegrow.getHtmlIndentForLevel(r,o)+")";else if("array()"==n)return null;return n}},t("Meta fields Parameters"),H.sections.parameters.fields[i="wp-loop-meta-key"]={type:"text",name:"Meta key",action:"element_attribute",class:"wp-loop-wp-query",attribute:i,parameter_name:"meta_key"},H.sections.parameters.fields[i="wp-loop-meta-value"]={type:"text",name:"Meta value",action:"element_attribute",class:"wp-loop-wp-query",string_or_array:!0,attribute:i,parameter_name:"meta_value"},H.sections.parameters.fields[i="wp-loop-meta-value-num"]={type:"text",name:"Meta value numeric",action:"element_attribute",class:"wp-loop-wp-query",string_or_array:!0,attribute:i,parameter_name:"meta_value_num"},H.sections.parameters.fields[i="wp-loop-meta-compare"]={type:"select",name:"Meta compare",action:"element_attribute",class:"wp-loop-wp-query",attribute:i,parameter_name:"meta_compare",show_empty:!0,options:[{key:"=",name:"="},{key:"!=",name:"!="},{key:">",name:">"},{key:">=",name:">="},{key:"<",name:"<"},{key:"<=",name:"<="},{key:"LIKE",name:"LIKE"},{key:"NOT LIKE",name:"NOT LIKE"},{key:"IN",name:"IN"},{key:"NOT IN",name:"NOT IN"},{key:"BETWEEN",name:"BETWEEN"},{key:"NOT BETWEEN",name:"NOT BETWEEN"},{key:"NOT EXISTS",name:"NOT EXISTS"},{key:"REGEXP",name:"REGEXP"},{key:"NOT REGEXP",name:"NOT REGEXP"},{key:"RLIKE",name:"RLIKE"}]},t("Misc. Parameters"),H.sections.parameters.fields[i="wp-loop-permission"]={type:"text",name:"Permission",action:"element_attribute",class:"wp-loop-wp-query",string_or_array:!0,attribute:i,parameter_name:"perm"},H.sections.parameters.fields["wp-loop-cache-results"]={type:"checkbox",name:"Cache results",action:"element_attribute",attribute:"wp-loop-cache-results",class:"wp-loop-wp-query",value:"true",negvalue:"false",default_value:"true",parameter_name:"cache_results"},H.sections.parameters.fields["wp-loop-show-items"]={type:"text",name:"Number of items to show",action:"element_attribute",attribute:"wp-loop-show-items",class:"wp-loop-wp-query",placeholder:G.forExample("2 - only show first 2 items")},H.sections.parameters.fields["wp-loop-continue"]={type:"checkbox",name:"Continue previous loop",action:"element_attribute",attribute:"wp-loop-continue",value:"true",negvalue:"false",default_value:"false",class:"wp-loop-wp-query"},H.hideShowPrevValue="none",H.hideShowWpQuery=function(e,t,a,o){e==H.hideShowPrevValue&&!1||(e?t.parent().find(".wp-loop-wp-query,.pg-action-info-label").each(function(e,t){pgShow(t,"flex")}):t.parent().find(".wp-loop-wp-query,.pg-action-info-label").hide()),H.hideShowPrevValue=e},$.each(H.sections.parameters.fields,function(e,t){t.on_changed||(t.on_changed=function(e,t,a,o,r,n,i,s){H.updateWpQueryArgsPHPBlock(e)})}),H.addCode('<article wp-the-id wp-loop wp-post-class>    <header class="entry-header">    <h2 class="entry-title"><a wp-the-title wp-the-title-set="content" wp-href="post_permalink">A post title</a></h2>    </header>    <div class="entry-content" wp-the-content="sprintf( __( \'Continue reading %s\' ), the_title( \'<span class=&quot screen-reader-text&quot;>\', \'</span>\', false ) )" wp-the-content-set="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus pulvinar faucibus neque, nec rhoncus nunc ultrices sit amet. Curabitur ac sagittis neque, vel egestas est. Aenean elementum, erat at aliquet hendrerit, elit nisl posuere tortor, id suscipit diam dui sed nisi. Morbi sollicitudin massa vel tortor consequat, eget semper nisl fringilla. Maecenas at hendrerit odio. Sed in mi eu quam suscipit bibendum quis at orci. Pellentesque fermentum nisl purus, et iaculis lectus pharetra sit amet.</div>    <p><a href="#" wp-edit-post-link>Edit post</a></p>    </article>'),a.push(H),a.push(G.addTag("wp-loop-items-container","The loop items container",null,null).addMeta({tags:[G.tag_use_loop],helptext:"Set the element that will be the container for repeated loop items.",helplink:null,extra_name:null})),a.push(G.addTag("wp-loop-item","The loop item",null,null).addMeta({tags:[G.tag_use_loop],helptext:"Set the element that will be repeated within the loop. If not set, the element with The loop will be repeated.",helplink:null,extra_name:null}).addNotPlaceable("Add this action to an existing element to set which part of the loop should be repeated.")),a.push(G.addTag("wp-loop-empty","The loop is empty",null,null).addMeta({tags:[G.tag_use_loop],helptext:"Set the element that will be show if the loop is empty.",helplink:null,extra_name:null})),G.wpFindItemForLoopItemPlaceholder=function(e){var t=e.prevWithSelector("[wp-loop],[cms-post]")||e.closest("[wp-loop],[cms-post]");if(t){if(!t.hasAttribute("wp-loop"))return G.wpGetLoopStructure(t).rep;t=e.parent.findOne("> [wp-loop-item]")||e.parent.first();if(t!==e)return t}return null},a.push(G.addTag("wp-loop-skip","Item placeholder",null,null).addMeta({tags:[],helptext:"Don't export this element. It is just a placeholder used at design-time. Useful for showing multiple posts in the loop at design time. All posts except the first one should have Item placeholder action.",helplink:null,extra_name:"do not export"}).addNotPlaceable("Add this action to an existing element to tell Pinegrow that the element is just a design-time placeholder that should not be exported to the theme.")),G.addTag("wp-loop-add","Add to the loop",null,null).addMeta({tags:[],helptext:"Add this element to the loop. The previous element must have The Loop, The Loop item or Add to The Loop action.",helplink:null}).addNotPlaceable("Add this action to an existing element to tell Pinegrow to include this element in the loop. The previous element must be The Loop or the Loop item."));return s.on_action_added=function(e){var t=e.prev();t&&(t.hasAttr("cms-post")||t.hasAttr("wp-loop")||!t.hasAttr("wp-loop-item")||!t.hasAttr("wp-loop-add"))||pinegrow.showAlert("<p>Previous element must have <b>The Loop</b>, <b>The Loop Item</b> or <b>Add to The Loop</b> action. Then, this element will also be repeated in the loop.</p>","This will not work")},a.push(s),a},pgWordpressBookmarks=function(e,t){var a=[],o=new PgComponentType("wp_list_bookmarks","List bookmarks");return o.selector="[wp-list-bookmarks]",o.code='<li class="linkcat" wp-list-bookmarks>    <h2>Bookmarks</h2>    <ul class="xoxo blogroll">    <li>    <a href="http://pinegrow.com" title="The first link description.">The First Link</a>    </li>    <li>    <a href="http://pinegrow.com" title="The second link description.">The Second Link</a>    </li>    </ul>    </li>',o.attribute="wp-list-bookmarks",o.sections={parameters:{name:"Parameters",fields:{wp_list_bookmarks_categorize:{type:"checkbox",name:"Categorize",action:"element_attribute",attribute:"wp-list-bookmarks-categorize",value:"true",negvalue:"false",default_value:"true",parameter_name:"categorize"},wp_list_bookmarks_category:{type:"text",name:"Category",action:"element_attribute",attribute:"wp-list-bookmarks-category",parameter_name:"category"},wp_list_bookmarks_exclude_category:{type:"text",name:"Exclude category",action:"element_attribute",attribute:"wp-list-bookmarks-exclude-category",parameter_name:"exclude_category"},wp_list_bookmarks_category_name:{type:"text",name:"Category name",action:"element_attribute",attribute:"wp-list-bookmarks-category-name",parameter_name:"category_name"},wp_list_bookmarks_category_before:{type:"text",name:"Category before",action:"element_attribute",attribute:"wp-list-bookmarks-category-before",parameter_name:"category_before",placeholder:e.defaultValue('<li id="[category id]" class="linkcat">')},wp_list_bookmarks_category_after:{type:"text",name:"Category after",action:"element_attribute",attribute:"wp-list-bookmarks-category-after",parameter_name:"category_after",placeholder:e.defaultValue("</li>")},wp_list_bookmarks_class:{type:"text",name:"Class",action:"element_attribute",attribute:"wp-list-bookmarks-class",parameter_name:"class",placeholder:e.defaultValue("linkcat")},wp_list_bookmarks_category_orderby:{type:"select",name:"Category order by",action:"element_attribute",attribute:"wp-list-bookmarks-category-orderby",show_empty:!0,options:[{key:"name",name:"name"},{key:"id",name:"id"},{key:"slug",name:"slug"},{key:"count",name:"count"},{key:"term_group",name:"term_group"}],parameter_name:"category_orderby"},wp_list_bookmarks_category_order:{type:"select",name:"Category order",action:"element_attribute",attribute:"wp-list-bookmarks-category-order",show_empty:!0,options:[{key:"ASC",name:"Ascending"},{key:"DESC",name:"Descending"}],parameter_name:"category_order"},wp_list_bookmarks_title_li:{type:"text",name:"Title li",action:"element_attribute",attribute:"wp-list-bookmarks-title-li",parameter_name:"title_li",placeholder:e.defaultValue("Bookmarks"),translate:!0},wp_list_bookmarks_title_before:{type:"text",name:"Title before",action:"element_attribute",attribute:"wp-list-bookmarks-title-before",parameter_name:"title_before",placeholder:e.defaultValue("<h2>")},wp_list_bookmarks_title_after:{type:"text",name:"Title after",action:"element_attribute",attribute:"wp-list-bookmarks-title-after",parameter_name:"title_after",placeholder:e.defaultValue("</h2>")},wp_list_bookmarks_show_private:{type:"checkbox",name:"Show private",action:"element_attribute",attribute:"wp-list-bookmarks-show-private",value:"true",parameter_name:"show_private"},wp_list_bookmarks_include:{type:"text",name:"Include",action:"element_attribute",attribute:"wp-list-bookmarks-include",parameter_name:"include"},wp_list_bookmarks_exclude:{type:"text",name:"Exclude",action:"element_attribute",attribute:"wp-list-bookmarks-exclude",parameter_name:"exclude"},wp_list_bookmarks_orderby:{type:"select",name:"Order by",action:"element_attribute",attribute:"wp-list-bookmarks-orderby",show_empty:!0,options:[{key:"id",name:"id"},{key:"link_id",name:"link_id"},{key:"url",name:"url"},{key:"name",name:"name"},{key:"target",name:"target"},{key:"description",name:"description"},{key:"owner",name:"owner"},{key:"rating",name:"rating"},{key:"updated",name:"updated"},{key:"rel",name:"rel"},{key:"notes",name:"notes"},{key:"rss",name:"rss"},{key:"length",name:"length"},{key:"rand",name:"rand"}],parameter_name:"orderby"},wp_list_bookmarks_order:{type:"select",name:"Order",action:"element_attribute",attribute:"wp-list-bookmarks-order",show_empty:!0,options:[{key:"ASC",name:"Ascending"},{key:"DESC",name:"Descending"}],parameter_name:"order"},wp_list_bookmarks_limit:{type:"text",name:"Limit",action:"element_attribute",attribute:"wp-list-bookmarks-limit",parameter_name:"limit"},wp_list_bookmarks_before:{type:"text",name:"Before",action:"element_attribute",attribute:"wp-list-bookmarks-before",parameter_name:"before",placeholder:e.defaultValue("<li>")},wp_list_bookmarks_after:{type:"text",name:"After",action:"element_attribute",attribute:"wp-list-bookmarks-after",parameter_name:"after",placeholder:e.defaultValue("</li>")},wp_list_bookmarks_link_before:{type:"text",name:"Link before",action:"element_attribute",attribute:"wp-list-bookmarks-link-before",parameter_name:"link_before"},wp_list_bookmarks_link_after:{type:"text",name:"Link after",action:"element_attribute",attribute:"wp-list-bookmarks-link-after",parameter_name:"link_after"},wp_list_bookmarks_between:{type:"text",name:"Between",action:"element_attribute",attribute:"wp-list-bookmarks-between",parameter_name:"between",placeholder:e.defaultValue("\\n")},wp_list_bookmarks_show_images:{type:"checkbox",name:"Show images",action:"element_attribute",attribute:"wp-list-bookmarks-show-images",value:"true",negvalue:"false",default_value:"true",parameter_name:"show_images"},wp_list_bookmarks_show_description:{type:"checkbox",name:"Show description",action:"element_attribute",attribute:"wp-list-bookmarks-show-description",value:"true",negvalue:"false",default_value:"false",parameter_name:"show_description"},wp_list_bookmarks_show_name:{type:"checkbox",name:"Show name",action:"element_attribute",attribute:"wp-list-bookmarks-show-name",value:"true",negvalue:"false",default_value:"false",parameter_name:"show_name"},wp_list_bookmarks_show_rating:{type:"checkbox",name:"Show rating",action:"element_attribute",attribute:"wp-list-bookmarks-show-rating",value:"true",negvalue:"false",default_value:"false",parameter_name:"show_rating"},wp_list_bookmarks_show_updated:{type:"checkbox",name:"Show updated",action:"element_attribute",attribute:"wp-list-bookmarks-show-updated",value:"true",negvalue:"false",default_value:"false",parameter_name:"show_updated"},wp_list_bookmarks_show_hide_invisible:{type:"checkbox",name:"Hide invisible",action:"element_attribute",attribute:"wp-list-bookmarks-hide-invisible",value:"true",negvalue:"false",default_value:"true",parameter_name:"hide_invisible"},wp_list_bookmarks_echo:{type:"checkbox",name:"Echo",action:"element_attribute",attribute:"wp-list-bookmarks-echo",value:"true",negvalue:"false",default_value:"true",parameter_name:"echo"}}}},e.addComponentType(o),a.push(o),e.addHtmlOrNodeField(o),t.list.push(function(e){if(e.hasAttr(o.attribute))return t.toPhpHtmlOrNode(e,"wp_list_bookmarks( "+t.getNamedParams(o,e,function(e,t,a){return a})+" );",o)}),o.meta={tags:[e.tag_ret_html,e.tag_t_comment],helptext:"Display bookmarks from Links panel.",helplink:"https://codex.wordpress.org/Function_Reference/wp_list_bookmarks",extra_name:"wp_list_bookmarks"},a},pgWordpressNavigation=function(d,h){function m(){d.requireResource("bootstrap/wp_bootstrap_navwalker.php","inc",null),d.includeInFunctions("bootstrap/wp_bootstrap_navwalker.php","inc",null,"wp_bootstrap_navwalker")}function g(){d.requireResource("bootstrap/wp_bootstrap4_navwalker.php","inc",null),d.includeInFunctions("bootstrap/wp_bootstrap4_navwalker.php","inc",null,"WP_Bootstrap4_Navwalker")}var e=[],_=(navMenuhideShowFields=function(e,t,a,o){var r=t.parent();"smart"==e?r.find(".crsa-field-wp_nav_menu_smart_current_class").show():r.find(".crsa-field-wp_nav_menu_smart_current_class").hide()},nav_menu_help_url="https://developer.wordpress.org/reference/functions/wp_nav_menu/",new PgComponentType("wp_nav_menu","Nav menu")),t=(_.selector="[wp-nav-menu]",_.code='<ul id="menu-main" class="menu" wp-nav-menu>    <li id="menu-item-10" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10">    <a href="http://wptest/sample-page/">Sample Page</a>    </li>    <li id="menu-item-11" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-11">    <a href="http://wordpress.org">WordPress</a>    </li>    <li id="menu-item-12" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12">    <a href="http://pinegrow.com">Pinegrow</a>    </li>    </ul>',_.attribute="wp-nav-menu",_.sections={parameters:{name:"Parameters",fields:{wp_nav_menu:{type:"text",name:"Menu",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu",attribute_keep_if_empty:!0,parameter_name:"menu",placeholder:"menu id, slug or name",options:d.wpInsight.getMenus,open_list_on_focus:!0},wp_nav_menu_type:{type:"select",name:"Menu type",action:"element_attribute",attribute:"wp-nav-menu-type",show_empty:!0,options:[{key:"bootstrap",name:"Bootstrap 3"},{key:"bootstrap4",name:"Bootstrap 4"},{key:"smart",name:"Smart (auto-detect layout and items wrap)"}],on_changed:function(e,t,a,o,r,n,i,s){navMenuhideShowFields(a,n,e,s);var l='<p><a href="'+nav_menu_help_url+'" class="external">Check out the documentation</a> about how to make navigation menus compatible with various frameworks and  layouts.</p>',p="<p>Use <b>WordPress -&gt; Export the theme</b> to add resources needed by "+a+" menus to your theme.</p>";"bootstrap"==a?(d.setRequireThemeExport("Bootstrap 3 menus"),pinegrow.showNotice(p+l,"Export the theme to enable Bootstrap 3 menus","wp-nav-menu-type")):"bootstrap4"==a?(d.setRequireThemeExport("Bootstrap 4 menus"),pinegrow.showNotice(p+l,"Export the theme to enable Bootstrap 4 menus","wp-nav-menu-type")):"smart"==a&&pinegrow.showNotice("<p>When using Smart menu, Pinegrow will detect the layout of the menu and use a special menu walker to output the WordPress menu with the same layout. Smart menus work with single level menus (without nested sub-menus). The first child element is taken as the template for all menu items. The menu item template must include a link element.</p>"+l+p,"About smart menus","wp-nav-menu-type-smart")},on_fields_created:function(e,t,a,o,r,n){navMenuhideShowFields(a,r,e,n)}},wp_nav_menu_class:{type:"text",name:"Menu class",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-class",parameter_name:"menu_class",placeholder:d.defaultValue("menu")},wp_nav_menu_id:{type:"text",name:"Menu id",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-id",parameter_name:"menu_id",placeholder:d.defaultValue("menu slug")},wp_nav_menu_container:{type:"text",name:"Container",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-container",parameter_pass_empty:!0,parameter_name:"container",placeholder:d.defaultValue("none")},wp_nav_menu_container_class:{type:"text",name:"Container class",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-container-class",parameter_name:"container_class",placeholder:d.defaultValue("menu-{menu slug}-container")},wp_nav_menu_container_id:{type:"text",name:"Container id",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-container-id",parameter_name:"container_id",placeholder:d.defaultValue("none")},wp_nav_menu_before:{type:"text",name:"Before",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-before",parameter_name:"before"},wp_nav_menu_after:{type:"text",name:"After",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-after",parameter_name:"after"},wp_nav_menu_link_before:{type:"text",name:"Link before",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-link-before",parameter_name:"link_before"},wp_nav_menu_link_after:{type:"text",name:"Link after",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-link-after",parameter_name:"link_after"},wp_nav_menu_depth:{type:"text",name:"Depth",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-depth",parameter_name:"depth",placeholder:d.defaultValue("0")},wp_nav_menu_theme_location:{type:"text",name:"Theme location",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-theme-location",parameter_name:"theme_location",placeholder:d.forExample("primary")},wp_nav_menu_items_wrap:{type:"text",name:"Items wrap",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-items-wrap",parameter_name:"items_wrap",placeholder:d.defaultValue('<ul id="%1$s" class="%2$s">%3$s</ul>')},wp_nav_menu_smart_current_class:{type:"text",name:"Smart menu current item class",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-current-class",placeholder:d.forExample("active")},wp_nav_menu_fallback:{type:"text",name:"Fallback",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-fallback",parameter_name:"fallback_cb"},wp_nav_menu_walker:{type:"text",name:"Walker",live_update:!0,action:"element_attribute",attribute:"wp-nav-menu-walker",parameter_name:"walker",placeholder:d.forExample("new MyWalker()")},wp_nav_menu_echo:{type:"checkbox",name:"Echo",action:"element_attribute",attribute:"wp-nav-menu-echo",value:"true",negvalue:"false",default_value:"true",parameter_name:"echo"},wp_nav_menu_echo_var:{type:"text",name:"Output to variable",live_update:!0,action:"element_attribute",placeholder:d.forExample("$menu"),attribute:"wp-nav-menu-echo-var",show_if:"wp_nav_menu_echo==false",validate:d.validateVar},wp_nav_menu_dropdown:{type:"selector",name:"Menu item with dropdown",action:"element_attribute",attribute:"wp-nav-menu-dropdown",show_if:"wp_nav_menu_type==smart",helptext:"The top menu item element that has a submenu (dropdown).",ignore_parameter:!0}}}},d.addComponentType(_),e.push(_),d.addHtmlOrNodeField(_),d.wpNavMenu_setupAttributes=function(e,t,a){t=t||e;var o=e.getAttr("class")||"";e.setAttr("class",o+(o.length?" ":"")+"{CLASSES}"),a||(e.setAttr("id","{ID}"),t.removeAttr("href"),t.removeAttr("rel"),t.removeAttr("target"),t.removeAttr("title"),t.setAttr("{ATTRS}")),t.walk(function(e){return!e.textNode||!$.trim(e.content).length||(e.content="{TITLE}",!1)})},d.wpNavMenu_getDropdownSublevel=function(e){var a=null,o=0;return e.walk(function(e){var t;return e.isElement&&(t=e.first())&&(t=e.find("> "+t.tagName).length,o<t)&&(a=e,o=t),!0}),a},h.list.push(function(e){var o,t,r,a,n,i,s,l,p,c,u;if(e.hasAttr(_.attribute))return n="",r=null,"smart"===(o=e.getAttr("wp-nav-menu-type"))&&(l=d.wpNavMenu_setupAttributes,p=null,p="a"!==e.tagName&&"li"!==e.tagName&&e.first()||e)&&(a=p.clone(!0,!1),d.removeWpActionsFromNodeTree(a),(c="a"===a.tagName?a:a.findOne("a"))&&(t=a,(u=e.getAttr("wp-nav-menu-current-class"))&&(i=u.trim().split(/\s+/)).length&&((s=a.findOneIncludingSelf("."+i[0]))&&(t=s),i.forEach(function(e){t.removeClass(e)})),l(t,c)),s=a.toStringOriginal(!1),r=e!==p?(i=e.clone(!0,!1),d.removeWpActionsFromNodeTree(i),i.removeAllChildren(),i.text("%3$s"),i.setAttr("id","%1$s"),i.addClass("%2$s"),d.quoteParam(i.toStringOriginal(!1),null,!0)):"%3$s",c=pinegrow.getFormatHtmlOptions(),n="\n"+(a=pinegrow.getHtmlIndentForLevel(0,c))+"PG_Smart_Walker_Nav_Menu::init();\n"+a+"PG_Smart_Walker_Nav_Menu::$options['template'] = '"+d.wpEscapeSingleQuotes(s)+"';\n",u&&(n+=a+"PG_Smart_Walker_Nav_Menu::$options['current_class'] = '"+u+"';\n"),p=e.getAttribute("wp-nav-menu-dropdown"))&&(i=e.findOne(p))&&(c=d.wpNavMenu_getDropdownSublevel(i))&&(s=c.first())&&(u=s.findOneIncludingSelf("a")||s,(p=pgCreate("{SUB}")).insertBefore(s),s.parent.detachAllChildren(p),p=i.findOne("a")||i,l(i,p),l(s,u),(p=c.findOneIncludingSelf("[aria-labelledby]"))&&(l=p.getAttribute("aria-labelledby"),(u=i.findOne(`[id="${l}"]`))?(u.setAttribute("id",l+"_{ID}"),p.setAttribute("aria-labelledby",l+"_{ID}")):p.setAttribute("aria-labelledby","{ID}")),n=(n=n+`
${a}PG_Smart_Walker_Nav_Menu::$options['template_item_with_sublevel'] = '${d.wpEscapeSingleQuotes(i.toStringOriginal(!1))}';`+`
${a}PG_Smart_Walker_Nav_Menu::$options['template_sublevel'] = '{SUB}';`)+`
${a}PG_Smart_Walker_Nav_Menu::$options['template_subitem'] = '${d.wpEscapeSingleQuotes(s.toStringOriginal(!1))}';

`),c="",(u=e.getAttr("wp-nav-menu-echo-var"))&&(c=(u=u.startsWith("$")?u:"$"+u)+` = `),h.toPhpHtmlOrNode(e,n+c+"wp_nav_menu( "+h.getNamedParams(_,e,function(e,t,a){if("menu_class"==t)a||"smart"==o||(a=e.getAttr("class"));else if("menu_id"==t)a||"smart"==o||(a=e.getAttr("id"));else if("walker"==t){if(!a)switch(o){case"bootstrap":a="new wp_bootstrap_navwalker()",m();break;case"bootstrap4":a="new wp_bootstrap4_navwalker()",g();break;case"smart":a="new PG_Smart_Walker_Nav_Menu()",d.requireResource("wp_smart_navwalker.php","inc",null),d.includeInFunctions("wp_smart_navwalker.php","inc",null,"PG_Smart_Walker_Nav_Menu")}}else if("fallback_cb"==t){if(!a)switch(o){case"bootstrap":a="wp_bootstrap_navwalker::fallback",m();break;case"bootstrap4":a="wp_bootstrap4_navwalker::fallback",g()}}else"items_wrap"!=t||a||null===r||(a=r);return a})+" );",_)}),_.meta={tags:[d.tag_ret_part],helptext:"Display the navigation menu. If Theme location is used the menu needs to be registered in functions.php and defined in the WP Admin. <b>Set menu type to Smart</b> to auto-detect the layout. See help for more.",helplink:nav_menu_help_url,extra_name:"wp_nav_menu"},new PgComponentType("wp_post_navigation","Post navigation")),a=(t.selector="[wp-post-navigation]",t.code='<nav class="navigation post-navigation" role="navigation" wp-post-navigation>    <h2 class="screen-reader-text">Post navigation</h2>    <div class="nav-links">    <div class="nav-previous">    <a href="#" rel="prev">Previous Post Title</a>    </div>    <div class="nav-next">    <a href="#" rel="next">Next Post Title</a>    </div>    </div>    </nav>',t.attribute="wp-post-navigation",t.sections={parameters:{name:"Parameters",fields:{wp_pag_prev_text:{type:"text",name:"Prev text",action:"element_attribute",attribute:"wp-pagination-prev-text",parameter_name:"prev_text",translate:!0},wp_pag_next_text:{type:"text",name:"Next text",action:"element_attribute",attribute:"wp-pagination-next-text",parameter_name:"next_text",translate:!0},wp_pag_screen_reader_text:{type:"text",name:"Screen reader text",action:"element_attribute",attribute:"wp-pagination-screen-reader-text",parameter_name:"screen_reader_text",translate:!0}}}},d.addComponentType(t),e.push(t),d.addHtmlOrNodeField(t),h.list.push(function(e){if(e.hasAttr(t.attribute))return e.removeAttr(t.attribute),h.toPhpNode(e,"the_post_navigation( "+h.getNamedParams(t,e,function(e,t,a){return a})+" );"),!0}),t.meta={tags:[],helptext:"Display navigation to next and previous post.",helplink:"https://developer.wordpress.org/reference/functions/the_post_navigation/",extra_name:"the_post_navigation"},new PgComponentType("wp_bs_post_pagination","Bootstrap Post pagination")),o=(a.selector="[wp-bs-post-pagination]",a.code="",a.attribute="wp-bs-post-pagination",a.sections={parameters:{name:"Parameters",fields:{"wp-bs-pagination-version":{type:"select",name:"Bootstrap version",show_empty:!1,action:"element_attribute",attribute:"wp-bs-pagination-version",default_value:"3",options:[{key:"3",name:"Bootstrap 3"},{key:"4",name:"Bootstrap 4"}]},"wp-bs-pagination-range":{type:"text",name:"Range",action:"element_attribute",attribute:"wp-bs-pagination-range",parameter_name:"range",placeholder:d.defaultValue("4")},"wp-bs-pagination-custom-query":{type:"text",name:"Custom query",action:"element_attribute",attribute:"wp-bs-pagination-custom-query",parameter_name:"custom_query",placeholder:d.forExample("$my_query")},"wp-bs-pagination-prev":{type:"text",name:"Previous string",action:"element_attribute",attribute:"wp-bs-pagination-prev",parameter_name:"previous_string",placeholder:d.defaultValue('<i class="glyphicon glyphicon-chevron-left"></i>'),translate:!0},"wp-bs-pagination-next":{type:"text",name:"Next string",action:"element_attribute",attribute:"wp-bs-pagination-next",parameter_name:"next_string",placeholder:d.defaultValue('<i class="glyphicon glyphicon-chevron-right"></i>'),translate:!0},"wp-bs-pagination-first":{type:"text",name:"First string",action:"element_attribute",attribute:"wp-bs-pagination-first",parameter_name:"first_string",placeholder:d.defaultValue("First"),translate:!0},"wp-bs-pagination-last":{type:"text",name:"Last string",action:"element_attribute",attribute:"wp-bs-pagination-last",parameter_name:"last_string",placeholder:d.defaultValue("Last"),translate:!0},"wp-bs-pagination-before":{type:"text",name:"Before output",action:"element_attribute",attribute:"wp-bs-pagination-before",parameter_name:"before_output",placeholder:d.defaultValue('<nav class="post-nav"><ul class="pagination">')},"wp-bs-pagination-after":{type:"text",name:"After output",action:"element_attribute",attribute:"wp-bs-pagination-after",parameter_name:"after_output",placeholder:d.defaultValue("</ul></nav>")}}}},d.addComponentType(a),e.push(a),d.addHtmlOrNodeField(a),h.list.push(function(e){if(e.hasAttr(a.attribute))return"4"==(e.hasAttr("wp-bs-pagination-version")?e.getAttr("wp-bs-pagination-version"):"3")?(h.toPhpNode(e,"wp_bootstrap4_pagination( "+h.getNamedParams(a,e,function(e,t,a){return a="custom_query"===t&&a&&!a.startsWith("$")?"$"+a:a})+" );"),d.requireResource("bootstrap/wp_bootstrap4_pagination.php","inc",null,d.replaceThemeSlugInContent,!0),d.includeInFunctions("bootstrap/wp_bootstrap4_pagination.php","inc",null,"function wp_bootstrap4_pagination")):(h.toPhpNode(e,"wp_bootstrap_pagination( "+h.getNamedParams(a,e,function(e,t,a){return a="custom_query"===t&&a&&!a.startsWith("$")?"$"+a:a})+" );"),d.requireResource("bootstrap/wp_bootstrap_pagination.php","inc",null,d.replaceThemeSlugInContent,!0),d.includeInFunctions("bootstrap/wp_bootstrap_pagination.php","inc",null,"function wp_bootstrap_pagination")),!0}),a.on_action_added=function(){d.setRequireThemeExport("Bootstrap pagination"),pinegrow.showNotice("<p>Use <b>WordPress -&gt; Export the theme</b> to add resources needed for Bootstrap pagination to your theme.</p>","Export the theme to enable Bootstrap pagination","wp-bs-pagination")},a.meta={tags:[],helptext:"Display pagination to next and previous post.",helplink:"https://github.com/talentedaamer/Bootstrap-wordpress-pagination",extra_name:"wp_bootstrap_pagination"},d.addTag("wp-pagination-field","Pagination field",null,function(n){if(n.hasAttr("wp-pagination-field")){var i,s,l,p,c,e=n.getAttr("wp-pagination-field-item"),u=n.getAttr("wp-pagination-field-query"),t=n.hasAttr("wp-pagination-field-if"),a=n.getAttr("wp-pagination-field-disabled-class")||"disabled",m=n.getDataUncloned("pagination-helper")||"PG_Pagination",o=null,u=(u=u&&!u.startsWith("$")?"$"+u:u)?` ${u} `:"";if(e){switch(d.requireResource("wp_pg_pagination.php","inc",null),d.includeInFunctions("wp_pg_pagination.php","inc",null,"PG_Pagination"),e){case"prev_link":"a"===(c=n.findIncludingSelf("a",!0)||n).tagName&&(c.removeAttr("href"),c.setAttr(`<?php echo ${m}::getPreviousHrefAttribute(${u}); ?>`),o=m+`::getCurrentPage() > 1`,t||n.addClass(`<?php if(!( ${o} )) echo '${a}'; ?>`));break;case"next_link":"a"===(c=n.findIncludingSelf("a",!0)||n).tagName&&(c.removeAttr("href"),c.setAttr(`<?php echo ${m}::getNextHrefAttribute(${u}); ?>`),o=m+`::getCurrentPage() < ${m}::getMaxPages(${u})`,t||n.addClass(`<?php if(!( ${o} )) echo '${a}'; ?>`));break;case"page":h.toPhpHtml(n,`echo ${m}::getCurrentPage();`);break;case"total":h.toPhpHtml(n,`echo ${m}::getMaxPages(${u});`)}"repeat"===e&&(i=n.getAttr("wp-pagination-field-active-class"),s=n.getDataUncloned("active_page_html"),l=n.getDataUncloned("dots_page_html"),(p=function(e){var a=e,t=(a.walk(function(e,t){return!e.hasTextOnly()||(a=e,!1)}),a.text()||"");return t.match(/^[0-9]+$/)||!t.match(/[0-9]+/)?h.toPhpHtml(a,`echo $page_num`):(t=t.replace(/[0-9]+/,`<?php echo $page_num; ?>`),a.html(t)),a})(n),c=n.findIncludingSelf("a",!0)||n,h.addToChanges(function(){var e,t,a,o,r;n.parent&&((e=h).resetAfterMap(),l&&e.before(n,`<?php $dots = false; ?>`),e.before(n,`<?php for( $page_num = 1; $page_num <= ${m}::getMaxPages(${u}); $page_num++) : ?>`),c.setAttr("href",`<?php echo esc_url( get_pagenum_link( $page_num ) ) ?>`),i&&(n.removeClass(i),n.addClass(`<?php if( $page_num == ${m}::getCurrentPage() ) echo '${i}'; ?>`)),s&&(o=pgCreate(s),p(o),(a=o.findIncludingSelf("a",!0))&&a.setAttr("href",`<?php echo esc_url( get_pagenum_link( $page_num ) ) ?>`),o.insertBefore(n),e.before(o,`<?php if( $page_num == ${m}::getCurrentPage() ) : ?>`),l?e.after(o,`<?php $dots = false; ?>`):(e.after(o,`<?php else : ?>`),e.after(n,`<?php endif; ?>`))),l&&(t=pgCreate(l),a=n.getDataUncloned("dots_show_all","false"),o=n.getDataUncloned("dots_end_size","1"),r=n.getDataUncloned("dots_mid_size","2"),t.insertAfter(n),e.before(t,`<?php else : ?>`),e.before(t,`<?php if(!$dots) : ?>`),e.after(t,`<?php $dots = true; ?>`),e.after(t,`<?php endif; ?>`),e.after(t,`<?php endif; ?>`),e.before(n,`<?php ${s?"elseif":"if"} ( ${a} || ( $page_num <= ${o} || ( ${m}::getCurrentPage() && $page_num >= ${m}::getCurrentPage() - ${r} && $page_num <= ${m}::getCurrentPage() + ${r} ) || $page_num > ${m}::getMaxPages(${u}) - ${o} ) ) : ?>`),e.after(n,`<?php $dots = false; ?>`)),e.after(t||n,`<?php endfor; ?>`))},this,[])),t&&o&&h.addToChanges(function(e,t){var a;e.parent&&((a=pgCreate(`<?php if( ${t} ) : ?>`)).indent_text=!0,a.insertBefore(e),(a=pgCreate(`<?php endif; ?>`)).indent_text=!0,a.insertAfter(e))},this,[n,o])}return!1}},{"wp-pagination-field-item":{type:"select",name:"Field",action:"element_attribute",show_empty:!0,options:[{key:"prev_link",name:"Previous page link"},{key:"next_link",name:"Next page link"},{key:"page",name:"Current page"},{key:"total",name:"Total pages"},{key:"repeat",name:"Repeated page item"}],validate:function(e,t,a){if(("prev_link"===a||"next_link"===a)&&"a"!==e.tagName)return"Requires &lt;a&gt; element."}},"wp-pagination-field-active-class":{type:"text",name:"Class for the active item",action:"element_attribute"},"wp-pagination-field-if":{type:"checkbox",name:"Hide inactive links",action:"element_attribute",value:"true",empty_attribute:!0,show_if:"wp-pagination-field-item==prev_link||next_link"},"wp-pagination-field-disabled-class":{type:"text",name:"Class for the disabled item",action:"element_attribute",placeholder:d.defaultValue("disabled"),show_if:"!wp-pagination-field-if"},"wp-pagination-field-query":{type:"text",name:"Custom query name",action:"element_attribute",placeholder:d.defaultValue("the main loop"),open_list_on_focus:!0,options:function(e,t){return d.wpInsight.getPreceedingQueryNamesForPgel(t)}}})),r=(o.addMeta({tags:[d.tag_ret_image,d.tag_set_element,d.tag_set_content,d.tag_use_loop,d.tag_t_post],helptext:"Set the pagination field: previous page link, next page link, current page or total pages."}),e.push(o),new PgComponentType("wp_get_archives","Get archives")),n=(r.selector="[wp-get-archives]",r.code='<ul wp-get-archives wp-get-archives-type="monthly" wp-get-archives-set="content">    <li>    <a href="#">March 2015</a>    </li>    <li>    <a href="#">January 2015</a>    </li>    </ul>',r.attribute="wp-get-archives",r.sections={parameters:{name:"Parameters",fields:{wp_get_archives_type:{type:"select",name:"Type",action:"element_attribute",attribute:"wp-get-archives-type",show_empty:!1,options:[{key:"yearly",name:"Yearly"},{key:"monthly",name:"Monthly"},{key:"daily",name:"Daily"},{key:"weekly",name:"Weekly"},{key:"postbypost",name:"Posts by date"},{key:"alpha",name:"Posts by title"}],parameter_name:"type"},wp_get_archives_limit:{type:"text",name:"Limit",action:"element_attribute",attribute:"wp-get-archives-limit",parameter_name:"limit"},wp_get_archives_format:{type:"text",name:"Format",action:"element_attribute",attribute:"wp-get-archives-format",show_empty:!0,options:[{key:"html",name:"HTML"},{key:"link",name:"Link"},{key:"option",name:"Option"},{key:"custom",name:"Custom"}],parameter_name:"format"},wp_get_archives_before:{type:"text",name:"Before",action:"element_attribute",attribute:"wp-get-archives-before",parameter_name:"before"},wp_get_archives_after:{type:"text",name:"After",action:"element_attribute",attribute:"wp-get-archives-after",parameter_name:"after"},wp_get_archives_show_post_count:{type:"checkbox",name:"Show post count",action:"element_attribute",attribute:"wp-get-archives-show-post-count",value:"1",parameter_name:"show_post_count"},wp_get_archives_order:{type:"text",name:"Order",action:"element_attribute",attribute:"wp-get-archives-order",show_empty:!0,options:[{key:"ASC",name:"Ascending"},{key:"DESC",name:"Descending"}],parameter_name:"order"}}}},d.addComponentType(r),e.push(r),d.addHtmlOrNodeField(r),h.list.push(function(e){if(e.hasAttr(r.attribute))return h.toPhpHtmlOrNode(e,"wp_get_archives( "+h.getNamedParams(r,e,function(e,t,a){return a})+" );",r)}),r.meta={tags:[],helptext:"Display links to archives.",helplink:"https://codex.wordpress.org/Function_Reference/wp_get_archives",extra_name:"wp_get_archives"},new PgComponentType("wp_post_type_archive_title","Post type archive title")),i=(n.selector="[wp-post-type-archive-title]",n.code="<h2 wp-post-type-archive-title>Archive for Post Type</h2>",n.attribute="wp-post-type-archive-title",n.sections={parameters:{name:"Options",fields:{wp_post_type_archive_title:{type:"text",name:"Prefix",action:"element_attribute",attribute:"wp-post-type-archive-title",attribute_keep_if_empty:!0,parameter_order:1}}}},d.addComponentType(n),e.push(n),d.addHtmlOrNodeField(n),h.list.push(function(e){if(e.hasAttr(n.attribute))return h.toPhpHtmlOrNode(e,"post_type_archive_title("+h.getParams(n,e)+");",n)}),n.meta={tags:[],helptext:"Display title for a post type archive.",helplink:"https://codex.wordpress.org/Function_Reference/post_type_archive_title",extra_name:"post_type_archive_title"},d.addTag("wp-archive-title","Archive title",null,function(e){var t;if(e.hasAttribute(i.attribute))return t=(t=d.phpFilter.getSetValue(e,i))&&"element"!==t?"the_archive_title();":(t=e.clone(!0,!1,!0),d.wpRemoveWPAttributes(t),`the_archive_title( ${d.quoteParam(t.getOpeningTag(),null,!0)}, ${d.quoteParam(t.getClosingTag(),null,!0)} );`),d.phpFilter.toPhpHtmlOrNode(e,t,i)})),s=(d.addHtmlOrNodeField(i,null,"element"),i.addMeta({tags:[d.tag_ret_string,d.tag_set_element,d.tag_set_content,d.tag_t_comment],helptext:"Display the archive title.",helplink:"https://developer.wordpress.org/reference/functions/the_archive_title/",extra_name:"the_archive_title"}),e.push(i),d.addTag("wp-archive-description","Archive description",null,function(e){var t;if(e.hasAttribute(s.attribute))return t=(t=d.phpFilter.getSetValue(e,s))&&"element"!==t?"the_archive_description();":(t=e.clone(!0,!1,!0),d.wpRemoveWPAttributes(t),`the_archive_description( ${d.quoteParam(t.getOpeningTag(),null,!0)}, ${d.quoteParam(t.getClosingTag(),null,!0)} );`),d.phpFilter.toPhpHtmlOrNode(e,t,s)}));return d.addHtmlOrNodeField(s,null,"element"),s.addMeta({tags:[d.tag_ret_string,d.tag_set_element,d.tag_set_content,d.tag_t_comment],helptext:"Display the archive title.",helplink:"https://developer.wordpress.org/reference/functions/the_archive_description/",extra_name:"the_archive_description"}),e.push(s),e},pgWordpressCategory=function(d,h){var e=[],o=new PgComponentType("wp_list_categories","List categories"),t=(o.selector="[wp-list-categories]",o.code='<ul wp-list-categories wp-list-categories-pad-counts="true"><li class="categories">Categories    <ul>    <li class="cat-item cat-item-3">    <a href="#">Category One</a>    </li>    <li class="cat-item cat-item-4">    <a href="#">Category Two</a>    </li>    <li class="cat-item cat-item-1">    <a href="#">Uncategorized</a>    </li>    </ul>    </li></ul>',o.attribute="wp-list-categories",o.sections={parameters:{name:"Parameters",fields:{wp_list_categories_show_option_all:{type:"text",name:"Show option all",action:"element_attribute",attribute:"wp-list-categories-show-option-all",parameter_name:"show_option_all",translate:!0},wp_list_categories_orderby:{type:"select",name:"Order by",action:"element_attribute",attribute:"wp-list-categories-orderby",show_empty:!0,options:[{key:"ID",name:"ID"},{key:"name",name:"name"},{key:"slug",name:"slug"},{key:"count",name:"count"},{key:"term_group",name:"term_group"}],parameter_name:"orderby"},wp_list_categories_order:{type:"select",name:"Order",action:"element_attribute",attribute:"wp-list-categories-order",show_empty:!0,options:[{key:"ASC",name:"Ascending"},{key:"DESC",name:"Descending"}],parameter_name:"order"},wp_list_categories_style:{type:"select",name:"Style",action:"element_attribute",attribute:"wp-list-categories-style",show_empty:!0,options:[{key:"list",name:"list"},{key:"none",name:"none"}],parameter_name:"style"},wp_list_categories_show_count:{type:"checkbox",name:"Show count",action:"element_attribute",attribute:"wp-list-categories-show-count",value:"true",negvalue:"false",default_value:"false",parameter_name:"show_count"},wp_list_categories_hide_empty:{type:"checkbox",name:"Hide empty",action:"element_attribute",attribute:"wp-list-categories-hide-empty",value:"true",negvalue:"false",default_value:"true",parameter_name:"hide_empty"},wp_list_categories_use_desc_for_title:{type:"checkbox",name:"Use desc for title",action:"element_attribute",attribute:"wp-list-categories-use-desc-for-title",value:"true",negvalue:"false",default_value:"true",parameter_name:"use_desc_for_title"},wp_list_categories_child_of:{type:"checkbox",name:"Child of",action:"element_attribute",attribute:"wp-list-categories-child-of",value:"true",negvalue:"false",default_value:"false",parameter_name:"child_of"},wp_list_categories_feed:{type:"text",name:"Show feed link",action:"element_attribute",attribute:"wp-list-categories-feed",parameter_name:"feed"},wp_list_categories_feed_type:{type:"text",name:"Feed type",action:"element_attribute",attribute:"wp-list-categories-feed-type",parameter_name:"feed_type"},wp_list_categories_feed_image:{type:"image",name:"Feed image",action:"element_attribute",attribute:"wp-list-categories-feed-image",parameter_name:"feed_image",getAttrValue:function(e,t,a){return e=e&&!d.isPhpValue(e)?d.makeUrlRelativeToThemeCode(pinegrow.getOriginalUrl(e)):e}},wp_list_categories_exclude:{type:"text",name:"Exclude",action:"element_attribute",attribute:"wp-list-categories-exclude",parameter_name:"exclude"},wp_list_categories_exclude_tree:{type:"text",name:"Exclude tree",action:"element_attribute",attribute:"wp-list-categories-exclude-tree",parameter_name:"exclude_tree"},wp_list_categories_include:{type:"text",name:"Include",action:"element_attribute",attribute:"wp-list-categories-include",parameter_name:"include"},wp_list_categories_hierarchical:{type:"checkbox",name:"Hierarchical",action:"element_attribute",attribute:"wp-list-categories-hierarchical",value:"true",negvalue:"false",default_value:"true",parameter_name:"hierarchical"},wp_list_categories_title_li:{type:"text",name:"Title li",action:"element_attribute",attribute:"wp-list-categories-title-li",parameter_name:"title_li"},wp_list_categories_show_option_none:{type:"text",name:"Show option none",action:"element_attribute",attribute:"wp-list-categories-show-option-none",parameter_name:"show_option_none"},wp_list_categories_number:{type:"text",name:"Number of categories",action:"element_attribute",attribute:"wp-list-categories-number",parameter_name:"number"},wp_list_categories_echo:{type:"checkbox",name:"Echo",action:"element_attribute",attribute:"wp-list-categories-echo",value:"true",negvalue:"false",default_value:"true",parameter_name:"echo"},wp_list_categories_depth:{type:"text",name:"Depth",action:"element_attribute",attribute:"wp-list-categories-depth",parameter_name:"depth"},wp_list_categories_current_category:{type:"text",name:"Current category",action:"element_attribute",attribute:"wp-list-categories-current-category",parameter_name:"current_category"},wp_list_categories_pad_counts:{type:"checkbox",name:"Pad counts",action:"element_attribute",attribute:"wp-list-categories-pad-counts",value:"true",negvalue:"false",default_value:"false",parameter_name:"pad_counts"},wp_list_categories_tab_index:{type:"text",name:"Tab index",action:"element_attribute",attribute:"wp-list-categories-tab-index",parameter_name:"tab_index"},wp_list_categories_taxonomy:{type:"text",name:"Taxonomy",action:"element_attribute",attribute:"wp-list-categories-taxonomy",parameter_name:"taxonomy",options:d.wpInsight.getTaxonomies,open_list_on_focus:!0},wp_list_categories_walker:{type:"text",name:"Walker",action:"element_attribute",attribute:"wp-list-categories-walker",parameter_name:"walker"}}}},d.addComponentType(o),e.push(o),o.return_string_code=function(e,t,a){return"wp_list_categories( "+h.getNamedParams(o,e,function(e,t,a){return a="echo"==t?"false":a})},d.addHtmlOrNodeField(o),h.list.push(function(e){if(e.hasAttr(o.attribute))return h.toPhpHtmlOrNode(e,"wp_list_categories( "+h.getNamedParams(o,e,function(e,t,a){return a})+" );",o)}),o.meta={tags:[d.tag_ret_select,d.tag_t_category],helptext:"Display list of categories.",helplink:"https://developer.wordpress.org/reference/functions/wp_list_categories/",extra_name:"wp_list_categories"},new PgComponentType("wp_dropdown_categories","Categories dropdown")),a=(t.selector="[wp-dropdown-categories]",t.code='<select name="cat" id="cat" class="postform" wp-dropdown-categories>    <option class="level-0" value="1">Uncategorized</option>    <option class="level-0" value="3">Category One</option>    <option class="level-0" value="4">Category Two</option>    </select>',t.attribute="wp-dropdown-categories",t.sections={parameters:{name:"Parameters",fields:{wp_dropdown_categories_show_option_all:{type:"text",name:"Show option all",action:"element_attribute",attribute:"wp-dropdown-categories-show-option-all",parameter_name:"show_option_all",translate:!0},wp_dropdown_categories_show_option_none:{type:"text",name:"Show option none",action:"element_attribute",attribute:"wp-dropdown-categories-show-option-none",parameter_name:"show_option_none",translate:!0},wp_dropdown_categories_orderby:{type:"select",name:"Order by",action:"element_attribute",attribute:"wp-dropdown-categories-orderby",show_empty:!0,options:[{key:"ID",name:"ID"},{key:"NAME",name:"name"},{key:"SLUG",name:"slug"}],parameter_name:"orderby"},wp_dropdown_categories_order:{type:"select",name:"Order",action:"element_attribute",attribute:"wp-dropdown-categories-order",show_empty:!0,options:[{key:"ASC",name:"Ascending"},{key:"DESC",name:"Descending"}],parameter_name:"order"},wp_dropdown_categories_show_count:{type:"checkbox",name:"Show count",action:"element_attribute",attribute:"wp-dropdown-categories-show-count",value:"true",negvalue:"false",default_value:"false",parameter_name:"show_count"},wp_dropdown_categories_hide_empty:{type:"checkbox",name:"Hide empty",action:"element_attribute",attribute:"wp-dropdown-categories-hide-empty",value:"true",negvalue:"false",default_value:"true",parameter_name:"hide_empty"},wp_dropdown_categories_child_of:{type:"checkbox",name:"Child of",action:"element_attribute",attribute:"wp-dropdown-categories-child-of",value:"true",negvalue:"false",default_value:"false",parameter_name:"child_of"},wp_dropdown_categories_include:{type:"text",name:"Include",action:"element_attribute",attribute:"wp-dropdown-categories-include",parameter_name:"include"},wp_dropdown_categories_exclude:{type:"text",name:"Exclude",action:"element_attribute",attribute:"wp-dropdown-categories-exclude",parameter_name:"exclude"},wp_dropdown_categories_exclude_tree:{type:"text",name:"Exclude tree",action:"element_attribute",attribute:"wp-dropdown-categories-exclude-tree",parameter_name:"exclude_tree"},wp_dropdown_categories_echo:{type:"checkbox",name:"Echo",action:"element_attribute",attribute:"wp-dropdown-categories-echo",value:"true",negvalue:"false",default_value:"true",parameter_name:"echo"},wp_dropdown_categories_depth:{type:"text",name:"Depth",action:"element_attribute",attribute:"wp-dropdown-categories-depth",parameter_name:"depth"},wp_dropdown_categories_tab_index:{type:"text",name:"Tab index",action:"element_attribute",attribute:"wp-dropdown-categories-tab-index",parameter_name:"tab_index"},wp_dropdown_categories_name:{type:"text",name:"Name",action:"element_attribute",attribute:"wp-dropdown-categories-name",parameter_name:"name",placeholder:d.defaultValue("cat")},wp_dropdown_categories_id:{type:"text",name:"Id",action:"element_attribute",attribute:"wp-dropdown-categories-id",parameter_name:"id",placeholder:d.defaultValue("name")},wp_dropdown_categories_class:{type:"text",name:"Class",action:"element_attribute",attribute:"wp-dropdown-categories-class",parameter_name:"class",placeholder:d.defaultValue("postform")},wp_dropdown_categories_selected:{type:"text",name:"Selected",action:"element_attribute",attribute:"wp-dropdown-categories-selected",parameter_name:"selected"},wp_dropdown_categories_hierarchical:{type:"checkbox",name:"Hierarchical",action:"element_attribute",attribute:"wp-dropdown-categories-hierarchical",value:"true",negvalue:"false",default_value:"false",parameter_name:"hierarchical"},wp_dropdown_categories_pad_counts:{type:"checkbox",name:"Pad counts",action:"element_attribute",attribute:"wp-dropdown-categories-pad-counts",value:"true",negvalue:"false",default_value:"false",parameter_name:"pad_counts"},wp_dropdown_categories_taxonomy:{type:"text",name:"Taxonomy",action:"element_attribute",attribute:"wp-dropdown-categories-taxonomy",parameter_name:"taxonomy",options:d.wpInsight.getTaxonomies,open_list_on_focus:!0},wp_dropdown_categories_hide_if_empty:{type:"checkbox",name:"Hide if empty",action:"element_attribute",attribute:"wp-dropdown-categories-hide-if-empty",value:"true",negvalue:"false",default_value:"false",parameter_name:"hide_if_empty"}}}},d.addComponentType(t),e.push(t),d.addHtmlOrNodeField(t),h.list.push(function(e){if(e.hasAttr(t.attribute))return h.toPhpHtmlOrNode(e,"wp_dropdown_categories( "+h.getNamedParams(t,e,function(e,t,a){return a})+" );",t)}),t.meta={tags:[d.tag_ret_select,d.tag_t_category],helptext:"Display categories dropdown.",helplink:"https://codex.wordpress.org/Function_Reference/wp_dropdown_categories",extra_name:"wp_dropdown_categories"},new PgComponentType("wp_the_tags","The tags")),r=(a.selector="[wp-the-tags]",a.code='<div wp-the-tags>Tags:     <a href="#" rel="tag">tag1</a>,    <a href="#" rel="tag">tag2</a>,    <a href="#" rel="tag">tag3</a>    </div>',a.attribute="wp-the-tags",a.sections={parameters:{name:"Options",fields:{wp_the_tags:{type:"text",name:"Before",live_update:!0,action:"element_attribute",attribute:"wp-the-tags",attribute_keep_if_empty:!0,parameter_order:1},wp_the_tags_sep:{type:"text",name:"Separator",live_update:!0,action:"element_attribute",attribute:"wp-the-tags-sep",parameter_order:2},wp_the_tags_after:{type:"text",name:"After",live_update:!0,action:"element_attribute",attribute:"wp-the-tags-after",parameter_order:3}}}},d.addComponentType(a),e.push(a),d.addHtmlOrNodeField(a),h.list.push(function(e){if(e.hasAttr(a.attribute))return h.toPhpHtmlOrNode(e,"the_tags("+h.getParams(a,e)+");",a)}),a.meta={tags:[d.tag_ret_link,d.tag_t_category],helptext:"Display links to tags of the current post.",helplink:"https://codex.wordpress.org/Function_Reference/the_tags",extra_name:"the_tags"},new PgComponentType("wp_tag_cloud","Tag cloud")),n=(r.selector="[wp-tag-cloud]",r.code='<div wp-tag-cloud wp-tag-cloud-set="content">    <a href="#" class="tag-link-5" title="4 topics" style="font-size: 22pt;">tag1</a>    <a href="#" class="tag-link-6" title="2 topics" style="font-size: 14.3pt;">tag2</a>    <a href="#" class="tag-link-7" title="2 topics" style="font-size: 14.3pt;">tag3</a>    <a href="#" class="tag-link-8" title="1 topic" style="font-size: 8pt;">tag4</a>    </div>',r.attribute="wp-tag-cloud",r.sections={parameters:{name:"Parameters",fields:{wp_tag_cloud_smallest:{type:"text",name:"Smallest",action:"element_attribute",attribute:"wp-tag-cloud-smallest",parameter_name:"smallest",placeholder:d.defaultValue("8")},wp_tag_cloud_largest:{type:"text",name:"Largest",action:"element_attribute",attribute:"wp-tag-cloud-largest",parameter_name:"largest",placeholder:d.defaultValue("22")},wp_tag_cloud_unit:{type:"select",name:"Unit",action:"element_attribute",attribute:"wp-tag-cloud-unit",show_empty:!0,options:[{key:"pt",name:"pt"},{key:"px",name:"px"},{key:"em",name:"em"},{key:"%",name:"%"}],parameter_name:"unit"},wp_tag_cloud_number:{type:"text",name:"Number",action:"element_attribute",attribute:"wp-tag-cloud-number",parameter_name:"number",placeholder:d.defaultValue("45")},wp_tag_cloud_format:{type:"select",name:"Format",action:"element_attribute",attribute:"wp-tag-cloud-format",show_empty:!0,options:[{key:"flat",name:"flat"},{key:"list",name:"list"},{key:"array",name:"array"}],parameter_name:"format"},wp_tag_cloud_separator:{type:"text",name:"Separator",action:"element_attribute",attribute:"wp-tag-cloud-separator",parameter_name:"separator",placeholder:d.defaultValue("\\n")},wp_tag_cloud_orderby:{type:"select",name:"Order by",action:"element_attribute",attribute:"wp-tag-cloud-orderby",show_empty:!0,options:[{key:"name",name:"name"},{key:"count",name:"count"}],parameter_name:"orderby"},wp_tag_cloud_order:{type:"select",name:"Order",action:"element_attribute",attribute:"wp-tag-cloud-order",show_empty:!0,options:[{key:"ASC",name:"Ascending"},{key:"DESC",name:"Descending"},{key:"RAND",name:"Random"}],parameter_name:"order"},wp_tag_cloud_include:{type:"text",name:"Include",action:"element_attribute",attribute:"wp-tag-cloud-include",parameter_name:"include"},wp_tag_cloud_exclude:{type:"text",name:"Exclude",action:"element_attribute",attribute:"wp-tag-cloud-exclude",parameter_name:"exclude"},wp_tag_cloud_topic_count_text_callback:{type:"text",name:"Topic count text callback",action:"element_attribute",attribute:"wp-tag-cloud-topic-count-text-callback",parameter_name:"topic_count_text_callback",placeholder:d.defaultValue("default_topic_count_text")},wp_tag_cloud_link:{type:"select",name:"Link",action:"element_attribute",attribute:"wp-tag-cloud-link",show_empty:!0,options:[{key:"view",name:"view"},{key:"edit",name:"edit"}],parameter_name:"link"},wp_tag_cloud_taxonomy:{type:"text",name:"Taxonomy",action:"element_attribute",attribute:"wp-tag-cloud-taxonomy",parameter_name:"taxonomy",options:d.wpInsight.getTaxonomies,open_list_on_focus:!0},wp_tag_cloud_echo:{type:"checkbox",name:"Echo",action:"element_attribute",attribute:"wp-tag-cloud-echo",value:"true",negvalue:"false",default_value:"true",parameter_name:"echo"}}}},d.addComponentType(r),e.push(r),d.addHtmlOrNodeField(r),h.list.push(function(e){if(e.hasAttr(r.attribute))return h.toPhpHtmlOrNode(e,"wp_tag_cloud("+h.getNamedParams(r,e,function(e,t,a){return a})+");",r)}),r.meta={tags:[d.tag_ret_link,d.tag_t_category],helptext:"Display a tag cloud.",helplink:"https://codex.wordpress.org/Function_Reference/wp_tag_cloud",extra_name:"wp_tag_cloud"},new PgComponentType("wp_the_terms","The terms")),g=(n.selector="[wp-the-terms]",n.code='<div wp-the-terms="get_the_ID()" wp-the-terms-set="content" wp-the-terms-taxonomy="post_tag">    <a href="#" rel="tag">tag1</a>,    <a href="#" rel="tag">tag2</a>,    <a href="#" rel="tag">tag3</a>    </div>',n.attribute="wp-the-terms",n.sections={parameters:{name:"Options",fields:{wp_the_term_list:{type:"text",name:"Post id",live_update:!0,action:"element_attribute",attribute:"wp-the-terms",attribute_keep_if_empty:!0,parameter_order:1,validate:d.required},wp_the_term_list_taxonomy:{type:"text",name:"Taxonomy name",live_update:!0,action:"element_attribute",attribute:"wp-the-terms-taxonomy",parameter_order:2,validate:d.required,options:d.wpInsight.getTaxonomies,open_list_on_focus:!0},wp_the_term_list_before:{type:"text",name:"Before",live_update:!0,action:"element_attribute",attribute:"wp-the-terms-before",parameter_order:3},wp_the_term_list_sep:{type:"text",name:"Separator",live_update:!0,action:"element_attribute",attribute:"wp-the-terms-separator",parameter_order:4,placeholder:d.defaultValue(", ")},wp_the_term_list_after:{type:"text",name:"After",live_update:!0,action:"element_attribute",attribute:"wp-the-terms-after",parameter_order:5}}}},d.addComponentType(n),e.push(n),d.addHtmlOrNodeField(n),h.list.push(function(e){if(e.hasAttr(n.attribute))return h.toPhpHtmlOrNode(e,"the_terms("+h.getParams(n,e)+");",n)}),n.meta={tags:[d.tag_ret_string,d.tag_t_category],helptext:"Display links to terms of the post.",helplink:"https://codex.wordpress.org/Function_Reference/the_terms",extra_name:"the_terms"},new PgComponentType("wp_terms_template","Terms template")),i=(g.attribute="wp-terms-template",g.sections={parameters:{name:"Options",fields:{wp_terms_template:{type:"text",name:"Post id",action:"element_attribute",attribute:"wp-terms-template",attribute_keep_if_empty:!0,placeholder:d.defaultValue("current post")},wp_terms_template_taxonomy:{type:"text",name:"Taxonomy name",action:"element_attribute",attribute:"wp-terms-template-taxonomy",options:d.wpInsight.getTaxonomies,open_list_on_focus:!0,validate:d.required},wp_terms_template_element:{type:"select",name:"Templete element",action:"element_attribute",attribute:"wp-terms-template-element",options:[{key:"this",name:"this element"},{key:"child",name:"the first child element"}],default_value:"this"},"wp-terms-template-range":{type:"text",name:"Range of items to show",action:"element_attribute",attribute:"wp-terms-template-range",placeholder:d.forExample("2 or 0-5 (0 is first)"),validate:d.validateRangeValue},"wp-terms-template-delimiter":{type:"text",name:"Delimiter",action:"element_attribute",placeholder:d.forExample(",")}}}},d.addComponentType(g),e.push(g),h.list.push(function(e){var t,r,a,o,n,i,s,l,p,c,u,m;if(e.hasAttr(g.attribute))return i=e.getAttr("wp-terms-template")||"get_the_ID()",t=e.getAttr("wp-terms-template-taxonomy"),(r="child"===(r=e).getAttr("wp-terms-template-element")?e.getChildAtPos(0,!0):r)&&(a=e.getAttr("wp-terms-template-delimiter"),p="$term_i",o={},l=!(c=d.parseRangeValue(e.getAttr("wp-terms-template-range"),p,o))&&null===a?!1:!0,(n=[]).push(pgCreate(`<?php $terms = get_the_terms( ${d.quoteParam(i)}, ${d.quoteParam(t)} ) ?>`)),n.push(pgCreate(`<?php if( !empty( $terms ) ) : ?>`)),(i=[]).push(l?pgCreate(`<?php foreach( $terms as ${p} => $term ) : ?>`):pgCreate(`<?php foreach( $terms as $term ) : ?>`)),c&&i.push(pgCreate(c)),(s=[]).push(pgCreate(`<?php endif; ?>`)),(l=[]).push(pgCreate(`<?php endforeach; ?>`)),c&&l.push(pgCreate(`<?php endif; ?>`)),null===a||c&&o.start===o.end||(p=pgCreate(`<?php if( ${p} ${c?`< min( ${o.end}, count( $terms ) - 1 )`:"< count( $terms ) - 1"} ) echo ${d.quoteParam(a)}; ?>`),l.push(p),p.format_force_inline=!0),(c="a"===r.tagName?r:r.findOne("a"))&&c.setAttr("href",`<?php echo esc_url( get_term_link( $term, ${d.quoteParam(t)} ) ) ?>`),m=-1,(u=c||r).walk(function(e,t){return e.hasTextOnly()&&m<t&&(u=e,m=t),!0}),h.toPhpHtml(u,`echo $term->name;`),h.addToChanges(function(e,t,a){if(r.parent){for(var o=0;o<n.length;o++)n[o].insertBefore(e),n[o].indent_text=!0;for(o=0;o<t.length;o++)t[o].insertBefore(r),t[o].indent_text=!0;for(o=0;o<s.length;o++)s[o].insertAfter(e),s[o].indent_text=!0;for(o=0;o<a.length;o++)a[o].insertAfter(r),a[o].indent_text=!0}},this,[e,i,l])),!1}),g.meta={tags:[d.tag_ret_string,d.tag_t_category],helptext:"Display terms of the post using the current or child element as a template. Link is added if &gt;a&lt; is present.",helplink:"https://codex.wordpress.org/Function_Reference/get_the_terms",extra_name:"get_the_terms"},new PgComponentType("the_taxonomies","The taxonomies")),s=(i.selector="[wp-the-taxonomies]",i.code='<div wp-the-taxonomies wp-the-taxonomies-set="content">    Categories:        <a href="http://wptest/category/uncategorized/">Uncategorized</a>. Tags:        <a href="http://wptest/tag/tag1/">tag1</a>,    <a href="http://wptest/tag/tag2/">tag2</a>, and    <a href="http://wptest/tag/tag3/">tag3</a>.    </div>',i.attribute="wp-the-taxonomies",i.sections={parameters:{name:"Parameters",fields:{the_taxonomies_post:{type:"text",name:"Post id",action:"element_attribute",attribute:"wp-the-taxonomies-post",parameter_name:"post",placeholder:d.defaultValue("current post")},the_taxonomies_before:{type:"text",name:"Before",action:"element_attribute",attribute:"wp-the-taxonomies-before",parameter_name:"before"},the_taxonomies_sep:{type:"text",name:"Separator",action:"element_attribute",attribute:"wp-the-taxonomies-sep",parameter_name:"sep"},the_taxonomies_after:{type:"text",name:"After",action:"element_attribute",attribute:"wp-the-taxonomies-after",parameter_name:"after"},the_taxonomies_template:{type:"text",name:"Template",action:"element_attribute",attribute:"wp-the-taxonomies-template",parameter_name:"template",placeholder:d.defaultValue("%s: %l.")}}}},d.addComponentType(i),e.push(i),d.addHtmlOrNodeField(i),h.list.push(function(e){if(e.hasAttr(i.attribute))return h.toPhpHtmlOrNode(e,"the_taxonomies( "+h.getNamedParams(i,e,function(e,t,a){return a})+");",i)}),i.meta={tags:[d.tag_ret_link,d.tag_t_category],helptext:"Display links to taxonomies and terms of the current post.",helplink:"https://codex.wordpress.org/Function_Reference/the_taxonomies",extra_name:"the_taxonomies"},new PgComponentType("wp_category_desc","Category description")),l=(s.selector="[wp-category-description]",s.code='<p wp-category-description wp-category-description-set="content">This is category one description.</p>',s.attribute="wp-category-description",s.sections={parameters:{name:"Options",fields:{wp_the_author:{type:"text",name:"Category id",live_update:!0,action:"element_attribute",attribute:"wp-category-description",attribute_keep_if_empty:!0,parameter_order:1,placeholder:d.defaultValue("current category")}}}},d.addComponentType(s),e.push(s),s.return_string_code=function(e,t,a){return"category_description("+h.getParams(s,e)+")"},d.addHtmlOrNodeField(s),h.list.push(function(e){if(e.hasAttr(s.attribute))return h.toPhpHtmlOrNode(e,"echo category_description("+h.getParams(s,e)+");",s)}),s.meta={tags:[d.tag_ret_string,d.tag_t_category],helptext:"Display category description.",helplink:"https://codex.wordpress.org/Function_Reference/category_description",extra_name:"category_description"},new PgComponentType("wp_single_cat_title","Single category title")),p=(l.selector="[wp-single-cat-title]",l.code='<h2 wp-single-cat-title wp-single-cat-title-set="content">Category One</h2>',l.attribute="wp-single-cat-title",l.sections={parameters:{name:"Options",fields:{wp_the_author:{type:"text",name:"Prefix",live_update:!0,action:"element_attribute",attribute:"wp-single-cat-title",attribute_keep_if_empty:!0,parameter_order:1}}}},d.addComponentType(l),e.push(l),l.return_string_code=function(e,t,a){return"single_cat_title("+h.getParams(l,e)+")"},d.addHtmlOrNodeField(l),h.list.push(function(e){if(e.hasAttr(l.attribute))return h.toPhpHtmlOrNode(e,"echo single_cat_title("+h.getParams(l,e)+");",l)}),l.meta={tags:[d.tag_ret_string,d.tag_t_category],helptext:"Display page title for a category or tag archive.",helplink:"https://developer.wordpress.org/reference/functions/single_cat_title/",extra_name:"single_cat_title"},new PgComponentType("wp_single_tag_title","Single tag title")),c=(p.selector="[wp-single-tag-title]",p.code='<h2 wp-single-tag-title wp-single-tag-title-set="content">Tag1</h2>',p.attribute="wp-single-tag-title",p.sections={parameters:{name:"Options",fields:{wp_the_author:{type:"text",name:"Prefix",live_update:!0,action:"element_attribute",attribute:"wp-single-tag-title",attribute_keep_if_empty:!0,parameter_order:1}}}},d.addComponentType(p),e.push(p),d.addHtmlOrNodeField(p),h.list.push(function(e){if(e.hasAttr(p.attribute))return h.toPhpHtmlOrNode(e,"single_tag_title("+h.getParams(p,e)+");",p)}),p.meta={tags:[d.tag_ret_string,d.tag_t_category],helptext:"Display the page title for the tag archive.",helplink:"https://codex.wordpress.org/Function_Reference/single_tag_title",extra_name:"single_tag_title"},new PgComponentType("wp_tag_description","Tag description")),u=(c.selector="[wp-tag-description]",c.code='<p wp-tag-description wp-tag-description-set="content">This is a Tag1 description.</p>',c.attribute="wp-tag-description",c.sections={parameters:{name:"Options",fields:{wp_the_author:{type:"text",name:"Tag id",live_update:!0,action:"element_attribute",attribute:"wp-tag-description",attribute_keep_if_empty:!0,parameter_order:1}}}},d.addComponentType(c),e.push(c),c.return_string_code=function(e,t,a){return"tag_description("+h.getParams(c,e)+" )"},d.addHtmlOrNodeField(c),h.list.push(function(e){if(e.hasAttr(c.attribute))return h.toPhpNode(e,"echo tag_description("+h.getParams(c,e)+" );",c)}),c.meta={tags:[d.tag_ret_string,d.tag_t_category],helptext:"Display description of a tag.",helplink:"https://codex.wordpress.org/Function_Reference/tag_description",extra_name:"tag_description"},new PgComponentType("wp_single_term_title","Single term title")),m=(u.selector="[wp-single-term-title]",u.code='<h2 wp-single-term-title wp-single-term-title-set="content">Term1</h2>',u.attribute="wp-single-term-title",u.sections={parameters:{name:"Options",fields:{wp_the_author:{type:"text",name:"Prefix",live_update:!0,action:"element_attribute",attribute:"wp-single-term-title",attribute_keep_if_empty:!0,parameter_order:1}}}},d.addComponentType(u),e.push(u),d.addHtmlOrNodeField(u),h.list.push(function(e){if(e.hasAttr(u.attribute))return h.toPhpHtmlOrNode(e,"single_term_title("+h.getParams(u,e)+");",u)}),u.meta={tags:[d.tag_ret_string,d.tag_t_category],helptext:"Display the page title for the single term archive.",helplink:"https://codex.wordpress.org/Function_Reference/single_term_title",extra_name:"single_term_title"},new PgComponentType("wp_term_description","Term description"));return m.selector="[wp-term-description]",m.code='<p wp-term-description wp-term-description-set="content">A description of a term.</p>',m.attribute="wp-term-description",m.sections={parameters:{name:"Options",fields:{wp_term_description:{type:"text",name:"Term id",live_update:!0,action:"element_attribute",attribute:"wp-term-description",attribute_keep_if_empty:!0,parameter_order:1,placeholder:d.defaultValue("current term")},wp_term_description_taxonomy:{type:"text",name:"Taxonomy",live_update:!0,action:"element_attribute",attribute:"wp-term-description-taxonomy",options:d.wpInsight.getTaxonomies,open_list_on_focus:!0,parameter_order:2,placeholder:d.defaultValue("post_tag")}}}},d.addComponentType(m),e.push(m),m.return_string_code=function(e,t,a){return"term_description("+h.getParams(m,e)+" )"},d.addHtmlOrNodeField(m),h.list.push(function(e){if(e.hasAttr(m.attribute))return h.toPhpHtmlOrNode(e,"echo term_description("+h.getParams(m,e)+");",m)}),m.meta={tags:[d.tag_ret_string,d.tag_t_category],helptext:"Display the term description.",helplink:"https://codex.wordpress.org/Function_Reference/term_description",extra_name:"term_description"},e},pgWordpressParts=function(n,i){var e=[],s=(n.on_element_inserted=function(e,t,a,o){for(var r=null,n=0;n<o.length;n++)if(o[n].is_smart_component){r=o[n];break}r&&t.hasAttr("wp-template-part-component")&&s(t)},n.on_component_updated=function(e,t,a){t.hasAttr("wp-template-part-component")&&s(t)},function(e){e.hasAttr("wp-template-part")&&(e.getAttr("wp-template-part-slug"),e.getAttr("wp-template-part-name"),e.hasAttr("wp-template-part-content"),e.removeAttr("wp-template-part"),e.removeAttr("wp-template-part-slug"),e.removeAttr("wp-template-part-content"),e.removeAttr("wp-template-part-component"))}),l=new PgComponentType("wp_template_part","Define template part");return l.selector="[wp-template-part]",l.code="<wp-the-title>Vivamus ac dolor blandit</wp-the-title>",l.attribute="wp-template-part",l.sections={wp_options:{name:"Options",fields:{wp_define_template_part_slug:{type:"text",name:"Slug",action:"element_attribute",attribute:"wp-template-part-slug"},wp_define_template_part_name:{type:"text",name:"Name",action:"element_attribute",attribute:"wp-template-part-name"},wp_define_template_part_only_content:{type:"checkbox",name:"Use only content (not the whole element)",action:"element_attribute",attribute:"wp-template-part-content",value:"true",empty_attribute:!0},wp_define_template_part_map_to_component:{type:"checkbox",name:"Link with smart component",action:"element_attribute",attribute:"wp-template-part-component",value:"true",empty_attribute:!0,on_changed:function(e,t,a,o,r,n,i,s,l){var p,c;"true"==a&&(p="<p>Add <b>Define component</b> action from the <b>ACT</b> panel to this element to link the template part to a <b>Smart component</b>.</p><p>Doing this will:</p><ul><li>List the component / template part in the LIB panel</li><li>Replace Define template part action with <b>Use template part</b> action on all instances of this component (while component definition keeps Define template part)</li><li>Automatically update template part settings on all instances when you change and update the component definition</li></ul>",e.is("[data-pgc-define]")?pinegrow.showNotice(p,"About linking template parts with components","wp-link-with-component",function(e){}):pinegrow.showAlert(p,"Add Define component action"),p=pinegrow.findFrameworkByKey("pg.components"))&&e&&(c=p.getFieldDefinitionStringForEditableAttribute(e.getAttr("data-pgc-edit"),"wp-include-template-part-set","part"),e.setAttr("data-pgc-edit",c),p.setHasUpdates(!0))}}}}},n.addComponentType(l),e.push(l),l.doNotAllowApplyRenderedCode="Importing WordPress HTML would overwrite the template part definition.",i.list.push(function(e){var t,a,o,r;if(e.hasAttr(l.attribute))return t=e.getAttr("wp-template-part-slug"),a=e.getAttr("wp-template-part-name"),o=e.hasAttr("wp-template-part-content"),t&&(r=e.document.pgwp_file_name||null,n.template_parts.push({pgel:e,slug:t,name:a,only_content:o,file_name:r}),n.wpInsight.addTemplatePart(t+(a?"-"+a:""))),n.willOtherActionReplaceElement(e,l)?e.wp_detach_on_remove=!0:i.addToChanges(function(e){e.detach()},this,[e]),!1}),l.meta={tags:[n.tag_ret_part],helptext:"Define a template part. The element and/or its content will be saved as a template part. Use Include template part to include it.",helplink:"https://developer.wordpress.org/themes/template-files-section/partial-and-miscellaneous-template-files/",extra_name:"save a template part"},l.not_placeable="Add this action to an existing element to define a template part.",e},pgWordpressParts_Part2=function(n,i){var e=[],o=new PgComponentType("wp_inc_template_part","Include template part"),a=(o.selector="[wp-include-template-part]",o.code="<div wp-include-template-part></div>",o.empty_placeholder=!0,o.attribute="wp-include-template-part",o.sections={parameters:{name:"Options",fields:{wp_include_template_part_slug:{type:"text",name:"Slug",action:"element_attribute",attribute:"wp-include-template-part-slug"},wp_include_template_part_name:{type:"text",name:"Name",action:"element_attribute",attribute:"wp-include-template-part-name"},wp_include_template_part_post_format_name:{type:"checkbox",name:"Use post format as name",action:"element_attribute",attribute:"wp-include-template-part-post-format-as-name",value:"true",empty_attribute:!0}}}},n.addComponentType(o),e.push(o),n.addHtmlOrNodeField(o),i.list.push(function(e){var t,a;if(e.hasAttr(o.attribute))return a=e.getAttr("wp-include-template-part-slug"),t=e.getAttr("wp-include-template-part-name"),t=e.hasAttr("wp-include-template-part-post-format-as-name")?", get_post_format()":t?", "+n.quoteParam(t):"",a="get_template_part( "+n.quoteParam(a)+t+" );",i.toPhpHtmlOrNode(e,a,o,!0),!1}),o.meta={tags:[n.tag_ret_part],helptext:"Replace the element with a template part.",helplink:"https://developer.wordpress.org/reference/functions/get_template_part/",extra_name:"get_template_part"},new PgComponentType("wp_get_sidebar","Get sidebar")),t=(a.selector="[wp-get-sidebar]",a.code='<div id="sidebar" role="complementary" wp-get-sidebar>    <ul>    <li>    <form role="search" method="get" class="search-form" action="#">    <label>    <span class="screen-reader-text">Search for:</span>    <input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:"/>    </label>    <input type="submit" class="search-submit" value="Search"/>    </form>    </li>    <li>    <p>You are currently browsing the archives for the Category One category.</p>    </li>    </ul>    <ul role="navigation">    <li class="pagenav">    <h2>Pages</h2>    <ul>    <li class="page_item page-item-2">    <a href="#">Sample Page</a>    </li>    </ul>    </li>    <li>    <h2>Archives</h2>    <ul>    <li>    <a href="#">March 2015</a>    </li>    <li>    <a href="#">January 2015</a>    </li>    </ul>    </li>    <li class="categories">    <h2>Categories</h2>    <ul>    <li class="cat-item cat-item-3 current-cat">    <a href="#" title="This is category one description.">Category One</a> (1)    </li>    <li class="cat-item cat-item-4">    <a href="#">Category Two</a> (1)    </li>    <li class="cat-item cat-item-1">    <a href="#">Uncategorized</a> (4)    </li>    </ul>    </li>    </ul>    <ul>    </ul>    </div>',a.attribute="wp-get-sidebar",a.sections={parameters:{name:"Options",fields:{wp_get_sidebar_name:{type:"text",name:"Name",action:"element_attribute",attribute:"wp-get-sidebar",attribute_keep_if_empty:!0}}}},n.addHtmlOrNodeField(a),n.addComponentType(a),e.push(a),i.list.push(function(e){var t;if(e.hasAttr(a.attribute))return t=n.quoteParam(e.getAttr(a.attribute)),i.toPhpHtmlOrNode(e,"get_sidebar("+(t?" "+t+" ":"")+");",a),!1}),a.meta={tags:[n.tag_ret_part],helptext:"Replace the element with sidebar.php. Use define template part to define sidebar.php.",helplink:"https://developer.wordpress.org/reference/functions/get_sidebar/",extra_name:"get_sidebar"},new PgComponentType("wp_get_search_form","Get search form")),r=(t.selector="[wp-get-search-form]",t.code='<form role="search" method="get" class="search-form" action="#" wp-get-search-form>    <label>    <span class="screen-reader-text">Search for:</span>    <input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:"/>    </label>    <input type="submit" class="search-submit" value="Search"/>    </form>',t.attribute="wp-get-search-form",n.addComponentType(t),e.push(t),n.addHtmlOrNodeField(t),i.list.push(function(e){if(e.hasAttr(t.attribute))return i.toPhpHtmlOrNode(e,"get_search_form( true );",t),!1}),t.meta={tags:[n.tag_ret_part],helptext:"Replace the element with a search form.",helplink:"https://developer.wordpress.org/reference/functions/get_search_form/",extra_name:"get_search_form"},n.addTag("wp-dynamic-sidebar","Dynamic sidebar",null,function(e){var t,a;if(e.hasAttr("wp-dynamic-sidebar"))return t=pgCreateNodeFromHtml("<?php if ( is_active_sidebar( "+n.quoteParam(e.getAttr("wp-dynamic-sidebar"))+" ) ) : ?>"),a=pgCreateNodeFromHtml("<?php endif; ?>"),i.addToChanges(function(e,t,a){t.insertBefore(e),a.insertAfter(e)},this,[e,t,a]),i.toPhpHtmlOrNode(e,"dynamic_sidebar("+i.getParams(r,e)+");",r)},{"wp-dynamic-sidebar":{type:"text",name:"Index or name",action:"element_attribute",placeholder:n.forExample("my_widget"),options:n.wpInsight.getSidebars,open_list_on_focus:!0}}).addMeta({tags:[n.tag_ret_part],helptext:"Display dynamic sidebar.",helplink:"http://codex.wordpress.org/Function_Reference/dynamic_sidebar",extra_name:"dynamic_sidebar"}).addCode('<div wp-dynamic-sidebar="my_widget_area">Dynamic sidebar comes here</div>')),s=(n.addHtmlOrNodeField(r,null,"content"),r.empty_placeholder=!0,e.push(r),n.addTag("wp-post-template","Define Post Template","Name#My Custom Template|req",function(e){"body"!=e.tagName&&"html"!=e.tagName||!e.hasAttr(s.attribute)||(n.post_template_name=e.getAttr(s.attribute),n.post_template_types=e.getAttr(s.attribute+"-types"))},{"wp-post-template-types":{type:"text",name:"Post types",action:"element_attribute",placeholder:n.forExample("post, page, product")}}).addMeta({tags:[n.tag_ret_part],helptext:"Define custom post or page template. Add this action to the HTML element on the top of the page.",helplink:"https://make.wordpress.org/core/2016/11/03/post-type-templates-in-4-7/"}).addNotPlaceable("Add this action to an existing top of the page element to set the Post Template header value.")),l=(s.on_can_add_action=function(e,t,a){return"html"==e.tagName||(pinegrow.showQuickMessage("<b>Wrong element!</b> Add Page template action on <b>the top HTML node of the page</b> in the tree.",5e3,!1,!0),!1)},e.push(s),n.addTag("wp-page-template","Define Page Template","Name#My Custom Page|req",function(e){"body"!=e.tagName&&"html"!=e.tagName||!e.hasAttr(l.attribute)||(n.page_template_name=e.getAttr(l.attribute),n.page_template_name_field=e.getAttr(l.attribute+"-field"))},{"wp-page-template-field":{type:"text",name:"Field name",action:"element_attribute",placeholder:n.defaultValue("Template Name")}}).addMeta({tags:[n.tag_ret_part],helptext:"Define custom page template. Add this action to the top of the page. Use the new Define Post Template action for more options.",helplink:"https://developer.wordpress.org/themes/template-files-section/page-template-files/"}).addNotPlaceable("Add this action to an existing top of the page element to set the Page Template header value.")),p=(l.on_can_add_action=function(e,t,a){return"html"==e.tagName||(pinegrow.showQuickMessage("<b>Wrong element!</b> Add Page template action on <b>the top HTML node of the page</b> in the tree.",5e3,!1,!0),!1)},e.push(l),n.addTag("wp-the-widget","The widget",{type:"select",name:"Widget",action:"element_attribute",attribute:"wp-the-widget",attribute_keep_if_empty:!0,show_empty:!0,options:[{key:"WP_Widget_Archives",name:"Archives"},{key:"WP_Widget_Calendar",name:"Calendar"},{key:"WP_Widget_Categories",name:"Categories"},{key:"WP_Widget_Links",name:"Links"},{key:"WP_Widget_Meta",name:"Meta"},{key:"WP_Widget_Pages",name:"Pages"},{key:"WP_Widget_Recent_Comments",name:"Recent comments"},{key:"WP_Widget_Recent_Posts",name:"Recent posts"},{key:"WP_Widget_RSS",name:"RSS"},{key:"WP_Widget_Search",name:"Search"},{key:"WP_Widget_Tag_Cloud",name:"Tag cloud"},{key:"WP_Widget_Text",name:"Text"},{key:"WP_Nav_Menu_Widget",name:"Nav menu"},{key:"custom",name:"custom"}],on_changed:function(e,t,a,o,r,n,i,s){p.hideShowFields(a,n,e,s)},on_fields_created:function(e,t,a,o,r,n){p.hideShowFields(a,r,e,n)}},null,{"wp-the-widget-custom":{type:"text",name:"Custom widget",action:"element_attribute",attribute:"wp-the-widget-custom",translate:!1,show_for:["custom"]},"wp-the-widget-title":{type:"text",name:"Title",action:"element_attribute",attribute:"wp-the-widget-title",parameter_name:"title",translate:!0,show_for:["WP_Widget_Archives","WP_Widget_Calendar","WP_Widget_Categories","WP_Widget_Meta","WP_Widget_Pages","WP_Widget_Recent_Comments","WP_Widget_Recent_Posts","WP_Widget_RSS","WP_Widget_Search","WP_Widget_Text"]},"wp-the-widget-count":{type:"checkbox",name:"Count",action:"element_attribute",attribute:"wp-the-widget-count",value:"true",negvalue:"false",default_value:"false",parameter_name:"count",show_for:["WP_Widget_Archives","WP_Widget_Categories"]},"wp-the-widget-hierarchical":{type:"checkbox",name:"Hierarchical",action:"element_attribute",attribute:"wp-the-widget-hierarchical",value:"true",negvalue:"false",default_value:"false",parameter_name:"hierarchical",show_for:["WP_Widget_Categories"]},"wp-the-widget-dropdown":{type:"checkbox",name:"Dropdown",action:"element_attribute",attribute:"wp-the-widget-dropdown",value:"true",negvalue:"false",default_value:"false",parameter_name:"dropdown",show_for:["WP_Widget_Archives","WP_Widget_Categories"]},"wp-the-widget-category":{type:"text",name:"Category",action:"element_attribute",attribute:"wp-the-widget-category",parameter_name:"category",translate:!1,show_for:["WP_Widget_Links"]},"wp-the-widget-description":{type:"checkbox",name:"Description",action:"element_attribute",attribute:"wp-the-widget-description",value:"true",negvalue:"false",default_value:"false",parameter_name:"description",show_for:["WP_Widget_Links"]},"wp-the-widget-rating":{type:"checkbox",name:"Rating",action:"element_attribute",attribute:"wp-the-widget-rating",value:"true",negvalue:"false",default_value:"false",parameter_name:"rating",show_for:["WP_Widget_Links"]},"wp-the-widget-images":{type:"checkbox",name:"Images",action:"element_attribute",attribute:"wp-the-widget-images",value:"true",negvalue:"false",default_value:"true",parameter_name:"images",show_for:["WP_Widget_Links"]},"wp-the-widget-name":{type:"checkbox",name:"Name",action:"element_attribute",attribute:"wp-the-widget-name",value:"true",negvalue:"false",default_value:"false",parameter_name:"name",show_for:["WP_Widget_Links"]},"wp-the-widget-sortby":{type:"text",name:"Sort by",action:"element_attribute",attribute:"wp-the-widget-sortby",parameter_name:"sortby",translate:!1,show_for:["WP_Widget_Pages"]},"wp-the-widget-exclude":{type:"text",name:"Exclude",action:"element_attribute",attribute:"wp-the-widget-exclude",parameter_name:"exclude",translate:!1,show_for:["WP_Widget_Pages"]},"wp-the-widget-number":{type:"text",name:"Number",action:"element_attribute",attribute:"wp-the-widget-number",parameter_name:"number",translate:!1,show_for:["WP_Widget_Recent_Comments","WP_Widget_Recent_Posts"]},"wp-the-widget-url":{type:"text",name:"Url",action:"element_attribute",attribute:"wp-the-widget-url",parameter_name:"url",translate:!1,show_for:["WP_Widget_RSS"]},"wp-the-widget-items":{type:"text",name:"Items",action:"element_attribute",attribute:"wp-the-widget-items",parameter_name:"items",translate:!1,show_for:["WP_Widget_RSS"]},"wp-the-widget-show-summary":{type:"checkbox",name:"Show summary",action:"element_attribute",attribute:"wp-the-widget-show-summary",value:"true",negvalue:"false",default_value:"false",parameter_name:"show_summary",show_for:["WP_Widget_RSS"]},"wp-the-widget-show-author":{type:"checkbox",name:"Show author",action:"element_attribute",attribute:"wp-the-widget-show-author",value:"true",negvalue:"false",default_value:"false",parameter_name:"show_author",show_for:["WP_Widget_RSS"]},"wp-the-widget-show-date":{type:"checkbox",name:"Show date",action:"element_attribute",attribute:"wp-the-widget-show-date",value:"true",negvalue:"false",default_value:"false",parameter_name:"show_date",show_for:["WP_Widget_RSS"]},"wp-the-widget-taxonomy":{type:"text",name:"Taxonomy",action:"element_attribute",attribute:"wp-the-widget-taxonomy",parameter_name:"taxonomy",translate:!1,options:n.wpInsight.getTaxonomies,open_list_on_focus:!0,show_for:["WP_Widget_Tag_Cloud"]},"wp-the-widget-text":{type:"text",name:"Text",action:"element_attribute",attribute:"wp-the-widget-text",parameter_name:"text",translate:!0,show_for:["WP_Widget_Text"]},"wp-the-widget-filter":{type:"text",name:"Filter",action:"element_attribute",attribute:"wp-the-widget-filter",parameter_name:"filter",translate:!1,show_for:["WP_Widget_Text"]},"wp-the-widget-custom-args":{type:"text",name:"Custom widget parameter string",action:"element_attribute",attribute:"wp-the-widget-custom-args",translate:!1,show_for:["custom"]},"wp-the-widget-before-widget":{type:"text",name:"Before widget",action:"element_attribute",attribute:"wp-the-widget-before-widget",widget_parameter_name:"before_widget",placeholder:n.defaultValue('<div class="widget {widget\'s classname}">')},"wp-the-widget-after-widget":{type:"text",name:"After widget",action:"element_attribute",attribute:"wp-the-widget-after-widget",widget_parameter_name:"after_widget",placeholder:n.defaultValue("</div>")},"wp-the-widget-before-title":{type:"text",name:"Before title",action:"element_attribute",attribute:"wp-the-widget-before-title",widget_parameter_name:"before_title",placeholder:n.defaultValue('<h2 class="widgettitle">')},"wp-the-widget-after-title":{type:"text",name:"After title",action:"element_attribute",attribute:"wp-the-widget-after-title",widget_parameter_name:"after_title",placeholder:n.defaultValue("</h2>")}}));return p.hideShowFields=function(o,e,t,a){var r=e.parent(),n=p.sections["wp-the-widget_parameters"].fields;$.each(n,function(e,t){var a;t.show_for&&(a=r.find(".crsa-field-"+e),o&&0<=t.show_for.indexOf(o)?a.show():a.hide())})},p.addCode("<div wp-the-widget></div>").empty_placeholder=!0,i.list.push(function(e){if(e.hasAttr(p.attribute)){var t,a,o,r=e.getAttr("wp-the-widget");if(r&&(a=t="null",t="custom"!=r?(o=p.sections["wp-the-widget_parameters"].fields,$.each(o,function(e,t){t.show_for&&(0<=t.show_for.indexOf(r)?t.active_parameter_name=t.parameter_name:t.active_parameter_name=null)}),i.getNamedParams(p,e,null,"active_parameter_name")):(r=e.getAttr("wp-the-widget-custom"),n.quoteParam(e.getAttr("wp-the-widget-custom-args")))),r)return a=i.getNamedParams(p,e,null,"widget_parameter_name"),(o=[]).push(n.quoteParam(r)),o.push(t="array()"!=t&&t?t:"null"),o.push(a="array()"!=a&&a?a:"null"),i.toPhpHtmlOrNode(e,"the_widget("+n.buildParamList(o)+");",p)}return!1}),n.addHtmlOrNodeField(p),p.addMeta({tags:[n.tag_ret_html,n.tag_t_comment],helptext:"Display a widget.",helplink:"https://codex.wordpress.org/Function_Reference/the_widget",extra_name:"the_widget"}),e.push(p),e},pgWordpressCode=function(n,i){var s=[];function e(e,a,t){var o={},r=(o["wp-call-function"+a]={type:"text",name:"Function with params",textarea:!0,action:"element_attribute",placeholder:n.forExample("my_func()"),validate:function(e,t,a,o,r,n){return a?0<=a.indexOf("<?")||0<=a.indexOf("?>")?"Should not contain &lt;?php&gt; tags.":null:pinegrow.getValidationError(o.name,"req")}},o["wp-call-function-echo"+a]={type:"checkbox",name:"Echo",action:"element_attribute",value:"true",negvalue:"false",default_value:"false"},n.addTag("wp-call-function"+a,e,null,function(e){if(e.hasAttr("wp-call-function"+a)){var t=e.getAttr("wp-call-function"+a);if(t)return e.getAttr("wp-call-function-echo"+a)&&(t="echo "+t),i.toPhpHtmlOrNode(e,t,r)}},o).addMeta({tags:[],helptext:"Call a PHP function and replace element, content or attribute with the output. <b>Right-click</b> to insert a <b>PHP block</b>."}).addCode("<php>\n        //Press CMD+H to edit. Your PHP code comes here...\n    </php>"));n.addHtmlOrNodeField(r,!0,null,!0,!0,!0),!1!==t&&s.push(r)}e("PHP Code","");for(var t=1;t<=6;t++)e("PHP Code "+t,"-"+t);for(t=n.wpInnerFunctionsOffset;t<=n.wpInnerFunctionsOffset+n.wpInnerFunctionsCount;t++)e("PHP Code "+t,"-"+t,!1);s.push(n.addTag("wp-no-export","Don't export",null,null).addMeta({tags:[],helptext:"Don't export this element. It is just a placeholder used at design-time.",helplink:null,extra_name:null}).addNotPlaceable("Add this action to an existing element to prevent it being exported to the theme."));var a=new PgComponentType("wp_php","Php code"),a=(a.selector='script[type="php"],php',a.code='<script type="php">Vivamus ac dolor blandit<\/script>',n.addComponentType(a),i.list.push(function(e){var t;if("script"==e.tagName&&"php"==e.getAttr("type")||"php"==e.tagName)return t=e.content,n.getIndentForElement(e,1),i.toPhpNode(e,t),!0}),n.addTag("wp-remove-class","Remove classes",null,function(e){},{"wp-remove-class":{type:"text",name:"Classes",action:"element_attribute",fill_list_on_open:!0,open_list_on_focus:!0,options:n.wpGetElementClassesOptions,placeholder:n.forExample("red blue")}}).addMeta({tags:[n.tag_ret_string,n.tag_use_post],helptext:"Remove classes from the element when it is exported."}).addNotPlaceable("Add this action to an existing element to remove one or more classes from the element.")),a=(s.push(a),n.addTag("wp-change-tag","Change tag name",null,function(o){var r,e,t=o.getAttribute("wp-change-tag");t&&(r=o.getAttribute("wp-change-tag-attrs"),e="true"===o.getAttribute("wp-change-tag-remove-children"),i.addToChanges(function(){o=o.replaceTag(t),r&&(r=r.split(",").map(function(e){return e.trim()}),o.getAttrList().slice(0).forEach(function(e){for(var t=!1,a=0;a<r.length;a++)if(r[a].endsWith("*")){if(e.name.startsWith(r[a].substr(0,r[a].length-1))){t=!0;break}}else if(e.name===r[a]){t=!0;break}t||o.removeAttribute(e.name)})),e&&o.removeAllChildren()},this,[]))},{"wp-change-tag":{type:"text",name:"Tag name",action:"element_attribute",placeholder:n.forExample("div")},"wp-change-tag-attrs":{type:"text",name:"Keep attributes",action:"element_attribute",placeholder:n.forExample("class,style,aria*"),helptext:`<p>A comma separated list of attributes to keep on the element. Use prefix-* to filter all attributes that start with a string. Other attributes are removed. By default all attributes are kept.</p>`},"wp-change-tag-remove-children":{type:"checkbox",name:"Remove children",action:"element_attribute",value:"true",helptext:`<p>Check to remove children of the element.</p>`}}).addMeta({tags:[n.tag_ret_string,n.tag_use_post],helptext:"Change tag name of the element, optionally remove children and filter attributes."}).addNotPlaceable("Add this action to an existing element."));return s.push(a),s.push(n.addTag("wp-hide","Hide in Pinegrow",null,null).addMeta({tags:[],helptext:"Don't show this element at design-time. The element <b>will be exported</b> to the theme.",helplink:null,extra_name:null}).addNotPlaceable("Add this action to an existing element to hide it during editing in Pinegrow.")),s.push(n.addTag("wp-preview","Just a preview element","Added by",null).addMeta({tags:[],helptext:"This is just a temporary element rendered by Import WordPress HTML function. It will not be exported to the theme. <b>Don't add this action to elements</b>, it is used by Pinegrow automatically. <b>Don't edit this element</b> because it will be removed the next time you import WordPress HTML to the preceeding element.",helplink:null,extra_name:null}).addNotPlaceable("Don't add this action to elements. It is used by Pinegrow to mark temporary elements that were added as a result of Import WordPress HTML.")),s},pgWordpressPost=function(m,d){function e(a,e){var t={},o=(t["wp-meta-value-key"+a]={type:"text",name:"Key",attribute:"wp-meta-value-key"+a,action:"element_attribute",validate:m.required},t["wp-meta-value-single"+a]={type:"hidden",name:"Single",value:"true",action:"element_attribute"},m.addTag("wp-meta-value"+a,"Display meta value"+(1<e?` `+e:""),"Post id##current post",function(e){if(e.hasAttr(o.attribute))return e.getAttr("wp-meta-value"+"-key"+a),d.toPhpHtmlOrNode(e,"echo get_post_meta("+d.getParams(o,e,!1,function(e,t){return t=e=="wp-meta-value"+a?t||"get_the_ID()":t})+");",o)},t).addMeta({tags:[m.tag_ret_string,m.tag_use_post],helptext:"Display a single meta value of a post.",helplink:"https://developer.wordpress.org/reference/functions/get_post_meta/",extra_name:"get_post_meta"}).addCode(`<span wp-meta-value${a}>Meta field value</span>`));m.addHtmlOrNodeField(o,!0,"content",!0,!0,!0),r.push(o)}var r=[],o=(r.push(m.addTag("wp-post-class","Post class","Additional classes",function(e){var t,a,o;e.hasAttr("wp-post-class")&&(t=!1,a="",o=e.getAttr("wp-post-class")||"",d.addToChanges(function(){e.hasAttr("class")&&(0<=(a=m.filterClasses(e.getAttr("class"))).indexOf("<")?(t=!0,a+=" "):o=(o?o+" ":"")+a),t?e.setAttr("class",a+`<?php echo join( ' ', get_post_class( ${m.quoteParam(o)} ) ) ?>`):(e.removeAttr("class"),e.setAttr("<?php post_class("+(o?" "+m.quoteParam(o)+" ":"")+"); ?>"))},this,[],"end"))}).addMeta({tags:[m.tag_ret_string,m.tag_set_attr,m.tag_set_attr_class,m.tag_use_article],helptext:"Sets post classes to the element.# Auto-adds existing classes to the Additional classes parameter.",helplink:"https://codex.wordpress.org/Function_Reference/post_class",extra_name:"post_class"}).addNotPlaceable("Place this action on an existing element to set it's WordPress post class.")),r.push(m.addTag("wp-the-title","The title","Before","the_title",{"wp-the-title-after":{type:"text",name:"After",action:"element_attribute"}},!1,null,"content").addMeta({tags:[m.tag_ret_html,m.tag_set_element,m.tag_set_content,m.tag_use_article],helptext:"Display the title of the post.",helplink:"https://codex.wordpress.org/Function_Reference/the_title",extra_name:"the_title"}).addCode('<h1 class="entry-title" wp-the-title wp-the-title-set="content">Another great post</h1>')),m.addTag("wp-the-title-attribute","The title attribute",{type:"text",name:"Attribute to set",action:"element_attribute",attribute:"wp-the-title-attribute",attribute_keep_if_empty:!0,placeholder:m.forExample("title"),validate:function(e,t,a,o,r,n){return a?null:pinegrow.getValidationError(o.name,"req")}},function(e){var t,a;e.hasAttr("wp-the-title-attribute")&&(t=e.getAttr("wp-the-title-attribute")||"title")&&(a="<?php the_title_attribute("+d.getNamedParams(o,e)+"); ?>",e.setAttr(t,a))},{"wp-the-title-attribute-before":{type:"text",name:"Before",action:"element_attribute",parameter_name:"before"},"wp-the-title-attribute-after":{type:"text",name:"After",action:"element_attribute",parameter_name:"after"},"wp-the-title-attribute-echo":{type:"hidden",name:"Echo",default_value:"true",action:"element_attribute",parameter_name:"echo"},"wp-the-title-attribute-post":{type:"text",name:"Post",action:"element_attribute",parameter_name:"post"}})),t=(r.push(o.addMeta({tags:[m.tag_ret_string,m.tag_set_attr,m.tag_use_article],helptext:"Set the title of the post to an attribute.",helplink:"https://codex.wordpress.org/Function_Reference/the_title_attribute",extra_name:"the_title_attribute"}).addNotPlaceable("Add this action to an existing element to set the title of the post to it's attribute.")),new PgComponentType("wp_pg_the_category","The category")),a=(t.selector="[wp-the-category]",t.attribute="wp-the-category",t.code='<ul class="post-categories" wp-the-category>    <li>    <a href="#" rel="category tag">Uncategorized</a>    </li>    <li>    <a href="#" rel="category tag">Category One</a>    </li>    <li>    <a href="#" rel="category tag">Category Two</a>    </li>    </ul>',t.sections={parameters:{name:"Options",fields:{"wp-the-category":{type:"text",name:"Separator",action:"element_attribute",attribute:"wp-the-category",attribute_keep_if_empty:!0,parameter_order:1},"wp-the-category-parent-links":{type:"select",name:"Parent links",action:"element_attribute",attribute:"wp-the-category-parent-links",show_empty:!0,options:[{key:"multiple",name:"Multiple"},{key:"single",name:"Single"}],parameter_order:2},"wp-the-category-post":{type:"text",name:"Post ID",action:"element_attribute",attribute:"wp-the-category-post",parameter_order:3}}}},m.addComponentType(t),m.addHtmlOrNodeField(t),r.push(t),d.list.push(function(e){e.hasAttr(t.attribute)&&d.toPhpHtmlOrNode(e,"the_category("+d.getParams(t,e)+");",t)}),t.meta={tags:[m.tag_ret_html,m.tag_set_element,m.tag_use_loop,m.tag_t_post],helptext:"The list of categories for the post.",helplink:"https://codex.wordpress.org/Function_Reference/the_category",extra_name:"the_category"},new PgComponentType("wp_pg_the_content","The content")),n=(a.selector="[wp-the-content]",a.attribute="wp-the-content",a.code='<div class="entry-content" wp-the-content><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis tincidunt imperdiet sem, at semper dui blandit et. Mauris pretium mattis nunc non ornare. Vestibulum placerat a ante suscipit bibendum.</p><img class="alignnone size-medium" src="$IMAGE_URL" width="300" /><p>Maecenas feugiat ut eros id molestie. Sed leo augue, lobortis interdum mollis at, accumsan a metus. Ut orci enim, vehicula eget fringilla sed, gravida vel arcu.</p></div>',a.sections={parameters:{name:"Options",fields:{"wp-the-content":{type:"text",name:"More link text",action:"element_attribute",attribute:"wp-the-content",attribute_keep_if_empty:!0,parameter_order:1,translate:!0},"wp-the-content-strip-teaser":{type:"checkbox",name:"Stripteaser",action:"element_attribute",value:"true",negvalue:"false",default_value:"false",attribute:"wp-the-content-strip-teaser",parameter_order:2}}}},m.addHtmlOrNodeField(a),m.addComponentType(a),r.push(a),d.list.push(function(e){if(e.hasAttr(a.attribute))return d.toPhpHtmlOrNode(e,"the_content("+d.getParams(a,e)+");",a)}),a.meta={tags:[m.tag_ret_html,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"The content of the post.",helplink:"https://developer.wordpress.org/reference/functions/the_content/",extra_name:"the_content"},new PgComponentType("wp_pg_the_excerpt","The excerpt")),i=(n.selector="[wp-the-excerpt]",n.attribute="wp-the-excerpt",n.code="<p wp-the-excerpt>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis tincidunt imperdiet sem, at semper dui blandit et. Mauris pretium mattis nunc non ornare.</p>",m.addComponentType(n),r.push(n),m.addHtmlOrNodeField(n),d.list.push(function(e){var t;if(e.hasAttr(n.attribute))return t=null,t="the_excerpt("+d.getParams(n,e)+" );",d.toPhpHtmlOrNode(e,t,n)}),m.addHtmlOrNodeField(n,!1,null,!0),n.meta={tags:[m.tag_ret_html,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"The excerpt of the post.",helplink:"https://developer.wordpress.org/reference/functions/the_excerpt/",extra_name:"the_excerpt"},new PgComponentType("wp_pg_get_the_excerpt","The excerpt content")),s=(i.selector="[wp-get-the-excerpt]",i.attribute="wp-get-the-excerpt",i.code="<p wp-get-the-excerpt>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis tincidunt imperdiet sem, at semper dui blandit et. Mauris pretium mattis nunc non ornare.</p>",m.addComponentType(i),r.push(i),m.addHtmlOrNodeField(i),d.list.push(function(e){if(e.hasAttr(i.attribute))return d.toPhpHtmlOrNode(e,`echo get_the_excerpt(${d.getParams(i,e)});`,i)}),m.addHtmlOrNodeField(i,!1,"content",!0),i.meta={tags:[m.tag_ret_html,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display the content of the excerpt of the post.",helplink:"https://developer.wordpress.org/reference/functions/get_the_excerpt/",extra_name:"get_the_excerpt"},m.addTag("wp-the-post-thumbnail","The post thumbnail","Size#large or array(128,128)",function(e){var t,a,o,r;if(e.hasAttr("wp-the-post-thumbnail"))return t=[],a=e.getAttr("wp-the-post-id"),t.push(m.quoteParam(a)),t.push(m.quoteParam(e.getAttr("wp-the-post-thumbnail"))||"null"),""==t[t.length-1]&&(t[t.length-1]="null"),o=null,"img"===e.tagName&&(o=m.wpGetAttributesFromImageTemplate(e)),t.push(d.getNamedParams(s,e,function(e,t,a){return"class"==t?a=a||e.getAttr("class"):"sizes"==t&&a&&a.indexOf("$")<0&&(a=m.quoteParam(a,null,!0)),a},null,null,o,!0)),"array()"==t[t.length-1]&&(t[t.length-1]="null"),o=`get_the_post_thumbnail(${m.buildParamList(t)})`,o=`echo ${o=m.wpAddRemoveSizeAttributesCodeToImage(e,o)};`,a&&m.quoteParam(a),r=null,e.getAttr("wp-the-post-thumbnail-use-default-header")&&(r=`'<img src="'.get_header_image().'" alt="'.get_bloginfo( "title" ).'" />'`),o=`echo PG_Image::getPostImage( ${m.quoteParam(a)}, ${m.quoteParam(e.getAttr("wp-the-post-thumbnail")||"large")}, ${t[2]}, ${m.quoteParam(m.wpAddRemoveSizeAttributesCodeToImage(e,"",!0))}, ${m.quoteParam(r)} )`,d.toPhpHtmlOrNode(e,o,s)},{"wp-the-post-thumbnail-attr-src":{type:"text",name:"Src attribute",action:"element_attribute",parameter_name:"src"},"wp-the-post-thumbnail-attr-class":{type:"text",name:"Class attribute",action:"element_attribute",parameter_name:"class",placeholder:m.defaultValue("classes of this element")},"wp-the-post-thumbnail-attr-alt":{type:"text",name:"Alt attribute",action:"element_attribute",parameter_name:"alt",translate:!0},"wp-the-post-id":{type:"text",name:"Post id",action:"element_attribute",attribute:"wp-the-post-id",ignore_parameter:!0},"wp-the-post-thumbnail-if":{type:"checkbox",name:"Add has thumb check",action:"element_attribute",attribute:"wp-the-post-thumbnail-if",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0},"wp-the-post-thumbnail-use-default-header":{type:"checkbox",name:"Use blog header image as default",action:"element_attribute",attribute:"wp-the-post-thumbnail-use-default-header",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0},"wp-the-post-thumbnail-sizes":{type:"text",name:"Responsive sizes",placeholder:m.forExample("max-width(1200px) 100vw, 1200px"),parameter_name:"sizes",action:"element_attribute"},"wp-the-post-thumbnail-sizes-button":{type:"button",name:"Guess sizes",func:function(t){t.getPage().activeView.calculateImageResponsiveSizes(t,function(e){e.length&&(pinegrow.makeChanges(t,"Guess sizes",function(){t.setAttr("wp-the-post-thumbnail-sizes",e.join(", "))}),pinegrow.selectedElements.reselect())})}}})),h=(m.addHtmlOrNodeField(s),s.addMeta({tags:[m.tag_ret_image,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display the featured image of the post.",helplink:"https://developer.wordpress.org/reference/functions/the_post_thumbnail/",extra_name:"the_post_thumbnail"}),s.addCode('<img width="300" src="$IMAGE_URL" class="attachment-post-thumbnail wp-post-image" wp-the-post-thumbnail/>'),r.push(s),m.addTag("wp-featured-bck","Featured image bck","Post id##current post",function(e){if(e.hasAttr(h.attribute)){var t=pinegrow.getFormatHtmlOptions(),a=e.getNestingLevel(),o="\n"+pinegrow.getHtmlIndentForLevel(a,t),r=e.getAttr("wp-featured-bck-size-use-default-header"),n=(r||(o=" "),"wp_get_attachment_image_src("+d.getParams(h,e,!1,function(e,t){if("wp-featured-bck"==e){if(!t)return`PG_Image::isPostImage() ? get_the_ID() : get_post_thumbnail_id( get_the_ID() )`;t="get_post_thumbnail_id( "+m.quoteParam(t)+" )"}return t})+")"),n=e.getAttribute(h.attribute)?"<?php"+o+"$image_attributes = "+n+";":"<?php"+o+"$image_attributes = !empty( get_the_ID() ) ? "+n+" : null;",o=(r&&(n+=o+"if( !$image_attributes  && ( $header_image = get_header_image() ) ) $image_attributes = array( $header_image );"),n+=(r?"\n"+pinegrow.getHtmlIndentForLevel(a-1,t):" ")+"?>",e.getAttr("style")||""),r=(o.length&&!o.endsWith(";")&&(o+=";"),e.setAttr("style",o+"<?php if($image_attributes) echo 'background-image:url(\\''.$image_attributes[0].'\\')' ?>"),e.getAttribute(h.attribute+"-class"));if(r){for(var i=e,s=`<?php if($image_attributes) echo '${r}'; ?>`,l=`($image_attributes ? ' ${r}' : '')`,p=i.getAttrList(),c=!1,u=0;u<p.length;u++)if(p[u].name.startsWith("<?php post_class(")){c=!0,p[u].name=p[u].name.replace("' )","'."+l+" )");break}c||i.addClass(s)}d.addToChanges(function(e,t){pgCreateNodeFromHtml(t).insertBefore(e)},this,[e,n])}},{"wp-featured-bck-size":{type:"text",name:"Size",action:"element_attribute",placeholder:m.forExample("large, array(128,128)"),options:m.wpInsight.getImageSizes,open_list_on_focus:!0},"wp-featured-bck-size-use-default-header":{type:"checkbox",name:"Use blog header image as default",action:"element_attribute",attribute:"wp-featured-bck-size-use-default-header",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0},"wp-featured-bck-class":{type:"text",name:"Add class if has image",action:"element_attribute",placeholder:m.forExample("with-image"),ignore_parameter:!0}})),l=(r.push(h),h.meta={tags:[m.tag_ret_image,m.tag_set_element,m.tag_set_content,m.tag_t_post,m.tag_use_image],helptext:"Set featured (thumbnail) image as a background-image of the element.",helplink:"https://developer.wordpress.org/reference/functions/wp_get_attachment_image_src/",extra_name:"wp_get_attachment_image_src"},h.applyRenderedCode=function(e,t,a){var o=t[0].getAttr("style");return o&&e.setAttr("style",o),null},h.addCode("<div wp-featured-bck style=\"background-image:url('$IMAGE_URL');\"><p><br>This element<br>has the featured image<br>set as its background.<br></p></div>"),r.push(m.addTag("wp-the-id","The id",{type:"text",name:"Prefix",action:"element_attribute",attribute:"wp-the-id",attribute_keep_if_empty:!0,placeholder:m.forExample("post")},function(e){var t;e.hasAttr("wp-the-id")&&((t=e.getAttr("wp-the-id")||"post")&&(t+="-"),e.setAttr("id",t+"<?php the_ID(); ?>"))}).addMeta({tags:[m.tag_ret_string,m.tag_set_attr,m.tag_use_article],helptext:"Set the post id to the id of the element.",helplink:"https://codex.wordpress.org/Function_Reference/the_ID",extra_name:"the_ID"}).addNotPlaceable("Add this action to an existing element to set it's WordPress id attribute.")),r.push(m.addTag("wp-the-meta","The meta",null,"the_meta").addMeta({tags:[m.tag_ret_html,m.tag_set_element,m.tag_set_content,m.tag_use_article],helptext:"Display custom fields for the post in ul.",helplink:"https://codex.wordpress.org/Function_Reference/the_meta",extra_name:"the_meta"}).addCode('<ul class="post-meta" wp-the-meta><li><span class="post-meta-key">Custom field 1:</span> Value of the custom field 1. </li><li><span class="post-meta-key">Custom field 2:</span> Value of the custom field 2.</li></ul>')),e("",1),e("-2",2),e("-3",3),e("-4",4),e("-5",5),m.addTag("wp-meta-value-attr","Set meta value to attr","Post id##current post",function(e){var t,a;e.hasAttr("wp-meta-value-attr")&&(t=e.getAttr("wp-meta-value-attr-attribute"))&&(a="<?php echo get_post_meta("+d.getParams(l,e,!1,function(e,t){return t="wp-meta-value-attr"==e?t||"get_the_ID()":t})+"); ?>",e.setAttr(t,a))},{"wp-meta-value-attr-key":{type:"text",name:"Key",attribute:"wp-meta-value-attr-key",action:"element_attribute",validate:m.required},"wp-meta-value-attr-single":{type:"hidden",name:"Single",value:"true",action:"element_attribute"},"wp-meta-value-attr-attribute":{type:"text",name:"Attribute",action:"element_attribute",placeholder:m.forExample("href"),validate:function(e,t,a,o,r,n){return a?null:pinegrow.getValidationError(o.name,"req")},ignore_parameter:!0}}).addMeta({tags:[m.tag_ret_string,m.tag_use_post],helptext:"Set an attribute to a single meta value of a post.",helplink:"https://developer.wordpress.org/reference/functions/get_post_meta/",extra_name:"get_post_meta"}).addNotPlaceable("Add this action to an existing element to set field value to it's attribute.")),p=(r.push(l),r.push(m.addTag("wp-the-tags","The tags","Before","the_tags",{"wp-the-tags-sep":{type:"text",name:"Separator",action:"element_attribute"},"wp-the-tags-after":{type:"text",name:"After",action:"element_attribute"}}).addMeta({tags:[m.tag_ret_html,m.tag_set_element,m.tag_set_content,m.tag_use_article],helptext:"Display links to tags of the post.",helplink:"https://codex.wordpress.org/Function_Reference/the_tags",extra_name:"the_tags"}).addCode('<p wp-the-tags>Tags: <a href="#" rel="tag">tag1</a>, <a href="#" rel="tag">tag2</a>, <a href="#" rel="tag">tag3</a></p>')),m.addTag("wp-the-search-query","The search query HTML",null,function(e){e.hasAttr("wp-the-search-query")&&d.toPhpHtmlOrNode(e,"echo esc_html( get_search_query( false ) );",p)}).addMeta({tags:[m.tag_ret_html,m.tag_set_element,m.tag_set_content,m.tag_use_search],helptext:"Display the search query as HTML.",helplink:"https://developer.wordpress.org/reference/functions/get_search_query/",extra_name:"get_search_query"}).addCode("<span wp-the-search-query>The search query</span>")),c=(m.addHtmlOrNodeField(p),r.push(p),r.push(m.addTag("wp-the-search-query-attr","The search query attribute",{type:"text",name:"Attribute to set",action:"element_attribute",attribute:"wp-the-search-query-attr",attribute_keep_if_empty:!0,placeholder:m.forExample("value"),validate:function(e,t,a,o,r,n){return a?null:pinegrow.getValidationError(o.name,"req")}},function(e){var t;e.hasAttr("wp-the-search-query-attr")&&(t=e.getAttr("wp-the-search-query-attr")||"value")&&e.setAttr(t,"<?php the_search_query(); ?>")}).addMeta({tags:[m.tag_ret_string,m.tag_set_attr,m.tag_use_search],helptext:"Display the search query in attribute.",helplink:"https://developer.wordpress.org/reference/functions/the_search_query/",extra_name:"the_search_query"}).addNotPlaceable("Add this action to an existing element to set the search query to it's attribute.")),m.addTag("wp-the-date","The date","Format#F j, Y",function(e){var t,a,o;if(e.hasAttr("wp-the-date"))return"true"===e.getAttr("wp-the-date-show-same")?(t=m.quoteParam(e.getAttr("wp-the-date")||"get_option( 'date_format' )"),a=e.getAttr("wp-the-date-before"),o=e.getAttr("wp-the-date-after"),a=a?m.quoteParam(a)+" . ":"",o=o?" . "+m.quoteParam(o):"",d.toPhpHtmlOrNode(e,"echo "+a+"get_the_time( "+t+" )"+o,c)):d.toPhpHtmlOrNode(e,"the_date("+d.getParams(c,e)+");",c)},{"wp-the-date-before":{type:"text",name:"Before",action:"element_attribute",attribute:"wp-the-date-before"},"wp-the-date-after":{type:"text",name:"After",action:"element_attribute",attribute:"wp-the-date-after"}})),u=(c.sections.parameters.fields["wp-the-date-show-same"]={type:"checkbox",name:"Show same days",action:"element_attribute",attribute:"wp-the-date-show-same",value:"true",negvalue:"false",default_value:"false"},m.addHtmlOrNodeField(c),c.addMeta({tags:[m.tag_ret_string,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display the date of the current post. Supports showing same days.",helplink:"https://codex.wordpress.org/Function_Reference/the_date",extra_name:"the_date or the_time"}),c.addCode("<span wp-the-date>January 20, 2015</span>"),r.push(c),r.push(m.addTag("wp-get-the-date","Get the date","Date format#F j, Y","echo get_the_date",{"wp-the-date-post":{type:"text",name:"Post id",action:"element_attribute",placeholder:m.defaultValue("current post")}}).addMeta({tags:[m.tag_ret_string,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display the date of any post.",helplink:"https://developer.wordpress.org/reference/functions/get_the_date/",extra_name:"get_the_date"}).addCode("<span wp-get-the-date>January 20, 2015</span>")),r.push(m.addTag("wp-the-time","The time","Format#g:i a","the_time").addMeta({tags:[m.tag_ret_string,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display the time of the post.",helplink:"https://codex.wordpress.org/Function_Reference/the_time",extra_name:"the_time"}).addCode("<span wp-the-time>08:20 am</span>")),r.push(m.addTag("wp-the-modified-date","The modified date","Format#F j, Y","the_modified_date",{"wp-the-modified-date-before":{type:"text",name:"Before",action:"element_attribute"},"wp-the-modified-date-after":{type:"text",name:"After",action:"element_attribute"}}).addMeta({tags:[m.tag_ret_string,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display the date and time the post was modified.",helplink:"https://codex.wordpress.org/Function_Reference/the_modified_date",extra_name:"the_modified_date"}).addCode("<span wp-the-modified-date>January 20, 2015</span>")),r.push(m.addTag("wp-the-modified-time","The modified time","Format#g:i a","the_modified_time").addMeta({tags:[m.tag_ret_string,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display the modified date and time of the post.",helplink:"https://codex.wordpress.org/Function_Reference/the_modified_time",extra_name:"the_modified_time"}).addCode("<span wp-the-modified-time>08:20 am</span>")),r.push(m.addTag("wp-the-modified-author","The modified author",null,"the_modified_author").addMeta({tags:[m.tag_ret_string,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display the name of the last author who modified the post.",helplink:"https://codex.wordpress.org/Function_Reference/the_modified_author",extra_name:"the_modified_author"}).addCode("<span wp-the-modified-author>admin</span>")),r.push(m.addTag("wp-the-shortlink","The shortlink","Link text##This is the short link.","the_shortlink",{"wp-the-shortlink-title":{type:"text",name:"Title",action:"element_attribute",placeholder:m.defaultValue("post title"),translate:!0},"wp-the-shortlink-before":{type:"text",name:"Before",action:"element_attribute"},"wp-the-shortlink-after":{type:"text",name:"After",action:"element_attribute"}}).addMeta({tags:[m.tag_ret_html,m.tag_ret_link,m.tag_set_element,m.tag_set_content,m.tag_use_single,m.tag_t_post],helptext:"Display the short link for the post.",helplink:"https://codex.wordpress.org/Function_Reference/the_shortlink",extra_name:"the_shortlink"}).addCode('<a rel="shortlink" href="#" title="Another great post" wp-the-shortlink>This is the short link.</a>')),m.addTag("wp-get-shortlink","Get shortlink (set url)","Post id##current post",function(e){e.hasAttr("wp-get-shortlink")&&e.setAttr("href","<?php echo esc_url( wp_get_shortlink("+d.getParams(u,e)+")); ?>")},{"wp-get-shortlink-context":{type:"text",name:"Context",action:"element_attribute",placeholder:m.defaultValue("post")},"wp-get-shortlink-allow-slugs":{type:"checkbox",name:"Allow slugs",action:"element_attribute",value:"true",negvalue:"false",default_value:"true"}})),g=(r.push(u),u.addMeta({tags:[m.tag_ret_url,m.tag_set_attr,m.tag_t_post],helptext:"Sets href to the post shortlink.",helplink:"https://codex.wordpress.org/Function_Reference/wp_get_shortlink",extra_name:"wp_get_shortlink"}),u.addNotPlaceable("Add this action to an existing link to set the shortlink to the href attribute."),r.push(m.addTag("wp-next-image-link","Next image link","Image size#large or array(128,128)","next_image_link",{"wp-next-image-link-text":{type:"text",name:"Text",action:"element_attribute",attribute:"wp-next-image-link-text",translate:!0}}).addMeta({tags:[m.tag_ret_link,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display link to the next image attachment of the post.",helplink:"https://codex.wordpress.org/Function_Reference/next_image_link",extra_name:"next_image_link"}).addCode('<a href="#" wp-next-image-link><img width="150" height="150" src="$IMAGE_URL" class="attachment-thumbnail" /></a>')),r.push(m.addTag("wp-prev-image-link","Previous image link","Image size#large or array(128,128)","previous_image_link",{"wp-prev-image-link-text":{type:"text",name:"Text",action:"element_attribute",attribute:"wp-prev-image-link-text",translate:!0}}).addMeta({tags:[m.tag_ret_link,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display link to the previous image attachment of the post.",helplink:"https://codex.wordpress.org/Function_Reference/previous_image_link",extra_name:"prev_image_link"}).addCode('<a href="#" wp-next-image-link><img width="150" height="150" src="$IMAGE_URL" class="attachment-thumbnail" /></a>')),r.push(m.addTag("wp-next-post-link","Next post link","Format##%link &raquo;","next_post_link",{"wp-next-post-link-link":{type:"text",name:"Link text",action:"element_attribute",attribute:"wp-next-post-link-link",placeholder:m.defaultValue("%title"),translate:!0},"wp-next-post-link-in-same-term":{type:"checkbox",name:"Force delete",action:"element_attribute",value:"true",negvalue:"false",default_value:"false"},"wp-next-post-link-excluded-terms":{type:"text",name:"Excluded terms",action:"element_attribute"},"wp-next-post-link-taxonomy":{type:"text",name:"Taxonomy",action:"element_attribute",options:m.wpInsight.getTaxonomies,open_list_on_focus:!0,placeholder:m.defaultValue("category")}}).addMeta({tags:[m.tag_ret_link,m.tag_set_element,m.tag_set_content,m.tag_use_single,m.tag_t_post],helptext:"Display link to the next post.",helplink:"https://codex.wordpress.org/Function_Reference/next_post_link",extra_name:"next_post_link"}).addCode('<span wp-prev-next-link wp-next-post-link-set="content"><a href="#" rel="next">The title of the next post</a>&raquo;</span>')),r.push(m.addTag("wp-prev-post-link","Previous post link","Format##&laquo; %link","previous_post_link",{"wp-prev-post-link-link":{type:"text",name:"Link text",action:"element_attribute",attribute:"wp-prev-post-link-link",placeholder:m.defaultValue("%title"),translate:!0},"wp-prev-post-link-in-same-term":{type:"checkbox",name:"Force delete",action:"element_attribute",value:"true",negvalue:"false",default_value:"false"},"wp-prev-post-link-excluded-terms":{type:"text",name:"Excluded terms",action:"element_attribute"},"wp-prev-post-link-taxonomy":{type:"text",name:"Taxonomy",action:"element_attribute",options:m.wpInsight.getTaxonomies,open_list_on_focus:!0,placeholder:m.defaultValue("category")}}).addMeta({tags:[m.tag_ret_link,m.tag_set_element,m.tag_set_content,m.tag_use_single,m.tag_t_post],helptext:"Display link to the previous post.",helplink:"https://codex.wordpress.org/Function_Reference/previous_post_link",extra_name:"previous_post_link"}).addCode('<span wp-prev-post-link wp-prev-post-link-set="content">&laquo;<a href="#" rel="prev">The title of the previous post</a></span>')),r.push(m.addTag("wp-next-posts-link","Next posts link","Label##Next Page ","next_posts_link",{"wp-next-posts-link-max-pages":{type:"text",name:"Max pages",action:"element_attribute",attribute:"wp-next-posts-link-max-pages"}}).addMeta({tags:[m.tag_ret_link,m.tag_set_element,m.tag_set_content,m.tag_use_single,m.tag_t_post],helptext:"Display link to the next set of posts.",helplink:"https://codex.wordpress.org/Function_Reference/next_posts_link",extra_name:"next_posts_link"}).addCode('<a href="#" wp-next-posts-link>Next Page &raquo;</a>')),r.push(m.addTag("wp-prev-posts-link","Previous posts link","Label## Previous Page|trans","previous_posts_link").addMeta({tags:[m.tag_ret_link,m.tag_set_element,m.tag_set_content,m.tag_use_single,m.tag_t_post],helptext:"Display link to the previous set of posts.",helplink:"https://codex.wordpress.org/Function_Reference/previous_posts_link",extra_name:"previous_posts_link"}).addCode('<a href="#" wp-prev-posts-link>&laquo; Previous Page</a>')),r.push(m.addTag("wp-posts-nav-link","Posts nav links","Separator##  ","posts_nav_link",{"wp-posts-nav-link-prev-label":{type:"text",name:"Previous label",action:"element_attribute",placeholder:m.defaultValue(" Previous Page"),translate:!0},"wp-posts-nav-link-next-label":{type:"text",name:"Next label",action:"element_attribute",placeholder:m.defaultValue("Next Page "),translate:!0}}).addMeta({tags:[m.tag_ret_link,m.tag_set_element,m.tag_set_content,m.tag_use_single,m.tag_t_post],helptext:"Display links to next and previous pages.",helplink:"https://developer.wordpress.org/reference/functions/posts_nav_link/",extra_name:"posts_nav_link"}).addCode('<p wp-posts-nav-link wp-posts-nav-link-set="content"><a href="#" wp-prev-posts-link>&laquo; Previous Page</a> - <a href="#" wp-next-posts-link>Next Page &raquo;</a></p>')),new PgComponentType("wp_single_post_title","Single post title")),_=(g.selector="[wp-single-post-title]",g.code='<h1 wp-single-post-title wp-single-post-title-set="content">The Title of a Single Post</h1>',g.attribute="wp-single-post-title",g.sections={parameters:{name:"Options",fields:{wp_single_post_title_prefix:{type:"text",name:"Prefix",action:"element_attribute",attribute:"wp-single-post-title",attribute_keep_if_empty:!0,parameter_order:1}}}},m.addComponentType(g),r.push(g),m.addHtmlOrNodeField(g),d.list.push(function(e){if(e.hasAttr(g.attribute))return d.toPhpHtmlOrNode(e,"single_post_title("+d.getParams(g,e)+");",g)}),g.meta={tags:[m.tag_ret_string,m.tag_set_element,m.tag_set_content,m.tag_use_single,m.tag_t_post],helptext:"Display the post title on the single post page.",helplink:"https://codex.wordpress.org/Function_Reference/single_post_title",extra_name:"single_post_title"},m.addTag("wp-link-pages","Link pages",null,function(e){if(e.hasAttr("wp-link-pages"))return d.toPhpHtmlOrNode(e,"wp_link_pages( "+d.getNamedParams(_,e,function(e,t,a){return a})+" );",_)},{"wp-link-pages-before":{type:"text",name:"Before",action:"element_attribute",parameter_name:"before",placeholder:m.defaultValue("<p>Pages:")},"wp-link-pages-after":{type:"text",name:"Before",action:"element_attribute",parameter_name:"after",placeholder:m.defaultValue("</p>")},"wp-link-pages-link-before":{type:"text",name:"Link before",action:"element_attribute",parameter_name:"link_before"},"wp-link-pages-link-after":{type:"text",name:"Link after",action:"element_attribute",parameter_name:"link_after"},"wp-link-pages-next-or-number":{type:"select",name:"Next or number",action:"element_attribute",show_empty:!0,options:[{key:"number",name:"number"},{key:"next",name:"next"}],parameter_name:"next_or_number"},"wp-link-pages-separator":{type:"text",name:"Separator",action:"element_attribute",parameter_name:"separator"},"wp-link-pages-next-page-link":{type:"text",name:"Next page link",action:"element_attribute",parameter_name:"nextpagelink",placeholder:m.defaultValue("Next page"),translate:!0},"wp-link-pages-previous-page-link":{type:"text",name:"Previous page link",action:"element_attribute",parameter_name:"previouspagelink",placeholder:m.defaultValue("Previous page"),translate:!0},"wp-link-pages-page-link":{type:"text",name:"Page link",action:"element_attribute",parameter_name:"pagelink",placeholder:m.defaultValue("%")},"wp-link-pages-echo":{type:"checkbox",name:"Echo",action:"element_attribute",attribute:"wp-dropdown-categories-echo",value:"true",negvalue:"false",default_value:"true",parameter_name:"echo"}})),f=(r.push(_),m.addHtmlOrNodeField(_),_.meta={tags:[m.tag_ret_string,m.tag_set_element,m.tag_set_content,m.tag_t_post],helptext:"Display page-links for paginated posts.",helplink:"https://codex.wordpress.org/Function_Reference/wp_link_pages",extra_name:"wp_link_pages"},_.addCode("<div wp-link-pages>Links to pages in a paginated post</div>"),r.push(m.addTag("wp-attachment-link","Attachment link","Attachment id##current attachment","echo wp_get_attachment_link",{"wp-attachment-post-id":{type:"text",name:"Post id",help_text:"Will display post's featured image.",action:"element_attribute",placeholder:m.defaultValue("current post"),ignore_parameter:!0},"wp-attachment-link-size":{type:"text",name:"Size",action:"element_attribute",placeholder:m.defaultValue("thumbnail"),options:m.wpInsight.getImageSizes,open_list_on_focus:!0},"wp-attachment-link-permalink":{type:"checkbox",name:"Permalink",action:"element_attribute",value:"true",negvalue:"false",default_value:"false"},"wp-attachment-link-icon":{type:"checkbox",name:"Icon",action:"element_attribute",value:"true",negvalue:"false",default_value:"false"},"wp-attachment-link-text":{type:"text",name:"Text link",action:"element_attribute",translate:!0}}).addMeta({tags:[m.tag_ret_link,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display link to the attachment page.",helplink:"https://codex.wordpress.org/Function_Reference/wp_get_attachment_link",extra_name:"wp_get_attachment_link"}).addCode('<a href="#" wp-attachment-link><img width="150" src="$IMAGE_URL" class="attachment-thumbnail"></a>')),r.push(m.addTag("wp-the-attachment-link","Attachment link","Attachment id##current post","the_attachment_link",{"wp-the-attachment-link-fullsize":{type:"checkbox",name:"Fullsize",action:"element_attribute",value:"true",negvalue:"false",default_value:"false"},"wp-the-attachment-link-maxdims":{type:"hidden",name:"Text link",default_value:"null",action:"element_attribute"},"wp-the-attachment-link-permalink":{type:"checkbox",name:"Permalink",action:"element_attribute",value:"true",negvalue:"false",default_value:"false"}}).addMeta({tags:[m.tag_ret_link,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display link to the attachment page.",helplink:"https://codex.wordpress.org/Function_Reference/the_attachment_link",extra_name:"the_attachment_link"}).addCode('<a href="#" wp-the-attachment-link><img width="150" src="$IMAGE_URL" class="attachment-thumbnail"></a>')),m.addTag("wp-get-attachment-url","Attachment direct url","Attachment id##current attachment",function(e){var t;if(e.hasAttr(f.attribute))return t="echo wp_get_attachment_url("+d.getParams(f,e,!1,function(e,t){return t="wp-get-attachment-url"==e?t||"get_the_ID()":t})+");",d.toPhpHtmlOrNode(e,t,f)}).addMeta({tags:[m.tag_ret_url,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display or set href to the direct url to the attachment file.",helplink:"https://codex.wordpress.org/Function_Reference/wp_get_attachment_url",extra_name:"wp_get_attachment_url"}).addCode('<a wp-get-attachment-url href="#">Direct link to the file</a>')),w=(m.addHtmlOrNodeField(f,!0,"href"),r.push(f),m.addTag("wp-get-attachment-title","Attachment title","Attachment id##current attachment",function(e){var t;if(e.hasAttr(w.attribute))return t="echo get_the_title("+d.getParams(w,e,!1,function(e,t){return t=t||"get_the_ID()"})+");",d.toPhpHtmlOrNode(e,t,w)}).addMeta({tags:[m.tag_ret_url,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display title of the attachment.",helplink:"https://developer.wordpress.org/reference/functions/get_the_title/",extra_name:"get_the_title"}).addCode("<div wp-get-attachment-title>Attachment title</div>")),b=(m.addHtmlOrNodeField(w,!1,"content",!0),r.push(w),m.addTag("wp-get-attachment-caption","Attachment caption","Attachment id##current attachment",function(e){var t;if(e.hasAttr(b.attribute))return t="echo wp_get_attachment_caption("+d.getParams(b,e,!1,function(e,t){return t="wp-get-attachment-caption"===e?t||"get_the_ID()":t})+");",d.toPhpHtmlOrNode(e,t,b)}).addMeta({tags:[m.tag_ret_url,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display caption of the attachment.",helplink:"https://developer.wordpress.org/reference/functions/wp_get_attachment_caption/",extra_name:"wp_get_attachment_caption"}).addCode("<div wp-get-attachment-caption>Attachment caption</div>")),y=(m.addHtmlOrNodeField(b,!1,"content",!0),r.push(b),m.addTag("wp-get-attachment-desc","Attachment description","Attachment id##current attachment",function(e){var t;if(e.hasAttr(y.attribute))return t="echo get_the_content( null, false, "+d.getParams(y,e,!1,function(e,t){return t=t||"get_the_ID()"})+");",d.toPhpHtmlOrNode(e,t,y)}).addMeta({tags:[m.tag_ret_url,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display description of the attachment.",helplink:"https://developer.wordpress.org/reference/functions/get_the_content/",extra_name:"get_the_content"}).addCode("<div wp-get-attachment-desc>Attachment description</div>")),v=(m.addHtmlOrNodeField(y,!1,"content",!0),r.push(y),m.addTag("wp-get-attachment-alt","Attachment ALT text","Attachment id##current attachment",function(e){var t;if(e.hasAttr(v.attribute))return t="echo PG_Image::getAltText("+d.getParams(v,e,!1,function(e,t){return t=t||"get_the_ID()"})+");",d.toPhpHtmlOrNode(e,t,v)}).addMeta({tags:[m.tag_ret_url,m.tag_set_element,m.tag_set_content,m.tag_use_loop,m.tag_t_post],helptext:"Display ALT text of the attachment.",extra_name:"PG_Image::getAltText"}).addCode("<div wp-get-attachment-alt>Attachment ALT text</div>")),k=(m.addHtmlOrNodeField(v,!1,"content",!0),r.push(v),m.addTag("wp-attachment-image","Attachment image",null,function(e){var t,a,o,r;if(e.hasAttr("wp-attachment-image"))return t=[],a=e.getAttr("wp-attachment-image"),r=e.getAttr("wp-attachment-image-post-id"),(o=e.getAttr("wp-attachment-image-theme-mod"))&&(a="get_theme_mod( "+m.quoteParam(o)+" )"),!(a=(o=e.getAttr("wp-attachment-image-option"))?"get_option( "+m.quoteParam(o)+" )":a)&&r&&(a="get_post_thumbnail_id( "+m.quoteParam(r)+" )"),t.push(m.quoteParam(a=a||"get_the_ID()")),""==t[t.length-1]&&(t[t.length-1]="get_the_ID()"),t.push(m.quoteParam(e.getAttr("wp-attachment-image-size"))||"null"),""==t[t.length-1]&&(t[t.length-1]="null"),t.push(m.quoteParam(e.getAttr("wp-attachment-image-icon"),k.sections["wp-attachment-image_parameters"].fields["wp-attachment-image-icon"])||"false"),""==t[t.length-1]&&(t[t.length-1]="false"),o=null,"img"===e.tagName&&(o=m.wpGetAttributesFromImageTemplate(e)),t.push(d.getNamedParams(k,e,function(e,t,a){return a="class"==t?a||e.getAttr("class"):a},null,null,o,!0)),"array()"==t[t.length-1]&&(t[t.length-1]="null"),r="wp_get_attachment_image("+m.buildParamList(t)+")",r=m.wpAddRemoveSizeAttributesCodeToImage(e,r),d.toPhpHtmlOrNode(e,r=`echo ${r};`,k)},{"wp-attachment-image":{type:"text",name:"Attachment id",action:"element_attribute",placeholder:m.defaultValue("current attachment"),attribute_keep_if_empty:!0},"wp-attachment-image-post-id":{type:"text",name:"Post id",help_text:"Will display post's featured image.",action:"element_attribute",placeholder:"set to get featured image",ignore_parameter:!0},"wp-attachment-image-theme-mod":{type:"text",name:"Customizer theme mod",help_text:"Id of a customizer theme mod setting.",action:"element_attribute",placeholder:"Id of a customizer theme mod setting",ignore_parameter:!0},"wp-attachment-image-option":{type:"text",name:"Customizer option",help_text:"Id of a customizer option setting.",action:"element_attribute",placeholder:"Id of a customizer option setting",ignore_parameter:!0},"wp-attachment-image-size":{type:"text",name:"Size",action:"element_attribute",placeholder:m.forExample("thumbnail"),options:m.wpInsight.getImageSizes,open_list_on_focus:!0},"wp-attachment-image-icon":{type:"checkbox",name:"Icon",action:"element_attribute",value:"true",negvalue:"false",default_value:"false"},"wp-attachment-image-attr-src":{type:"text",name:"Src attribute",action:"element_attribute",parameter_name:"src"},"wp-attachment-image-attr-class":{type:"text",name:"Class attribute",action:"element_attribute",parameter_name:"class",placeholder:m.defaultValue("classes of this element")},"wp-attachment-image-attr-alt":{type:"text",name:"Alt attribute",action:"element_attribute",parameter_name:"alt",translate:!0}}).addMeta({tags:[m.tag_ret_image,m.tag_set_element,m.tag_set_content,m.tag_t_post],helptext:"Display attachment image.# Set Post id (leave Attachment id empty) to display post's featured image. Set Post id to <b>get_the_ID()</b> for current post.",helplink:"https://developer.wordpress.org/reference/functions/wp_get_attachment_image/",extra_name:"wp_get_attachment_image"}).addCode('<img width="150" src="$IMAGE_URL" class="attachment-thumbnail">')),x=(m.addHtmlOrNodeField(k),r.push(k),m.addTag("wp-attachment-src","Attachment image src","Attachment id##current attachment",function(o){var e;o.hasAttr(x.attribute)&&(e="<?php $image_attributes = wp_get_attachment_image_src("+d.getParams(x,o,!1,function(e,t){var a;return t="wp-attachment-src"==e&&!t&&(t=(a=o.getAttr("wp-attachment-src-post-id"))?"get_post_thumbnail_id( "+m.quoteParam(a)+" )":"get_the_ID()",(a=o.getAttr("wp-attachment-src-theme-mod"))&&(t="get_theme_mod( "+m.quoteParam(a)+" )"),a=o.getAttr("wp-attachment-src-option"))?"get_option( "+m.quoteParam(a)+" )":t})+");\n            if( $image_attributes ) : ?>",o.setAttr("src","<?php echo $image_attributes[0]; ?>"),o.setAttr("width","<?php echo $image_attributes[1]; ?>"),o.setAttr("height","<?php echo $image_attributes[2]; ?>"),d.addToChanges(function(e,t,a){pgCreateNodeFromHtml(t).insertBefore(e),pgCreateNodeFromHtml(a).insertAfter(e)},this,[o,e,"<?php endif; ?>"]))},{"wp-attachment-src-post-id":{type:"text",name:"Post id",help_text:"Will display post's featured image.",action:"element_attribute",placeholder:"set to get featured image",ignore_parameter:!0},"wp-attachment-src-theme-mod":{type:"text",name:"Customizer theme mod",help_text:"Id of a customizer theme mod setting.",action:"element_attribute",placeholder:"Id of a customizer theme mod setting",ignore_parameter:!0},"wp-attachment-src-option":{type:"text",name:"Customizer option",help_text:"Id of a customizer option setting.",action:"element_attribute",placeholder:"Id of a customizer option setting",ignore_parameter:!0},"wp-attachment-src-size":{type:"text",name:"Size",action:"element_attribute",placeholder:m.forExample("large, array(128,128)"),options:m.wpInsight.getImageSizes,open_list_on_focus:!0},"wp-attachment-src-icon":{type:"checkbox",name:"Icon",action:"element_attribute",value:"true",negvalue:"false",default_value:"false"}})),A=(r.push(x),x.meta={tags:[m.tag_ret_image,m.tag_set_element,m.tag_set_content,m.tag_t_post,m.tag_use_image],helptext:"Set attachment image attributes of IMG element. Requires IMG element.#  Set Post id (leave Attachment id empty) to display post's featured image. Set Post id to <b>get_the_ID()</b> for current post.",helplink:"https://developer.wordpress.org/reference/functions/wp_get_attachment_image_src/",extra_name:"wp_get_attachment_image_src"},x.addCode('<img width="150" src="$IMAGE_URL" class="attachment-thumbnail">'),m.addTag("wp-attachment-bck","Attachment image bck","Attachment id##current attachment",function(o){var e;o.hasAttr(A.attribute)&&(e="<?php $image_attributes = wp_get_attachment_image_src("+d.getParams(A,o,!1,function(e,t){var a;return t="wp-attachment-bck"==e&&!t&&(t=(a=o.getAttr("wp-attachment-bck-post-id"))?"get_post_thumbnail_id( "+m.quoteParam(a)+" )":"get_the_ID()",(a=o.getAttr("wp-attachment-bck-theme-mod"))&&(t="get_theme_mod( "+m.quoteParam(a)+" )"),a=o.getAttr("wp-attachment-bck-option"))?"get_option( "+m.quoteParam(a)+" )":t})+"); ?>",o.setAttr("style","<?php if($image_attributes) echo 'background-image:url(\\''.$image_attributes[0].'\\')' ?>"),d.addToChanges(function(e,t){pgCreateNodeFromHtml(t).insertBefore(e)},this,[o,e]))},{"wp-attachment-bck-post-id":{type:"text",name:"Post id",help_text:"Will display post's featured image.",action:"element_attribute",placeholder:"set to get featured image",ignore_parameter:!0},"wp-attachment-bck-theme-mod":{type:"text",name:"Customizer theme mod",help_text:"Id of a customizer theme mod setting.",action:"element_attribute",placeholder:"Id of a customizer theme mod setting",ignore_parameter:!0},"wp-attachment-bck-option":{type:"text",name:"Customizer option",help_text:"Id of a customizer option setting.",action:"element_attribute",placeholder:"Id of a customizer option setting",ignore_parameter:!0},"wp-attachment-bck-size":{type:"text",name:"Size",action:"element_attribute",placeholder:m.forExample("large, array(128,128)"),options:m.wpInsight.getImageSizes,open_list_on_focus:!0}})),P=(r.push(A),A.meta={tags:[m.tag_ret_image,m.tag_set_element,m.tag_set_content,m.tag_t_post,m.tag_use_image],helptext:"Set attachment image as a background-image of the element.",helplink:"https://developer.wordpress.org/reference/functions/wp_get_attachment_image_src/",extra_name:"wp_get_attachment_image_src"},A.applyRenderedCode=function(e,t,a){var o=t[0].getAttr("style");return o&&e.setAttr("style",o),null},A.addCode("<div wp-attachment-bck style=\"background-image:url('$IMAGE_URL');\"><p><br>This element<br>has the featured image<br>set as its background.<br></p></div>"),m.addTag("wp-get-post-gallery","Post gallery","Post##current post",function(e){var t,a;if(e.hasAttr(P.attribute))return e.hasAttr("wp-get-post-gallery-check")?(t=m.getIndentForElement(e,0),a=m.getIndentForElement(e,1),d.toPhpHtmlOrNode(e,"\n"+t+"$post_gallery = get_post_gallery("+d.getParams(P,e)+");\n"+t+"if( $post_gallery ) {\n"+a+"echo $post_gallery;\n"+t+"}\n",P)):d.toPhpHtmlOrNode(e,"echo get_post_gallery("+d.getParams(P,e)+");",P)},{"wp-get-post-gallery-check":{type:"checkbox",name:"Check if gallery exists",action:"element_attribute",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0}}).addMeta({tags:[m.tag_ret_html,m.tag_t_post],helptext:"Display gallery of a post, with optional if statement.",helplink:"https://codex.wordpress.org/Function_Reference/get_post_gallery",extra_name:"get_post_gallery"})),S=(m.addHtmlOrNodeField(P),r.push(P),P.addCode('<div class="gallery galleryid-4 gallery-columns-3 gallery-size-thumbnail" wp-get-post-gallery>        <figure class="gallery-item">            <div class="gallery-icon landscape">            <a href="#">            <img width="150" src="$IMAGE_URL" class="attachment-thumbnail"/>            </a>            </div>        </figure>        <figure class="gallery-item">            <div class="gallery-icon landscape">            <a href="#">            <img width="150" src="$IMAGE_URL" class="attachment-thumbnail"/>            </a>            </div>        </figure>        <figure class="gallery-item">            <div class="gallery-icon landscape">            <a href="#">            <img width="150" src="$IMAGE_URL" class="attachment-thumbnail"/>            </a>            </div>        </figure>    </div>'),new PgComponentType("wp_post_media","Post media"));return S.attribute="wp-post-media",S.sections={parameters:{name:"Options",fields:{wp_post_media:{type:"text",name:"Post id",action:"element_attribute",attribute:"wp-post-media",attribute_keep_if_empty:!0,placeholder:m.defaultValue("current post")},wp_post_media_func:{type:"text",name:"Attachment items var or function",action:"element_attribute",attribute:"wp-post-media-func",placeholder:m.forExample("$media_list"),show_if:"!wp-post-media",helptext:`<p>By default, media attached to the post is shown. Alternatevlly you can specify a variable or function with array of images to show.</p>`},wp_post_media_size:{type:"text",name:"Image size",action:"element_attribute",attribute:"wp-post-media-size",options:m.wpInsight.getImageSizes,open_list_on_focus:!0,placeholder:m.defaultValue("large")},wp_post_media_linked_size:{type:"text",name:"Linked image size",action:"element_attribute",attribute:"wp-post-media-size-linked",placeholder:m.defaultValue("large")},"wp-post-media-range":{type:"text",name:"Range of items to show",action:"element_attribute",attribute:"wp-post-media-range",placeholder:m.forExample("2 or 0-5 (0 is first)"),validate:m.validateRangeValue},"wp-post-media-sizes":{type:"text",name:"Responsive sizes",placeholder:m.forExample("max-width(1200px) 100vw, 1200px"),action:"element_attribute"},"wp-post-media-sizes-button":{type:"button",name:"Guess sizes",func:function(t){t.getPage().activeView.calculateImageResponsiveSizes(t,function(e){e.length&&(pinegrow.makeChanges(t,"Guess sizes",function(){t.setAttr("wp-post-media-sizes",e.join(", "))}),pinegrow.selectedElements.reselect())})}},"wp-post-media-skip-featured":{type:"checkbox",name:"Skip the featured image",empty_attribute:!0,value:"true",action:"element_attribute",helptext:`<p>Don't show the featured image.</p>`}}}},m.addComponentType(S),r.push(S),d.list.push(function(e){var t,a,i,s,o,l,r,n,p,c,u;if(e.hasAttr(S.attribute))return o=e.getAttr("wp-post-media")||"get_the_ID()",t=e.getAttr("wp-post-media-size")||"large",a=e.getAttr("wp-post-media-size-linked")||"large",r=e.getAttr("wp-post-media-func"),p="$media_item_i",n=(u=m.parseRangeValue(e.getAttr("wp-post-media-range"),p))?!0:!1,c=e.hasAttr("wp-post-media-skip-featured"),i=e.findOne("[wp-post-media-item]")||e,s=[],c&&s.push(pgCreate(`<?php $featured_image_id = get_post_thumbnail_id( ${m.quoteParam(o)} ); ?>`)),r=r||`get_attached_media( 'image', ${m.quoteParam(o)} )`,s.push(pgCreate(`<?php $media_items = ${r}; ?>`)),s.push(pgCreate(`<?php if( !empty( $media_items ) ) : ?>`)),n&&s.push(pgCreate(`<?php ${p} = 0; ?>`)),(o=[]).push(pgCreate(`<?php foreach( $media_items as $media_item ) : ?>`)),u&&o.push(pgCreate(u)),c&&o.push(pgCreate(`<?php if( $media_item->ID != $featured_image_id ) : ?>`)),(l=[]).push(pgCreate(`<?php endif; ?>`)),(r=[]).push(pgCreate(`<?php endforeach; ?>`)),n&&r.push(pgCreate(`<?php ${p}++; ?>`)),u&&r.push(pgCreate(`<?php endif; ?>`)),c&&r.push(pgCreate(`<?php endif; ?>`)),i.setData("wp-repeated-item",!0),(n="img"===i.tagName?i:i.findOne("img"))&&(p=null,p=m.wpGetAttributesFromImageTemplate(n),n.setAttr("src",`<?php echo wp_get_attachment_image_src( $media_item->ID, ${m.quoteParam(t)} ); ?>`),n.setAttr("alt",`<?php echo trim( strip_tags( get_post_meta( $media_item->ID, '_wp_attachment_image_alt', true ) ) )`),n.setAttr("srcset",`<?php echo wp_get_attachment_image_srcset( $media_item->ID, ${m.quoteParam(t)} ); ?>`),(u=e.getAttr("wp-post-media-sizes"))&&(p.sizes=m.quoteParam(u,null,!0),n.setAttr("sizes",u)),c=`wp_get_attachment_image( $media_item->ID, ${m.quoteParam(t)}, false, ${d.getPhpArrayForValues(p,n,0,!0)})`,c=`echo ${c=m.wpAddRemoveSizeAttributesCodeToImage(n,c)};`,(u=(u=n.closest("[wp-post-media-item],[wp-post-media],a"))&&"a"!==u.tagName?null:u)&&u.setAttr("href",`<?php echo wp_get_attachment_image_src( $media_item->ID, ${m.quoteParam(a)} ); ?>`),d.addToChanges(function(e,t,a,o,r){if(i.parent){for(var n=0;n<s.length;n++)s[n].insertBefore(e),s[n].indent_text=!0;for(n=0;n<t.length;n++)t[n].insertBefore(i),t[n].indent_text=!0;for(n=0;n<l.length;n++)l[n].insertAfter(e),l[n].indent_text=!0;for(n=0;n<a.length;n++)a[n].insertAfter(i),a[n].indent_text=!0;d.toPhpNode(o,r)}},this,[e,o,r,n,c])),!1}),S.meta={tags:[m.tag_ret_string,m.tag_t_category],helptext:"Display post images using the element as a template. Link is added if &gt;a&lt; is present. Use Post Media Item action to repeat a different enclosed element.",helplink:"https://codex.wordpress.org/Function_Reference/get_attached_media",extra_name:"get_attached_media"},r.push(m.addTag("wp-post-media-item","Post media - item",null,null).addMeta({tags:[m.tag_ret_string,m.tag_set_element,m.tag_set_content,m.tag_t_post],helptext:"Use together with Post media action to set which element should be repeated when displaying post media items."})),r.push(m.addTag("wp-single-month-title","Single month title","Prefix","single_month_title").addMeta({tags:[m.tag_ret_string,m.tag_set_element,m.tag_set_content,m.tag_t_post],helptext:"Display single month title.",helplink:"https://codex.wordpress.org/Function_Reference/single_month_title",extra_name:"single_month_title"}).addCode("<h1 wp-single-month-title>January 2015</h1>")),r},pgWordpressComments=function(r,n){var e=[],t='<form $WP_ATTRS action="#" method="post" id="commentform">    <p><input type="text" name="author" id="author" value="" size="22" tabindex="1" aria-required="true"/><label for="author">    <small>Name (required)</small>    </label></p>    <p><input type="text" name="email" id="email" value="" size="22" tabindex="2" aria-required="true"/><label for="email">    <small>Mail (will not be published) (required)</small>    </label></p>    <p><input type="text" name="url" id="url" value="" size="22" tabindex="3"/><label for="url">    <small>Website</small>    </label></p>    <p><textarea name="comment" id="comment" cols="58" rows="10" tabindex="4"></textarea></p>    <p><input name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment"/><input type="hidden" name="comment_post_ID" value="1" id="comment_post_ID"/><input type="hidden" name="comment_parent" id="comment_parent" value="0"/></p>    </form>',a='<ol $WP_ATTRS class="comment-list">    <li id="comment-1" class="comment even thread-even depth-1">    <article id="div-comment-1" class="comment-body">    <footer class="comment-meta">    <div class="comment-author vcard">    <img alt="" src="http://0.gravatar.com/avatar/?d=identicon&#038;s=32" class="avatar avatar-32 photo avatar-default" height="32" width="32"/>    <b class="fn"><a href="https://wordpress.org/" rel="external nofollow" class="url">Mr WordPress</a></b>    <span class="says">says:</span>    </div>        \x3c!-- .comment-author --\x3e    <div class="comment-metadata">    <a href="http://wptest/2015/01/hello-world/#comment-1">    <time datetime="2015-01-04T06:03:25+00:00">    January 4, 2015 at 6:03 am    </time>    </a>    </div>        \x3c!-- .comment-metadata --\x3e    </footer>        \x3c!-- .comment-meta --\x3e    <div class="comment-content">    <p>Hi, this is a comment.<br/>    To delete a comment, just log in and view the post&#039;s comments. There you will have the option to edit or delete them.</p>    </div>        \x3c!-- .comment-content --\x3e    <div class="reply">    <a class="comment-reply-link" href="/2015/01/hello-world/?pgwp_template=pgwp_temp.php&#038;dummy_date=1426913842765&#038;replytocom=1#respond" onclick="return addComment.moveForm( " iv-comment-1", "1", "respond", "1" )" aria-label="Reply to Mr WordPress">Reply</a>    </div>    </article>        \x3c!-- .comment-body --\x3e    </li>        \x3c!-- #comment-## --\x3e    <li id="comment-2" class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1">    <article id="div-comment-2" class="comment-body">    <footer class="comment-meta">    <div class="comment-author vcard">    <img alt="" src="http://0.gravatar.com/avatar/2c5ed187aeaf9af473a1a24a82a99eb2?s=32&amp;d=identicon&amp;r=G" class="avatar avatar-32 photo" height="32" width="32"/>    <b class="fn"><a href="http://cnn.com" rel="external nofollow" class="url">admin</a></b>    <span class="says">says:</span>    </div>        \x3c!-- .comment-author --\x3e    <div class="comment-metadata">    <a href="http://wptest/2015/01/hello-world/#comment-2">    <time datetime="2015-03-21T04:39:04+00:00">    March 21, 2015 at 4:39 am    </time>    </a>    </div>        \x3c!-- .comment-metadata --\x3e    </footer>        \x3c!-- .comment-meta --\x3e    <div class="comment-content">    <p>And this is another smart comment about how to say hello to the world.</p>    </div>        \x3c!-- .comment-content --\x3e    <div class="reply">    <a class="comment-reply-link" href="/2015/01/hello-world/?pgwp_template=pgwp_temp.php&#038;dummy_date=1426913842765&#038;replytocom=2#respond" onclick="return addComment.moveForm( " iv-comment-2", "2", "respond", "1" )" aria-label="Reply to admin">Reply</a>    </div>    </article>        \x3c!-- .comment-body --\x3e    </li>    </ol>',o=new PgComponentType("wp_pg_comments_template","Comments template"),i=(o.selector="[wp-comments-template]",o.attribute="wp-comments-template",o.code='<div wp-comments-template>    <h3 id="comments">2 Responses to &#8220;Hello world!&#8221;</h3>    <div class="navigation">    <div class="alignleft"></div>    <div class="alignright"></div>    </div>    '+a.replace("$WP_ATTRS","")+'    <div class="navigation">    <div class="alignleft"></div>    <div class="alignright"></div>    </div>    <div id="respond">    <h3>Leave a Reply</h3>    <div id="cancel-comment-reply">    <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2015/01/hello-world/?pgwp_template=pgwp_temp.php&amp;dummy_date=1426913842765#respond" style="display:none;">Click here to cancel reply.</a></small>    </div>    '+t.replace("$WP_ATTRS","")+"    </div>    </div>",o.sections={parameters:{name:"Options",fields:{"wp-comments-template":{type:"text",name:"File",action:"element_attribute",attribute:"wp-comments-template",attribute_keep_if_empty:!0,parameter_order:1,placeholder:r.defaultValue("comments.php")},"wp-comments-template-separate":{type:"checkbox",name:"Separate by type",action:"element_attribute",attribute:"wp-comments-template-separate",value:"true",negvalue:"false",default_value:"false",parameter_order:2}}}},r.addComponentType(o),e.push(o),n.list.push(function(e){if(e.hasAttr(o.attribute))return n.toPhpHtmlOrNode(e,"comments_template("+n.getParams(o,e)+");",o)}),r.addHtmlOrNodeField(o),o.meta={tags:[r.tag_ret_part,r.tag_t_comment],helptext:"Includes the comment template.",helplink:"https://developer.wordpress.org/reference/functions/comments_template/",extra_name:"comments_template"},r.addTag("wp-comments-title","Comments title","One comment title format##One thought on &ldquo;%2$s&rdquo;",function(e){var t;if(e.hasAttr(i.attribute))return t="printf( _nx( '"+(e.getAttr(i.attribute)||"One thought on &ldquo;%2$s&rdquo;")+"', '"+(e.getAttr("wp-comments-title-multiple")||"%1$s thoughts on &ldquo;%2$s&rdquo;")+"', get_comments_number(), 'comments title', '"+r.current_theme_info.slug+"' ), number_format_i18n( get_comments_number() ), get_the_title() );",n.toPhpHtmlOrNode(e,t,i)},{"wp-comments-title-multiple":{type:"text",name:"Multiple comments title format",action:"element_attribute",placeholder:"%1$s thoughts on &ldquo;%2$s&rdquo;"}}).addMeta({tags:[r.tag_ret_link,r.tag_set_element,r.tag_set_content,r.tag_t_comment],helptext:"Display singular or plural comments title. Use %1$s for number of comments and %2$s for the post title."}).addCode('<h2 wp-comments-title wp-comments-title-set=""content">5 thoughts on Hello world!</h2>')),s=(r.addHtmlOrNodeField(i,!1,"content"),e.push(i),e.push(r.addTag("wp-next-comments-link","Next comments link","Label##Newer Comments &raquo;|trans","echo get_next_comments_link",{"wp-next-comments-max-page":{type:"text",name:"Max page",action:"element_attribute",attribute:"wp-next-comments-max-page"}}).addMeta({tags:[r.tag_ret_link,r.tag_t_comment],helptext:"Display the link to the next comment page.",helplink:"https://developer.wordpress.org/reference/functions/get_next_comments_link/",extra_name:"get_next_comments_link"}).addCode('<div class="nav-next" wp-next-comments-link wp-next-comments-link-set="content-not-empty"><a href="#">Newer Comments </a></div>')),e.push(r.addTag("wp-prev-comments-link","Previous comments link","Label##&laquo; Older Comments|trans","echo get_previous_comments_link").addMeta({tags:[r.tag_ret_link,r.tag_t_comment],helptext:"Display the link to the previous comment page.",helplink:"https://developer.wordpress.org/reference/functions/get_previous_comments_link/",extra_name:"get_previous_comments_link"}).addCode('<div class="nav-previous" wp-prev-comments-link wp-prev-comments-link-set="content-not-empty"><a href="#"> Older Comments</a></div>')),e.push(r.addTag("wp-paginate-comments-links","Paginate comments links",null,"paginate_comments_links",null,null,"paginate_comments_links( array( 'echo' => false ) )").addMeta({tags:[r.tag_ret_link,r.tag_t_comment],helptext:"Display pagination links for the current post comments.",helplink:"https://codex.wordpress.org/Function_Reference/paginate_comments_links",extra_name:"paginate_comments_links"}).addCode('<div class="nav-comments" wp-paginate-comments-links wp-paginate-comments-links-set="content-not-empty">        <a class="prev page-numbers" href="#"> Previous</a>    <a class="page-numbers" href="#">1</a>    <span class="page-numbers current">2</span>    <a class="page-numbers" href="#">3</a>    <a class="next page-numbers" href="#">Next </a></div>')),r.addTag("wp-list-comments","List comments",null,null,{"wp-list-comments-walker":{type:"text",name:"Walker object",action:"element_attribute",attribute:"wp-list-comments-walker",parameter_name:"walker"},"wp-list-comments-max-depth":{type:"text",name:"Max depth",action:"element_attribute",attribute:"wp-list-comments-max-depth",parameter_name:"max_depth"},"wp-list-comments-style":{type:"select",name:"Style",action:"element_attribute",attribute:"wp-list-comments-style",show_empty:!0,options:[{key:"div",name:"div"},{key:"ol",name:"ol"},{key:"ul",name:"ul"}],parameter_name:"style"},"wp-list-comments-callback":{type:"text",name:"Callback",action:"element_attribute",attribute:"wp-list-comments-callback",parameter_name:"callback"},"wp-list-comments-depth-end-callback":{type:"text",name:"End callback",action:"element_attribute",attribute:"wp-list-comments-end-callback",parameter_name:"end-callback"},"wp-list-comments-type":{type:"select",name:"Type",action:"element_attribute",attribute:"wp-list-comments-type",show_empty:!0,options:[{key:"all",name:"all"},{key:"comment",name:"comment"},{key:"trackback",name:"trackback"},{key:"ping back",name:"ping back"},{key:"pings",name:"pings"}],parameter_name:"type"},"wp-list-comments-reply-text":{type:"text",name:"Reply text",action:"element_attribute",attribute:"wp-list-comments-reply-text",parameter_name:"reply_text",translate:!0},"wp-list-comments-page":{type:"text",name:"Page",action:"element_attribute",attribute:"wp-list-comments-page",parameter_name:"page"},"wp-list-comments-per-page":{type:"text",name:"Per page",action:"element_attribute",attribute:"wp-list-comments-per-page",parameter_name:"per_page"},"wp-list-comments-avatar-size":{type:"text",name:"Avatar size",action:"element_attribute",attribute:"wp-list-comments-avatar-size",parameter_name:"avatar_size"},"wp-list-comments-reverse-top-level":{type:"checkbox",name:"Reverse top level",action:"element_attribute",attribute:"wp-list-comments-reverse-top-level",value:"true",negvalue:"false",default_value:"false",parameter_name:"reverse_top_level"},"wp-list-comments-reverse-children":{type:"checkbox",name:"Reverse children",action:"element_attribute",attribute:"wp-list-comments-reverse-children",value:"true",negvalue:"false",default_value:"false",parameter_name:"reverse_children"},"wp-list-comments-format":{type:"select",name:"Format",action:"element_attribute",attribute:"wp-list-comments-format",show_empty:!0,options:[{key:"html5",name:"html5"},{key:"xhtml",name:"xhtml"}],parameter_name:"format"},"wp-list-comments-short-ping":{type:"checkbox",name:"Short ping",action:"element_attribute",attribute:"wp-list-comments-short-ping",value:"true",negvalue:"false",default_value:"false",parameter_name:"short_ping"},"wp-list-comments-echo":{type:"checkbox",name:"Echo",action:"element_attribute",attribute:"wp-list-comments-echo",value:"true",negvalue:"false",default_value:"true",parameter_name:"echo"},"wp-list-comments-comments":{type:"text",name:"Comments",action:"element_attribute",attribute:"wp-list-comments-comments"}}));return n.list.push(function(e){var t,a,o;if(e.hasAttr(s.attribute))return t=e.getAttr("wp-list-comments-comments"),a=n.getNamedParams(s,e),(o=[]).push(a="array()"==a?"null":a),o.push(r.quoteParam(t)),n.toPhpHtmlOrNode(e,"wp_list_comments("+r.buildParamList(o)+");",s)}),e.push(s),r.addHtmlOrNodeField(s),s.addMeta({tags:[r.tag_ret_html,r.tag_t_comment],helptext:"Display all comments for post or page.",helplink:"https://codex.wordpress.org/Function_Reference/wp_list_comments",extra_name:"wp_list_comments"}),s.addCode(a.replace("$WP_ATTRS",'wp-list-comments wp-list-comments-style="ol" wp-list-comments-set="content" wp-list-comments-avatar-size="56"')),e.push(r.addTag("wp-comment-form","Comment form",null,"comment_form").addMeta({tags:[r.tag_ret_html,r.tag_t_comment],helptext:"Display the complete comment form.",helplink:"https://codex.wordpress.org/Function_Reference/comment_form",extra_name:"comment_form"}).addCode(t.replace("$WP_ATTRS","wp-comment-form"))),e},pgWordpressSiteRegistrations=function(l,s){var e=[],n=l.addTag("wp-post-type","Register post type","Post type#acme_something|req",null,{"wp-post-type-name":{type:"text",name:"Name",action:"element_attribute",labels_parameter_name:"name",translate:!0,ignore_parameter:!0},"wp-post-type-name-singular":{type:"text",name:"Singular name",action:"element_attribute",labels_parameter_name:"singular_name",translate:!0,ignore_parameter:!0},"wp-post-type-labels-dummy":{type:"hidden",name:"Tax query",action:"element_attribute",attribute:"wp-post-type-labels-dummy",parameter_name:"labels",getAttrValue:function(e,t,a){if((r=s.getNamedParams(n,t,null,"labels_parameter_name",3)).length&&"array()"!=r)var o=pinegrow.getFormatHtmlOptions(),r="\n"+pinegrow.getHtmlIndentForLevel(1+2,o)+r;else if("array()"==r)return null;return r}},"wp-post-type-description":{type:"text",name:"Description",action:"element_attribute",parameter_name:"description",translate:!0},"wp-post-type-public":{type:"checkbox",name:"Public",action:"element_attribute",attribute:"wp-post-type-public",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0,parameter_name:"public"},"wp-post-type-hierarchical":{type:"checkbox",name:"Hierarchical",action:"element_attribute",attribute:"wp-post-type-hierarchical",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0,parameter_name:"hierarchical"},"wp-post-type-supports":{type:"select",name:"Supports",action:"element_attribute",show_empty:!1,string_or_array:!0,multiple:!0,options:[{key:"title",name:"title"},{key:"editor",name:"editor"},{key:"author",name:"author"},{key:"thumbnail",name:"thumbnail"},{key:"excerpt",name:"excerpt"},{key:"trackbacks",name:"trackbacks"},{key:"custom-fields",name:"custom-fields"},{key:"comments",name:"comments"},{key:"revisions",name:"revisions"},{key:"page-attributes",name:"page-attributes"},{key:"post-formats",name:"post-formats"}],parameter_name:"supports"},"wp-post-type-has-archive":{type:"checkbox",name:"Has archive",action:"element_attribute",value:"true",negvalue:"false",default_value:"false",parameter_name:"has_archive"},"wp-post-type-rest":{type:"checkbox",name:"Enable REST API",action:"element_attribute",attribute:"wp-post-type-rest",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0,parameter_name:"show_in_rest"},"wp-post-type-show-ui":{type:"checkbox",name:"Show UI",action:"element_attribute",attribute:"wp-post-type-show-ui",value:"true",negvalue:"false",default_value:"true",ignore_parameter:!0,parameter_name:"show_ui"},"wp-post-type-show-in-menu":{type:"checkbox",name:"Show in menu",action:"element_attribute",attribute:"wp-post-type-show-in-menu",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0,parameter_name:"show_in_menu"},"wp-post-type-menu-icon":{type:"text",name:"Menu icon",action:"element_attribute",parameter_name:"menu_icon",placeholder:l.forExample("dashicons-portfolio")},"wp-post-type-menu-icon-browse":{type:"button",name:"Browse icons",helptext:`<p>Open the list of built-in WordPress Dashicons gallery in a browser window. Copy the icon name with <code>dashicons-</code> prefix.</p>`,func:function(e,t,a,o,r){a=[{label:"WordPress dashicons",helptext:`Copy the name without the dashicons- prefix.`,action:function(){pinegrow.openExternalUrl("https://developer.wordpress.org/resource/dashicons")},link_url:isApp()?null:"https://developer.wordpress.org/resource/dashicons",dont_handle_click:!isApp()}];return new CrsaContextMenu(a,t).showForElement(t,null,8),r.preventDefault(),r.stopPropagation(),!1}},"wp-post-type-menu-position":{type:"text",name:"Menu position",action:"element_attribute",parameter_name:"menu_position",numeric:!0,placeholder:l.forExample("20")},"wp-post-type-taxonomies":{type:"text",name:"Taxonomies",action:"element_attribute",parameter_name:"taxonomies",string_or_array:!0,force_array:!0,placeholder:l.forExample("category, post_tag")}}),i=(n.on_action_added=function(){pinegrow.showNotice(`<p><b>Export the whole ${l.wpSayTheme(!0)}</b> to apply Custom post types changes to your ${l.wpSayTheme(!0)}.</p><p>Quick export (when you save the page) doesn't update the code for custom post types.</p>`,`Export the whole ${l.wpSayTheme("lc")} to update custom post types`,"wp-post-types-export")},n.on_changed=function(){l.setRequireThemeExport("Custom Post types")},s.list.push(function(e){var t,a;e.getAttr("wp-post-type")&&(a=e.getAttr("wp-post-type"),(t=s.getNamedParams(n,e,null,null,1)).length||(t=" array() "),a="\n"+"    "+"register_post_type("+l.quoteParam(a)+", "+t+");\n",l.isOnMasterOrInContent(e)?(l.addToFunctionsPhpSection("Custom Post Types",a,!0),l.wpInsight.addPostType(e.getAttr("wp-post-type"))):l.warnAboutActionThatIsNotOnMasterOrInContent(e,n))}),n.addMeta({tags:[],helptext:"Register a custom post type. Definition is added to /* Pinegrow generated Custom Post Types */ section of functions.php.# Add <b>Do not export</b> action if you don't want this element to be visible in the theme",helplink:"https://developer.wordpress.org/reference/functions/register_post_type/",extra_name:"register_post_type"}),n.addNotPlaceable("Add this action to an existing element on the page to register a new custom post type."),e.push(n),l.addTag("wp-taxonomy","Register taxonomy","Taxonomy#acme_mytax|req",null,{"wp-taxonomy-types":{type:"text",name:"Post types",action:"element_attribute",ignore_parameter:!0,options:l.wpInsight.getPostTypes,open_list_on_focus:!0,placeholder:l.forExample("post, page")},"wp-taxonomy-name":{type:"text",name:"Name",action:"element_attribute",labels_parameter_name:"name",translate:!0,ignore_parameter:!0},"wp-taxonomy-name-singular":{type:"text",name:"Singular name",action:"element_attribute",labels_parameter_name:"singular_name",translate:!0,ignore_parameter:!0},"wp-taxonomy-labels-dummy":{type:"hidden",name:"Tax query",action:"element_attribute",attribute:"wp-taxonomy-labels-dummy",parameter_name:"labels",getAttrValue:function(e,t,a){if((r=s.getNamedParams(i,t,null,"labels_parameter_name",3)).length&&"array()"!=r)var o=pinegrow.getFormatHtmlOptions(),r="\n"+pinegrow.getHtmlIndentForLevel(1+2,o)+r;else if("array()"==r)return null;return r}},"wp-taxonomy-rest-dummy":{type:"hidden",name:"Enable REST API",action:"element_attribute",attribute:"wp-taxonomy-rest-dummy",getAttrValue:function(e,t,a){return"true"},ignore_parameter:!0,parameter_name:"show_in_rest"},"wp-taxonomy-public":{type:"checkbox",name:"Public",action:"element_attribute",attribute:"wp-taxonomy-public",value:"true",negvalue:"false",default_value:"true",ignore_parameter:!0,parameter_name:"public"},"wp-taxonomy-hierarchical":{type:"checkbox",name:"Hierarchical",action:"element_attribute",attribute:"wp-taxonomy-hierarchical",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0,parameter_name:"hierarchical"}})),a=(i.on_action_added=function(){pinegrow.showNotice(`<p><b>Export the whole ${l.wpSayTheme(!0)}</b> to apply Taxonomy changes to your ${l.wpSayTheme(!0)}.</p><p>Quick export (when you save the page) doesn't update the code for taxonomies.</p>`,`Export the whole ${l.wpSayTheme("lc")} to update taxonomies`,"wp-taxonomys-export")},i.on_changed=function(){l.setRequireThemeExport("Taxonomy")},s.list.push(function(e){var t,a,o;e.hasAttr("wp-taxonomy")&&(o=e.getAttr("wp-taxonomy"),t=l.stringOrArray(e.getAttr("wp-taxonomy-types")),(a=s.getNamedParams(i,e,null,null,1)).length||(a=" array() "),o="\n"+"    "+"register_taxonomy("+l.quoteParam(o)+", "+t+", "+a+");\n",l.isOnMasterOrInContent(e)?(l.addToFunctionsPhpSection("Taxonomies",o,!0),l.wpInsight.addTaxonomy(e.getAttr("wp-taxonomy"))):l.warnAboutActionThatIsNotOnMasterOrInContent(e,i))}),i.addMeta({tags:[],helptext:"Register a custom taxonomy.",helplink:"https://developer.wordpress.org/reference/functions/register_taxonomy/",extra_name:"register_taxonomy"}),i.addNotPlaceable("Add this action to an existing element on the page to register a new custom post type."),e.push(i),l.addTag("wp-register-sidebar","Register sidebar",null,null,{"wp-register-sidebar":{type:"text",name:"Name",action:"element_attribute",placeholder:l.forExample("My Widget Area"),translate:!0,parameter_name:"name"},"wp-register-sidebar-id":{type:"text",name:"Id",action:"element_attribute",placeholder:l.forExample("my_widget_area_1"),parameter_name:"id"},"wp-register-sidebar-description":{type:"text",name:"Description",action:"element_attribute",parameter_name:"description"},"wp-register-sidebar-before":{type:"text",name:"Before widget",action:"element_attribute",parameter_name:"before_widget",placeholder:l.defaultValue('<li id="%1$s" class="widget %2$s">'),default_value:'<li id="%1$s" class="widget %2$s">'},"wp-register-sidebar-after":{type:"text",name:"After widget",action:"element_attribute",parameter_name:"after_widget",placeholder:l.defaultValue("</li>"),default_value:"</li>"},"wp-register-sidebar-before-title":{type:"text",name:"Before title",action:"element_attribute",parameter_name:"before_title",placeholder:l.defaultValue('<h3 class="widgettitle">'),default_value:'<h3 class="widgettitle">'},"wp-register-sidebar-after-title":{type:"text",name:"After title",action:"element_attribute",parameter_name:"after_title",placeholder:l.defaultValue("</h3>"),default_value:"</h3>"}})),o=(a.on_action_added=function(){pinegrow.showNotice(`<p><b>Export the whole ${l.wpSayTheme(!0)}</b> to apply widget changes to your ${l.wpSayTheme(!0)}.</p><p>Quick export (when you save the page) doesn't update the code for widget areas.</p>`,`Export the whole ${l.wpSayTheme("lc")} to update widget areas`,"wp-register-sidebars-export")},s.list.push(function(e){var t;e.hasAttr("wp-register-sidebar")&&(t="\n"+"    "+"register_sidebar( "+s.getNamedParams(a,e,null,null,1)+" );\n",l.isOnMasterOrInContent(e)?(l.addToFunctionsPhpSection("Register Sidebars",t,!0),l.wpInsight.addSidebar(e.getAttr("wp-register-sidebar-id"))):l.warnAboutActionThatIsNotOnMasterOrInContent(e,a))}),a.addMeta({tags:[],helptext:"Register a sidebar (widget area). Definition is added to /* Pinegrow generated Register Sidebars */ section of functions.php.# Add <b>Do not export</b> action if you don't want this element to be visible in the theme",helplink:"https://codex.wordpress.org/Function_Reference/register_sidebar",extra_name:"register_widget"}),a.addNotPlaceable("Add this action to an existing element on the page to register a new custom post type."),e.push(a),l.addTag("wp-register-menu","Register menu",null,null,{"wp-register-menu":{type:"text",name:"Location",action:"element_attribute",placeholder:l.forExample("footer_menu"),validate:l.requireSlug,on_changed:function(){l.setRequireThemeExport("Menus")}},"wp-register-menu-description":{type:"text",name:"Description",action:"element_attribute",placeholder:l.forExample("The menu in the footer"),on_changed:function(){l.setRequireThemeExport("Menus")},validate:l.required,translate:!0}})),p=(o.on_action_added=function(){l.setRequireThemeExport("Menus")},s.list.push(function(e){var t;e.hasAttr("wp-register-menu")&&(t="\n"+"    "+`register_nav_menu( ${s.getParams(o,e)} );
`,l.isOnMasterOrInContent(e)?(l.addToFunctionsPhpSection("Register Menus",t,!0),l.wpInsight.addMenu(e.getAttr("wp-register-menu"))):l.warnAboutActionThatIsNotOnMasterOrInContent(e,o))}),o.addMeta({tags:[],helptext:"Register a menu location.",helplink:"https://codex.wordpress.org/Function_Reference/register_nav_menu",extra_name:"register_nav_menu"}),o.addNotPlaceable("Add this action to an existing element on the page to register a new menu location."),e.push(o),l.wpEnqueInlineScriptIfNeeded=function(e,t,a,o){var r=a||null,n=(l.last_enqued_script_in_head,$.trim(e.html()||"")),i="    ",s="";return!!n&&((r=r||`inline-script-`+l.enqueue_scripts_id++)in l.used_script_handles||(s=s+("\n"+i+`wp_register_script( '${r}', '', [], ${l.wpGetProjectVersionForRegister()}, ${t?"false":"true"} );`)+"\n"+i+`wp_enqueue_script( '${r}' );`),n=n.replace(/'/g,"\\'"),s+="\n"+i+`wp_add_inline_script( ${l.quoteParam(r)}, '${n}');
`,o?s:(i=(i=(s=l.wpConditionalEnqueue(e,s)).replace(new RegExp(escapeRegExp(r),"g"),"HANDLE")).replace(/\s+/gm,""),l.enqueued_inline_scripts.indexOf(i)<0&&(l.enqueued_inline_scripts.push(i),l.addToFunctionsPhpSection("Enqueue Scripts",s,!0)),!0))},l.getScriptHandle=function(e,t){var a,o,r=null,n=l.current_theme_info?l.current_theme_info.slug+"-":"pg-";return t?e.indexOf(".css")<0&&(r="style"):e.indexOf(".js")<0&&(r="script"),"jquery"===(r=r||crsaGetNameFromUrl(e).replace(".min","").replace(".js","").replace(".css","").replace(/[0-9\.\-]+/g,"").toLowerCase())?r:(a=t?r+`-style`:r+`-script`)in l.used_script_handles?(0<=(o=l.used_script_handles[a].indexOf(e))||(l.used_script_handles[a].push(e),o=l.used_script_handles[a].length-1),n+r+(0<o?`-`+o:"")):(l.used_script_handles[a]=[e],n+r)},l.addTag("wp-enqueue-script","Enqueue script",null,null,{"wp-enqueue-script":{type:"text",name:"Handle",action:"element_attribute",placeholder:l.forExample("myscript"),attribute_keep_if_empty:!0},"wp-enqueue-script-src":{type:"text",name:"Src (relative to theme dir)",action:"element_attribute",placeholder:l.defaultValue("SRC attribute")},"wp-enqueue-script-deps":{type:"text",name:"Dependencies",action:"element_attribute",force_array:!0,placeholder:l.forExample("jquery, common")},"wp-enqueue-script-version":{type:"text",name:"Version",action:"element_attribute",placeholder:l.forExample("1.10")},"wp-enqueue-script-in-footer":{type:"select",name:"In footer",action:"element_attribute",default_value:"auto",options:[{key:"auto",name:"Auto detect"},{key:"true",name:"Yes"},{key:"false",name:"No"}]},"wp-enqueue-script-location":{type:"select",name:"Location",action:"element_attribute",default_value:"website",options:[{key:"website",name:"Website"},{key:"admin",name:"Admin"},{key:"website_admin",name:"Website & Admin"}],ignore_parameter:!0},"wp-enqueue-script-deregister":{type:"checkbox",name:"Deregister the script first",action:"element_attribute",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0},"wp-enqueue-script-register":{type:"checkbox",name:"Register &amp; Enqueue script",action:"element_attribute",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0}})),c=(s.list.push(function(e){var t,r,n,a,o,i;e.hasAttr("wp-enqueue-script")&&(l.isOnMasterPage(e)||l.isInSiteContent(e))&&(r=e.getAttr("wp-enqueue-script"),t=e.getAttr("wp-enqueue-script-location")||"website",r?l.used_script_handles[r]=[o||"inline"]:(o=e.getAttr("src"),r=l.getScriptHandle(o||"inline")),o="    ",i="",e.getAttr("wp-enqueue-script-deregister")&&(i+="\n"+o+"wp_deregister_script( "+l.quoteParam(r)+" );"),n=null==e.closest("head"),"auto"!==(a=e.getAttr("wp-enqueue-script-in-footer")||"auto")&&(n="true"===a),a=s.getParams(p,e,!1,function(e,t,a,o){return"wp-enqueue-script"==e?t=t||r:"wp-enqueue-script-src"==e?(t=t||a.getAttr("src"))&&(l.enqueued_urls[t]=!0,t=l.makeUrlRelativeToThemeCode(t,!0)):"wp-enqueue-script-deps"==e&&t?t=l.stringOrArray(t,o):"wp-enqueue-script-in-footer"==e?t=n?"true":"false":"wp-enqueue-script-version"===e&&(t=t||l.getThemeInfoProjectVersion()),t}),l.last_enqued_script_handle=r,l.last_enqued_script_in_head=!n,e.getAttr("wp-enqueue-script-register")?i=(i+="\n"+o+"wp_register_script("+a+");")+"\n"+o+"wp_enqueue_script( "+l.quoteParam(r)+" );":i+="\n"+o+"wp_enqueue_script("+a+");",i+="\n",o=l.wpEnqueInlineScriptIfNeeded(e,!n,r,!0)||"",i=c(e,i+=o),0<=t.indexOf("website")&&l.addToFunctionsPhpSection("Enqueue Scripts",i,!0),0<=t.indexOf("admin")&&l.addToFunctionsPhpSection("Enqueue Admin Scripts",i,!0,!1,!1,m()),s.addToChanges(function(e){e.remove()},this,[e]))}),l.wpConditionalEnqueue=function(e,t){var a=l.wpGetConditionString(e);return a&&(t=`    if( ${a} ) {${pgReindentText(t,"        ")}
    }
`,e.removeAttrIfStartsWith("wp-if-")),t}),u=(p.on_can_add_action=function(e,t,a){return"script"===e.tagName||(pinegrow.showQuickError("The action can only be added to &lt;script&gt; elements."),!1)},p.addMeta({tags:[],helptext:"Enqueue script. Definition is added to /* Pinegrow generated Enqueue Scripts */ section of functions.php. Target element is not exported. Combine with conditional actions to include the script only on certain templates.",helplink:"https://pinegrow.com/docs/wordpress/enqueue-scripts-and-styles/",extra_name:"wp_enqueue_script"}),p.addNotPlaceable("Add this action to an existing element on the page."),e.push(p),l.addTag("wp-enqueue-style","Enqueue style",null,null,{"wp-enqueue-style":{type:"text",name:"Handle",action:"element_attribute",placeholder:l.forExample("mystyle"),attribute_keep_if_empty:!0},"wp-enqueue-style-src":{type:"text",name:"Src (relative to theme dir)",action:"element_attribute",placeholder:l.defaultValue("HREF attribute")},"wp-enqueue-style-deps":{type:"text",name:"Dependencies",action:"element_attribute",force_array:!0,placeholder:l.forExample("jquery, common")},"wp-enqueue-style-version":{type:"text",name:"Version",action:"element_attribute",placeholder:l.forExample("1.10")},"wp-enqueue-style-media":{type:"text",name:"Media",action:"element_attribute",placeholder:l.defaultValue("all")},"wp-enqueue-style-location":{type:"select",name:"Location",action:"element_attribute",default_value:"website",options:[{key:"website",name:"Website"},{key:"admin",name:"Admin"},{key:"website_admin",name:"Website & Admin"}],ignore_parameter:!0},"wp-enqueue-style-deregister":{type:"checkbox",name:"Deregister the style first",action:"element_attribute",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0},"wp-enqueue-style-register":{type:"checkbox",name:"Register &amp; Enqueue style",action:"element_attribute",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0}}));function m(){var e=l.current_theme_info.slug;return`
/* Enqueue Admin Styles and Scripts */

function ${e}_selectively_enqueue_admin_script( $page ) {

    // Don't edit anything between the following comments.
    /* Pinegrow generated Enqueue Admin Styles Begin */
    /* Pinegrow generated Enqueue Admin Styles End */
    
    /* Pinegrow generated Enqueue Admin Scripts Begin */
    /* Pinegrow generated Enqueue Admin Scripts End */
        
}
add_action( 'admin_enqueue_scripts', '${e}_selectively_enqueue_admin_script' );

/* End Enqueue Admin Styles and Scripts */

`}s.list.push(function(e){var t,r,a,o,n;e.hasAttr("wp-enqueue-style")&&(l.isOnMasterPage(e)||l.isInSiteContent(e))&&(t=e.getAttr("wp-enqueue-style-location")||"website",(r=e.getAttr("wp-enqueue-style"))||(a=e.getAttr("href"))&&(r=l.getScriptHandle(a,!0)),a="    ",o="",e.getAttr("wp-enqueue-style-deregister")&&(o+="\n"+a+"wp_deregister_style( "+l.quoteParam(r)+" );"),n=s.getParams(u,e,!1,function(e,t,a,o){return"wp-enqueue-style"==e?t=t||r:"wp-enqueue-style-src"==e?(t=t||a.getAttr("href"))&&(l.enqueued_urls[t]=!0,t=l.makeUrlRelativeToThemeCode(t,!0)):"wp-enqueue-style-media"==e?t=t||a.getAttr("media")||"all":"wp-enqueue-style-deps"==e&&t?t=l.stringOrArray(t,o):"wp-enqueue-style-version"===e&&(t=t||l.getThemeInfoProjectVersion()),t}),e.getAttr("wp-enqueue-style-register")?o=(o+="\n"+a+"wp_register_style("+n+");")+"\n"+a+"wp_enqueue_style( "+l.quoteParam(r)+" );":o+="\n"+a+"wp_enqueue_style("+n+");",o=c(e,o+="\n"),0<=t.indexOf("website")&&l.addToFunctionsPhpSection("Enqueue Styles",o,!0),0<=t.indexOf("admin")&&l.addToFunctionsPhpSection("Enqueue Admin Styles",o,!0,!1,!1,m()),s.addToChanges(function(e){e.remove()},this,[e]))}),u.on_can_add_action=function(e,t,a){return"style"===e.tagName||"link"===e.tagName||(pinegrow.showQuickError("The action can only be added to &lt;style&gt; and &lt;link&gt; elements."),!1)},u.addMeta({tags:[],helptext:"Enqueue script. Definition is added to /* Pinegrow generated Enqueue Styles */ section of functions.php. Target element is not exported. Combine with conditional actions to include the style only on certain templates.",helplink:"https://pinegrow.com/docs/wordpress/enqueue-scripts-and-styles/",extra_name:"wp_enqueue_style"}),u.addNotPlaceable("Add this action to an existing element on the page."),e.push(u);var t=l.addTag("wp-no-enqueue","Do not enqueue",null,null).addMeta({tags:[],helptext:"Don't include this JS or CSS file into the template.",helplink:null,extra_name:null}).addNotPlaceable("Add this action to an existing element to prevent it being exported to the theme."),t=(e.push(t),t.on_can_add_action=function(e,t,a){return"script"===e.tagName||"style"===e.tagName||"link"===e.tagName||(pinegrow.showQuickError("The action can only be added to &lt;script&gt;, &lt;style&gt; and &lt;link&gt; elements."),!1)},"<p>Add the following code to your functions.php to let Pinegrow enqueue scripts and styles:</p><pre>if ( ! function_exists( 'mytheme_enqueue_scripts' ) ) :\n    function mytheme_enqueue_scripts() {\n\n        /* Pinegrow generated Enqueue Scripts Begin */\n        /* Pinegrow generated Enqueue Scripts End */\n\n        /* Pinegrow generated Enqueue Styles Begin */\n        /* Pinegrow generated Enqueue Styles End */\n\n    }\n    add_action( 'wp_enqueue_scripts', 'mytheme_enqueue_scripts' );\nendif;</pre>");return l.functions_php_sections_missing_text["Enqueue Scripts"]=t,l.functions_php_sections_missing_text["Enqueue Styles"]=t,e},pgWordpressSite=function(f,a){f.wpIsPGTCProject=function(e){return e.db||(e.db=new PgProjectDB(e),e.db.init(!0)),!(!e.db.is_loaded||!e.db.findOne("element"))};function r(e,t,a){var o=e.closest("html");return o?a&&a.empty_attribute&&a.value?o.hasAttr(t)?a.value:null:o.getAttr(t):null}function i(e,t,a,o){var r=e.closest("html");return r&&(o&&o.empty_attribute?a?r.setAttr(t,null):r.removeAttr(t):a?r.setAttr(t,a):r.removeAttr(t)),a}function o(e,t){var a=t.data("wp-theme-info")||null;return null===a&&(a=f.getThemeInfo(null,!0)||"none",t.data("wp-theme-info",a)),!(!a||"none"===a||a.master_url!==e.getPage().url)}f.wpConvertProject=function(l,p,c){var a,u,m,d;l&&p?console.error("convertOldWPSettingsToNew wrong arguments"):(a=pinegrow.getCurrentProject(),u=pinegrow.getCurrentProjectInfo(),!p||(a.db||(a.db=new PgProjectDB(a),a.db.init(!0)),a.db.is_loaded)||c?(m=[],d=u.getSetting("wp-theme-info"),a.forEachEditableFile(function(e,t,a){var o,r;d||(o=e.sourceNode.findOne("html"))&&(r=null,o.hasAttr("wp-site")&&o.hasAttr("wp-site-is-master-page")&&((r={}).dir=o.getAttr("wp-site-themes-folder"),r.name=o.getAttr("wp-site-theme-name"),r.slug=o.getAttr("wp-site-theme-slug"),r.url=o.getAttr("wp-site-preview-url"),r.page=u.makeUrlRelative(e.url),r.wpseo="true",r.wpjquery="true",r.generator="true",r.themejson="true",r.block_theme="true"),r)&&m.push(r),t(e,a)},function(){var t,r,n,i,s;1<m.length?pinegrow.showAlert(`<p>The project has multiple Site Settings declarations. It should only have one.</p><ul><li>${m.map(function(e){return e.name+" in "+e.crsaPage.url}).join("</li><li>")}</li></ul><p>Remove WordPress Site actions from &lt;html&gt; elements in all but one pages.</p>`,"Multiple site settings found",null,"OK"):!d&&1!==m.length||(t=d||$.extend({},m[0]),r=h,n=f.getWPAction("wp-template"),i=new PgApi,s=[],a.forEachEditableFile(function(t,e,a){p&&!c&&f.addActionsFromProjectDBToPage(t.sourceNode,t.url);var o=t.sourceNode.findOne("html");o&&(o.withoutEvents(function(){var e;o.hasAttr("wp-site")&&(e={"wp-template-preview-url":o.getAttr("wp-site-preview-url")},o.hasAttr("wp-site-no-export")&&(e["wp-template-no-export"]=null),o.hasAttr("wp-site-no-export-parts")&&(e["wp-template-no-export-parts"]=null),o.hasAttr("wp-site-is-master-page")?e["wp-template-define-master-page"]=!0:e["wp-template-master"]=o.getAttr("wp-site-master-page"),o.removedFromPage=t,i.addAction(o,n,{no_change_event:!0},e),i.removeAction(o,r,{no_change_event:!0})),l&&o.walkSelfAndChildren(function(e){return e.isElement&&(e.findAttributesStartingWith("wp-").length||e.findAttributesStartingWith("cms-").length||e.findAttributesStartingWith("wc-").length)&&pinegrow.assignUniqueSelectorToPgel(e,!1),!0})}),l&&f.wpUpdateProjectDBForPage(t,!1),s.push(t),a.changed=!0),e(t,a)},function(e){0===e.length?(d||(u.setSetting("wp-theme-info",t),u.save()),s.forEach(function(e){e.save()}),l&&a.db.save(),p&&!c&&a.db.saveAsBackup(),pinegrow.refreshCurrentProject(),pinegrow.showAlert(`<p>The project was converted.</p>`,"The project was converted")):pinegrow.showAlert(`<p>Oops... The project conversion didn't go as planned. Some errors happened during processing</p><p>Changes have not been saved.</p>`,"Conversion failed")},"Converting WordPress project..."))},"Looking for WordPress settings...")):pinegrow.showQuickError("File projectdb.pgml not found."))},f.showWordPressSiteSetupDialog=function(){var a=null,i={},u=null,m=["thumbnail","post_thumbnail","medium","medium_large","large"],d=function(){var r={};return $.each(i,function(e,t){var a,o;e.startsWith("image-size-")&&(a=(o=(e=e.replace("image-size-","")).split("-"))[0],o=o[1],r[a]||(r[a]={}),r[a][o]=t)}),r},h=pinegrow.getCurrentProject();if(h){function o(){for(var e=h.getEditableFiles().filter(function(e){return!(!e.url.endsWith(".html")&&!e.url.endsWith(".htm"))}).map(function(e){var t=h.getRelativeUrl(e.url);return"index.html"!==t&&"index.htm"!==t||(a=e.url),{key:e.url,name:t}}),s=new PgDialog("WordPress "+f.wpSayTheme()+" Settings"),c=(s.values=i,s.okButtonLabel="Save settings",u?s.before=`<p>Edit the WordPress theme or plugin settings`:(s.before=`<p>Let's start by setting up the WordPress theme or plugin`,s.cancelButtonLabel=`I'll do it later`),s.before+=` (<a href="https://pinegrow.com/docs/wordpress/actions/theme-settings/" class="external">learn more about Theme Settings</a>).</p>`,require("path")),o={imagelabel1:{type:"label",name:"Customize built-in image sizes",action:"element_attribute",class:"pg-action-info-label"}},r=!1,l=(m.concat(["1","2","3","4","5","6"]).forEach(function(e){var t=1===e.length,a=(t&&!r&&(o["imagelabel2"]={type:"label",name:"Add custom image sizes",action:"element_attribute",class:"pg-action-info-label"},r=!0),`image-size-`+e);o[a+"-id"]={type:t?"text":"displayhtmlwithlabel",name:"Size name",validate:function(e,t,a){if(a)return f.requireSlug(e,t,a)||(0<=m.indexOf(a.toLowerCase())?`This name is reserved.`:void 0)},placeholder:f.forExample("header"),show_if:"!dummy"},t||(o[a+"-id"].html="post_thumbnail"===e?"post-thumbnail":e),t&&(o[a+"-name"]={type:"text",name:"Display name",placeholder:f.forExample("Header"),show_if:t?a+`-id`:null,validate:f.required}),o[a+"-width"]={type:"text",name:"Width",placeholder:t?f.forExample("1200, 0 to ignore"):f.defaultValue("as set in WordPress"),validate:t?f.required:null,show_if:t?a+`-id`:null},o[a+"-height"]={type:"text",name:"Height",placeholder:t?f.forExample("800, 0 to ignore"):f.defaultValue("as set in WordPress"),validate:t?f.required:null,show_if:t?a+`-id`:null},o[a+"-crop"]={type:"checkbox",name:"Crop",value:"true",show_if:t?a+`-id`:null},t&&(o[a+"-just-empty-space"]={type:"displayhtml",name:'<div style="height:10px;"></div>',show_if:t?a+`-id`:null})}),pinegrow.getCurrentProjectInfo()),n=isApp()?"theme":"plugin",p=(s.sections={wpprojecttype:{name:"What are you building? A theme or a plugin?",fields:{project_type:{name:"Project type",type:"select",show_empty:!1,toggle_buttons:!1,default_value:n,on_changed:function(e,t,a){f.wpUpdateSayTheme("plugin"===a,s.$dialog)},options:[{key:"plugin",name:"Plugin"},{key:"theme",name:isApp()||pinegrow.currentUser.isPro()?"Theme":`Theme (Pro feature)`}],show_if:function(){return!0},helptext:`<p>Select the type of WordPress project that should be exported.</p>`}}},wpthemesettings1:{name:f.wpSayTheme("u")+" information",is_closable:!1,fields:{name:{type:"text",name:f.wpSayTheme()+" name",validate:function(e,t,a,o,r,n){if(!a)return pinegrow.getValidationError("Name","req")},placeholder:f.forExample("My Cool Project"),helptext:`<p>Give your theme or plugin a name, for example &quot;My Amazing Theme&quot;.</p>`,on_changed:function(e,t,a,o,r,n,i,s){var l,p=n.parent().find(".crsa-field-slug input.crsa-input");s.slug&&!p.get(0)._wp_auto_slug||(l=f.makeSlug(a),p.val(l),p.trigger("input"),p.get(0)._wp_auto_slug=!0)}},slug:{type:"text",name:"Slug",placeholder:f.defaultValue("my_unique_name"),validate:f.requireSlug,helptext:`<p>Slug is an id that is used to identify your theme or plugin within WordPress. It can consist of letters, numbers, _ and it should not contain any spaces.</p>`,on_changed:function(e,t,a,o,r,n,i,s){n.find("input.crsa-input").get(0)._wp_auto_slug=!1}},dir:{type:"text",name:f.wpSayTheme()+" folder ",file_picker:!0,file_picker_folder:!0,file_picker_no_url:!0,validate:function(e,t,a,o,r,n){var i,s;return a?l?(i="plugin"===n["project_type"]?"plugins":"themes",(a=pinegrow.evaluateUserVars(a,!0))?a.startsWith(l.getDir()+c.sep)?"The export folder should not be located within the source project folder.":"dir"!==crsaIsFileOrDir(a)?"The folder does't exist. Please create it first.":a.endsWith(`wp-content`+c.sep+i)||a.endsWith(`wp-content`+c.sep+i+c.sep)?"The export folder must be a separate folder inside the wp-content/"+i+" folder.":void((s=a.split(c.sep)).length<3||s[s.length-2]!==i||s[s.length-3]):"User variable is not set in Settings"):void 0:pinegrow.getValidationError(o.name,"req")},on_changed:function(e,t,a,o,r,n,i,s){var l,p;"change"===i&&a&&s.slug&&(l="plugin"===s["project_type"],a.endsWith(`wp-content`+c.sep+(p=l?"plugins":"themes"))||a.endsWith(`wp-content`+c.sep+p+c.sep))&&pinegrow.showAlert(`<p>Would you like to create the project folder <code>${s.slug}</code> in folder <code>${a}</code>?</p>`,`Create ${l?"plugin":"theme"} folder?`,"No","Yes, create the folder",null,function(){var t=a+(a.endsWith(c.sep)?"":c.sep)+s.slug;try{crsaCreateDirs(t,require("fs")),n.find("input.crsa-input").val(t).trigger("change"),pinegrow.showQuickMessage("Project folder was created.")}catch(e){pinegrow.showAlert(`<p>Unable to create folder <code>${t}</code>.</p><p>${e.toString()}</p>`,"Unable to create the folder")}})},placeholder:"i.e. wp-content/themes/mytheme",helptext:`<p>Select the folder for exporting the WordPress theme or plugin.</p><p>The folder must already exist.</p><p>The recommended location is within the <code>wp-content/themes</code> (<code>wp-content/plugins</code> for plugins) folder of your local WordPress installation, so that you can easily test the theme.</p>`},page:{type:"select",name:"The master page",show_empty:!0,options:e,default_value:a,show_if:function(e,t,a){return"plugin"!==(e.project_type||n)},helptext:`<p>Every theme needs the main file that will be exported as index.php, a default WordPress template. That's usually index.html.</p><p>The selected file will become the master page and all other templates will use its header and footer (unless you define more master pages).</p>`},project_version:{type:"text",name:f.wpSayTheme()+" version",placeholder:f.forExample("1.0.0"),helptext:`<p>Set the theme or plugin version. Increase the version number whenever you make significant changes. The version number is also used as a cache busting suffix for scripts and styles.</p>`},auto_increment_version:{type:"checkbox",name:"Auto increment the version on every export",value:"1",helptext:`<p>Auto increment the minor version number every time the whole project is exported. This is also useful for making sure that the most current styles and scripts are loaded when viewring the project.</p>`},more_settings_button:{type:"button",name:"Edit more project settings",func:function(){var e="theme"===(s.values.project_type||"theme")?"style.css":f.wpGetPluginFileName(s.values),t=h.getFileForUrl(e);u&&e&&t?(pinegrow.openFileInCodeEditor(t.path),pinegrow.showQuickMessage(`<b>${e}</b> is now open in the code editor. Save settings in this dialog (or click cancel to close it without saving settings) and then edit the project information in the header in the code editor.`,5e3)):pinegrow.showAlert(`<p>Please setup the project and export it first in order to generate required files, then come back here and press this button.</p>`,"Setup and export the project first")},helptext:`<p>Edit theme or plugin description, license and other information. Click the button to open the file where you can edit this information.</p>`}}},wppreviewapi:{name:"Preview and API access",fields:{url:{type:"text",name:"Site url",placeholder:f.forExample("https://localwpsite"),helptext:`<p>Enter the url address of your local WordPress site, so that you can preview the theme or plugin and import content from the WordPress site.</p>`},api_notice:{type:"displayhtmlwithlabel",name:"&nbsp;",html:`<div class="pg-dialog-notice" style="text-align:left;">For security purposes, the username and password are stored in your local Pinegrow profile, not in project's <code>pinegrow.json</code> file.</div>`,show_if:function(e,t,a){return e.api_username||e.api_password}},api_username:{type:"text",name:"Username",placeholder:f.forExample("admin"),helptext:`<p>Enter the username that will be used for the API access to live data on the WordPress site.</p>`,aavalidate:function(e,t,a,o,r,n){if(a&&!n.url)return"Set the Site URL as well."}},api_password:{type:"text",name:"Application password",input_type:"password",helptext:`<p>Enter the application password (generate it on Edit User screen in WordPress dashboard).</p>`,aavalidate:function(e,t,a,o,r,n){if(a&&!n.url)return"Set the Site URL as well."}},api_test:{type:"button",name:`Test API access`,func:async function(e,t,a,o,r){pinegrow.showQuickMessage("Testing API access, please wait...");try{await new PgWordpressApi(a.url,a.api_username,a.api_password).getSiteSettings();pinegrow.showQuickMessage("API access is working!")}catch(e){pinegrow.showQuickError(`API access is not working: `+e.toString())}},show_if:function(e,t,a){return e.url&&e.api_username&&e.api_password}},api_info:{type:"button",name:`Learn how to setup and use the live preview...`,func:function(e,t,a,o,r){pinegrow.openExternalUrl(f.wpLiveDataHelpUrl)}}}},wpthemesettings2:{name:"Export options",fields:{block_theme:{name:"Enable site editor",type:"checkbox",value:"true",helptext:`<p>Enable the site editor by adding
<pre>
add_theme_support('block-templates');
add_theme_support('block-template-parts');
</pre>
to <code>functions.php</code> and creating empty <code>templates/index.html</code> file, if it does not exist.
.</p>
<p>Use Site editor to build templates with your custom blocks.</p>`},themejson:{type:"checkbox",name:"Generate theme.json",value:"true",show_if:"!project_type==plugin",helptext:`<p>Generate theme.json with colors and fonts from the Design panel. Edit theme.json to add custom settings. Palette and fontFamilies are always replaced by values from the Design panel.</p>`},wpseo:{type:"checkbox",name:"Let WordPress handle the SEO",value:"true",show_if:"!project_type==plugin",helptext:`<p>All SEO-related meta fields will be removed from the header so that WordPress can insert dynamic SEO information.</p>`},wpjquery:{type:"checkbox",name:"Use WordPress jQuery script",value:"true",show_if:"!project_type==plugin",helptext:`<p>Check to replace the jQuery that is supplied with the HTML files with the built-in WordPress jQuery version. This will work ok in most cases, so only uncheck this if you experience problems with scripts on the page.</p>`},generator:{type:"checkbox",name:'Include &quot;Generated with Pinegrow&quot; in the source code<span class="thanks"> Thanks :)</span>',value:"true",helptext:`<p>Let Pinegrow add generator meta field in the page header and a comment at the top of the PHP header. Both of these are only visible in the source code.</p>`,on_changed:function(e,t,a,o,r,n){var i=n.find("span.thanks");"true"===a?i.show():i.hide()},on_fields_created:function(e,t,a,o,r,n){var i=r.find("span.thanks");"true"===a?i.show():i.hide()}}}},wpthemesettings3:{name:"Image sizes",fields:o},wpthemesettings4:{name:"Blocks settings",fields:{blocks_type:{name:"Blocks type",type:"select",default_value:"native-hybrid",options:[{key:"native-hybrid",name:"Hybrid (React in the editor, PHP on the front-end)"},{key:"native-auto",name:"Regular JavaScript/React blocks (if no PHP WP actions)"},{key:"native-dynamic",name:"Dynamic PHP blocks"},{key:"acf",name:"ACF"}],helptext:`<p>Select how blocks are implemented in the exported theme or plugin:</p>
<ul>
<li><b>Regular JavaScript/React blocks</b> - generate a native WordPress block that renders with JavaScrip in the browser at the time you edit the post. Only Block Attributes and Block Inner Content actions are allowed in such blocks. If any other WordPress action (such as Show Posts) is used, a dynamic block will be generated instead.</li>
<li><b>Dynamic PHP blocks</b> - generate a native WordPress block that renders with PHP every time it is displayed. The block can use display posts and use all WordPress actions.</li>
<li><b>Hybrid blocks</b> - the best of both worlds: React in the editor, PHP on the front-end. Hybrid blocks are always up-to-date. No block recovery, no re-saving posts.</li>
<li><b>ACF PRO</b> - generate the ACF PRO block. This option requires the ACF PRO plugin.</li>
</ul>`},blocks_load_if_rendered:{name:"Load only styles and scripts of blocks that are displayed on the front-end",type:"checkbox",default_value:"false",negvalue:"false",value:"true",helptext:`<p>By default, WordPress loads the resources of all registered blocks when displaying a page on the front-end. Check this option to include only resources of blocks that are used on the page.</p><p>Note, this setting will affect all blocks on the website. The resources are included at the end of the body element.</p>`},blocks_inline_svg:{name:"Allow using inline SVG images in Block attributes",type:"checkbox",default_value:"false",negvalue:"false",value:"true",helptext:`<p>Enable to allow users to use inline SVG images with Image selector control on Image attributes. Using SVG images can be a security risk, if non-trusted users are allowed to edit the site content.</p>`}}},wpthemesettings_blocks_styles:{name:"Blocks editor stylesheets",fields:{}},wpthemesettings_blocks_cat:{name:"Blocks settings",fields:{block_category:{name:"Default blocks category",type:"text",helptext:`<p>Id of a default category for custom blocks. Use an existing category such as <code>text</code> or enter a unique category id and - if needed - register it below.</p>`,validate:f.validateSlug,placeholder:f.forExample("my_cool_blocks")},block_category_register:{name:"Register this block category",type:"checkbox",default_value:"false",negvalue:"false",value:"true",helptext:`<p>Register the default block category, if it is not yet registered.</p>`},block_category_name:{name:"Category name",type:"text",placeholder:f.forExample("My Cool Blocks"),helptext:`<p>The name of the new block category.</p>`,show_if:"block_category_register==true"},block_category_icon:{name:"Category icon",type:"text",placeholder:f.forExample("wordpress"),helptext:`<p>The icon for the new block category.</p>`,show_if:"block_category_register==true"}}}},"undefined"!=typeof wc_addon&&(s.sections.wcsettings={name:"WooCommerce",fields:{wc_not_enabled:{name:"Get Shop Builder for WooCommerce",type:"button",func:function(){pinegrow.openExternalUrl(wc_addon.getUpgradeUrl())},helptext:`<p>Upgrade to Shop Builder for WooCommerce to be able to build custom WooCommerce themes.</p>`,show_if:function(){return!f.isWCEnabled()}},wc_enabled:{name:"Enable WooCommerce features in this project",type:"checkbox",default_value:"false",negvalue:"false",value:"true",show_if:function(){return f.isWCEnabled()},helptext:`<p>Enable WooCommerce features in this project.</p>`},wc_gallery_js:{name:"Image gallery implementation",type:"select",default_value:"wc",options:[{key:"wc",name:"WooCommerce"},{key:"custom",name:"Custom"}],show_if:function(){return f.isWCEnabled()},helptext:`<p>Choose the front-end JavaScript implementation for the gallery.</p>`}}}),5),t=1;t<=p;t++)!function(a){s.sections.wpthemesettings_blocks_styles.fields["blocks_editor_css_"+a]={name:"Editor stylesheet "+a,type:"text",file_picker:isApp(),file_picker_no_proxy:!0,file_picker_use_project_as_parent:!0,show_if:function(e,t){return"plugin"!==e["project_type"]&&(1===a||e[`blocks_editor_css_`+(a-1)])},helptext:`<p>Load the stylesheet (for example, bootstrap.css or similar) into the blocks editor so that the blocks are styled correctly during editing. You can load up to ${p} stylesheets.</p>`},s.sections.wpthemesettings_blocks_styles.fields["blocks_editor_css_hint_"+a]={name:"&nbsp;",html:function(){return`<div style="background-color: #4296c726;
    padding: 4px 10px;
    border-left: 4px solid #4296c7;
    display: block;"><p>HINT: Use <code>tailwind_theme/tailwind_for_wp_editor.css</code> instead.</p><p>This is a special version of tailwind.css (without resetting common CSS styles), generated by the Design panel when WordPress Builder is activated in the project. Only available with built-in Tailwind CSS 3 compiler.</p><p>If the file does not yet exist, trigger an update in the Design Panel and save changes.</p></div>`},type:"displayhtmlwithlabel",show_if:function(e,t){return"plugin"!==e["project_type"]&&"tailwind_theme/tailwind.css"===e[`blocks_editor_css_`+a]}}}(t);isApp()||(delete s.sections.wpthemesettings1.fields.dir,delete s.sections.wpthemesettings1.fields.url,delete s.sections.wppreviewapi);u||(s.sections.wpthemesettings2.closed=!0,s.sections.wpthemesettings3.closed=!0),s.onOK=function(){var o=t||{},a=!1;if($.each(s.values,function(e,t){a=a||t!==(o[e]||null)}),f.wpRefreshApiAndLiveData(),a){var r=pinegrow.getCurrentProjectInfo();if(r){var t={dir:s.values.dir||null,name:s.values.name,slug:s.values.slug,url:s.values.url,project_version:s.values.project_version,auto_increment_version:s.values.auto_increment_version||"0",page:r.makeUrlRelative(s.values.page||""),themejson:s.values.themejson,wpseo:s.values.wpseo,wpjquery:s.values.wpjquery,generator:s.values.generator,images:d(),block_theme:s.values.block_theme,blocks_type:s.values.blocks_type,pg_version:crsaGetVersion(),blocks_editor_styles:function(){for(var e=[],t=1;t<=p;t++){var a="blocks_editor_css_"+t;if(!s.values[a])break;e.push(s.values[a])}return e}(),project_type:s.values.project_type,blocks_inline_svg:s.values.blocks_inline_svg,blocks_load_if_rendered:s.values.blocks_load_if_rendered,block_category:s.values.block_category,block_category_register:s.values.block_category_register,block_category_name:s.values.block_category_name,block_category_icon:s.values.block_category_icon,wc_enabled:s.values.wc_enabled},e=(r.setSetting("wp-theme-info",t),r.save(),isApp()&&s.values.url&&(pinegrow.setSetting(`wpapi_username_`+s.values.url,s.values.api_username),pinegrow.setSetting(`wpapi_password_`+s.values.url,s.values.api_password)),f.isWPEnabledForProject_map.set(h,!0),f.current_theme_info=null,f.getCurrentThemeInfo(),pinegrow.dispatchEvent("on_action_panel_should_be_refreshed"),f.wp_data.has_theme_settings=!0,pinegrow.showQuickMessage(f.wpSayTheme()+" settings updated."),pinegrow.getSourceNodeOfUrl(s.values.page,!1,null)),n=!1;try{n=e.findOne("html").hasAttr("wp-template")}catch(e){console.error(e),pinegrow.showQuickError(`Unable to check if Page settings on ${t.page} are ok.`),n=!0}function i(e){var t=pinegrow.getSelectedPage();t&&t.hasFramework(f)&&e&&e(),pinegrow.activateFrameworkInCurrentContext(f,function(){e&&e()})}n?i():pinegrow.openOrShowPage(s.values.page,function(a){i(function(){var e=a.sourceNode.findOne("html"),t=f.getWPAction("wp-template");(new PgApi).addAction(e,t,{},{"wp-template-define-master-page":!0,"wp-template-export-as":"index.php"}),pinegrow.selectElement(e),pinegrow.selectElement(e),pinegrow.showQuickMessage("Save the page to keep the Page settings.",6e3),pinegrow.refreshCurrentProject(),o.page&&r.makeUrlAbsolute(o.page)!==s.values.page&&pinegrow.showAlert(`<p>The master page setting has been changed. Open the old master page <code>${r.makeUrlRelative(o.page)}</code> and edit its <b>Page settings</b> to remove any conflicts with the new master page.</p>`,"The master page setting was changed")})},!0)}}isApp()?f.updateWPMenuForProjectType():f.wpUpdateWPMenuButtonLabel()},s.show(),f.wpUpdateSayTheme("plugin"===(i.project_type||n),s.$dialog)}var e,t,r,n,s,l,p,c,g=pinegrow.getCurrentProjectInfo();if(g)if(u=g.getSetting("wp-theme-info")){if((i=$.extend({},u)).page&&(i.page=g.makeUrlAbsolute(i.page)),p=u.images||{},c=i,$.each(p,function(a,e){$.each(e,function(e,t){c[`image-size-${a}-`+e]=t})}),u.blocks_editor_styles)for(var _=0;_<u.blocks_editor_styles.length;_++)i[`blocks_editor_css_`+(_+1)]=u.blocks_editor_styles[_];i.project_version||(isApp()?i.dir&&(t=require("fs"),e="plugin"===i.project_type?h.getAbsolutePath(f.wpGetPluginFileName(i)):h.getAbsolutePath("style.css"),t.existsSync(e))&&(r=t.readFileSync(e,{encoding:"utf8"}))&&(i.project_version=f.wpGetThemeHeaderValue(r,"Version")):(t=require("fs"),e="plugin"===i.project_type?f.wpGetPluginFileName(i):"style.css",(r=h.getContentOfUrlWithLookup(e))&&(i.project_version=f.wpGetThemeHeaderValue(r,"Version"))),i.project_version&&setTimeout(function(){pinegrow.showAlert(`<p>Theme or plugin version number is now managed through Theme / Plugin Settings.</p><p>Use the "Auto-increment on export" setting to automatically increase the minor version number every time you export the project.</p>`,"About the version number")},100)),"auto_increment_version"in i||(i.auto_increment_version="1"),isApp()&&i.url&&(i.api_username=pinegrow.getSetting(`wpapi_username_`+i.url),i.api_password=pinegrow.getSetting(`wpapi_password_`+i.url)),o()}else n=function(e,t){e.length||t&&"PGTC"===pgf.product?"PGTC"===pgf.product?f.wpAskToConvertProjectToPGTC():e.length&&f.wpAskToConvertProjectFromOldPGWPToPGWP():(i.wpjquery="false",i.wpseo="true",i.generator="true",i.auto_increment_version="1",i.themejson="true",i.block_theme="true",o())},s=[],l=!1,pinegrow.getCurrentProject().forEachEditableFile(function(e,t,a){var o,r=e.sourceNode.findOne("html");r&&(o=null,r.hasAttr("wp-site")&&r.hasAttr("wp-site-is-master-page")&&((o={}).dir=r.getAttr("wp-site-themes-folder"),o.name=r.getAttr("wp-site-theme-name"),o.slug=r.getAttr("wp-site-theme-slug"),o.url=r.getAttr("wp-site-preview-url"),o.page=e.url,o.crsaPage=e,s.push(o)),l||r.walkSelfAndChildren(function(e){if(e.isElement){var t=e.findAttributesStartingWith("wp-"),a=e.findAttributesStartingWith("cms-"),o=e.findAttributesStartingWith("wc-");if(a.length||o.length||t.length&&(1!==t.length||"wp-preview"!==t[0]))return l=!0,!1}return!0})),t(e,a)},function(){n(s,l)},"Looking for Site settings...")}else pinegrow.requireProject(function(){})};var e=[],t=[],h=new PgComponentType("wp_site","WordPress site"),n=(h.selector="[wp-site]",h.ignore_lock=!0,h.attribute="wp-site",h.hideShowFields=function(e,t,a,o){var r="true"==e,n=t.parent();r?(pg$Show(n.find(".crsa-field-wp_site_option_theme_name"),"flex"),pg$Show(n.find(".crsa-field-wp_site_option_theme_slug"),"flex"),pg$Show(n.find(".crsa-field-wp_site_option_themes_folder"),"flex"),n.find(".crsa-field-wp_site_option_master_page").hide()):(n.find(".crsa-field-wp_site_option_theme_name").hide(),n.find(".crsa-field-wp_site_option_theme_slug").hide(),n.find(".crsa-field-wp_site_option_themes_folder").hide(),pg$Show(n.find(".crsa-field-wp_site_option_master_page"),"flex")),setTimeout(function(){pinegrow.validateAllFields(n,a,o)},1)},h.hideShowOnlyExportParts=function(e,t,a,o){var r="true"==e,n=t.parent();r?n.find(".crsa-field-wp_site_export_parts").show():n.find(".crsa-field-wp_site_export_parts").hide()},h.sections={wp_site_options:{name:"Options",fields:{wp_site_option_is_master:{type:"checkbox",name:"This is the master page",attribute:"wp-site-is-master-page",empty_attribute:!0,value:"true",action:"custom",ignore_lock:!0,get_value:function(e,t,a,o){return r(e,"wp-site-is-master-page",o)},set_value:function(e,t,a,o,r,n){return i(e,"wp-site-is-master-page",t,n)},on_changed:function(e,t,a,o,r,n,i,s){h.hideShowFields(a,n,e,s)},on_fields_created:function(e,t,a,o,r,n){h.hideShowFields(a,r,e,n)}},wp_site_option_theme_name:{type:"text",name:"Theme name",attribute:"wp-site-theme-name",action:"custom",ignore_lock:!0,get_value:function(e,t,a,o){return r(e,"wp-site-theme-name",o)},set_value:function(e,t,a,o,r,n){return i(e,"wp-site-theme-name",t,n)},validate:function(e,t,a,o,r,n){return n["wp_site_option_is_master"]&&!a?pinegrow.getValidationError("Project name","req"):null},placeholder:f.forExample("My theme")},wp_site_option_theme_slug:{type:"text",name:"Slug",attribute:"wp-site-theme-slug",action:"custom",ignore_lock:!0,get_value:function(e,t,a,o){return r(e,"wp-site-theme-slug",o)},set_value:function(e,t,a,o,r,n){return i(e,"wp-site-theme-slug",t,n)},validate:f.requireSlug,placeholder:f.defaultValue("my_project_name")},wp_site_option_themes_folder:{type:"text",name:"Theme folder ",attribute:"wp-site-themes-folder",action:"custom",file_picker:!0,file_picker_folder:!0,file_picker_no_url:!0,ignore_lock:!0,get_value:function(e,t,a,o){return r(e,"wp-site-themes-folder",o)},set_value:function(e,t,a,o,r,n){return i(e,"wp-site-themes-folder",t,n)},validate:function(e,t,a,o,r,n){return n["wp_site_option_is_master"]&&!a?pinegrow.getValidationError(o.name,"req"):null},placeholder:"i.e. wp-content/themes/mytheme"},wp_site_option_export_as:{type:"text",name:"Export as",attribute:"wp-site-export-as",placeholder:f.defaultValue("<file name>.php"),action:"custom",ignore_lock:!0,get_value:function(e,t,a,o){return r(e,"wp-site-export-as",o)},set_value:function(e,t,a,o,r,n){return i(e,"wp-site-export-as",t,n)}},wp_site_option_master_page:{type:"text",name:"Use master page",attribute:"wp-site-master-page",placeholder:f.forExample("index.html"),action:"custom",ignore_lock:!0,get_value:function(e,t,a,o){return r(e,"wp-site-master-page",o)},set_value:function(e,t,a,o,r,n){return i(e,"wp-site-master-page",t,n)},validate:function(e,t,a,o,r,n){return n["wp_site_option_is_master"]||a?null:pinegrow.getValidationError(o.name,"req")},placeholder:f.forExample("index.html")},wp_site_option_site_url:{type:"text",name:"Preview page url",attribute:"wp-site-preview-url",action:"custom",ignore_lock:!0,get_value:function(e,t,a,o){return r(e,"wp-site-preview-url",o)},set_value:function(e,t,a,o,r,n){return i(e,"wp-site-preview-url",t,n)},aaavalidate:function(e,t,a,o,r,n){return n["wp_site_option_is_master"]&&!a?pinegrow.getValidationError(o.name,"req"):null},placeholder:f.forExample("http://mysite/page-name")},wp_site_dont_export:{type:"checkbox",name:"Don't export this page",attribute:"wp-site-no-export",value:"true",action:"custom",ignore_lock:!0,empty_attribute:!0,get_value:function(e,t,a,o){return r(e,"wp-site-no-export",o)},set_value:function(e,t,a,o,r,n){return i(e,"wp-site-no-export",t,n)}},wp_site_export_parts:{type:"checkbox",name:"Don't export template parts",attribute:"wp-site-no-export-parts",value:"true",action:"element_attribute",empty_attribute:!0}}}},h.on_can_add_action=function(e,t,a){return pinegrow.showAlert(`<p>WordPress Site action is listed only for compatibility with older projects.</p><p>Please use "WordPress -&gt; Theme / Plugin Settings" and "WordPress -&gt; Page Settings" instead.</p>`,"Use Theme Settings and Page Settings instead","OK","Open Theme Settings",null,function(){f.showWordPressSiteSetupDialog()}),!1},h.on_action_added=function(e,t,a){var o=f.getThemeInfo();o?e.setAttribute("wp-site-master-page",o.master):e.setAttribute("wp-site-is-master-page","true")},h.meta={tags:[],helptext:"Enable WordPress export for this page. This action is deprecated. Use Theme Settings and Page Settings instead.",helplink:"https://pinegrow.com/docs/wordpress/actions/theme-settings/",extra_name:null},"PGTC"!==pgf.product&&(f.addComponentType(h),t.push(h)),new PgComponentType("wp_template","Define master page")),s=(n.selector="[wp-master-page]",n.attribute="wp-master-page",n.on_can_add_action=function(e,t,a){return"html"==e.tagName||(pinegrow.showQuickMessage("<b>Wrong element!</b> Add Define master page action on <b>the TOP node of the page</b> in the tree.",5e3,!1,!0),!1)},n.meta={tags:[],helptext:"Define additional master page. This overrides the <b>Use master page</b> setting on the WordPress site action. If the page is not index.html, page name is used as a slug for header and footer.",helplink:"https://pinegrow.com/docs/wordpress/actions/page-settings/#define-a-master-page",extra_name:null},f.addComponentType(n),e.push(n),f.showPageSettings=function(e){(e=e||pinegrow.getSelectedPage())&&("string"!=typeof e&&(e=e.url),pinegrow.openOrShowPage(e,function(e){var t=e.sourceNode.findOne("html");t&&setTimeout(function(){pinegrow.showUIPanel("cms",!0),pinegrow.selectElement(t)},100)}))},{"wp-template-export-as":{type:"text",name:"Export as",placeholder:f.defaultValue("<file name>.php"),action:"element_attribute",validate:function(e,t,a){if(a&&(0<=a.indexOf("{")||0<=a.indexOf("}")))return"Replace {...} with values."},open_list_on_focus:!0,show_if:function(e,t,a){return!f.wpIsPlugin()},options:function(){var e=["General","index.php - Used if more specific template is not found. Required for every theme.","singular.php - Single post, page or attachment","search.php - Template for search results","404.php - Template for Page not found error","Posts","home.php - Home page with posts","single.php - General single post template","{custom post template}.php - Custom post template","Pages","front-page.php - Used if site has a front page","page.php - General page template","page-{slug or id}.php - Single page for specific page","{custom page template}.php - Custom page template","Custom post types","single.php - General single post template","single-{post type}.php - Single post for post type","single-{post type}-{slug}.php - Single post for specific post","{custom post template}.php - Custom post template","archive-{post type}.php - Archive for a specific post type","Attachments","single.php - General single post template","attachment.php - General attachment template","{mimetype}.php - Template for a specific mimetype","{subtype}.php - Specific attachment subtype","{mimetype}-{subtype}.php - Specific mimetype and subtype","Authors","archive.php - General template for an archive","author.php - General author archive","author-{nicename or id}.php - Specific author archive","Categories","category.php - General category archive","category-{slug or id}.php - Specific category archive","Tags","tag.php - General tag archive","tag-{slug or id}.php - Specific tag archive","Date","date.php - General time-based archive","Custom taxonomies","taxonomy.php - General taxonomy archive","taxonomy-{taxonomy}.php - Archive for a specific taxonomy","taxonomy-{taxonomy}-{term}.php - Archive for a specific term"],a=(pinegrow.dispatchEvent("on_wp_get_template_export_as_options",null,e),[]);return e.forEach(function(e){var t=e.split(" - ");1===t.length?(a.length&&a.push({key:"emptyline",name:"",noselect:!0}),a.push({key:t[0],name:t[0]+":",html:`<span class="adropdown-header" style="color:#214A59;">${t[0]}:</span>`,noselect:!0})):a.push({key:t[0],name:t[0],html:t[0]+"&nbsp;<small>"+t[1]+"</small>"})}),a}},"wp-template-define-master-page":{type:"checkbox",name:"This is a master page with its own header &amp; footer",action:"element_attribute",value:"true",empty_attribute:!0,show_if:function(e,t,a){return!f.wpIsPlugin()&&!o(t,a)}},"wp-template-label4":{type:"displayhtmlwithlabel",name:"Master page",html:"This is the main master page, defined in Theme Settings.",action:"element_attribute",value:"true",empty_attribute:!0,show_if:function(e,t,a){return!f.wpIsPlugin()&&o(t,a)}},"wp-template-master":{type:"text",name:"Use master page",placeholder:f.defaultValue("the site master"),action:"element_attribute",options:f.wpInsight.getMasterPages,open_list_on_focus:!0,show_if:function(e,t,a){return!f.wpIsPlugin()&&!o(t,a)&&!e["wp-template-define-master-page"]}},"wp-template-label1":{type:"label",name:"Preview",action:"element_attribute",class:"pg-action-info-label"},"wp-template-preview-info":{type:"displayhtml",name:`<div style="font-size: 11px;
    text-align: left;
    padding-right: 10px;">This feature has been replaced with live preview and data import using WordPress REST API.</div>`},"wp-template-preview-info-button":{type:"button",name:`Learn more...`,func:function(){pinegrow.openExternalUrl(f.wpLiveDataHelpUrl)}},"wp-template-label2":{type:"label",name:"Export options",action:"element_attribute",class:"pg-action-info-label"},"wp-template-post-template":{type:"checkbox",name:"Use as post / page template",action:"element_attribute",value:"true",empty_attribute:!0,show_if:function(e,t,a){return!f.wpIsPlugin()}},"wp-template-post-template-name":{type:"text",name:"Post template name",action:"element_attribute",placeholder:f.forExample("My Special template"),show_if:"wp-template-post-template",validate:f.required,aavalidate:function(e,t,a,o,r,n){return!a&&n["wp-template-post-template"]?pinegrow.getValidationError(o.name,"req"):null}},"wp-template-post-template-types":{type:"text",name:"Use post template for post types",action:"element_attribute",placeholder:f.defaultValue("post, page"),show_if:"wp-template-post-template"},"wp-template-no-export":{type:"checkbox",name:"Don't export this page",action:"element_attribute",value:"true",empty_attribute:!0},"wp-template-no-export-parts":{type:"checkbox",name:"Don't export template parts",action:"element_attribute",value:"true",empty_attribute:!0,show_if:function(e,t,a){return!f.wpIsPlugin()}},"wp-template-label3":{type:"label",name:"Tools",action:"element_attribute",class:"pg-action-info-label"},"wp-template-import-button":{type:"button",name:"Import WP content",func:function(e){f.getRenderedWordPressHTMLWithNotice(e.getPage().sourceNode)}},"wp-template-auto-add-button":{type:"button",name:"Auto add WP actions",func:function(e){f.autoAddActionsToPage(e.getPage())}}});isApp()||(delete s["wp-template-label1"],delete s["wp-template-preview-url"],delete s["wp-template-show-preview-button"],delete s["wp-template-preview-url-button"],delete s["wp-template-label3"],delete s["wp-template-import-button"],delete s["wp-template-auto-add-button"]);(n=f.addTag("wp-template","Page settings",null,function(e){var t,a;e.hasAttr("wp-template-post-template")&&(t=e.getAttr("wp-template-post-template-name"),a=e.getAttr("wp-template-post-template-types")||"post, page",t)&&a&&(f.post_template_name=t,f.post_template_types=a)},s)).on_action_added=function(e,t,a){},n.on_changed=function(e,t){f.wpUpdateTemplateTagOnFile(null,t,e)},n.addMeta({tags:[f.tag_set_content],helptext:`Template settings.`,helplink:"https://pinegrow.com/docs/wordpress/actions/page-settings/",extra_name:null});var l=new PgComponentType("wp_site_content","Site content"),p=(l.selector="[wp-site-content]",l.code="<div wp-site-content></div>",l.empty_placeholder=!0,l.attribute="wp-site-content",l.sections={parameters:{name:"Options",fields:{"wp-site-content-button":{type:"button",name:"Show in the Tree",action:"none",func:function(e,t){f.showTheSiteContentInTheTree(t)}}}}},f.showTheSiteContentInTheTree=function(e){var a,t,o,r=pinegrow.getSelectedPage(),n=f.validateContentArea(r.sourceNode,r.getName());n.ok?((r=f.findContentArea(r)).begin&&(o=r.just_content?((t=new PgCollection).setList(r.begin.getChildren()),a=t.getFirst(),t.getLast()):(a=r.begin,r.end)),a&&o?(pinegrow.showUIPanel("tree",!0),setTimeout(function(){var e=pinegrow.getTreeViewOfClass(PgTreeView),t=e.markRangeInTree(a,o);t?PgQuickDialog("The Site Content Area is OK",function(e){return"<p>The Site Content area is marked with the green border in the Tree panel.</p><p>Everything before this area is the header and everything that follows it is the footer.</p><p>If this is a master page, the header and footer will be exported in their respective PHP files.</p><p>If this is not a master page, the theme's header and footer will be included before and after this area.</p>"},{width:380,target:t,on_close:function(){e.markRangeInTree(null)}}):pinegrow.showQuickError("The area is not visible in the tree. Perhaps the elements are collapsed?")},250)):pinegrow.showQuickError("The area is not defined or is invalid.")):f.showContentAreaError(n,e)},f.addComponentType(l),e.push(l),a.list.push(function(e){var t;if(e.hasAttr(l.attribute)&&!e.hasAttr(l.attribute+"-end"))return t=null,"body"==e.tagName&&(t=e.findLastNonScriptChild()),e.prepend(pgCreateNodeFromHtml(f.const_end_header)),t?pgCreateNodeFromHtml(f.const_start_footer).insertAfter(t):e.append(pgCreateNodeFromHtml(f.const_start_footer)),!1}),l.meta={tags:[],helptext:"Set the main content of the page. Everything before that is header.php, everything after it is footer.php. Alternatively, set the begin and end content to include a range of elements.",helplink:"https://pinegrow.com/docs/wordpress/wordpress-template-structure-header-footer-content-master-pages/#defining-the-site-content-of-your-template",extra_name:"get_header, get_footer"},e.push(f.addTag("wp-body-class","Body class","Additional classes",function(e){var t,a;e.hasAttr("wp-body-class")&&(t=e.getAttr("wp-body-class"),a="",e.hasAttr("class")&&(a=f.filterClasses(e.getAttr("class"))),t=t?" "+f.quoteParam(t)+" ":"",e.setAttr("class",a+(a.length?" ":"")+"<?php echo implode(' ', get_body_class("+t+")); ?>"))}).addMeta({tags:[f.tag_ret_string,f.tag_set_attr,f.tag_set_attr_class,f.tag_use_body],helptext:"Sets body classes to the element.# Auto-adds existing classes to the Additional classes parameter.",helplink:"https://developer.wordpress.org/reference/functions/body_class/",extra_name:"body_class"}).addNotPlaceable("Place this action on an existing element to set it's WordPress body class.")),new PgComponentType("wp_site_name","Site name")),c=(p.selector="[wp-site-name]",p.code="<h1 wp-site-name>My Amazing Website</h1>",p.attribute="wp-site-name",f.addComponentType(p),e.push(p),f.addHtmlOrNodeField(p,!1,"content"),a.list.push(function(e){if(e.hasAttr(p.attribute))return a.toPhpHtmlOrNode(e,"bloginfo( 'name' );",p)}),p.meta={tags:[],helptext:"Replace the content of the element with the name of the website",helplink:"https://developer.wordpress.org/reference/functions/bloginfo/",extra_name:"bloginfo"},new PgComponentType("wp_site_desc","Site description")),u=(c.selector="[wp-site-desc]",c.code="<p wp-site-desc>A Short Description of the Website</p>",c.attribute="wp-site-desc",f.addComponentType(c),e.push(c),f.addHtmlOrNodeField(c,!1,"content"),a.list.push(function(e){if(e.hasAttr(c.attribute))return a.toPhpHtmlOrNode(e,"bloginfo( 'description' );",c)}),c.meta={tags:[],helptext:"Replace the content of the element with the description of the website",helplink:"https://developer.wordpress.org/reference/functions/bloginfo/",extra_name:"bloginfo"},new PgComponentType("wp_title","Page title")),m=(u.selector="[wp-title]",u.code='<h2 wp-title wp-title-set="content">My Amazing Website &raquo; Just another WordPress site</h2>',u.attribute="wp-title",u.sections={parameters:{name:"Options",fields:{wp_title_sep:{type:"text",name:"Separator",action:"element_attribute",attribute:"wp-title-sep",parameter_order:1,placeholder:f.defaultValue("&raquo;"),default_value:"&raquo;"},wp_title_display:{type:"hidden",name:"Display",action:"element_attribute",attribute:"wp-title-display",default_value:"true",parameter_order:2},wp_title_sep_location:{type:"select",name:"Sep. location",action:"element_attribute",attribute:"wp-title-sep-location",parameter_order:3,show_empty:!0,options:[{key:"LEFT",name:"Left"},{key:"RIGHT",name:"Right"}]}}}},f.addComponentType(u),e.push(u),f.addHtmlOrNodeField(u),a.list.push(function(e){if(e.hasAttr(u.attribute))return a.toPhpHtmlOrNode(e,"wp_title("+a.getParams(u,e)+");",u)}),u.meta={tags:[],helptext:"Display page title.",helplink:"https://developer.wordpress.org/reference/functions/wp_title/",extra_name:"wp_title"},f.addTag("wp-header-image","Header image url",null,function(e){var t;e.hasAttr("wp-header-image")&&(t=a.getSetAttrValue(e,m,"src"))&&e.setAttr(t,"<?php echo esc_url( get_header_image() ); ?>")}));return f.addHtmlOrNodeField(m,!1,"attr","src"),m.sections.parameters.fields["wp-header-image-set-attr"].placeholder=f.defaultValue("src"),m.sections.parameters.fields["wp-header-image-set"].options.splice(0,2),m.addMeta({tags:[f.tag_ret_image],helptext:"Set header image url to the attribute (default src) of the element.",helplink:"https://developer.wordpress.org/reference/functions/get_header_image/",extra_name:"get_header_image"}),m.addNotPlaceable("Assign this action to the existing IMG element."),e.push(m),f.selectSiteContentHelper=function(e){new PgQuickSelectElement({title:"Set the Content Area of the Page",description:"<p>Select an element or a range of elements that constitute the main content of this page.</p><p>Everything before this element(s) is the header and everything that follows this element(s) is the footer.</p><p>If this is a master page, the header and footer will be exported in their respective PHP files.</p><p>If this is not a master page, the theme's header and footer will be included before and after this element(s).</p>",reselect:!0,target:e,current_col:function(){var e=pinegrow.getSelectedPage(),t=f.findContentArea(e),a=new PgCollection;if(a.add(t.begin),!t.just_content)for(var o=t.begin;o&&(a.add(o),o!=t.end);)o=o.next();return a},remove:!0,func:function(e,t){pinegrow.getSelectedPage().sourceNode.find("[wp-site-content]").forEach(function(e){e.removeAttrIfStartWith("wp-site-content")});var a=e.first();a.setAttr("wp-site-content"),0?((a=e.last()).setAttr("wp-site-content"),a.setAttr("wp-site-content-end")):a.setAttr("wp-site-content-begin"),pinegrow.showQuickMessage("The Content Area was set.")}})},{actions:e,site_actions:t}},pgWordpressConditions=function(f,i){function l(e,t,a,o,r,n,i){var s="";return e||(s+="!"),t&&(s+=t),a?s+="|"+a:o&&(s+="|"),o&&(s+="|"+o),r&&(s+="|"+r),n&&(s+="|"+n),i&&(s+="|"+i),s.length?s:null}function a(e){var t,a={state:!0,p1:null,p2:null,p3:null,p4:null,p5:null,p6:null};return e&&0!=e.length&&("!"==e.charAt(0)&&(a.state=!1,e=e.substr(1)),e.length)&&(t=e.split("|"),a.p1=t[0].length?t[0]:null,1<t.length&&(a.p2=t[1].length?t[1]:null),2<t.length&&(a.p3=t[2].length?t[2]:null),3<t.length&&(a.p3=t[3].length?t[3]:null),4<t.length&&(a.p3=t[4].length?t[4]:null),5<t.length)&&(a.p3=t[5].length?t[5]:null),a}var e=[],t=(e.push(f.addTag("wp-if-custom","If options",null,null,{"wp-if-custom":{type:"text",textarea:!0,name:"Custom condition",placeholder:f.forExample("$myvalue > 0"),action:"element_attribute",attribute:"wp-if-custom",attribute_keep_if_empty:!0},"wp-if-custom-operator":{type:"select",name:"Operator",action:"element_attribute",attribute:"wp-if-custom-operator",show_empty:!0,options:[{key:"||",name:"OR"},{key:"&&",name:"AND"}]},"wp-if-custom-not":{type:"checkbox",name:"Not",action:"element_attribute",value:"true",negvalue:"false",default_value:"false",attribute:"wp-if-custom-not"},"wp-if-custom-outer":{type:"checkbox",name:"Toggle <nocap>just the</nocap> outer element",action:"element_attribute",value:"true",empty_attribute:!0,attribute:"wp-if-custom-outer"}}).addMeta({tags:[],helptext:"Set custom IF condition and choose operator for multiple conditions.",helplink:null,extra_name:null})),["is_home","is_front_page","is_admin","is_admin_bar_showing","is_single/Posts","is_sticky/Posts","post_type_supports/Post type/Feature","is_post_type_hierarchical/Post types","is_post_type_archive/Post types","get_theme_mod/Theme mod/Value/Or, Value/Or, Value/Or, Value","get_post_meta/Post id/Key","is_comments_popup","comments_open","get_comments_number","get_comment_pages_count","get_option/Option key","pings_open","is_page/Pages","is_subpage/Page","is_page_template/Template","is_category/Categories","in_category/Categories","is_tag/Tags","has_tag/Tags","is_tax/Taxonomy/Slugs","has_term/Taxonomy/Term/Post","term_exists/Terms/Taxonomy/Parent","is_taxonomy_hierarchical/Taxonomy","taxonomy_exists/Taxonomy","is_author/Authors","is_multi_author","is_date","is_year","is_month","is_day","is_time","is_new_day","is_archive","is_search","is_404","is_paged","is_attachment","wp_attachment_is_image/Post id","is_singular/Posts","post_type_exists/Post type","is_main_query","is_feed","is_trackback","is_preview","has_excerpt/Post","has_nav_menu/Menu","in_the_loop","have_posts/WP_Query name","have_comments","is_dynamic_sidebar/Index or name","is_active_sidebar/Sidebar","is_active_widget/Callback/Widget id","is_rtl","is_multisite","is_main_site","is_super_admin","is_user_logged_in","is_plugin_active/Plugin path","is_child_theme","current_theme_supports/Features","has_post_thumbnail/Post id","post_password_required/Post id","current_user_can/Capability/Args"]),o=null,r=(f.wpGetOptionsForConditionsWithoutParameters=function(){return null===o&&(o=[],t.forEach(function(e){e.indexOf("/")<0&&o.push({key:e,name:e})})),o},[]),n=/_/g,s=f.addTag("wp-else-if","Else",null,null).addMeta({tags:[f.tag_use_condition],helptext:"Make else or elseif conditional statement. Requires a previous if statement.",extra_name:"else or elseif"});e.push(s),e.push(f.addTag("wp-with-prev-if","Add to previous if",null,null).addMeta({tags:[],helptext:"Include this element into the if statement of the previous element. #This action can be added to a string of subsequent elements to include all of them into a single if block statement.",helplink:null,extra_name:null}));for(var p=0;p<t.length;p++){var c=t[p].split("/"),u={func:c[0],key:c[0].replace(n,"-"),params:0,postid:!1,param_names:[]};if(1<c.length)for(var m=1;m<c.length;m++)u.params++,u.param_names.push(c[m]),"Post id"==c[m]&&(u.postid=!0);r.push(u);var d="wp-if-"+u.key,h=new PgComponentType("wp_if_"+u.func,"IF "+u.func),g=(h.selector_new=function(e){return e.hasAttr(d)},h.code="<p></p>",h.attribute=d,h.dont_include_in_rendered_code=!0,{});if(!function(s){g[s]={type:"checkbox",name:"Not",action:"custom",value:"1",set_value:function(e,t,a,o,r){return e.attr(s,l("1"!=t,a[s+"_p0"]||null,a[s+"_p1"]||null,a[s+"_p2"]||null,a[s+"_p3"]||null,a[s+"_p4"]||null,a[s+"_p5"]||null)),t},get_value:function(e){var t;return!e.hasAttr(s)||(t=e.getAttr(s),a(t).state)?null:"1"}};for(var e=0;e<u.params;e++){var t=s+"_p"+e;!function(i){g[t]={type:"text",name:u.param_names[i],action:"custom",get_value:function(e){var t;return e.hasAttr(s)?(t=e.getAttr(s),t=a(t),0==i?t.p1:1==i?t.p2:2==i?t.p3:3==i?t.p4:4==i?t.p5:5==i?t.p6:void 0):null},set_value:function(e,t,a,o,r){var n=a[s]||null;return e.attr(s,l("1"!=n,0==i?t:a[s+"_p0"]||null,1==i?t:a[s+"_p1"]||null,2==i?t:a[s+"_p2"]||null,3==i?t:a[s+"_p3"]||null,4==i?t:a[s+"_p4"]||null,5==i?t:a[s+"_p5"]||null)),t}}}(e)}}(d),"wp-if-current-user-can"==d){g["wp-if-current-user-can_p0"].type="select",g["wp-if-current-user-can_p0"].show_empty=!0;for(var _=["activate_plugins","add_users","create_users","delete_others_pages","delete_others_posts","delete_pages","delete_plugins","delete_posts","delete_private_pages","delete_private_posts","delete_published_pages","delete_published_posts","delete_themes","delete_users","edit_dashboard","edit_others_pages","edit_others_posts","edit_pages","edit_plugins","edit_posts","edit_private_pages","edit_private_posts","edit_published_pages","edit_published_posts","edit_themes","edit_theme_options","import","install_plugins","install_themes","list_users","manage_categories","manage_links","manage_options","moderate_comments","promote_users","publish_pages","publish_posts","read","read_private_pages","read_private_posts","remove_users","switch_themes","unfiltered_html","unfiltered_upload","update_core","update_plugins","update_themes","upload_files"],w=[],b=0;b<_.length;b++)w.push({key:_[b],name:_[b]});g["wp-if-current-user-can_p0"].options=w}else if("wp-if-get-theme-mod"==d){g["wp-if-get-theme-mod_p1"].show_if=function(){return!0};for(m=2;m<5;m++)g["wp-if-get-theme-mod_p"+m].show_if=`wp-if-get-theme-mod_p`+(m-1)}h.sections={parameters:{name:"Options",fields:g}},f.addComponentType(h),h.meta={tags:[f.tag_use_condition]},e.push(h)}var y=f.wpGetConditionString=function(e){var t=e.findAttributesStartingWith("wp-if-"),a="true"==e.getAttr("wp-if-custom-not")?"! ":"",o=e.getAttr("wp-if-custom");if(t.length){for(var r=[],n=0;n<t.length;n++){var i=t[n].name.replace("wp-if-","");if("custom"!=i&&"custom-operator"!=i&&"custom-not"!=i&&"custom-outer"!=i){var s=t[n].value,i=i.replace(/\-/g,"_"),l=!1,p=null;if(s&&s.length){"!"==s.charAt(0)&&(l=!0,s=s.substr(1)),p=s.split("|"),"post_type_supports"==i&&p.length&&!p[0].length&&(p[0]="get_post_type()");for(var c=0;c<p.length;c++){var u=p[c].split(",");if(0==u[0].length&&1==p.length){p=null;break}for(var m=0;m<u.length;m++){var d=$.trim(u[m]);d.length&&(u[m]=f.quoteParam(d))}0==u.length?p[c]="null":1==u.length?p[c]=u[0]:p[c]="array( "+u.join(", ")+" )"}}0<=["wp_attachment_is_image","has_post_thumbnail","post_password_required"].indexOf(i)&&(p&&0!=p.length&&"null"!=p[0]||((p=p||["a"])[0]="get_the_ID()")),"get_post_meta"==i&&p&&2==p.length&&(p[0]&&"null"!=p[0]||(p[0]="get_the_ID()"),p.push("true"));var h="("+(p?" "+p.join(", ")+" ":"")+")";if("is_subpage"==i)h="( is_page() && $post->post_parent ",p&&0!=p.length&&"null"!=p[0]?h+="== "+p[0]:h+="> 0",h+=" )";else if("have_posts"==i)h=p&&p.length?"$"+p[0].replace(/'/g,"")+"->have_posts()":"have_posts()";else if("get_theme_mod"==i)if(p&&1<p.length&&p[1].length){for(var h="",g=1;g<p.length&&0!=p[g].length;g++){var _=`get_theme_mod( ${p[0]} ) ${l?"!=":"=="} `+p[g];0==h.length?h+=_:h+=" || "+_}l=!1}else h=i+h;else h="has_term"==i?`has_term( ${p[1]||"''"}, ${p[0]}, ${p[2]||"null"} )`:i+h;r.push(h=l?"!"+h:h)}}o=(o&&r.push(o=r.length?"( "+o+" )":o)," "+(e.getAttr("wp-if-custom-operator")||"||")+" ");return a+r.join(o)}return null};return i.list.push(function(e){var t=e.hasAttr("wp-else-if"),a=y(e);if(a||t){if(e.hasAttr("wp-enqueue-script")||e.hasAttr("wp-enqueue-style")||("script"===e.tagName||"style"===e.tagName||"link"===e.tagName&&"stylesheet"===e.getAttr("rel"))&&!e.hasAttr("wp-no-enqueue"))return!1;!t||(o=e.prev())&&(0<o.findAttributesStartingWith("wp-if-").length||o.hasAttribute("wp-with-prev-if"))||(t=!1);var o=e.hasAttr("wp-if-custom-outer");if(!a&&!t)return!1;var t=a?"<?php "+(t?"elseif":"if")+" ( "+a+" ) : ?>":"<?php else : ?>",a="<?php endif; ?>",r=function(e){for(var t=e,a=t.next();a&&a.hasAttr("wp-with-prev-if");)a=(t=a).next();return t}(e),n=r.next();if(n&&n.hasAttr("wp-else-if")&&(a=null),o&&a&&e===r){for(n=0<e.children.length?e.children[e.children.length-1]:e;0<e.children.length;)e.children[e.children.length-1].insertAfter(e);o=e.clone(!1);o.insertAfter(n),e.outputOnly="opening",o.outputOnly="closing",f.removeWpActionsFromNodeTree(o),i.addToChanges(function(e,t,a,o){pgCreateNodeFromHtml(t).insertBefore(e),pgCreateNodeFromHtml(a).insertAfter(e),pgCreateNodeFromHtml(t).insertBefore(o),pgCreateNodeFromHtml(a).insertAfter(o)},this,[e,t,a,o])}else i.addToChanges(function(e,t,a){pgCreateNodeFromHtml(t).insertBefore(e),a&&pgCreateNodeFromHtml(a).insertAfter(r)},this,[e,t,a])}return!1}),e},pgWordpressUsers=function(a,o){var e=[],r=new PgComponentType("wp_loginout","Login/out link"),t=(r.selector="[wp-loginout]",r.code='<a href="#" wp-loginout>Log in</a>',r.attribute="wp-loginout",r.sections={parameters:{name:"Parameters",fields:{wp_get_sidebar_name:{type:"text",name:"Redirect",action:"element_attribute",attribute:"wp-loginout",attribute_keep_if_empty:!0}}}},a.addComponentType(r),e.push(r),a.addHtmlOrNodeField(r),o.list.push(function(e){var t;if(e.hasAttr(r.attribute))return t=a.quoteParam(e.getAttr(r.attribute)),o.toPhpHtmlOrNode(e,"wp_loginout( "+t+", true );",r)}),r.meta={tags:[a.tag_ret_link,a.tag_t_user],helptext:"Display login or logout link.",helplink:"https://codex.wordpress.org/Function_Reference/wp_loginout",extra_name:"wp_loginout"},new PgComponentType("wp_loginform","Login form")),n=(t.selector="[wp-login-form]",t.code='<form name="loginform" id="loginform" action="#" method="post" wp-login-form>    <p class="login-username"><label for="user_login">Username</label><input type="text" name="log" id="user_login" class="input" value="" size="20"/></p>    <p class="login-password"><label for="user_pass">Password</label><input type="password" name="pwd" id="user_pass" class="input" value="" size="20"/></p>    <p class="login-submit"><input type="submit" name="wp-submit" id="wp-submit" class="button-primary" value="Log In"/><input type="hidden" name="redirect_to" value="/"/></p>    </form>',t.attribute="wp-login-form",t.sections={parameters:{name:"Parameters",fields:{wp_login_form_redirect:{type:"text",name:"Redirect",live_update:!0,action:"element_attribute",attribute:"wp-login-form-redirect",parameter_name:"redirect",placeholder:a.forExample("site_url( '/mypage/' )")},wp_login_form_formid:{type:"text",name:"Form id",live_update:!0,action:"element_attribute",attribute:"wp-login-form-id",parameter_name:"form_id",placeholder:a.defaultValue("loginform")},wp_login_form_label_username:{type:"text",name:"Label username",live_update:!0,action:"element_attribute",attribute:"wp-login-form-label-username",parameter_name:"label_username",placeholder:a.defaultValue("Username"),translate:!0},wp_login_form_label_password:{type:"text",name:"Label password",live_update:!0,action:"element_attribute",attribute:"wp-login-form-label-password",parameter_name:"label_password",placeholder:a.defaultValue("Password"),translate:!0},wp_login_form_label_remember:{type:"text",name:"Label remember",live_update:!0,action:"element_attribute",attribute:"wp-login-form-label-remember",parameter_name:"label_remember",placeholder:a.defaultValue("Remember Me"),translate:!0},wp_login_form_label_log_in:{type:"text",name:"Label login",live_update:!0,action:"element_attribute",attribute:"wp-login-form-label-log_in",parameter_name:"label_log_in",placeholder:a.defaultValue("Log In"),translate:!0},wp_login_form_id_username:{type:"text",name:"Id username",live_update:!0,action:"element_attribute",attribute:"wp-login-form-id-username",parameter_name:"id_username",placeholder:a.defaultValue("user_login")},wp_login_form_id_password:{type:"text",name:"Id password",live_update:!0,action:"element_attribute",attribute:"wp-login-form-id-password",parameter_name:"id_password",placeholder:a.defaultValue("user_pass")},wp_login_form_id_remember:{type:"text",name:"Id remember",live_update:!0,action:"element_attribute",attribute:"wp-login-form-id-remember",parameter_name:"id_remember",placeholder:a.defaultValue("rememberme")},wp_login_form_id_submit:{type:"text",name:"Id submit",live_update:!0,action:"element_attribute",attribute:"wp-login-form-id-submit",parameter_name:"id_submit",placeholder:a.defaultValue("wp-submit")},wp_login_form_remember:{type:"checkbox",name:"Remember",live_update:!0,action:"element_attribute",attribute:"wp-login-form-remember",parameter_name:"remember",value:"1"},wp_login_form_value_username:{type:"text",name:"Value username",live_update:!0,action:"element_attribute",attribute:"wp-login-form-value-username",parameter_name:"value_username"},wp_login_form_value_remember:{type:"checkbox",name:"Value remember",live_update:!0,action:"element_attribute",attribute:"wp-login-form-value-remember",parameter_name:"value_remember",value:"1"}}}},a.addComponentType(t),e.push(t),a.addHtmlOrNodeField(t),o.list.push(function(e){if(e.hasAttr(t.attribute))return o.toPhpHtmlOrNode(e,"wp_login_form( "+o.getNamedParams(t,e,function(e,t,a){return"remember"==t||"value_remember"==t?"1"==a?"true":"false":a})+");",t)}),t.meta={tags:[a.tag_ret_form,a.tag_t_user],helptext:"Display login form.",helplink:"https://codex.wordpress.org/Function_Reference/wp_login_form",extra_name:"wp_login_form"},new PgComponentType("wp_register","Site admin / Register link"));return n.selector="[wp-register]",n.code='<li wp-register>    <a href="#">Register</a>    </li>',n.attribute="wp-register",n.sections={parameters:{name:"Options",fields:{before:{type:"text",name:"Before",live_update:!0,action:"element_attribute",attribute:"wp-register-before",parameter_order:1,placeholder:a.defaultValue("<li>")},after:{type:"text",name:"After",live_update:!0,action:"element_attribute",attribute:"wp-register-after",parameter_order:2,placeholder:a.defaultValue("</li>")},"wp-register-echo":{type:"hidden",name:"Echo",default_value:"true",action:"element_attribute"}}}},a.addComponentType(n),e.push(n),a.addHtmlOrNodeField(n),o.list.push(function(e){if(e.hasAttr(n.attribute))return o.toPhpHtmlOrNode(e,"wp_register("+o.getParams(n,e)+");",n)}),n.meta={tags:[a.tag_ret_link,a.tag_t_user],helptext:"Display Site admin or Register link.",helplink:"https://codex.wordpress.org/Function_Reference/wp_register",extra_name:"wp_register"},e},pgWordpressLinks=function(e,t){var a=[],l=new PgComponentType("wp_href","Href"),o=(l.selector="[wp-href]",l.code='<a href="#" wp-href="url">The link to My Website</a>',l.attribute="wp-href",l.include_get_rendered_code=!0,l.sections={parameters:{name:"Options",fields:{href_type:{type:"select",name:"Uri",live_update:!0,action:"element_attribute",attribute:"wp-href",attribute_default:"",parameter_order:0,show_empty:!0,options:[{key:"url",name:"Home url"},{key:"post_permalink",name:"Post permalink (deprecated)"},{key:"get_permalink",name:"Get Post permalink"},{key:"wpurl",name:"Site url"},{key:"rdf_url",name:"Rdf feed"},{key:"rss_url",name:"Rss feed"},{key:"rss2_url",name:"Rss2 feed"},{key:"atom_url",name:"Atom feed"},{key:"comments_atom_url",name:"Comments Atom"},{key:"comments_rss2_url",name:"Comments Rss2"},{key:"pingback_url",name:"Pingback url"},{key:"stylesheet_url",name:"Stylesheet url"},{key:"stylesheet_directory",name:"Stylesheet directory"},{key:"template_directory",name:"Template directory"},{key:"login",name:"Login url"},{key:"logout",name:"Logout url"},{key:"lost_password",name:"Lost password url"},{key:"author_posts",name:"Author posts url"},{key:"comment_author",name:"Comment author url"},{key:"comments_link",name:"Comments link"},{key:"attachment_link",name:"Attachment link"}],on_changed:function(e,t,a,o,r,n,i,s){l.hideShowFields(a,n,e,s)},on_fields_created:function(e,t,a,o,r,n){l.hideShowFields(a,r,e,n)}},after:{type:"text",name:"After",live_update:!0,action:"element_attribute",attribute:"wp-href-after",parameter_order:0},loginout_redirect:{type:"text",name:"Login/out redirect",action:"element_attribute",attribute:"wp-href-redirect",parameter_order:0},wp_href_author_id:{type:"text",name:"Author id",action:"element_attribute",attribute:"wp-href-author-id",parameter_order:0},wp_href_author_nicename:{type:"text",name:"Author nice name",action:"element_attribute",attribute:"wp-href-author-nice-name",parameter_order:0}}}},l.hideShowFields=function(e,t,a,o){var r=t.parent();switch(r.find(".crsa-field-wp_href_author_id").hide(),r.find(".crsa-field-wp_href_author_nicename").hide(),r.find(".crsa-field-loginout_redirect").hide(),e){case"author_posts":pg$Show(r.find(".crsa-field-wp_href_author_id"),"flex"),pg$Show(r.find(".crsa-field-wp_href_author_nicename"),"flex");break;case"login":case"logout":case"lost_password":pg$Show(r.find(".crsa-field-loginout_redirect"),"flex")}},e.addComponentType(l),a.push(l),l.meta={tags:[e.tag_ret_url,e.tag_set_attr_href],helptext:"Set href to various website-related urls, like website url, home url, the permalink, etc.",extra_name:"bloginfo &amp; more"},a.push(e.addTag("wp-the-permalink-href","The permalink",null,"echo the_permalink",null,!0).addMeta({tags:[e.tag_ret_url,e.tag_t_post,e.tag_set_attr_href],helptext:"Set href or display the current post permalink.",helplink:"https://codex.wordpress.org/Function_Reference/the_permalink",extra_name:"the_permalink"}).addCode('<a wp-the-permalink-href wp-the-permalink-href-set="href">The link to a post</a>')),e.addTag("wp-get-permalink","Get permalink","Post id#Current post","echo get_permalink",{"wp-get-permalink-leave-name":{type:"checkbox",name:"Leave name",action:"element_attribute",attribute:"wp-get-permalink-leave-name",value:"true",negvalue:"false",default_value:"false"}},!0).addMeta({tags:[e.tag_ret_url,e.tag_t_post,e.tag_set_attr_href],helptext:"Set href or display the permalink of the current or specified post.",helplink:"https://developer.wordpress.org/reference/functions/get_permalink/",extra_name:"get_permalink"})),o=(o.addCode('<a wp-get-permalink wp-get-permalink-set="href">The link to a post</a>'),a.push(o),e.addTag("wp-post-permalink","Post permalink","Post id|req","echo post_permalink",null,!0).addMeta({tags:[e.tag_ret_url,e.tag_t_post,e.tag_set_attr_href],helptext:"Set href or display the specified post permalink. Deprecated since WP 4.4. Use get_permalink instead.",helplink:"https://codex.wordpress.org/Function_Reference/post_permalink",extra_name:"post_permalink"})),o=(o.addCode('<a wp-post-permalink wp-post-permalink-set="href">The link to a post</a>'),a.push(o),a.push(e.addTag("wp-permalink-anchor","Permalink anchor",{type:"select",name:"Type",action:"element_attribute",attribute:"wp-permalink-anchor",show_empty:!0,options:[{key:"id",name:"id"},{key:"title",name:"title"}]},"permalink_anchor").addMeta({tags:[e.tag_ret_link,e.tag_t_post],helptext:"Display the permalink anchor.",helplink:"https://codex.wordpress.org/Function_Reference/permalink_anchor",extra_name:"permalink_anchor"}).addCode('<a id="post-4" wp-permalink-anchor="id"></a>')),e.addTag("wp-page-link","Page link","Page id##current page","echo get_page_link",{"wp-page-link-leave-name":{type:"checkbox",name:"Leave name",action:"element_attribute",attribute:"wp-page-link-leave-name",value:"true",negvalue:"false",default_value:"false"},"wp-page-link-sample":{type:"checkbox",name:"Sample permalink",action:"element_attribute",attribute:"wp-page-link-sample",value:"true",negvalue:"false",default_value:"false"}},!0).addMeta({tags:[e.tag_ret_link,e.tag_t_post],helptext:"Set href or display the page url.",helplink:"https://codex.wordpress.org/Function_Reference/get_page_link",extra_name:"get_page_link"}).addCode('<a wp-page-link wp-page-link-set="href">The page link</a>')),o=(a.push(o),e.addTag("wp-attachment-link","Attachment link (url)","Attachment id##current attachment","echo get_attachment_link",null,!0).addMeta({tags:[e.tag_ret_link,e.tag_t_attachment],helptext:"Set href or display the attachment page url.",helplink:"https://codex.wordpress.org/Function_Reference/get_attachment_link",extra_name:"get_attachment_link"}).addCode('<a wp-attachment-link wp-attachment-link-set="href">The attachment link</a>')),o=(a.push(o),a.push(e.addTag("wp-edit-post-link","Edit post link","Link text##Edit This|trans","edit_post_link",{"wp-edit-post-link-before":{type:"text",name:"Before",action:"element_attribute",attribute:"wp-edit-post-link-before"},"wp-edit-post-link-after":{type:"text",name:"After",action:"element_attribute",attribute:"wp-edit-post-link-after"},"wp-edit-post-link-post":{type:"text",name:"Post id",action:"element_attribute",attribute:"wp-edit-post-link-post"}}).addMeta({tags:[e.tag_ret_link,e.tag_t_bookmark],helptext:"Display the link to edit the current post.",helplink:"https://codex.wordpress.org/Function_Reference/edit_post_link",extra_name:"edit_post_link"}).addCode("<a wp-edit-post-link>Edit This</a>")),e.addTag("wp-delete-post-link","Delete post link (url)","Post id##current post","echo get_delete_post_link",{"wp-delete-post-link-dep":{type:"hidden",name:"Dep",action:"element_attribute",attribute:"wp-delete-post-link-dep",default_value:""},"wp-delete-post-link-force":{type:"checkbox",name:"Force delete",action:"element_attribute",value:"true",negvalue:"false",default_value:"false",attribute:"wp-delete-post-link-force"}},!0)),o=(o.addMeta({tags:[e.tag_ret_link,e.tag_t_post,e.tag_set_attr_href],helptext:"Set href or display the link to delete the current post.",helplink:"https://codex.wordpress.org/Function_Reference/get_delete_post_link",extra_name:"get_delete_post_link"}).addCode('<a wp-delete-post-link wp-delete-post-link-set="href">Delete this post</a>'),a.push(o),e.addTag("wp-admin-url","Admin url","Blog id##current blog","echo get_admin_url",{"wp-admin-url-path":{type:"text",name:"Path",action:"element_attribute",attribute:"wp-admin-url-path"},"wp-admin-url-scheme":{type:"select",name:"Scheme",action:"element_attribute",show_empty:!0,options:[{key:"admin",name:"admin"},{key:"http",name:"http"},{key:"https",name:"https"}],attribute:"wp-admin-url-scheme"}},!0)),o=(a.push(o),o.addMeta({tags:[e.tag_ret_link,e.tag_set_attr_href,e.tag_t_user],helptext:"Set href or display the url to the admin area.",helplink:"https://codex.wordpress.org/Function_Reference/get_admin_url",extra_name:"get_admin_url"}).addCode('<a wp-admin-url wp-admin-url-set="href">Link to the Admin area</a>'),e.addTag("wp-home-url","Home url","Blog id##current blog","echo get_home_url",{"wp-home-url-path":{type:"text",name:"Path",action:"element_attribute",attribute:"wp-home-url-path"},"wp-home-url-scheme":{type:"select",name:"Scheme",action:"element_attribute",show_empty:!0,options:[{key:"relative",name:"relative"},{key:"http",name:"http"},{key:"https",name:"https"}],attribute:"wp-home-url-scheme"}},!0).addMeta({tags:[e.tag_ret_link,e.tag_set_attr_href],helptext:"Set href or display home url.",helplink:"https://developer.wordpress.org/reference/functions/get_home_url/",extra_name:"get_home_url"}).addCode('<a wp-home-url wp-home-url-set="href">Link to the Website home page</a>')),o=(a.push(o),e.addTag("wp-the-site-url","Site url","Blog id##current blog","echo get_site_url",{"wp-the-site-url-path":{type:"text",name:"Path",action:"element_attribute",attribute:"wp-the-site-url-path"},"wp-the-site-url-scheme":{type:"select",name:"Scheme",action:"element_attribute",show_empty:!0,options:[{key:"admin",name:"admin"},{key:"http",name:"http"},{key:"https",name:"https"},{key:"login",name:"login"},{key:"login_post",name:"login_post"},{key:"relative",name:"relative"}],attribute:"wp-the-site-url-scheme"}},!0).addMeta({tags:[e.tag_ret_link,e.tag_set_attr_href],helptext:"Set href or display site url.",helplink:"https://developer.wordpress.org/reference/functions/get_site_url/",extra_name:"get_site_url"}).addCode('<a wp-the-site-url wp-the-site-url-set="href">Link to the Website</a>')),o=(a.push(o),e.addTag("wp-search-link","Search link","Query##current query","echo get_search_link",null,!0).addMeta({tags:[e.tag_ret_link,e.tag_set_attr_href,e.tag_use_search],helptext:"Set href or display the permalink for search.",helplink:"https://developer.wordpress.org/reference/functions/get_search_link/",extra_name:"get_search_link"}).addCode("<a wp-search-link>Link to the Search query</a>")),o=(a.push(o),e.addTag("wp-feed-link","Feed link","Link text|trans","the_feed_link",{"wp-feed-link-type":{type:"text",name:"Feed type",action:"element_attribute",attribute:"wp-feed-link-type"}}).addMeta({tags:[e.tag_ret_link,e.tag_use_feed],helptext:"Display the permalink for the feed type.",helplink:"https://codex.wordpress.org/Function_Reference/the_feed_link",extra_name:"the_feed_link"}).addCode("<a wp-feed-link>RSS feed</a>"));return a.push(o),a},pgWordpressCustomizer=function(m,d){function o(){pinegrow.showNotice(`<p><b>Export the whole ${m.wpSayTheme(!0)}</b> to apply Customizer changes to your theme.</p><p>Quick export (when you save the page) doesn't update the code for customizer sections.</p>`,`Export the whole ${m.wpSayTheme(!0)} to update Customizer sections`,"wp-customizer-export")}function h(e){for(e=e.getClonedFromPgEl()||e;e;){var t=e.getAttribute("wp-cz-section");if(t)return{id:t,prefix:"true"===e.getAttribute("wp-cz-section-prefix")?t+`_`:""};if(t=e.getAttribute("cms-section"))return{id:t,prefix:"true"===e.getAttribute("cms-section-prefix")?t+`_`:""};e=e.parent}return null}function e(e,c){var t={"wp-cz-control-label":{type:"text",name:"Name",action:"element_attribute",control_parameter_name:"label",translate:!0,placeholder:m.forExample("Section title"),validate:m.required},"wp-cz-control-description":{type:"text",name:"Description",action:"element_attribute",control_parameter_name:"description",translate:!0},"wp-cz-control-setting-type":{type:"select",name:"Setting type",action:"element_attribute",setting_parameter_name:"type",show_empty:!1,options:[{key:"theme_mod",name:"theme_mod"},{key:"option",name:"option"}],default_value:"theme_mod"},"wp-cz-control-default":{type:"text",name:"Default value",action:"element_attribute",setting_parameter_name:"default",placeholder:m.forExample("Main section"),translate:function(e,t){var a=t.getAttribute("wp-cz-control-type"+c);return"text"==a||"textarea"==a}},"wp-cz-control-sanitize":{type:"text",name:"Sanitize callback",action:"element_attribute",setting_parameter_name:"sanitize_callback"},"wp-cz-control-type":{type:"select",name:"Control type",action:"element_attribute",control_parameter_name:"type",show_empty:!1,options:[{key:"text",name:"text"},{key:"checkbox",name:"checkbox"},{key:"textarea",name:"textarea"},{key:"dropdown-pages",name:"dropdown-pages"},{key:"media",name:"media"},{key:"color",name:"color"},{key:"email",name:"email"},{key:"datetime",name:"datetime"},{key:"url",name:"url"},{key:"custom",name:"custom"}],default_value:"text"},"wp-cz-control-type-custom":{type:"text",name:"Custom control",action:"element_attribute",placeholder:m.forExample("WP_Customize_MyCustom_Control")},"wp-cz-control-mime-type":{type:"select",name:"Media mime type",action:"element_attribute",control_parameter_name:"mime_type",show_empty:!0,options:[{key:"image",name:"image"},{key:"audio",name:"audio"},{key:"video",name:"video"}]},"wp-cz-control-section":{type:"text",name:"Show in section",action:"element_attribute",control_parameter_name:"section",placeholder:m.defaultValue("default section"),options:m.wpInsight.getCustomizerSections,open_list_on_focus:!0},"wp-cz-control-priority":{type:"text",name:"Priority",action:"element_attribute",control_parameter_name:"priority",placeholder:"from 0 to 200"},"wp-cz-control-active":{type:"text",name:"Active callback",action:"element_attribute",control_parameter_name:"active_callback",placeholder:m.forExample("is_front_page"),options:m.wpGetOptionsForConditionsWithoutParameters,open_list_on_focus:!0},"wp-cz-control-input-class":{type:"text",name:"Input class",action:"element_attribute",input_parameter_name:"class"},"wp-cz-control-input-style":{type:"text",name:"Input style",action:"element_attribute",input_parameter_name:"style"},"wp-cz-control-input-placeholder":{type:"text",name:"Input placeholder",action:"element_attribute",input_parameter_name:"placeholder"},"wp-cz-control-input-dummy":{type:"hidden",name:"Tax query",action:"element_attribute",control_parameter_name:"input_attrs",getAttrValue:function(e,t,a){if((r=d.getNamedParams(u,t,null,"input_parameter_name",3)).length&&"array()"!=r)var o=pinegrow.getFormatHtmlOptions(),r="\n"+pinegrow.getHtmlIndentForLevel(1+2,o)+r;else if("array()"==r)return null;return r}}},a={};for(field in t)a[field+c]=t[field];function l(e,t,a,o){var r=t.parent();"custom"==e?pg$Show(r.find(".crsa-field-"+"wp-cz-control-type-custom"+c),"flex"):pg$Hide(r.find(".crsa-field-"+"wp-cz-control-type-custom"+c)),"media"==e?pg$Show(r.find(".crsa-field-"+"wp-cz-control-mime-type"+c),"flex"):pg$Hide(r.find(".crsa-field-"+"wp-cz-control-mime-type"+c))}a["wp-cz-control-type"+c].on_changed=function(e,t,a,o,r,n,i,s){l(a,n)},a["wp-cz-control-type"+c].on_fields_created=function(e,t,a,o,r,n){l(a,r)};var u=m.addTag("wp-cz-control"+c,e||"Add customizer control","Id#abc_something|req",null,a);u.on_action_added=function(){o()},u.on_changed=function(){m.setRequireThemeExport("Customizer controls")},d.list.push(function(e){if(e.getAttr("wp-cz-control"+c)){var r="    ",o=e.getAttr("wp-cz-control-type"+c)||"text",n=e.getAttr("wp-cz-control"+c),t=d.getNamedParams(u,e,function(e,t,a){return"default"!=t||a||"text"!=o&&"textarea"!=o?"sanitize_callback"==t&&(a=a||"$pgwp_sanitize"):a=_(e,g(e,n)),a},"setting_parameter_name",1),i=h(e),a=e.getAttr("wp-cz-control-section"+c),s=(!i||a&&a!=i.id||(n=i.prefix+n),0<=(reserved_controls=["background_image","background_image_thumb","background_preset","background_position_x","background_position_y","background_size","background_repeat","background_attachment","background_color","header_textcolor","header_image","header_image_data","nav_menu_locations","custom_logo"]).indexOf(n)&&m.addExportError(e,`Customizer field name <b>${n}</b> is used internally by WordPress. Please use another name or add a prefix.`,null,m.current_exported_page_name),d.getNamedParams(u,e,function(e,t,a){var o;return"section"!=t||(a=a||(i?i.id:a))||(m.create_default_customizer_section_id||(m.create_default_customizer_section_id=m.current_theme_info.slug+"_default_cs",o="\n"+r+"$wp_customize->add_section( "+m.quoteParam(m.create_default_customizer_section_id)+", array('title' => 'Default section'));\n",m.isOnMasterOrInContent(e)&&m.addToFunctionsPhpSection("Customizer Controls",o,!0)),a=m.create_default_customizer_section_id),a},"control_parameter_name",1)),l="\n"+r+"$wp_customize->add_setting( "+m.quoteParam(n)+", "+t+");\n";switch(l+="\n"+r,o){case"color":l+="$wp_customize->add_control( new WP_Customize_Color_Control( $wp_customize, "+m.quoteParam(n)+", "+s+" ) );";break;case"media":l+="$wp_customize->add_control( new WP_Customize_Media_Control( $wp_customize, "+m.quoteParam(n)+", "+s+" ) );";break;case"custom":var p=e.getAttr("wp-cz-control-type-custom"+c);p&&(l+="$wp_customize->add_control( new "+p+"( $wp_customize, "+m.quoteParam(n)+", "+s+" ) );");break;default:l+="$wp_customize->add_control( "+m.quoteParam(n)+", "+s+");"}l+="\n",m.isOnMasterOrInContent(e)?(a=m.wpIsPlugin()?`    $pgwp_sanitize = function_exists('${m.current_theme_info.slug}_pgwp_sanitize_placeholder') ? '${m.current_theme_info.slug}_pgwp_sanitize_placeholder' : null;
`:`    $pgwp_sanitize = function_exists('pgwp_sanitize_placeholder') ? 'pgwp_sanitize_placeholder' : null;
`,m.addToFunctionsPhpSection("Customizer Controls",a,!0,!0,!0),m.addToFunctionsPhpSection("Customizer Controls",l,!0),m.wpInsight.addCustomizerControl(n)):m.warnAboutActionThatIsNotOnMasterOrInContent(e,u,"Creating the control")}}),u.addMeta({tags:[],helptext:"Register a customizer control. Definition is added to /* Pinegrow generated Customizer Controls */ section of functions.php.",helplink:"https://developer.wordpress.org/themes/customize-api/customizer-objects/#controls",extra_name:"add_setting, add_control"}),u.addNotPlaceable("Add this action to an existing element on the page to register a customizer control."),r.push(u)}function t(n,e,t,i){var a={"wp-cz-theme-mod":{type:"text",name:"Theme mod",action:"element_attribute",placeholder:m.forExample("main_title"),validate:m.required,options:m.wpInsight.getCustomizerControls,open_list_on_focus:!0},"wp-cz-theme-mod-default":{type:"text",name:"Default value",action:"element_attribute",placeholder:m.defaultValue("current value")},"wp-cz-theme-mod-check":{type:"checkbox",name:"Add IF statement",action:"element_attribute",value:"true",negvalue:"false",default_value:"false"},"wp-cz-theme-mod-no-prefix":{type:"checkbox",name:`Don't use parent section id as field prefix`,action:"element_attribute",value:"true",negvalue:"false",default_value:"false"}},o={};for(field in a)o[field+n]=a[field];var s=m.addTag("wp-cz-theme-mod"+n,e,"Theme mod#my_mod|req",function(e){if(e.hasAttr("wp-cz-theme-mod"+n)){var t,a,o=e.getAttr("wp-cz-theme-mod"+n),r=o;if(r)return o=o,(t=h(e))&&t.prefix&&"true"!==e.getAttribute("wp-cz-theme-mod-no-prefix"+n)&&(o=m.isPhpValue(r)?m.quoteParam(t.prefix)+"."+m.quoteParam(r):m.quoteParam(t.prefix+r)),t={},r="echo "+(r=(a=e.getAttr("wp-cz-theme-mod-default"+n)||_(e,"wp-cz-theme-mod"+n+"-set",i,t,o))?"get_theme_mod( "+m.quoteParam(o)+", "+m.quoteParam(a,{translate:t.translate})+" )":"get_theme_mod( "+m.quoteParam(o)+" )")+";","true"==e.getAttr("wp-cz-theme-mod-check"+n)&&d.addToChanges(function(e,t,a){pgCreateNodeFromHtml(t).insertBefore(e),pgCreateNodeFromHtml(a).insertAfter(e)},this,[e,"<?php if( get_theme_mod( "+m.quoteParam(o)+" ) ) : ?>","<?php endif; ?>"]),d.toPhpHtmlOrNode(e,r,s)}},o).addMeta({tags:[],helptext:t+" Use Attachment image actions to display images.",helplink:"https://codex.wordpress.org/Function_Reference/get_theme_mod",extra_name:"get_theme_mod"}).addCode("");m.addHtmlOrNodeField(s,!0,i,!0,!0,!0),r.push(s)}var r=[],n=m.addTag("wp-cz-section","Add customizer section","Id#abc_something|req",null,{"wp-cz-section-title":{type:"text",name:"Title",action:"element_attribute",section_parameter_name:"title",translate:!0,placeholder:m.forExample("Section title"),placeholder:m.forExample("Section title"),validate:m.required},"wp-cz-section-description":{type:"text",name:"Description",action:"element_attribute",section_parameter_name:"description",translate:!0},"wp-cz-section-panel":{type:"text",name:"Panel",action:"element_attribute",section_parameter_name:"panel"},"wp-cz-section-priority":{type:"text",name:"Priority",action:"element_attribute",section_parameter_name:"priority",placeholder:"from 0 to 200"},"wp-cz-section-active":{type:"text",name:"Active callback",action:"element_attribute",section_parameter_name:"active_callback",placeholder:m.forExample("is_front_page"),options:m.wpGetOptionsForConditionsWithoutParameters,open_list_on_focus:!0},"wp-cz-section-prefix":{type:"checkbox",name:"Use section id as prefix for enclosed fields",action:"element_attribute",value:"true",negvalue:"false",default_value:"false",ignore_parameter:!0}}),g=(n.on_action_added=function(){o()},n.on_changed=function(){m.setRequireThemeExport("Customizer controls")},d.list.push(function(e){var t,a;e.getAttr("wp-cz-section")&&(t=e.getAttr("wp-cz-section"),a=d.getNamedParams(n,e,null,"section_parameter_name",1),a="\n"+"    "+"$wp_customize->add_section( "+m.quoteParam(t)+", "+a+");\n",m.isOnMasterOrInContent(e)?(m.theme_data.customizer_sections||(m.theme_data.customizer_sections=[]),m.theme_data.customizer_sections.push({id:t,code:a}),m.wpInsight.addCustomizerSection(e.getAttr("wp-cz-section"))):m.warnAboutActionThatIsNotOnMasterOrInContent(e,n),m.last_customizer_section_id=t)}),pinegrow.addEventHandler("on_wp_before_generating_php_sections",function(e,t){var a;m.theme_data.customizer_sections&&(a="",m.theme_data.customizer_sections.forEach(function(e){a+=e.code}),m.addToFunctionsPhpSection("Customizer Controls",a,!0,!1,!0))}),m.functions_php_sections_missing_text["Customizer Controls"]="<p>Add the following code to your functions.php to let Pinegrow manage customizer controls:</p><pre>if ( ! function_exists( 'mytheme_customize_register' ) ) :\n    function mytheme_customize_register( $wp_customize ) {\n\n        /* Pinegrow generated Customizer Controls Begin */\n        /* Pinegrow generated Customizer Controls End */\n\n    }\n    add_action( 'customize_register', 'mytheme_customize_register' );\nendif;</pre>",n.addMeta({tags:[],helptext:"Register a customizer section. Definition is added to /* Pinegrow generated Customizer Controls */ section of functions.php.",helplink:"https://developer.wordpress.org/themes/customize-api/",extra_name:"add_section"}),n.addNotPlaceable("Add this action to an existing element on the page to register a customizer section."),r.push(n),m.wpGetCustomizerSectionInfo=h,e("Add customizer control",""),e("Add customizer control 2","-2"),e("Add customizer control 3","-3"),e("Add customizer control 4","-4"),e("Add customizer control 5","-5"),function(e,t){for(var a=["","-attr","-style"],o=0;o<a.length;o++)if(e.getAttr("wp-cz-theme-mod"+a[o])==t)return"wp-cz-theme-mod"+a[o]+"-set";return null}),_=function(e,t,a,o,r){o=o||{};var n;if(!t)return null;a||(a=0<(n=t).indexOf("-mod-attr")?"attr":0<n.indexOf("-mod-style")?"style":"content");var i=t&&e.getAttr(t)||a,s="";if("content"===i){if(!m.isContentTag(e.tagName)&&!e.hasTextOnly())return null;s=(s=e.html())&&$.trim(s.replace(/\n/gi,"").replace(/\s\s+/g," ")),o.translate=!0}else if("attr"===i){var l=e.getAttr(t+"-attr");if(l){if(s=e.getAttr(l),o.translate=0<=["alt","title"].indexOf(l),"src"===l)return s=m.makeUrlRelativeToThemeCode(s),o.source=i,s;if("srcset"===l)return s=m.makeUrlRelativeToThemeCode(s),o.source=i,s}}o.source=i;l=s&&s.length?s.replace(/'/g,"\\'"):null;return l=l&&0<=l.indexOf("(")?"'"+l+"'":l},a=(t("","Display theme mod","Display theme mod value.","content"),t("-2","Display theme mod 2","Display theme mod value.","content"),t("-3","Display theme mod 3","Display theme mod value.","content"),t("-4","Display theme mod 4","Display theme mod value.","content"),t("-5","Display theme mod 5","Display theme mod value.","content"),t("-attr","Theme mod to attr","Assign theme mod value to an attribute.","attr"),t("-style","Theme mod to style","Set theme mod value to inline style property.","style"),m.addTag("wp-cz-option","Get option","Option#my_option|req",function(e){if(e.hasAttr("wp-cz-option")){var t=e.getAttr("wp-cz-option");if(t)return t="echo get_option( "+m.quoteParam(t)+" );",d.toPhpHtmlOrNode(e,t,a)}}).addMeta({tags:[],helptext:"Get and display option value. Use Attachment image actions to display images.",helplink:"https://developer.wordpress.org/reference/functions/get_option/",extra_name:"get_option"}).addCode(""));return m.addHtmlOrNodeField(a,!0,"content",!0,!0,!0),r.push(a),r},pgWordpressACF=function(r,n){function e(t,e){var a={},o=(a["wp-acf-get-field"+t]={type:"text",name:"Field",attribute:"wp-acf-get-field"+t,action:"element_attribute",validate:r.required},a["wp-acf-get-field-post"+t]={type:"text",name:"Object id",attribute:"wp-acf-get-field-post"+t,action:"element_attribute",placeholder:r.defaultValue("current post"),options:[{key:`'user_' . $user_id`,name:"User"},{key:`'event_' . $post_id`,name:"Post type"},{key:`'category_' . $cat_id`,name:"Category"},{key:"options",name:"Options"}],helptext:`<p>By default the value if read from the current post. To get the field value of a different item, select the post id, user, custom post type item, category or options. Replace $variables with appropriate functions or variables.</p>`},r.addTag("wp-acf-get-field"+t,"Display ACF Field"+(1<e?` `+e:""),null,function(e){if(e.hasAttr(o.attribute))return e.getAttr("wp-acf-get-field"+t),n.toPhpHtmlOrNode(e,`echo get_field(${n.getParams(o,e)});`,o)},a).addMeta({tags:[r.tag_ret_string,r.tag_use_post],helptext:"Display a ACF field value. ACF plugin is required.",helplink:"https://www.advancedcustomfields.com/resources/get_field/",extra_name:"get_field"}).addCode(`<span wp-acf-get-field${t}>Field value</span>`));r.addHtmlOrNodeField(o,!0,"content",!0,!0,!0),i.push(o)}var i=[];return e("",1),e("-2",2),e("-3",3),e("-4",4),e("-5",5),i};class PgWordpressApi{constructor(e,t,a){this.f=pinegrow.findFrameworkByKey("wordpress.pinegrow"),isApp()?e||(e=this.f.getCurrentThemeInfo()?.url,e=pinegrow.evaluateUserVars(e),t=pinegrow.evaluateUserVars(pinegrow.getSetting(`wpapi_username_`+e)),a=pinegrow.evaluateUserVars(pinegrow.getSetting(`wpapi_password_`+e))):e=pgwpdata.site_url,e=pinegrow.evaluateUserVars(e),this.username=t,this.password=a,this.url=e,this.endpoint=null,this.schema=null,this.post_types_map=null,this.tax_map=null,this.cache,this.cleanCache(),isApp()||this.getRestNonceFromWP()}isApiEnabled(){return!isApp()||this.username&&this.password&&this.url}cleanCache(){this.cache={search:{},posts:{},terms:{},media:{},site_settings:null,menu_locations:{},menus:{},menu_items:{},sidebars:{},rest_nonce:null}}async getRestNonce(){return this.cache.rest_nonce||(this.cache.rest_nonce=await this.getRestNonceFromWP()),this.cache.rest_nonce}async getRestNonceFromWP(){return new Promise(async function(e,t){try{e(await(await fetch(pgwpdata.ajaxurl+"?action=rest-nonce")).text())}catch(e){t(`Unable to get REST nonce from WP: `+e.toString())}})}async getRestEndpoint(){if(this.endpoint)return this.endpoint;try{var e=await fetch(this.url);if(e.ok){var t=await e.text(),a=new pgParser,o=(a.assignIds=!1,a.parse(t),a.rootNode.findOne('link[rel="https://api.w.org/"]'));if(o)return this.endpoint=o.getAttribute("href"),this.endpoint;throw new Error(`No API endpoint found in HTML.`)}throw new Error(`Failed to fetch: ${e.status} `+e.statusText)}catch(e){throw console.error("Error fetching REST API endpoint:",e),e}}async getRestSchema(){if(this.schema)return this.schema;var e=await this.getRestEndpoint();try{var t,a=await fetch(e);if(a.ok)return(!(t=await a.json()).namespaces||t.namespaces.indexOf("wp/v2")<0)&&console.error("Error fetching REST API schema: wp/v2 namespace is not defined."),this.schema=t;throw new Error(`Failed to fetch REST API schema: ${a.status} `+a.statusText)}catch(e){throw console.error("Error fetching REST API schema:",e),e}}async getSiteSettings(){return this.cache.site_settings||(this.cache.site_settings=await this.callApi("wp/v2/settings")),this.cache.site_settings}async getSiteUrls(){var e=await this.getSiteSettings();return{base:e.url,home:e.url,search:e.url+"/?s=",not_found:e.url+"/this-page-does-not-exist",posts:e.page_for_posts?(await this.getPost(e.page_for_posts)).link:null}}async callApi(e,t){var a=await this.getRestEndpoint()+e,o=btoa(this.username+`:`+this.password),r=[],n=($.each(t,function(e,t){r.push(e+`=`+encodeURIComponent(t))}),a+="?"+r.join("&"),{"Content-Type":"application/json"}),o=(isApp()?n["Authorization"]=`Basic `+o:n["X-Wp-Nonce"]=await this.getRestNonce(),await fetch(a,{method:"GET",headers:n}));if(o.ok)return o.json();throw new Error(`Failed to fetch REST API ${e}: ${o.status} `+o.statusText)}async getPages(e){return this.callApi("wp/v2/pages",e)}async getPostTypes(e){return this.callApi("wp/v2/types",e)}async getPostTypeInfo(e){return this.post_types_map&&this.post_types_map[e]?this.post_types_map[e]:(this.post_types_map=await this.getPostTypes(),this.post_types_map[e]||null)}async getPostTypesMap(){return this.post_types_map||(this.post_types_map=await this.getPostTypes()),this.post_types_map}async getTaxonomyMap(){return this.tax_map||(this.tax_map=await this.callApi("wp/v2/taxonomies")),this.tax_map}async getPosts(e,t){t=t||{};var a=JSON.stringify(t)+e;if(!this.cache.posts[a]){var o=await this.getPostTypeInfo(e);if(!o)throw new Error(`Unknown post type ${e}.`);this.cache.posts[a]=await this.callApi(o.rest_namespace+"/"+o.rest_base,t)}return this.cache.posts[a]}async getTaxonomyTerms(e,t){t=t||{};var a=JSON.stringify(t)+e;if(!this.cache.terms[a]){var o=await this.getTaxonomyMap();if(!o[e])throw new Error(`Unknown taxonomy ${e}.`);this.cache.terms[a]=await this.callApi(o[e].rest_namespace+"/"+o[e].rest_base,t)}return this.cache.terms[a]}async search(e,t){var a={search:e,per_page:20,...t},o=JSON.stringify(a);return this.cache.search[o]||(a=await this.callApi("wp/v2/search",a),this.cache.search[o]=a)}async getPost(e){if(null===e)throw new Error(`Unable to lookup the post.`);if(!this.cache.posts[e]){var t=await this.callApi(`wp/v2/search/`,{include:e});if(0===t.length&&(t=await this.callApi(`wp/v2/media/`,{include:e})).forEach(function(e){e.subtype="attachment"}),0===t.length)throw new Error(`Post by id ${e} not found.`);var a=await this.getPostTypeInfo(t[0].subtype);if(!a)throw new Error(`Unknown post type ${t[0].subtype}.`);t=await this.callApi(a.rest_namespace+"/"+a.rest_base+"/"+e);if(!t)throw new Error(`Post with id ${e} not found.`);this.cache.posts[e]=t}return this.cache.posts[e]}async getMedia(e){return null===e?null:(this.cache.media[e]||(this.cache.media[e]=await this.callApi(`wp/v2/media/`+e)),this.cache.media[e])}async getMenuLocation(e){return this.cache.menu_locations[e]||(this.cache.menu_locations[e]=await this.callApi(`wp/v2/menu-locations/`+e)),this.cache.menu_locations[e]}async getMenu(e){return this.cache.menus[e]||(this.cache.menus[e]=await this.callApi(`wp/v2/menus/`+e,{context:"edit"})),this.cache.menus[e]}async getMenuItems(e){return this.cache.menu_items[e]||(this.cache.menu_items[e]=await this.callApi(`wp/v2/menu-items`,{menus:e})),this.cache.menu_items[e]}async getSidebar(e){return this.cache.sidebars[e]||(this.cache.sidebars[e]=await this.callApi(`wp/v2/sidebars/`+e)),this.cache.sidebars[e]}async getSidebarWidgets(e){var t="widgets_"+e;return this.cache.sidebars[t]||(this.cache.sidebars[t]=await this.callApi(`wp/v2/widgets`,{sidebar:e})),this.cache.sidebars[t]}}class PgWordPressApiUrlSelector{constructor(e,t,a,o){this.api=e,this.selected_url=null,this.selected_name=null,this.selected_post_id=null,this.ignore_close=!1,this.none_url="_none_",this.page=t,this.f=a,this.page_view=o,this.only_select_posts=!1;var r=pinegrow.getCurrentProjectInfo();this.recent=r.getSetting("wp-recent-urls",[])}isNone(e){return(e||this.selected_url)===this.none_url}addToRecent(e){for(var t=-1,a=0;a<this.recent.length;a++)if(e.url===this.recent[a].url){t=a;break}0<=t&&this.recent.splice(t,1),this.recent.unshift(e);var o=pinegrow.getCurrentProjectInfo();o.setSetting("wp-recent-urls",this.recent),o.save()}clearRecent(){this.recent=[];var e=pinegrow.getCurrentProjectInfo();e.setSetting("wp-recent-urls",[]),e.save()}async showMenu(h){const g=this;return this.selected_url=null,this.selected_name=null,this.selected_post_id=null,this.selected_selector=null,new Promise(async function(a,e){function n(){"selector"in this?g.selected_selector=this.selector:(g.selected_url=this.url,g.selected_name=this.name||this.label,g.selected_post_id=this.post_id||null)}var t=[],i={nav_menu_item:!0,nav_menu:!0},o=!1;try{g.only_select_posts||(t.push({label:"Import live data",kbd:"CMD I",helptext:`Import live data from the WordPress site.<br><br>Hold dow the ${pgShowKbd("SHIFT")} key to refresh cached data before importing.`,action:function(){pinegrow.keyState.shift&&(g.f.wpRefreshApiAndLiveData(),pinegrow.showQuickMessage("Cached data refreshed.")),g.f.wpGetLiveData().setWrapperData(g.page_view?.wrapper_data),g.f.wpShowLiveData(g.page.sourceNode)}}),t.push({label:"Auto import live data",helptext:"Automatically import live data during editing.",check:!0===g.f.wpAutoImportLiveData,action:function(){g.f.wpAutoImportLiveData=!g.f.wpAutoImportLiveData,pinegrow.showMode("Auto import live data",g.f.wpAutoImportLiveData),pinegrow.setSetting("wp-auto-import-live-data",g.f.wpAutoImportLiveData?"1":"0"),g.f.wpAutoImportLiveData&&(g.f.wpGetLiveData().setWrapperData(g.page_view?.wrapper_data),g.f.wpShowLiveData(g.page.sourceNode))}}),t.push({label:"Refresh cached data",helptext:"Data received through WordPress API is cached for performance reasons. Refresh the cached data after making changes on the WordPress site.<br><br>If Auto import live data is ON, the live data on the page will be imported as well.",action:function(){g.f.wpRefreshApiAndLiveData(),pinegrow.showQuickMessage("Cached data refreshed."),g.f.wpAutoImportLiveData&&(g.f.wpGetLiveData().setWrapperData(g.page_view?.wrapper_data),g.f.wpShowLiveData(g.page.sourceNode))}}),t.push({type:"divider"}),t.push({type:"header",label:"Preview on WordPress"}),null!==g.page_view?.wrapper_selector&&void 0!==g.page_view?.wrapper_selector||(g.page_view.wrapper_selector="auto_detect"),r=[{type:"header",label:"Select where on the preview WordPress page should the edited document be displayed:"},{label:"Auto detect",selector:"auto_detect",action:n,helptext:'Blocks on documents with "Do not export template" are shown in the content of the preview page. Non-block parts of the document are not displayed.<br><br>Otherwise, the document replaces the body of the preview page.',check:"auto_detect"===g.page_view.wrapper_selector},{type:"divider"},{label:"Replace body",selector:"body_replace",action:n,helptext:"The body of the edited document will be displayed instead of the body of the preview page. Useful for viewing the document with the styles and scripts of the preview page.",check:"body_replace"===g.page_view.wrapper_selector},{label:"Show in content",selector:"",action:n,helptext:`The content of edited document's body element will be prepended to the element matching the selector .entry-content, .content, .post, .page, article, main or body (whichever is found first) of the preview page.`,check:!g.page_view.wrapper_selector},{label:"Blocks in content",selector:"blocks_in_content",action:n,helptext:"Display only blocks in the content area of the preview page. Content is searched with the selectors .entry-content, .content, .post, .page, article, main or body (whichever is found first).",check:"blocks_in_content"===g.page_view.wrapper_selector}],"body_replace"!==g.page_view.wrapper_selector&&"auto_detect"!==g.page_view.wrapper_selector&&"blocks_in_content"!==g.page_view.wrapper_selector&&g.page_view.wrapper_selector&&r.push({label:escapeHtmlCode(g.page_view.wrapper_selector),selector:g.page_view.wrapper_selector,check:!0,action:n,helptext:`A custom selector.`}),r.push({type:"divider"}),r.push({label:"Edit selector...",action:function(){g.ignore_close=!0,pinegrow.showPrompt(`<p>Enter a CSS selector of the element in which the edited page will be displayed:</p>`,"Enter selector","",g.page_view.wrapper_selector||"",null,function(e){var t={selector:e};n.call(t),a(t)})},helptext:`Enter a custom CSS selector of the element of the WordPress page where the content of the edited document's body element should be displayed.`}),(m=pgPageViewHelperManager.get("page-view-wrapper-helper"))&&(r.push({type:"divider"}),(s={...m.getAction()}).show_filter=null,s.label="Outline editable elements",r.push(s)),t.push({label:"Display mode",submenu:r}),g.recent.length&&((l=g.recent.map(function(e){var t=e.selector?" "+g.f.wpGetWrapperSelectorDescription(e.selector,`[${escapeHtmlCode(e.selector)}]`):"";return{label:e.name+t,name:e.name,url:e.url,post_id:e.post_id||null,action:n}})).push({type:"divider"}),l.push({label:"Clear list",action:function(){g.clearRecent()}}),t.push({label:"Recent",submenu:l}),t.push({type:"divider"})),t.push({type:"divider"}),t.push({type:"header",label:"Select the preview page"}),t.push({label:"None - no preview",url:g.none_url,action:n,helptext:"Do not preview the document on any WordPress page. Show it as it is."}),p=await g.api.getSiteUrls(),t.push({label:"Home",url:p.home,action:n}),p.posts&&t.push({label:"Latest posts",url:p.posts,action:n}),t.push({label:"Search",url:p.search,action:n}),t.push({label:"404",url:p.not_found,action:n}));var r,s,l,p,c,u=await g.api.getPostTypesMap();t.push({type:"divider"}),t.push({type:"header",label:"Posts, pages &amp; CPTs"}),$.each(u,function(o,r){o.startsWith("wp_")||i[o]||t.push({label:r.name,submenu:!0,submenu_callback:async function(e){"string"==typeof r.has_archive&&(a.push({label:r.name+" archive",url:p.base+"/"+r.has_archive,action:n}),a.push({type:"divider"}));var t=await g.api.getPosts(o),a=(console.log(t),[]);return 0===t.length?a.push({type:"header",label:"No posts found."}):t.forEach(function(e){a.push({label:e.title.rendered||"(no title)",url:e.link,post_id:e.id,action:n})}),e(a),a},aaaon_before_submenu_open:function(e){e.addSmartInput(d)}})}),g.only_select_posts||(c=await g.api.getTaxonomyMap(),console.log(c),t.push({type:"divider"}),t.push({type:"header",label:"Taxonomies"}),$.each(c,function(o,e){o.startsWith("wp_")||i[o]||t.push({label:e.name,submenu:!0,submenu_callback:async function(e){var t=await g.api.getTaxonomyTerms(o),a=(console.log("terms",t),[]);return 0===t.length?a.push({type:"header",label:"No terms found."}):t.forEach(function(e){a.push({label:e.name||"(no name)",url:e.link,action:n})}),e(a),a},aaaon_before_submenu_open:function(e){e.addSmartInput(d)}})}),t.push({type:"divider"}),t.push({label:"Enter URL...",helptext:"Manually enter a URL if it is not displayed in the menu below.",action:function(){g.ignore_close=!0,pinegrow.showPrompt(`<p>Enter a URL of the selected WordPress page:</p>`,"Enter URL","","",null,function(e){var t={url:e,name:e,post_id:null};n.call(t),a(t)})}}))}catch(e){o=!0,(t=[]).push({type:"html",html:`<div style="color: white;
    padding: 0 20px 0 20px;">Unable to connect to WordPress REST API. The error is: <code style="white-space: normal;
    display: block;">${e.toString()}</code></div>`}),t.push({type:"divider"}),t.push({label:"Edit API access settings...",action:function(){g.f.showWordPressSiteSetupDialog()},helptext:"Open Project settings to edit API access settings."})}t.push({type:"divider"}),t.push({label:"Help...",helptext:"Learn how to use live preview and data import.",link_url:isApp()?null:g.f.wpLiveDataHelpUrl,handle_click:isApp(),action:function(){isApp()&&pinegrow.openExternalUrl(g.f.wpLiveDataHelpUrl)}});var m=new CrsaContextMenu(t,h),d=new PgPgWordPressApiUrlSelectorSmartInput(null,g.api,n,m);o||m.addSmartInput(d),m.showForElement(h,null,8),m.onClosed=function(){var e;g.ignore_close||(e=null!==g.selected_selector?{selector:g.selected_selector}:{url:g.selected_url,name:g.selected_name,post_id:g.selected_post_id},g.selected_url||null!==g.selected_selector?a(e):a(null)),g.ignore_close=!1}})}}class PgPgWordPressApiUrlSelectorSmartInput extends PgSmartInput{constructor(e,t,a,o){super("",!0),this.actions=null,this.api=t,this.post_type=e,this.on_selected=a,this.menu=o}showResults(e){this.menu.showActions(e)}getFlatMenuActions(){var i,s,l,p;return null===this.actions&&(this.menu.actions.shift(),this.menu.actions.shift(),i=[],s='<span style="margin-right:4px;">:</span>',l=": ",(p=function(e,r,n){Array.isArray(e)&&e.forEach(function(e){var t,a,o;e.label&&e.action&&!e.no_search?(r&&!e.search_only_action_name?(t=e.full_name||e.label,e.label=r+s+t,e.search=n+l+(e.label_plain_text||t)):e.search=e.label_plain_text||e.full_name||e.label,e.key&&(e.label+='<small style="text-transform: none;">'+e.key+"</small>"),i.push(e)):(a=(r?r+s:"")+(e.full_name||e.label||""),o=(n?n+l:"")+(e.label_plain_text||e.full_name||e.label||"")),e.submenu&&p("function"==typeof e.submenu?e.submenu():e.submenu,a||e.label,o||e.search),e.buttons&&p("function"==typeof e.buttons?e.buttons():e.buttons,a||e.label,o||e.search)})})(this.menu.actions),this.actions=i),this.actions}async getResultsForShorthand(e){var t=this;if(this.actions||(this.actions=this.menu.actions.filter(function(e){return"smartinput"!==e.type})),""===e&&this.actions)return this.actions;var a={search:e,type:"post"};this.post_type&&(a.subtype=this.post_type);var o=(await this.api.search(e,a)).map(function(e){return{label:`${e.title||"(no title)"} <small>${e.subtype||e.type}</small>`,url:e.url,action:t.on_selected,post_id:"post"===e.type?e.id:null}});return a.type="term",(await this.api.search(e,a)).forEach(function(e){o.push({label:`${e.title||"(no title)"} <small>${e.subtype||e.type}</small>`,url:e.url,action:t.on_selected})}),this.matcher||(this.matcher=new PgSmartGeneralMatcher),this.matcher.matchProps(e,o)}}class PgWordPressLiveData{constructor(e){this.api=e,this.issues=[],this.wrapper_data={},this.f=this.api.f}isEnabled(){return this.api.isApiEnabled()}clearIssues(){this.issues=[]}reportIssue(e,t,a){this.issues.push({pgel:e,message:t,action:a})}getIssues(){return this.issues}showIssues(){this.issues.length&&new PgAskAboutElements(this.issues.map(function(e){return{pgel:e.pgel,message:`- ${e.action.name}: `+e.message}}),`<p>Live data could not be shown for the following elements:</p>{ELEMENTS}<p>(Click on elements to select them on the page.)</p>`,"Live data was not shown for all elements",[{label:"Close",func:null,primary:!0}]).show()}setWrapperData(e){this.wrapper_data=e||{}}async getSinglePostId(){return this.wrapper_data.post_id||null}async getSiteName(){return(await this.api.getSiteSettings()).title}async getSiteDescription(){return(await this.api.getSiteSettings()).description}async getSiteUrl(){return(await this.api.getSiteSettings()).url}async getSiteHomeUrl(){return(await this.api.getRestSchema()).home}async getSiteLogo(){var e=(await this.api.getSiteSettings()).site_logo;return this.getImageUrl(e,"full")}async getPostsPerPage(){return(await this.api.getSiteSettings()).posts_per_page}getPostId(e){for(var t=e,a=null;t&&t.isElement;){if(t._wp_live_data_post_id){a=t._wp_live_data_post_id;break}t=t.parent}return a}setPostId(e,t){e._wp_live_data_post_id=t}clearPostIds(e){e.walkSelfAndChildren(function(e){return e._wp_live_data_post_id&&delete e._wp_live_data_post_id,!0})}async getPostTitle(e){var t=this.getPostId(e);return(await this.api.getPost(t)).title.rendered}async getPostLink(e){var t=this.getPostId(e);return(await this.api.getPost(t)).link}async getPostDate(e){var t=this.getPostId(e);return(await this.api.getPost(t)).date}async getPostContent(e){return(await this.api.getPost(this.getPostId(e))).content.rendered}async getPostExcerpt(e){return(await this.api.getPost(this.getPostId(e))).excerpt.rendered}async getPostByIdOrSlug(e,t){if(!e)throw new Error(`Post with id ${e} not found.`);if(e.toString().match(/^[0-9]+$/))return this.api.getPost(e);if(!t)throw new Error(`Post type is required when fetching posts by their slug.`);var a=await this.api.getPosts(t,{slug:e});if(0===a.length)throw new Error(`Post ${t} with slug ${e} not found.`);return a[0]}getFullUrl(e){return e&&!crsaIsAbsoluteUrl(e)?new URL(e,this.api.url).toString():e}async getImageUrl(e,t){if(e){var a=await this.api.getMedia(e);if(a.media_details?.sizes)return a.media_details.sizes[t]||(t="full"),this.getFullUrl(a.media_details.sizes[t].source_url)}return null}async getPostFeaturedImage(e,t){var a=await this.getPostFeaturedImageId(e);return this.getImageUrl(a,t)}async getPostFeaturedImageId(e){return(await this.api.getPost(this.getPostId(e))).featured_media}async getPostParentId(e){var t=this.getPostId(e);return(await this.api.getPost(t)).parent}async getPostFields(e){var t=this.getPostId(e),t=await this.api.getPost(t),a=[];return a=t.acf?a.concat(Object.keys(t.acf)):a}hidePgel(e){e.setAttribute("data-pg-hidden")}showPgel(e){e.removeAttribute("data-pg-hidden")}isHome(){return null===this.wrapper_data?.post_id&&"Home"===this.wrapper_data?.name}async queryPosts(e){var t,a,o="post";if("loop"===e.loop_type){var r=await this.getSinglePostId();if(r)return[await this.api.getPost(r)];if(this.isHome()){var r=(await this.api.getSiteSettings())?.page_on_front;if(r)return[await this.api.getPost(r)]}e.per_page=await this.getPostsPerPage()}return o=e.post_type||o,delete e.loop_type,delete e.post_type,"name"===e.orderby&&(e.orderby="slug"),"any"!==o?this.api.getPosts(o,e):(r=!1,e.include&&"include"===e.orderby&&(r=!0,delete e.order,delete e.orderby),(t=await this.api.callApi(`wp/v2/search/`,e)).length!==e.include.length&&(o=await this.api.callApi(`wp/v2/media/`,{include:e.include})).length&&(o.forEach(function(e){e.subtype="attachment"}),t=t.concat(o)),r&&(a={},t.forEach(function(e){a[e.id]=e}),t=[],e.include.forEach(function(e){a[e]&&t.push(a[e])})),t)}async getTerms(e,t){return delete t.taxonomy,t.order&&(t.order=t.order.toLowerCase()),this.api.getTaxonomyTerms(e,{per_page:99,...t})}async getTerm(e,t){var a=await this.api.getTaxonomyTerms(e,{slug:t});if(0===a.length)throw new Error(`Term ${t} for taxonomy ${e} not found.`);return a[0]}async getMenuForMenuLocation(e){var t,a=await this.api.getMenuLocation(e);return a?(t=await this.api.getMenu(a.menu),a=await this.api.getMenuItems(a.menu),a=pgStructureFlatListAsTree(a),console.log("items",a),{menu:t,items:a}):null}async getSidebar(e){return{sidebar:await this.api.getSidebar(e),widgets:await this.api.getSidebarWidgets(e)}}async getSiteUrls(){return this.api.getSiteUrls()}async getPostTypeArchive(e){var t=await this.api.getPostTypeInfo(e);if(t)return"string"==typeof t.has_archive?await this.api.getSiteUrls().base+"/"+t.has_archive:null;throw new Error(`Post type ${e} not found.`)}hasPhpAttribute(e,t){for(var a=e.getAttrList(),o=0;o<a.length;o++)if(!t||a[o].name===t){if(0<=a[o].name.indexOf("<?"))return!0;if(a[o].value&&0<=a[o].value.indexOf("<?"))return!0}return!1}setAttribute(e,t,a,o){this.hasPhpAttribute(e,t)?this.reportIssue(e,`Setting attribute ${t} would overwrite PHP code in the attribute.`,o):e.setAttribute(t,a)}removeAttribute(e,t,a){this.hasPhpAttribute(e,t)?this.reportIssue(e,`Removing attribute ${t} would lose the PHP code in the attribute.`,a):e.removeAttribute(t)}setHtml(t,e,a){const o=this;var r=!0;t.walk(function(e){if(e.isElementOrScript){if(o.hasPhpAttribute(e))return r=!1,o.reportIssue(t,`Showing live data would overwrite PHP code on element ${e.getName()}.`,a),!1;if(o.f.hasWPActions(e))return r=!1,o.reportIssue(t,`Showing live data would overwrite WordPress actions on element ${e.getName()}.`,a),!0;if("php"===e.tagName||"?php"===e.tagName||"?="===e.tagName)r=!1,o.reportIssue(t,`Showing live data would overwrite PHP code in element ${e.parent?.getName()}.`,a)}return!0}),r&&t.html(e)}}function pgWPInitPineCone(s){withPineCone(function(){const t={name:"Create editable block",prompt:`/Turn this HTML code into a WordPress block by adding cms-block-* attributes. If the HTML code already contains cms-block-* attributes, ask the user what changes they wish to do and then edit the code accordingly.        
#PAGEINFO            

Code:
#CODE

Complete transformed code with cms-block-* attributes:
`,action:"transform",options:{system:`Here are examples of how HTML elements can be turned into WordPress blocks using cms-block-* attributes.

# Example 1:
<section class="bg-light" cms-block="hero" cms-block-title="Hero" cms-block-description="Main hero section">
<div class="container">
    <img src="image.jpg" width="800" height="800" class="bg-white img-fluid mb-4 p-2 rounded-circle shadow w-50" cms-block-field="image" cms-block-field-type="image" cms-block-field-title="Image"/>
    <h1 class="display-5 fw-bold mb-3 text-dark" cms-block-field="title" cms-block-field-type="content" cms-block-field-title="Title">Cody Coolhair, a self taught web developer well versed in Visual Design.</h1>
    <p class="mb-4 pe-sm-5 ps-sm-5" cms-block-field="description" cms-block-field-type="content" cms-block-field-title="Description" cms-block-field-control="richtext">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus pulvinar faucibus neque, nec rhoncus nunc ultrices sit amet. Curabitur ac sagittis neque, vel egestas est.</p>
    <div class="d-inline-flex flex-wrap gap-2"> <a href="#" aria-label="facebook" class="border-0 btn btn-primary lh-1 p-2 rounded-circle" cms-block-field="social_fb" cms-block-field-type="link" cms-block-field-if-empty="if" cms-block-field-title="Facebook"> <svg></svg> </a> <a href="#" aria-label="twitter" class="border-0 btn btn-primary lh-1 p-2 rounded-circle" cms-block-field="social_tw" cms-block-field-type="link" cms-block-field-if-empty="if" cms-block-field-title="Twitter"> <svg></svg> </a> <a href="#" aria-label="instagram" class="border-0 btn btn-primary lh-1 p-2 rounded-circle" cms-block-field="social_ig" cms-block-field-type="link" cms-block-field-if-empty="if" cms-block-field-title="Instagram"> <svg></svg> </a>
    </div>
</div>
</section>

# Example 2:
<section cms-block="aboutme" cms-block-title="About me" cms-block-description="Show personal information and achievements." style="background:url('image.jpg');" cms-block-field="background_image" cms-block-field-type="background-image" cms-block-field-title="Background image"> 
<div class="col-lg-4">
    <img src="image.jpg" class="img-fluid rounded-1 shadow-sm w-100" alt="..." width="600" height="650" cms-block-field="image" cms-block-field-type="image" cms-block-field-title="Image"/>
</div>
<div class="col-lg-8">
    <h2 class="h6" cms-block-field="top_heading" cms-block-field-type="content" cms-block-field-title="Top heading">A little</h2>
    <h3 cms-block-field="title" cms-block-field-type="content" cms-block-field-title="Title">About Me</h3>
    <p cms-block-field="description" cms-block-field-type="content" cms-block-field-title="Description" cms-block-field-control="richtext">Phasellus pulvinar faucibus neque, nec rhoncus nunc ultrices sit amet. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus pulvinar faucibus neque, nec rhoncus nunc ultrices sit amet. Curabitur ac sagittis neque, vel egestas est.</p>
    <div cms-block-inner-content cms-block-inner-content-allowed="counter"> 
        <div class="col-md-4" cms-block="counter" cms-block-title="Counter" cms-block-parent="aboutme"> 
            <div>
                <h2 class="display-4 fw-bold text-primary" cms-block-field="number" cms-block-field-type="content" cms-block-field-title="Number">10+</h2>
                <h3 class="fw-bold h6 text-secondary" cms-block-field="label" cms-block-field-type="content" cms-block-field-title="Label">Years of Experience</h3>
            </div>                         
        </div>
        <div class="col-md-4"> 
            <div> 
                <h2 class="display-4 fw-bold text-primary">200+</h2>
                <h3 class="fw-bold h6 text-secondary">Projects Completed</h3> 
            </div>                         
        </div>
        <div class="col-md-4"> 
            <div> 
                <h2 class="display-4 fw-bold text-primary">12</h2>
                <h3 class="fw-bold h6 text-secondary">Industry Awards</h3> 
            </div>                         
        </div>                     
    </div><a href="#" class="btn btn-primary pe-4 ps-4" cms-block-field="button_link" cms-block-field-type="link" cms-block-field-title="Button link" cms-block-field-2="button_label" cms-block-field-type-2="content" cms-block-field-title-2="Button label">Full Story</a>
</div>  
</section>

# Example 3:
<section class="pb-5 pt-5" cms-block="projects" cms-block-title="Projects" cms-block-description="Projects section with project sub-blocks"> 
<div>
    <h2 cms-block-field="top_title" cms-block-field-type="content" cms-block-field-title="Top tile">Some of my recent projects</h2>
    <h3 class="fw-bold h1 mb-5 text-primary" cms-block-field="title" cms-block-field-type="content" cms-block-field-title="Title">Works</h3>
    <div class="gy-5 justify-content-center row row-cols-md-2" cms-block-inner-content cms-block-inner-content-allowed="project"> 
        <div cms-block="project" cms-block-title="Project" cms-block-parent="projects" cms-block-field="pullup" cms-block-field-type="class" cms-block-field-title="Pull up" cms-block-field-control="toggle" cms-block-field-checkbox-value="mt-md-n5" cms-block-parent="projects"> <a href="#" class="d-block link-dark text-decoration-none" cms-block-field="link" cms-block-field-type="link" cms-block-field-title="Link"><img src="image.jpg" alt="..." width="600" height="650" cms-block-field="image" cms-block-field-type="image" cms-block-field-title="Image"/><h4 class="fw-bold h5 mb-1" cms-block-field="namr" cms-block-field-type="content" cms-block-field-title="Name">Project 1</h4><p class="mb-0" cms-block-field="description" cms-block-field-type="content" cms-block-field-title="Description" cms-block-field-control="richtext">App Development</p></a> 
        </div>
        <div class="mt-md-n5"> <a href="#" class="d-block link-dark text-decoration-none"><img src="image2.jpg" alt="..." width="600" height="650"/><h4 class="fw-bold h5 mb-1">Project 2</h4><p class="mb-0">Branding</p></a> 
        </div>
        <div> <a href="#" class="d-block link-dark text-decoration-none"><img src="image3.jpg" alt="..." width="600" height="650"/><h4 class="fw-bold h5 mb-1">Project 3</h4><p class="mb-0">Web &amp; App Development</p></a> 
        </div>
        <div class="mt-md-n5"> <a href="#" class="d-block link-dark text-decoration-none"><img src="image4.jpg" alt="..." width="600" height="650"/><h4 class="fw-bold h5 mb-1">Project 4</h4><p class="mb-0">Web &amp; App Development</p></a> 
        </div>             
    </div>
    <div class="mt-5"><a href="#" cms-block-field="button_link" cms-block-field-type="link" cms-block-field-title="Button link" cms-block-field-2="button_label" cms-block-field-type-2="content" cms-block-field-title-2="Button label">View All</a>
    </div>         
</div>     
</section>

# Example 4:
<footer  cms-block="footer" cms-block-title="Footer" cms-block-description="Website footer with contact information"> 
<div class="container"> 
    <div> 
        <div> 
            <h2 cms-block-field="cta" cms-block-field-type="content" cms-block-field-title="Call to action">Interested to work together?</h2> 
            <p class="mb-0" cms-block-field="description" cms-block-field-type="content" cms-block-field-title="Description">       Duis pharetra venenatis felis, ut tincidunt ipsum consequat nec. Fusce et porttitor libero, eu aliquam nisi. Nam finibus ullamcorper semper.</p> 
        </div>             
        <div class="col-md-auto"> <a href="#" cms-block-field="button" cms-block-field-type="link" cms-block-field-title="Button link" cms-block-field-2="button_label" cms-block-field-type-2="content" cms-block-field-title-2="Button label">Get In Touch</a> 
        </div>             
    </div>
    <div class="row"> 
        <div> <a href="#"> <span cms-block-field="site_name" cms-block-field-type="content" cms-block-field-title="Site name">Cody Coolhair</span></a> 
        </div>
        <div> 
            <div class="d-inline-flex flex-wrap gap-2"> <a href="#" aria-label="facebook" class="btn btn-outline-light lh-1 p-2 rounded-circle" cms-block-field="social_fb" cms-block-field-type="link" cms-block-field-if-empty="if" cms-block-field-title="Facebook"> <svg></svg> </a> <a href="#" aria-label="twitter" class="btn btn-outline-light lh-1 p-2 rounded-circle" cms-block-field="social_twitter" cms-block-field-type="link" cms-block-field-if-empty="if" cms-block-field-title="Twitter"> <svg></svg> </a> <a href="#" aria-label="instagram" class="btn btn-outline-light lh-1 p-2 rounded-circle" cms-block-field="social_ig" cms-block-field-type="link" cms-block-field-if-empty="if" cms-block-field-title="Instagram"> <svg></svg> </a>
            </div>                 
        </div>             
        <div class="col-md col-sm-6"> <a href="tel:+0 123-456-789" cms-block-field="phone" cms-block-field-type="content" cms-block-field-title="Phone" cms-block-field-2="phone" cms-block-field-type-2="none" cms-block-field-title-2="Phone link" cms-block-field-expression-2="tel:{{ phone }}">+0 123-456-789</a> 
        </div>             
        <div class="col-md col-sm-6"> <a href="mailto:info@company.com" cms-block-field="email" cms-block-field-type="content" cms-block-field-title="Email address" cms-block-field-2="email" cms-block-field-type-2="attr" cms-block-field-attribute-2="href" cms-block-field-expression-2="mailto:{{ email }}">info@company.com</a> 
        </div>             
    </div>         
</div>     
</footer>

# Example 5 - To allow user to select one or more posts that will be displayed in the block use cms-post-* attributes. Set cms-post="block" on the post element that will be repeated for each post. Also set cms-post-loop-block-attribute to unique field id, cms-post-loop-block-attribute-title="Name of the field" and select WP post type (post, page...) cms-post-loop-block-attribute-type="post".

Important: cms-post="block" and others must be placed directly on the post element that will be repeated, not on its parent! Do not mix cms-block-inner-content with showing posts! Do not define sub-blocks for repeated posts!

Note: if creating a block that shows recent posts or single post use cms-post="loop" as that displays the WP default loop.

Then inside the repeated element use cms-post-image, cms-post-title, cms-post-excerpt, cms-post-date, cms-post-link, cms-post-author and cms-post-content (if needed).

The static HTML usually contains placeholders for multiple posts. Add above attributes to the first one, and cms-no-export to the rest of placeholders to prevent them being exported into the block code.

Output all placeholders! Do not replace them with ... or similar.

<section cms-block="blog-posts" cms-block-title="Latest blog posts" cms-block-description="Display a list of selected posts">
    <div>
        <div>
            <h2 cms-block-field="section_title" cms-block-field-type="content" cms-block-field-title="Section Title">Blog posts</h2>
            <p cms-block-field="section_subtitle" cms-block-field-type="content" cms-block-field-title="Section Subtitle">Latest news</p>
        </div>
        <div>
            <article cms-post="block" cms-post-loop-block-attribute="posts" cms-post-loop-block-attribute-title="Blog posts" cms-post-loop-block-attribute-type="post">
                <img src="post1.jpg" cms-post-image="medium"/>
                <div><span cms-tags="category" cms-tags-display="this">Safety Tips</span>
                    <h3 cms-post-title>Essential High-Altitude Safety Protocols</h3>
                    <p cms-post-excerpt>Professional insights into staying safe during high-altitude climbs and proper acclimatization techniques.</p>
                    <div><span cms-post-date>Dec 15, 2023</span><a href="#" cms-post-link>Read More </a>
                    </div>
                </div>
            </article>
            <article cms-no-export>
                <img src="post2.jpg" />
                <div><span>Expedition Reports</span>
                    <h3>Summit Success: Team Reaches New Heights</h3>
                    <p>Follow our recent successful expedition and the challenges overcome by our experienced team.</p>
                    <div><span>Dec 10, 2023</span><a href="#">Read More </a>
                    </div>
                </div>
            </article>
            <article cms-no-export>
                <img src="post3.jpg" />
                <div><span>Gear Guide</span>
                    <h3>Essential Gear for Winter Climbs</h3>
                    <p>Complete guide to selecting and maintaining your mountaineering equipment for winter expeditions.</p>
                    <div><span>Dec 5, 2023</span><a href="#">Read More </a>
                    </div>
                </div>
            </article>
        </div>
    </div>
</section>

# Making SVGs editable:
<svg cms-block-field="icon" cms-block-field-type="image" cms-block-field-title="Icon SVG">...</svg> 

# Additional features
Use the following cms-* attributes to show site info, menus, site links and so on.

## Show site name:
<h3 cms-site-name>My site</h3>

## Show site description
<p cms-site-desc>...</p>

## Show the site name and link it to home:
<a href="#" cms-site-name cms-site-link="home">Site name</a>

## Add cms-menu="primary" to show a menu:
<ul cms-menu="primary"> 
    <li class="nav-item">
        <a href="#">Home</a> 
    </li>
    <li class="nav-item">
        <a href="#">Destinations</a> 
    </li>
</ul>

## To show post(s), add cms-post="loop" on the repeated post element (even if it is showing single post) and then show:

### Post category and tags:
<span cms-tags="category" cms-tags-display="this">Featured Story</span> 
Multiple categories and tags:
<ul cms-tags="category" cms-tags-display="child">
    <li>Cat 1</li>
    <li>Cat 2</li>
</ul>
For post tags use cms-tags="post_tag"

### Post title
<h2 cms-post-title>Title</h2>
With link to the post:
<h2 cms-post-title cms-post-link>Title</h2>

### Post link
<a href="#" cms-post-link>Read more</a>

### Post excerpt
<p cms-post-excerpt>Excerpt</p>

### Post content:
<div cms-post-content>Content...</div>

### Post featured image
<img src="image.jpg" cms-post-image="[size]"/> size is "large", "full", "post-thumbnail"

### Post date
<small cms-post-date>March 15, 2024</small>

### Post author
Name:
<h4 cms-author-field="display_name" cms-author-field-type="content">Sarah Pine</h4>
Description:
<small cms-author-field="description" cms-author-field-type="content">Nature Photographer</small>
Avatar image:
<img src="author.jpg" cms-author-field="avatar_image" cms-author-field-type="image"/>
Profile link:
<a cms-author-field="user_url" cms-author-field-type="content">My profile</a>
Posts link:
<a cms-author-field="posts_url" cms-author-field-type="content">My posts</a>

## Forms
<form cms-form="form_id" cms-form-send-email="true">...</form>
Add form tag if it is missing.

## Copyright notice
If you have something like:
<div>&copy; 2024 Garden Hose. All rights reserved.</div>
Change it to:
<div>&copy; <span cms-function="current_year" cms-function-type="content">2024</span> <span cms-site-name>Garden Hose</span>. All rights reserved.
</div>


# Important points:

- Block ids and names should reflect the purpose of the block, not its content which is probably just placeholder.
- Blocks can be nested. 
- cms-block-inner-content attribute is used to mark the immediate element that can contain sub-blocks. Each block can only have one such element. Do not remove any HTML elements from the inner content area! Correct code example:
<div cms-block="my-block">
<div cms-block-inner-content>
    <div cms-block="sub-block"></div>
    <div cms-block="sub-block"></div>
    <div cms-block="sub-block"></div>
</div>
</div>

Invalid code example:
<div cms-block="my-block">
<div cms-block-inner-content>
    <div>
        <div cms-block="sub-block"></div>
    </div>
</div>
<div cms-block-inner-content>
</div>

- Do not make inline SVGs part of editable text. If the code is <p>Hello <svg>...</svg></p> and you need to make it editable wrap the text with span and create two separate fields: <p><span cms-block-field...>Hello</span> <svg cms-block-field...>...</svg></p>

- cms-block value is a field id and can contain only lowercase letters, numbers and -, for example "hero-block". "_" is not allowed. Id and title should describe the general purpose of the block.
- cms-block-field values are field ids and must be unique and can contain only lowercase letters, numbers and _, for example "link_label". "-" is not allowed. cms-block-field-title values must be unique, for example "Link label". Id and title should describe the purpose of the field. Do not use non-descriptive terms such as text1, text2...
- for background images use cms-block-field-type="background-image"
- one HTML element can have multiple editable fields. For first one use cms-block-field-*, for second one cms-block-field-*-2, for 3rd one cms-block-field-*-3 and so on.
- Do not add or remove any HTML elements. Only modify cms-block-* attributes, nothing else. 
- If you are not sure about displaying sub-blocks with cms-block-inner-content or displaying posts with cms-post="block", ask the user what they want.
- Use additional cms-* attributes (listed above) to display site name / link, menus in headers and footers, as well as cms-post-* attributes to display posts.
- Use cms-form for forms.
- Leave mobile menu toggles, dark mode toggles and similar as they are.
- Do not explain what you did.
`,temperature:0,require_gpt4:!0,filter_func:function(e){return e.findIncludingSelf("[cms-block]").forEach(function(e){var t=e.getAttribute("cms-block")||"",a=t.replace(/_/g,"-");t!==a&&e.setAttribute("cms-block",a)}),e.findIncludingSelf("[cms-block-field]").forEach(function(e){var t=e.getAttribute("cms-block-field")||"",a=t.replace(/\-/g,"_");t!==a&&e.setAttribute("cms-block-field",a)}),e.findIncludingSelf("[cms-block-field-2]").forEach(function(e){var t=e.getAttribute("cms-block-field-2")||"",a=t.replace(/\-/g,"_");t!==a&&e.setAttribute("cms-block-field-2",a)}),e.findIncludingSelf("[cms-block-inner-content]").forEach(function(t){var a=t.first(),o=(a&&a===t.last()&&!a.hasAttribute("cms-block")&&(t.getAttrList().slice(0).forEach(function(e){e.name.startsWith("cms-block-inner-content")&&(a.setAttribute(e.name,e.value),t.removeAttribute(e.name))}),t=a),{});t.children.forEach(function(e){var t=e.getAttribute("cms-block");o[t]?e.removeAttrIfStartsWith("cms-block",!0):o[t]=!0})}),e},filter_prompt:function(e){return e.replace("#PAGEINFO",function(o){var e=o.getPage();const r=[];return e.sourceNode.find(`[cms-block]`).forEach(function(e){var t,a;e!==o&&(t=e.getAttribute("cms-block"),a=e.getAttribute("cms-block-title"),t)&&a&&r.push(t+`: `+a)}),r.length?`
For reference, these blocks are already defined on the page (id: name):
${r.join("\n")}
`:""}(this.pgel))}}},i=[t];pinegrow.addEventHandler("on_pine_cone_get_presets",function(e,t){if(s.isWPEnabledForProject()){var a=t.presets||[],o=PgPineConeStoredCommandCategory,r=PgPineConeStoredCommand;const n=new o("WordPress","Build WordPress features.");i.forEach(function(e){var t=new r(e.name,e.prompt,e.action,``,null,e.options);n.add(t)}),a.push(n),a.presets=a}}),s.aiAutoCreateEditableBlock=async function(e){var a=new PgPineConeCommand(e,t.prompt,t.action);a.name=t.name,$.each(t.options,function(e,t){a[e]=t}),await pinegrow.pineCone.run(a)}})}var pgWooSmart=function(s,l){var i=l,e=[],t=[],a=[],o=[],r=[],n=(pinegrow.addEventHandler("on_wp_get_template_export_as_options",function(e,t){s.wcIsEnabledInProject()&&(t.push("WooCommerce"),t.push("woocommerce.php - General purpose template with WooCommerce Content action"),t.push("woocommerce/archive-product.php - Show list of products"),t.push("woocommerce/single-product.php - Show the single selected product"))}),pinegrow.addEventHandler("on_wp_get_image_sizes_options",function(e,t){s.wcIsEnabledInProject()&&(t.push({key:"woocommerce_thumbnail",name:"woocommerce_thumbnail"}),t.push({key:"woocommerce_single",name:"woocommerce_single"}),t.push({key:"woocommerce_gallery_thumbnail",name:"woocommerce_gallery_thumbnail"}))}),pinegrow.addEventHandler("on_wp_get_taxonomies_options",function(e,t){s.wcIsEnabledInProject()&&(t.push({key:"product_cat",name:"product_cat"}),t.push({key:"product_tag",name:"product_tag"}))}),pinegrow.addEventHandler("on_wp_get_post_types_options",function(e,t){s.wcIsEnabledInProject()&&t.push({key:"product",name:"product"})}),pinegrow.addEventHandler("on_wp_block_attributes_get_values_presets",function(e,t,a){t.push({type:"divider"}),t.push({type:"header",label:"WooCommerce"}),t.push({label:"Show Products Order By",action:function(){a(`Slug=name
Title=title
Price=price
Average rating=rating
Review count=review_count
Total sales=total_sales
Date=date
Modified date=modified
Id=ID
Description=description
Comment count=comment_count
Menu order=menu_order
Meta value=meta_value
Meta value numeric=meta_value_num
Random=rand`)}}),t.push({label:"Show Products Order",action:function(){a(`Ascending=asc
Descending=desc`)}}),t.push({label:"Product on sale (yes / no)",action:function(){a(`Yes=true
No=false`)}})}),pinegrow.addEventHandler("on_wp_before_parse_to_php",function(e,t){s.wcIsEnabledInProject()&&(s.requireResource("wc_pg_helpers.php","inc",null),s.includeInFunctions("wc_pg_helpers.php","inc",null,"PG_WC_Helper"),s.addThemeSupportsCode(`
    add_theme_support( 'woocommerce' );`),"wc"===s.wcGetGalleryJS()&&["zoom","lightbox","slider"].forEach(function(e){s.wcGetGalleryFeature(e)&&s.addThemeSupportsCode(`
    add_theme_support( 'wc-product-gallery-${e}' );`)}),s.addToFunctionsPhpSection("WooCommerce Filters",`
    /* This filter lets us multiple variants of the same template name. It also handles locating the templates that are present in the theme or plugin. */        
    add_filter( 'wc_get_template', function( $template, $template_name, $args, $template_path, $default_path ) {
        global $pg_wc_use_template, $pg_wc_use_template_cache_${s.current_theme_info.slug};
        if(!isset($pg_wc_use_template_cache_${s.current_theme_info.slug})) $pg_wc_use_template_cache_${s.current_theme_info.slug} = array();
        
        if( !empty($pg_wc_use_template) ) {
            $template_variant = trailingslashit( ${s.wpGetThemePath()} ) . 'woocommerce/' . str_replace( '.php', '-'.$pg_wc_use_template.'.php', $template_name);
            $template_key = $template_name . '-' . $pg_wc_use_template;
        } else {
            $template_key = $template_name;
            $template_variant = trailingslashit( ${s.wpGetThemePath()} ) . 'woocommerce/' . $template_name;
        }
            
        if(isset($pg_wc_use_template_cache_${s.current_theme_info.slug}[ $template_key ])) {
            if($pg_wc_use_template_cache_${s.current_theme_info.slug}[ $template_key ]) {
                $template = $template_variant;
            }
        } else if(file_exists($template_variant)) {
            $template = $template_variant;
            $pg_wc_use_template_cache_${s.current_theme_info.slug}[ $template_key ] = true;
        } else {
            $pg_wc_use_template_cache_${s.current_theme_info.slug}[ $template_key ] = false;
        }
 
        return $template;
    }, 10, 5 );  
            `,!0,!1,!1,`
/* Setting up WooCommerce filters */
/* Pinegrow generated WooCommerce Filters Begin */
/* Pinegrow generated WooCommerce Filters End */
/* End Setting up WooCommerce filters */

`))}),new PgWooFunctionsProvider(s),s.wcValidateExport=function(e,t){if(e.validate){var a=e.validate(t);if(a)return s.addExportError(t,`<b>${e.name}</b>: `+a),!1}return!0},s.wcValidateCanAddAction=function(e,t){if(e.validate){var a=e.validate(t);if(a)return pinegrow.showAlert(a,e.name+" action can not be used here"),!1}return!0},s.wcIsEnabledInProject=function(){var e=s.getCurrentThemeInfo();return e&&e.options.wc_enabled&&"true"===e.options.wc_enabled},s.wcGetGalleryJS=function(){return s.getCurrentThemeInfo().options.wc_gallery_js||"wc"},s.wcGetGalleryFeature=function(e){s.getCurrentThemeInfo();return"custom"!==s.wcGetGalleryJS()},[]),p=(s.wcAddValidator=function(e,t,a){n.push({name:e,func:t,action:a})},s.wooGetSelectorField=function(e,t,a,o){return $.extend({type:"selector",name:e,placeholder:"element selector",action:"element_attribute",selector_multiple:void 0!==a,selector_global:void 0!==a,get_selector_options:function(e,t,a,o){return s.wpGetSelectorOptions(t,{},a,o)},validate:function(e,t,a){return s.wpValidateSelector(e,t,a)},helptext:t},o||{})},new PgWooActionLoop(s,i).getAction()),p=(e.push(p),r.push(p),new PgWooActionLoopResultsCount(s,i)),p=(r.push(p.getAction()),new PgWooActionLoopOrderBy(s,i));r.push(p.getAction());var c=new PgWooActionProductImage(s,i).getAction(),p=(r.push(c),new PgWooActionLoopAddToCart(s,i)),p=(r.push(p.getAction()),new PgWooActionLoopPagination(s,i)),u=(r.push(p.getAction()),s.addTag("wc-product","Single Product",null,function(e){s.wpMapAction(u,e,u.mapAction)},{"wc-product-mode":{type:"select",name:"Layout mode",action:"element_attribute",default_value:"hooks",options:[{key:"hooks",name:"Hooks"},{key:"freestyle",name:"Freestyle"}],helptext:`How do you want to implement the custom single product view?
<ul>
<li><b>Hooks</b> - let the WooCoomerce hooks display the product information, so that various plugins can add their features to the product display. This is the most compatible approach, but the order and positioning of the product elements is controlled by WooCommerce, not by your custom layout.</li>
<li><b>Freestyle</b> - use the selected element as the layout for displaying product information. The product information is explicitly shown with Product actions. But some WooCommerce actions will not get triggered and that might affect any plugins that hook to these actions.</li>
</ul>`},"wc-product-before":s.wooGetSelectorField("Before Summary (sale flash, image...)",`<p>Select the element for displaying the product image, sale flash and other information hooked to the <code>woocommerce_before_single_product_summary</code> action.</p>`,!1,{selector_assign_name:"Before Summary",show_if:"!wc-product-mode==freestyle"}),"wc-product-summary":s.wooGetSelectorField("Summary (title, rating, price...)",`<p>Select the element for displaying the product title, rating and other information hooked to the <code>woocommerce_single_product_summary</code> action.</p>`,!1,{selector_assign_name:"Summary",show_if:"!wc-product-mode==freestyle"}),"wc-product-after":s.wooGetSelectorField("After Summary (tabs, upsells, related...)",`<p>Select the element for displaying the product tabs, upsells and other information hooked to the <code>woocommerce_after_single_product_summary</code> action.</p>`,!1,{selector_assign_name:"After Summary",show_if:"!wc-product-mode==freestyle"}),"wc-product-info-label":s.wpGetInfoHTMLField(`<p style="text-align:left;">Note, the element should be a <code>div</code> if you want to use default WooCommerce styling.</p>`,{show_if:function(e,t){return"div"!==t.tagName}})})),p=(u.on_can_add_action=function(e,t,a){return 0<=["html","body","head","script"].indexOf(e.tagName)?(pinegrow.showQuickError(`Single Product action can't be added to ${e.tagName} element.`),!1):s.wcValidateCanAddAction(u,e)},u.skip_compatibility_check=!0,u.mapAction=function(e,t){var a=t.getAttribute("wc-product-mode")||"hooks",o=(t.setData("show_product","single"),t.setData("layout_mode",a),t.setAttribute("wc-product-class"),t.setAttribute("wp-the-id",t.getAttribute("id")),t.setAttribute("wp-loop"),i.resetAfterMap(),l.before(t,`<?php global $product; ?>`),l.before(t,`<?php do_action( 'woocommerce_before_single_product' ); ?>`),"hooks"!==a&&!1||!1&&"true"!==t.getAttribute("wc-product-password")||l.before(t,`<?php
if ( post_password_required() ) {
    echo get_the_password_form();
    return;
}
?>`),"hooks"!==a&&l.before(t,`<?php WC()->structured_data->generate_product_data(); ?>`),l.after(t,`<?php do_action( 'woocommerce_after_single_product' ); ?>`),s.wooGetPgelBySelector(e,t,"wc-product-before",!1)),r=s.wooGetPgelBySelector(e,t,"wc-product-summary",!1)||t,n=s.wooGetPgelBySelector(e,t,"wc-product-after",!1);l.addToChanges(function(){"hooks"===a&&(r.html(`<?php do_action( 'woocommerce_single_product_summary' ); ?>`),o&&o!==t&&o!==r?o.html(`<?php do_action( 'woocommerce_before_single_product_summary' ); ?>`):(o||t).prepend(pgCreate(`<?php do_action( 'woocommerce_before_single_product_summary' ); ?>`)),n&&n!==t&&n!==r?n.html(`<?php do_action( 'woocommerce_after_single_product_summary' ); ?>`):(n||t).append(pgCreate(`<?php do_action( 'woocommerce_after_single_product_summary' ); ?>`)))},this,[],"super_end")},u.addMeta({helptext:`Mark the element that contains the display of a single product. Do not use this action in a Show Products loop or within Related Products or Upsells.`,helplink:"https://pinegrow.com/docs/woocommerce/actions/single-product"}),u.validate=function(e){if(e.closest("[wc-show-products],[wc-product-related],[wc-product-upsells]")||e.closest(function(e){var t=e.getData("show_product");if(t&&"single"!==t)return!0}))return`<b>Single Product</b> action should not be used in product lists that are displayed by actions such as Show Products, Related Products and Product Upsells.`},s.wcAddValidator("",function(e){}),e.push(u),t.push(u),s.wcValidateProductAction=function(e,t){if(!(t.closest("[wc-product],[wc-show-products],[wc-product-related],[wc-product-upsells]")||t.closest(function(e){if(e.getData("show_product"))return!0})))return`<b>${e.name}</b> action can only be used inside an element with Single Product, Show Products, Related Products or Product Upsells action.`},s.wcGetContextInfo=function(e){var a,o={single:!1,loop:!1,loop_type:null,hooks:!1,pgel:null},r=["wc-product","wc-show-products","wc-product-related","wc-product-upsells"];return e.closest(function(e){if(a=e.getData("show_product")){switch(o.pgel=e,a){case"single":o.single=!0,o.hooks="freestyle"!==e.getData("layout_mode");break;case"loop":o.loop=!0,o.loop_type="loop",o.hooks="freestyle"!==e.getData("layout_mode");break;case"related":case"upsells":o.loop=!0,o.loop_type=a,o.hooks=!1}return!0}for(var t=0;t<r.length;t++)if(e.hasAttribute(r[t])){switch(o.pgel=e,r[t]){case"wc-product":o.single=!0,"freestyle"===e.getAttribute("wc-product-mode")||"custom"===e.getData("layout_mode")?o.hooks=!1:o.hooks=!0;break;case"wc-show-products":o.loop=!0,o.loop_type="loop","freestyle"===e.getAttribute("wc-show-products-mode")||"custom"===e.getData("layout_mode")?o.hooks=!1:o.hooks=!0;break;case"wc-product-related":o.loop=!0,o.loop_type="related",o.hooks=!1;break;case"wc-product-upsells":o.loop=!0,o.loop_type="upsells",o.hooks=!1}return!0}})?o:null},s.wcIsInLoop=function(e,t){return!(!(t=t||s.wcGetContextInfo(e))||!t.loop)&&t},s.wcIsInSingleProduct=function(e,t){return!(!(t=t||s.wcGetContextInfo(e))||!t.single)&&t},s.wcIsSingleProductWithHooks=function(e,t){return(t=s.wcIsInSingleProduct(e,t))&&t.hooks},s.wcIsLoopWithHooks=function(e,t){return(t=s.wcIsInLoop(e,t))&&t.hooks},new PgWooActionProductTitle(s,i)),e=(t.push(p.getAction()),new PgWooActionProductPrice(s,i)),p=(t.push(e.getAction()),new PgWooActionProductLink(s,i)),e=(t.push(p.getAction()),new PgWooActionProductShortDescription(s,i)),p=(t.push(e.getAction()),new PgWooActionProductSaleFlash(s,i)),e=(t.push(p.getAction()),s.addTag("wc-product-class","Product Class",null,function(e){var t,a,o;e.hasAttr("wc-product-class")&&(t=!1,o=a="",e.hasAttr("class")&&(0<=(a=s.filterClasses(e.getAttr("class"))).indexOf("<")?(t=!0,a+=" "):o=(o?o+" ":"")+a),t?e.setAttr("class",a+`<?php echo join( ' ', wc_get_product_class( ${s.quoteParam(o)||"''"}, $product ) ) ?>`):(e.removeAttr("class"),e.setAttr("<?php wc_product_class("+(o?" "+s.quoteParam(o)+" ":"''")+", $product ); ?>")))}),s.wcGetImageCode=function(a,e,t,o,r){o=o||"woocommerce_thumbnail";var n=[],i=null;return"img"===a.tagName&&(i=s.wpGetAttributesFromImageTemplate(a),r)&&$.each(r,function(e,t){a.hasAttribute(e)||(i[e]=t)}),i.class&&0<=i.class.indexOf("<?php")&&(i.class=`'${i.class.replace("<?php","'.").replace("?>",".'")}'`),n.push(l.getNamedParams(e,a,function(e,t,a){return"class"===t?a=a||e.getAttr("class"):"sizes"===t&&a&&a.indexOf("$")<0&&(a=s.quoteParam(a,null,!0)),a},null,null,i,!0)),"array()"==n[n.length-1]&&(n[n.length-1]="null"),`echo PG_Image::removeSizeAttributes( ${t=(t=o?t.replace("_SIZE_",s.quoteParam(o)):t).replace("_ATTRS_",n[0])}, ${s.quoteParam(s.wpAddRemoveSizeAttributesCodeToImage(a,"",!0))})`},s.wcGetCodeForProductImage=function(e,t,a,o){return s.wcGetImageCode(e,c,`$product->get_image( _SIZE_, _ATTRS_, ${a?"true":"false"} )`,t,o)},new PgWooActionProductImageGallery(s,i)),m=(t.push(e.getAction()),s.wooRequireElement=function(e,t,a,o){return!!a||(s.addExportError(t,`<b>${e.name}</b>: `+o),!1)}),p=new PgWooAddToCart(s,i).getAction(),d=(t.push(p),s.addTag("wc-product-content","Product Content",null,function(e){e.hasAttribute(d.attribute)&&i.addToChanges(function(){e.html(`<?php the_content(); ?>`)},this,[])},{})),e=(d.addMeta({tags:[s.tag_set_content,s.tag_ret_string,s.tag_t_post,s.tag_use_loop],helptext:`Display product description (the_content of the product). Note, use Product Description Tab action to define the layout for the description tab.`,helplink:"https://pinegrow.com/docs/woocommerce/actions/product-content",extra_name:null}),t.push(d),new PgWooActionProductCats(s,i)),p=(t.push(e.getAction()),new PgWooActionProductTags(s,i)),e=(t.push(p.getAction()),new PgWooActionDisplayMeta(s,i)),p=(t.push(e.getAction()),new PgWooActionStock(s,i)),e=(t.push(p.getAction()),s.wooGetPgelBySelector=function(e,t,a,o,r){var n,i=t.getAttribute(a);return i&&(n=null,n=r?"this"===i?[t]:t.find(i):s.wpGetPgelFromSelector(t,i)),(!n||r&&0===n.length)&&o&&m(e,t,null,`Element for <b>${e.sections[e.attribute+"_parameters"].fields[a].name}</b> with the selector <code>${i}</code> is not found.`),n},s.wooSaveTemplate=function(e,t,a,o,r){var n=e.document.pgwp_file_name||null;s.template_parts.push({pgel:e,slug:`woocommerce/`+t,name:null,only_content:r||!1,file_name:n,filter_code:function(e){return 0<=a.indexOf("__NO_CODE__")?a.replace("__NO_CODE__",""):0<=a.indexOf("__CODE__")?a.replace("__CODE__",e):a+"\n"+e}}),o?(e.wp_detach_on_remove=!0,i.toPhpNode(e,o,"end")):i.addToChanges(function(){e.detach()},this,[],"end")},new PgWooActionProductRating(s,i)),p=(t.push(e.getAction()),new PgWooActionTabs(s,i)),e=(t.push(p.getAction()),new PgWooActionTabDescription(s,i)),p=(t.push(e.getAction()),new PgWooActionTabInfo(s,i)),e=(t.push(p.getAction()),new PgWooActionProductAttributes(s,i)),p=(t.push(e.getAction()),new PgWooActionRelatedProducts(s,i)),e=(t.push(p.getAction()),new PgWooActionUpsells(s,i)),p=(t.push(e.getAction()),new PgWooActionCats(s,i)),e=(a.push(p.getAction()),new PgWooActionCatImage(s,i)),p=(a.push(e.getAction()),new PgWooActionCatLink(s,i)),e=(a.push(p.getAction()),new PgWooActionCatName(s,i)),p=(a.push(e.getAction()),new PgWooActionCatDescription(s,i)),e=(a.push(p.getAction()),new PgWooActionCatCount(s,i)),p=(a.push(e.getAction()),new PgWooActionContentWrapper(s,i)),e=(o.push(p.getAction()),new PgWooActionPageTitle(s,i)),p=(o.push(e.getAction()),new PgWooActionBreadcrumbs(s,i)),e=(o.push(p.getAction()),new PgWooActionNotice(s,i)),p=(o.push(e.getAction()),new PgWooActionSidebar(s,i)),e=(o.push(p.getAction()),new PgWooActionSearchForm(s,i)),p=(o.push(e.getAction()),new PgWooActionViewCartLink(s,i));return o.push(p.getAction()),l.list.push(function(e){e.removeAttrIfStartsWith("wc-")}),{loop:r,product:t,cat:a,misc:o}};class PgWooAction{constructor(e,t){this.f=e,this.p=t,this.pgel=null,this.allowed_on=null,this.globel=!1}getAction(){var o=this,r=this.a;return this.a.on_can_add_action||(this.a.on_can_add_action=function(e,t,a){if(o.allowed_on)if("string"==typeof o.allowed_on){if(!e.isSelector(o.allowed_on))return pinegrow.showAlert(o.allowed_on_msg||`<p>This action can only be placed on <code>${o.allowed_on}</code> elements.`,"Can not add the action"),!1}else if(!o.allowed_on(e))return pinegrow.showAlert(o.allowed_on_msg||`<p>This action can not be placed on this element.`,"Can not add the action"),!1;return o.f.wcValidateCanAddAction(r,e)}),r.meta&&r.meta.helplink&&(r.meta.helplink="https://pinegrow.com/docs/woocommerce/actions/"+r.meta.helplink+"/"),this.a}willOverride(e){return` Overrides <code>${e}</code> so that it uses the template.`}onEvaluateShowIf(e,t,a){return this.pgel=e,!(t&&!this.shouldSaveTemplate())&&t}onShowIf(e,t){return this.pgel=t,!!this.shouldSaveTemplate()}addTemplateSection(e,t,a,o,r){const n=this;this.templateNames=o.split(",");function i(e,t){var a=!n.f.wcIsInLoop(e);return t=t.replace("#TEMPLATES",l(a)),t=e&&r?r(a,t,e)||t:t}var s=[{key:"save_use",name:"Save and show template"}],l=(t&&(s.push({key:"use",name:"Show only"}),s.push({key:"save",name:"Save only"})),s.push({key:"none",name:"None (do not export)"}),function(e){void 0===e&&(e=!0);for(var t=n.templateNames.slice(0),a=e?"single-product":"loop",o=0;o<t.length;o++)t[o].startsWith("$context")&&(t[o]=t[o].replace("$context",a));return 1===t.length?`the template <code>${t[0]}</code>`:`templates<br><code>${t.join("</code>,<br><code>")}</code>`}),p=(this.a.sections.parameters||(this.a.sections.parameters={fields:{}}),this.onEvaluateShowIf.bind(this)),c=this.onShowIf.bind(this),u=[],m=this.a.sections.parameters.fields;this.a.sections.parameters.fields[this.a.attribute+"-template-def-section"]=this.f.wpGetSectionLabelField("Settings",null,{}),$.each(this.a.sections.parameters.fields,function(e,t){u.push(e),t.show_if?"on_evaluate_show_if"in t||(t.on_evaluate_show_if=p):t.show_if=c}),u.pop(),u.unshift(this.a.attribute+"-template-def-section"),this.a.sections.parameters.fields={},this.a.sections.parameters.fields[this.a.attribute+"-template-section"]=this.f.wpGetSectionLabelField("Template",null,{}),this.a.sections.parameters.fields[this.a.attribute+"-template-info-free"]=this.f.wpGetInfoHTMLField(function(e){return`The action is used in <b>freestyle</b> layout <i class="icon icon-help helpicon" style="opacity:0.5;cursor:help;"></i>`},{show_if:function(e,t){var a=n.f.wcGetContextInfo(t);return!(!a||a.hooks)},class:"wc-template-info",helptext:function(e){return i(e,`<p>The action saves and/or uses #TEMPLATES.</p>`)}}),this.global&&(this.a.sections.parameters.fields[this.a.attribute+"-template-info-global"]=this.f.wpGetInfoHTMLField(function(e){return`The action is used outside of product or list <i class="icon icon-help helpicon" style="opacity:0.5;cursor:help;"></i>`},{show_if:function(e,t){return!(n.f.wcGetContextInfo(t)||!n.global)},class:"wc-template-info",helptext:function(e){return i(e,`<p>The action saves and/or uses #TEMPLATES.</p>`)}})),this.a.sections.parameters.fields[this.a.attribute+"-template-info-single-hooks"]=this.f.wpGetInfoHTMLField(function(e){return`The action is used in Single Product <b>with hooks</b>.`},{show_if:function(e,t){return!!n.f.wcIsSingleProductWithHooks(t)},class:"wc-template-info",helptext:function(e){return i(e,`<p>The action saves and/or uses #TEMPLATES.</p>`)}}),this.a.sections.parameters.fields[this.a.attribute+"-template-info-loop-hooks"]=this.f.wpGetInfoHTMLField(function(e){return`The action is used in a product list <b>with hooks</b>.`},{show_if:function(e,t){return!!n.f.wcIsLoopWithHooks(t)},class:"wc-template-info",helptext:function(e){return i(e,`<p>The action saves and/or uses #TEMPLATES.</p>`)}}),this.a.sections.parameters.fields[this.a.attribute+"-template"]={type:"select",name:"Action",options:s,show_empty:!1,action:"element_attribute",attribute:this.a.attribute+"-template",default_value:"save_use",show_if:function(e,t){return!n.f.wcIsSingleProductWithHooks(t)}},this.a.sections.parameters.fields[this.a.attribute+"-template-variant"]={type:"text",name:"Variant",action:"element_attribute",attribute:this.a.attribute+"-template-variant",placeholder:this.f.forExample("front-page"),validate:this.f.validateSlug,helptext:`<p>Save or use a special variant of the template(s). This let's you create multiple versions of the same template. Leave empty to use the default templates. Only supported for freestyle layouts.</p>`,show_if:function(e,t){var a;return"none"!==e[n.a.attribute+"-template"]&&(a=n.f.wcGetContextInfo(t),!!(n.global||a&&!a.hooks))}},u.forEach(function(e){n.a.sections.parameters.fields[e]=m[e]})}shouldSaveTemplate(){var e=this.pgel.getAttribute(this.a.attribute+"-template")||"save_use";if("use"===e)return!1;if(!this.global){if(this.f.wcIsSingleProductWithHooks(this.pgel))return!0;if(this.f.wcIsInLoop(this.pgel))return!0}return 0<=e.indexOf("save")}shouldUseTemplate(){var e=this.pgel.getAttribute(this.a.attribute+"-template")||"save_use";if("save"===e)return!1;if(!this.global){if(this.f.wcIsSingleProductWithHooks(this.pgel))return!1;if(this.f.wcIsLoopWithHooks(this.pgel))return!1}return 0<=e.indexOf("use")}shouldProcess(){return!!this.f.isOnMasterOrInContent(this.pgel)&&"none"!==this.pgel.getAttribute(this.a.attribute+"-template")}saveOrUseTemplate(e,t,a,o,r,n,i,s){const l=this;function p(e,t){var a;return e&&"object"==typeof e?(t&&(a=`
if ( ! function_exists( '${e.func}' ) ) {
${e.code}
}
`,l.f.addToFunctionsPhpSection("Override WooCommerce Functions",a,!0,!1,!1,`
/* Overriding WooCommerce template functions */

// Don't edit anything between the following comments.
/* Pinegrow generated Override WooCommerce Functions Begin */
/* Pinegrow generated Override WooCommerce Functions End */

/* End of Overriding WooCommerce template functions */

`)),e.call):e}function c(e){var t;return m&&(l.templateNames.forEach(function(e){e=d(e),0}),m=m.trim(),o&&(t="",0<=o.indexOf("$product")&&(t+="global $product;\n"),o=`PG_WC_Helper::withTemplateVariant( ${l.f.quoteParam(m)}, function() { ${t}${o}; } );`),e=e+"-"+m),e}var u,m=this.pgel.getAttribute(this.a.attribute+"-template-variant"),d=(m&&(u=this.f.wcGetContextInfo(e),s||u&&u.hooks)&&(m=null),function(e){var t;return e.startsWith("$context")&&(t="single-product",l.f.wcIsInLoop(l.pgel)&&(t="loop","object"==typeof(o=r))&&(o=o.call),e=e.replace("$context",t)),e});if(this.shouldSaveTemplate())t=d(t),o=p(o,!0),t=c(t),this.f.wooSaveTemplate(e,t,a,i||this.shouldUseTemplate()?o:null,n);else if(i||this.shouldUseTemplate())return d(t),o=p(o),c(t),this.p.toPhpNode(e,``+o,"end"),!1;return!0}process(e){return this.pgel=e,this.shouldProcess()?(this.f.wcValidateExport(this.a,e),!0):(this.pgel.setAttr("wp-no-export",null),!1)}}class PgWooActionPageTitle extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-page-title","Page Title",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{});return this.global=!0,a.addMeta({helptext:`Display WooCommerce page title for search and taxonomies. Shop page title is used in all other situations.`,helplink:"page-title"}),super.getAction()}process(e){this.f;var t=this.p;this.a;if(!super.process(e))return!1;t.addToChanges(function(){e.html(`<?php woocommerce_page_title(); ?>`)},this,[])}}class PgWooActionNotice extends PgWooAction{getAction(){var e=this.f,t=this,a={},o=(a[`wc-notice-type`]={type:"select",name:"Type",default_value:"notice",action:"element_attribute",options:[{key:"notice",name:"Info"},{key:"success",name:"Success"},{key:"error",name:"Error"}]},a[`wc-notice-item`]=e.wooGetSelectorField("Repeated item",`<p>The element that is repeated for each message (each notice can display multiple messages).</p>`,!1,{selector_assign_name:"Repeated Item"}),a[`wc-notice-text`]=e.wooGetSelectorField("Show text in",`<p>Select the element for displaying the text, if it is different from the Repeated item.</p>`,!1,{selector_assign_name:"Show Notice Text"}),a[`wc-notice-add-classes`]={type:"checkbox",name:"Add WooCommerce classes",default_value:"true",value:"true",negvalue:"false",action:"element_attribute",helptext:`Add woocommerce-[type] classes to the notice. Disable if default styles interfere with the styling of your notices.`},this.a=e.addTag("wc-notice","Notice",null,function(e){if(e.hasAttribute(o.attribute))return t.process(e)},a));return this.global=!0,o.addMeta({helptext:`Display notice.`,helplink:"notice"}),super.getAction()}process(e){var t=this.f,a=this.p,o=this.a;if(!super.process(e))return!1;var r=e.getAttr("wc-notice-type")||"notice",n=t.wooGetPgelBySelector(o,e,`wc-notice-item`,!1)||e,i=t.wooGetPgelBySelector(o,e,`wc-notice-text`,!1)||n,s="false"!==e.getAttribute(`wc-notice-add-classes`),o=`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}

if ( ! $notices ) {
    return;
}

?>`,l=(n===e&&(o+=`
<?php foreach ( $notices as $notice ) : ?>
__CODE__
<?php endforeach; ?>`),t.wooSaveTemplate(e,"notices/"+r,o,"wc_print_notices()"),"");switch(r){case"error":l="error";break;case"notice":l="info";break;case"success":l="message"}a.addToChanges(function(){a.resetAfterMap(),n!==e&&(a.before(n,`<?php foreach ( $notices as $notice ) : ?>`),a.after(n,`<?php endforeach; ?>`)),s&&n.addClass("woocommerce-"+l),n.setAttribute(`<?php echo wc_get_notice_data_attr( $notice ); ?>`),i.html(`<?php echo wc_kses_notice( $notice['notice'] ); ?>`)},this,[])}}class PgWooActionBreadcrumbs extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-breadcrumbs","Breadcrumbs",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-breadcrumbs-link":e.wooGetSelectorField("Crumb with link",`<p>The element repeated for each breadcrumb.</p>`,!1,{selector_assign_name:"Crumb With Link"}),"wc-breadcrumbs-link-text":e.wooGetSelectorField("Crumb with link label",`<p>The element inside the crumb element that contains the crumb label, if different from the crumb element itself.</p>`,!1,{selector_assign_name:"Crumb With Link Label"}),"wc-breadcrumbs-first":e.wooGetSelectorField("First crumb",`<p>The element for the firts crumb, if it is different from the Crumb with link.</p>`,!1,{selector_assign_name:"First Crumb"}),"wc-breadcrumbs-first-text":e.wooGetSelectorField("First crumb label",`<p>Select the element for the first crumb label, if it should be dynamically displayed. If label is not selected, the text is not shown.</p>`,!1,{selector_assign_name:"First Crumb Label"}),"wc-breadcrumbs-nolink":e.wooGetSelectorField("Active crumb",`<p>The element for the last (active) crumb, if it is different from the main Crumb with link.</p>`,!1,{selector_assign_name:"Active Crumb"}),"wc-breadcrumbs-nolink-text":e.wooGetSelectorField("Active crumb label",`<p>The element for the label in the Active crumb, if different from the crumb element itself.</p>`,!1,{selector_assign_name:"Active Crumb Text"}),"wc-breadcrumbs-delimiter":{type:"text",name:"Delimiter",action:"element_attribute",helptext:"<p>Optional, delimiter text.</p>"}});return this.global=!0,this.addTemplateSection(!0,!0,!1,"global/breadcrumb"),a.addMeta({helptext:`Display navigation breadcrumbs.`,helplink:"breadcrumbs"}),super.getAction()}process(e){var t=this.f,r=this.p,n=this.a;if(!super.process(e))return!1;var i,s,l,p,c,u,a=e.getAttr("wc-breadcrumbs-delimiter")||"";this.saveOrUseTemplate(e,"global/breadcrumb",`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}
$delimiter = '${a}';

if ( ! empty( $breadcrumb ) ) : 
?>
__CODE__
<?php endif; ?>`,`woocommerce_breadcrumb()`)&&(e.addClass("woocommerce-breadcrumb"),i=t.wooGetPgelBySelector(n,e,"wc-breadcrumbs-link",!0),c=t.wooGetPgelBySelector(n,e,"wc-breadcrumbs-link-text",!1),s=t.wooGetPgelBySelector(n,e,"wc-breadcrumbs-first",!1),l=t.wooGetPgelBySelector(n,e,"wc-breadcrumbs-first-text",!1),p=t.wooGetPgelBySelector(n,e,"wc-breadcrumbs-nolink",!1),u=t.wooGetPgelBySelector(n,e,"wc-breadcrumbs-nolink-text",!1),i)&&(n=i.findOneIncludingSelf("a"),c=c||n||i,u=u||p,r.addToChanges(function(){r.resetAfterMap(),p&&(p.detach(),p.insertAfter(i)),s&&(s.insertBefore(i),e=s.findOneIncludingSelf("a")||s);var e,t=`( $key === 0 )`,a=`( ! empty( $crumb[1] ) && sizeof( $breadcrumb ) !== $key + 1 )`,o=(r.before(s||i,`<?php foreach ( $breadcrumb as $key => $crumb ) : ?>`),"if");s&&(r.before(s,`<?php if ${t} : ?>`),o="else if",p||r.before(i,`<?php else : ?>`)),p&&(r.before(i,`<?php ${o} ${a} : ?>`),r.after(i,`<?php else : ?>`)),(p||s)&&r.after(p||i,`<?php endif; ?>`),r.after(p||i,`<?php if ( sizeof( $breadcrumb ) !== $key + 1 ) { echo $delimiter; } ?>`),r.after(p||i,`<?php endforeach; ?>`),n.setAttr("href",`<?php echo esc_url( $crumb[1] ); ?>`),c.html(`<?php echo esc_html( $crumb[0] ); ?>`),s&&(e.setAttr("href",`<?php echo esc_url( $crumb[1] ); ?>`),l)&&l.html(`<?php echo esc_html( $crumb[0] ); ?>`),u&&u.html(`<?php echo esc_html( $crumb[0] ); ?>`)},this,[]))}}class PgWooFunctionsProvider{constructor(r){this.f=r;var n=this;pinegrow.addEventHandler("on_wp_function_get_options",function(e,t,a){var o;r.wcIsEnabledInProject()&&(a.push({type:"divider"}),a.push({type:"header",label:"WooCommerce"}),o=function(e,t){return{label:e,code:`do_action( '${e}' );`,key:"wc_action_"+e,helptext:t?`Hooked functions:<br><code>${t.split(",").join("</code><br><code>")}</code>`:"No default hooked functions."}},o=n.do_actions||[{label:"Layout",submenu:[o("woocommerce_before_main_content","woocommerce_output_content_wrapper,woocommerce_breadcrumb,WC_Structured_Data::generate_website_data()"),o("woocommerce_after_main_content","woocommerce_output_content_wrapper_end"),o("woocommerce_sidebar","woocommerce_get_sidebar")]},{label:"Archive",submenu:[o("woocommerce_archive_description","woocommerce_taxonomy_archive_description,woocommerce_product_archive_description")]},{label:"Loop",submenu:[o("woocommerce_before_shop_loop","woocommerce_output_all_notices,woocommerce_result_count,woocommerce_catalog_ordering"),o("woocommerce_shop_loop"),o("woocommerce_after_shop_loop","woocommerce_pagination"),o("woocommerce_no_products_found","wc_no_products_found"),o("woocommerce_before_shop_loop_item","woocommerce_template_loop_product_link_open"),o("woocommerce_before_shop_loop_item_title","woocommerce_template_loop_product_thumbnail,woocommerce_show_product_loop_sale_flash"),o("woocommerce_shop_loop_item_title","woocommerce_template_loop_product_title"),o("woocommerce_after_shop_loop_item_title","woocommerce_template_loop_rating,woocommerce_template_loop_price"),o("woocommerce_after_shop_loop_item","woocommerce_template_loop_product_link_close,woocommerce_template_loop_add_to_cart")]},{label:"Single product",submenu:[o("woocommerce_before_single_product","woocommerce_output_all_notices"),o("woocommerce_before_single_product_summary","woocommerce_show_product_sale_flash,woocommerce_show_product_images"),o("woocommerce_single_product_summary",`woocommerce_template_single_title,woocommerce_template_single_rating,woocommerce_template_single_price,woocommerce_template_single_excerpt,woocommerce_template_single_add_to_cart,woocommerce_template_single_meta,woocommerce_template_single_sharing,WC_Structured_Data::generate_product_data()`),o("woocommerce_after_single_product_summary","woocommerce_output_product_data_tabs,woocommerce_upsell_display,woocommerce_output_related_products"),o("woocommerce_after_single_product",""),o("woocommerce_product_meta_start",""),o("woocommerce_product_meta_end",""),o("woocommerce_product_thumbnails",""),o("woocommerce_product_after_tabs","")]},{label:"Categories",submenu:[o("woocommerce_before_subcategory","woocommerce_template_loop_category_link_open"),o("woocommerce_before_subcategory_title","woocommerce_subcategory_thumbnail"),o("woocommerce_shop_loop_subcategory_title","woocommerce_template_loop_category_title"),o("woocommerce_after_subcategory_title",""),o("woocommerce_after_subcategory","woocommerce_template_loop_category_link_close")]},{label:"Cart",submenu:[o("woocommerce_before_add_to_cart_form",""),o("woocommerce_after_add_to_cart_form",""),o("",""),o("woocommerce_before_add_to_cart_button",""),o("woocommerce_after_add_to_cart_button",""),o("woocommerce_after_add_to_cart_form",""),o("",""),o("woocommerce_before_add_to_cart_quantity",""),o("woocommerce_after_add_to_cart_quantity",""),o("woocommerce_before_quantity_input_field"),o("woocommerce_after_quantity_input_field"),o("",""),o("woocommerce_before_variations_form",""),o("woocommerce_after_variations_form",""),o("woocommerce_before_single_variation",""),o("woocommerce_single_variation","woocommerce_single_variation,woocommerce_single_variation_add_to_cart_button"),o("woocommerce_after_single_variation","")]},{label:"Misc",submenu:[o("woocommerce_share")]}],n.do_actions=o,a.push({label:"Actions",submenu:o}))})}}class PgWooActionContentWrapper extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-content-wrapper","Content wrapper",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)});return this.global=!0,this.addTemplateSection(!0,!1,!1,"global/wrapper-start,global/wrapper-end"),a.addMeta({helptext:`Generate content wrapper templates. The main purpose of the wrapper is to add woocommerce_before_main_content and woocommerce_after_main_content actions.`,helplink:"content-wrapper"}),super.getAction()}shouldSaveTemplate(){return!0}shouldUseTemplate(){return!0}process(e){var t=this.f,a=this.p;this.a;if(!super.process(e))return!1;var o,r,n=e.clone(!0,!1,!0);t.wpRemoveWPAttributes(n),this.shouldSaveTemplate()&&(o=`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}

echo ${t.quoteParam(n.getOpeningTag(),null,!0)};
?>`,r=`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}

echo ${t.quoteParam(n.getClosingTag(),null,!0)};
?>`,n=e.document.pgwp_file_name||null,t.template_parts.push({pgel:e,slug:`woocommerce/global/wrapper-start`,name:null,file_name:n,filter_code:function(e){return o}}),t.template_parts.push({pgel:e,slug:`woocommerce/global/wrapper-end`,name:null,file_name:n,filter_code:function(e){return r}})),a.addToChanges(function(){a.resetAfterMap(),a.before(e,`<?php do_action( 'woocommerce_before_main_content' ); ?>`),a.after(e,`<?php do_action( 'woocommerce_after_main_content' ); ?>`),e.detag()},this,[])}}class PgWooActionSidebar extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-sidebar","Shop sidebar",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-sidebar-id":{type:"text",name:"Sidebar id",action:"element_attribute",placeholder:e.defaultValue("shop"),options:e.wpInsight.getSidebars,open_list_on_focus:!0,helptext:`<p>Sidebar id that will be displayed here. Default is shop.</p>`},"wc-sidebar-content":e.wooGetSelectorField("Display in",`<p>The element in which the sidebar should be displayed, if different from the main element.</p>`,!1,{selector_assign_name:"Sidebar Display"}),"wc-sidebar-register":{type:"checkbox",name:"Register sidebar",action:"element_attribute",value:"true",empty_attribute:!0,helptext:`<p>Register a new sidebar that can then be customized in WordPress dashboard or customizer.</p>`},"wc-sidebar-name":{type:"text",name:"Name",action:"element_attribute",validate:e.required,show_if:"wc-sidebar-register",helptext:`<p>Sidebar name that will be shown in the WordPress dashboard.</p>`}});return this.global=!0,this.addTemplateSection(!0,!0,!1,"global/sidebar"),a.addMeta({helptext:`Display the shop sidebar.`,helplink:"shop-sidebar"}),super.getAction()}process(e){var t=this.f,a=this.p,o=this.a,r=e.getAttribute(o.attribute+"-id")||"shop",n=e.hasAttribute(o.attribute+"-register"),i=e.getAttribute(o.attribute+"-name")||r;if(!super.process(e))return!1;var s=t.wooGetPgelBySelector(o,e,"wc-sidebar-content",!1)||e;if(this.saveOrUseTemplate(e,"global/sidebar",`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}
if ( is_active_sidebar( ${t.quoteParam(r)} ) ) { ?>
__CODE__
<?php } ?>`,`woocommerce_get_sidebar()`)){if(n){e.setAttribute("wp-register-sidebar",i),e.setAttribute("wp-register-sidebar-id",r);for(var l="h3",p=1;p<=6;p++)if(s.findOne("h"+p)){l="h"+p;break}"h3"!==l&&(e.setAttribute("wp-register-sidebar-before-title",`<${l} class="widgettitle">`),e.setAttribute("wp-register-sidebar-after-title",`</${l}>`))}e.setAttribute("wp-dynamic-sidebar",r);var c;"ol"!==s.tagName&&"ul"!==s.tagName&&n&&(c="div",e.setAttribute("wp-register-sidebar-before",`<${c} id="%1$s" class="widget %2$s">`),e.setAttribute("wp-register-sidebar-after",`</${c}>`)),a.addToChanges(function(){a.resetAfterMap(),s.html(`<?php dynamic_sidebar( ${t.quoteParam(r)} ); ?>`)},this,[])}}}class PgWooActionSearchForm extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-search","Shop search",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-search-label":e.wooGetSelectorField("Label",`<p>The element for displaying the search form label, if any. LABEL element within the form will be used by default.</p>`,!1,{selector_assign_name:"Search Label"}),"wc-search-input":e.wooGetSelectorField("Input",`<p>The search form INPUT element. The first INPUT element within the form will be used by default.</p>`,!1,{selector_assign_name:"Search Input"}),"wc-search-button":e.wooGetSelectorField("Button",`<p>The search form BUTTON element. The first BUTTON element within the form will be used by default.</p>`,!1,{selector_assign_name:"Search Button"})});return this.global=!0,this.addTemplateSection(!0,!0,!1,"product-searchform"),a.addMeta({helptext:`Display the shop search form.`,helplink:"shop-search"}),super.getAction()}process(e){var t=this.f,a=this.p,o=this.a;if(!super.process(e))return!1;var r,n,i,s=e.findOneIncludingSelf("form");s?(r=t.wooGetPgelBySelector(o,e,"wc-search-label",!1)||s.findOne("label"),n=t.wooGetPgelBySelector(o,e,"wc-search-input",!1)||s.findOne("input"),i=t.wooGetPgelBySelector(o,e,"wc-search-button",!1)||s.findOne("button"),n?this.saveOrUseTemplate(e,"product-searchform",`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}
?>`,`get_product_search_form()`)&&a.addToChanges(function(){a.resetAfterMap(),s.setAttribute("role","search"),s.setAttribute("action",`<?php echo esc_url( home_url( '/' ) ); ?>`),s.setAttribute("method","get"),r&&(r.setAttribute("for",`woocommerce-product-search-field-<?php echo isset( $index ) ? absint( $index ) : 0; ?>`),r.html(`<?php esc_html_e( 'Search for:', 'woocommerce' ); ?>`)),n.setAttribute("id",`woocommerce-product-search-field-<?php echo isset( $index ) ? absint( $index ) : 0; ?>`),n.setAttribute("placeholder",`<?php echo esc_attr__( 'Search products&hellip;', 'woocommerce' ); ?>`),n.setAttribute("value",`<?php echo get_search_query(); ?>`),n.setAttribute("name","s"),i&&(i.setAttribute("value",`<?php echo esc_attr_x( 'Search', 'submit button', 'woocommerce' ); ?>`),i.setAttribute("type","submit"),i.findOne("svg,img,i")||i.html(`<?php echo esc_html_x( 'Search', 'submit button', 'woocommerce' ); ?>`)),s.append(pgCreate(`<input type="hidden" name="post_type" value="product" />`))},this,[]):t.addExportError(e,`<b>${o.name}</b>: The action element requires the INPUT element.`)):t.addExportError(e,`<b>${o.name}</b>: The action element must be or contain a FORM element.`)}}class PgWooActionViewCartLink extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-view-cart-link","Cart link",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-view-cart-link-empty":e.wooGetSelectorField("Show if empty",`<p>The element that is shown if the cart is empty.</p>`,!1,{selector_assign_name:"Show if empty"}),"wc-view-cart-link-not-empty":e.wooGetSelectorField("Show if not empty",`<p>The element that is shown if the cart is not empty.</p>`,!1,{selector_assign_name:"Show if not empty"}),"wc-view-cart-link-subtotal":e.wooGetSelectorField("Subtotal",`<p>The element for displaying the cart subtotal amount.</p>`,!1,{selector_assign_name:"Cart Subtotal"}),"wc-view-cart-link-count":e.wooGetSelectorField("Count",`<p>The element for displaying the number of items in the cart.</p>`,!1,{selector_assign_name:"Cart Count"}),"wc-view-cart-link-count-singular":{type:"text",name:"Count text singular",placeholder:e.defaultValue("%d item"),action:"element_attribute",helptext:`<p>The text for the singular count. Use %d as placeholder for count.</p>`},"wc-view-cart-link-count-plural":{type:"text",name:"Count text plural",placeholder:e.defaultValue("%d items"),action:"element_attribute",helptext:`<p>The text for the plural count. Use %d as placeholder for count.</p>`}});return this.global=!0,a.addMeta({helptext:`Display the link to the cart with cart items count and optional empty cart placeholder.`,helplink:"cart-link"}),super.getAction()}process(e){var t=this.f,a=this.p,o=this.a;if(!super.process(e))return!1;var r,n,i,s,l,p,c,u=e.findOneIncludingSelf("a");u?(r=t.wooGetPgelBySelector(o,e,"wc-view-cart-link-empty",!1),n=t.wooGetPgelBySelector(o,e,"wc-view-cart-link-not-empty",!1),i=t.wooGetPgelBySelector(o,e,"wc-view-cart-link-subtotal",!1),s=t.wooGetPgelBySelector(o,e,"wc-view-cart-link-count",!1),l=e.getAttribute("wc-view-cart-link-count-singular")||"%d item",p=e.getAttribute("wc-view-cart-link-count-plural")||"%d items",c="true"===e.getAttribute("wc-view-cart-link-subtotal-unformat"),a.addToChanges(function(){a.resetAfterMap(),r!==n&&(r&&(a.before(r,`<?php if( WC()->cart->get_cart_contents_count() === 0 ) : ?>`),a.after(r,`<?php endif; ?>`)),n)&&(a.before(n,`<?php if( WC()->cart->get_cart_contents_count() > 0 ) : ?>`),a.after(n,`<?php endif; ?>`)),s&&s.html(`<?php echo wp_kses_data( sprintf( _n( ${t.quoteParam(l)}, ${t.quoteParam(p)}, WC()->cart->get_cart_contents_count(), ${t.quoteParam(t.current_theme_info.slug)} ), WC()->cart->get_cart_contents_count() ) ); ?>`),i&&i.html(c?`<?php echo wp_kses_post( PG_HTML_Inspector( WC()->cart->get_cart_subtotal() )->getInnerContent(null, 'price') ); ?>`:`<?php echo wp_kses_post( WC()->cart->get_cart_subtotal() ); ?>`),u.setAttribute("href",`<?php echo esc_url( wc_get_cart_url() ); ?>`);var e=u.getAttribute("title")||"View your shopping cart";u.setAttribute("title",`<?php esc_attr_e( ${t.quoteParam(e)} ); ?>`)},this,[])):t.addExportError(e,`<b>${o.name}</b>: The action element must be or contain a A (link) element.`)}}class PgWooProductAction extends PgWooAction{getAction(){const o=this.a,r=this.f;return o.validate=function(e){return r.wcValidateProductAction(o,e)},o.on_can_add_action=function(e,t,a){return r.wcValidateCanAddAction(o,e)},super.getAction()}}class PgWooActionProductPrice extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-product-price","Product Price",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-product-price-format":{type:"select",name:"Format",default_value:"complete",attribute_keep_if_empty:!0,action:"element_attribute",options:[{key:"complete",name:"Default"},{key:"custom",name:"Custom"}],helptext:`<p>Select the price format:
<ul>
<li><b>Default</b> - show default WooCommerce price</li>
<li><b>Custom</b> - customize the price display and support displaying discounted price ranges.</li>
</ul></p>`},"wc-product-price-complete":e.wooGetSelectorField("Show the price in",`<p>Select the element for displaying the complete sale, including sale and regular price as generated by WooCommerce. If not set, the main element will be used to display the price.</p>`,!1,{selector_assign_name:"Complete Price",show_if:"!wc-product-price-format==custom"}),"wc-product-price-sale":e.wooGetSelectorField("Sale price",`<p>Select the element for displaying the sale price (if the product is on sale).</p>`,!1,{selector_assign_name:"Sale Price",show_if:"wc-product-price-format==custom"}),"wc-product-price-regular-sale":e.wooGetSelectorField("Regular price if on sale",`<p>Select the element for displaying the regular price if the product is on sale.</p>`,!1,{selector_assign_name:"Regular Price Sale",show_if:"wc-product-price-format==custom"}),"wc-product-price-regular-no-sale":e.wooGetSelectorField("Regular price if not on sale",`<p>Select the element for displaying the regular price if the product is not on sale.</p>`,!1,{selector_assign_name:"Regular Price No Sale",show_if:"wc-product-price-format==custom"})});return this.addTemplateSection(!0,!0,!1,"$context/price"),a.addMeta({helptext:`Show the product price.`,helplink:"product-price"}),super.getAction()}process(e){var t=this.f,a=this.p,o=this.a;if(!super.process(e))return!1;var r,n,i,s,l,p=e.getAttribute("wc-product-price-format")||"complete";this.saveOrUseTemplate(e,"$context/price",`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}
global $product;
?>`,`woocommerce_template_single_price()`,"woocommerce_template_loop_price()")&&(r=t.wooGetPgelBySelector(o,e,"wc-product-price-complete",!1)||e,n=t.wooGetPgelBySelector(o,e,"wc-product-price-sale",!1),i=t.wooGetPgelBySelector(o,e,"wc-product-price-regular",!1),s=t.wooGetPgelBySelector(o,e,"wc-product-price-regular-sale",!1),l=t.wooGetPgelBySelector(o,e,"wc-product-price-regular-no-sale",!1),a.addToChanges(function(){a.resetAfterMap(),e.addClass(`<?php echo esc_attr( apply_filters( 'woocommerce_product_price_class', 'price' ) ); ?>`),"complete"===p?r.html(`<?php echo $product->get_price_html(); ?>`):(n&&(a.before(n,`<?php if( $product->is_on_sale() ) : ?>`),n.html(`<?php echo PG_WC_Helper::getPrice( $product, 'sale' ); ?>`),a.after(n,`<?php endif; ?>`)),i&&i.html(`<?php echo PG_WC_Helper::getPrice( $product, 'regular' ); ?>`),s&&(a.before(s,`<?php if( $product->is_on_sale() ) : ?>`),s.html(`<?php echo PG_WC_Helper::getPrice( $product, 'regular' ); ?>`),a.after(s,`<?php endif; ?>`)),l&&(a.before(l,`<?php if( !$product->is_on_sale() ) : ?>`),l.html(`<?php echo PG_WC_Helper::getPrice( $product, 'regular' ); ?>`),a.after(l,`<?php endif; ?>`)))},this,[]))}}class PgWooActionProductShortDescription extends PgWooProductAction{getAction(){var e=this.f,a=this,t=this.a=e.addTag("wc-product-short-description","Product Short Description",null,function(e){if(e.hasAttribute(t.attribute))return a.process(e)},{"wc-product-short-description-text":e.wooGetSelectorField("Show description in",`<p>Optionally, select a sub-element for showing the description. If not set, the description is shown in the action element.</p>`,!1,{selector_assign_name:"Show Description"})});return this.addTemplateSection(!0,!0,!0,"$context/short-description",function(e,t){if(!e)return t+a.willOverride("pg_woocommerce_template_loop_excerpt")}),this.allowed_on=function(e){return!e.closest("p")||(this.allowed_on_msg="Product Short Description should not be added on or inside a P element because the description text is wrapped with a P element.",!1)},t.addMeta({helptext:`Show the product short description (the excerpt post field).`,helplink:"product-short-description"}),super.getAction()}process(e){var t,a=this.f,o=this.p,r=this.a;if(!super.process(e))return!1;this.saveOrUseTemplate(e,"$context/short-description",`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}
global $post;

$short_description = apply_filters( 'woocommerce_short_description', $post->post_excerpt );

if ( ! $short_description ) {
	return;
}

?>`,`woocommerce_template_single_excerpt()`,`wc_get_template( 'loop/short-description.php' )`)&&(t=a.wooGetPgelBySelector(r,e,"wc-product-short-description-text",!1)||e,o.addToChanges(function(){t.html(`<?php echo $short_description; ?>`)},this,[]))}}class PgWooActionProductTitle extends PgWooProductAction{getAction(){var e=this.f,a=this,t=this.a=e.addTag("wc-product-title","Product Title",null,function(e){if(e.hasAttribute(t.attribute))return a.process(e)},{"wc-product-title-text":e.wooGetSelectorField("Show title in",`<p>Optionally, select a sub-element for showing the title. If not set, the title is shown in the action element.</p>`,!1,{selector_assign_name:"Show Title"})});return this.addTemplateSection(!0,!0,!0,"$context/title",function(e,t){if(!e)return t+a.willOverride("woocommerce_template_loop_product_title")}),t.addMeta({helptext:`Show the product title.`,helplink:"product-title"}),super.getAction()}process(e){var t,a=this.f,o=this.p,r=this.a;if(!super.process(e))return!1;this.saveOrUseTemplate(e,"$context/title",`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}
?>`,`woocommerce_template_single_title()`,`wc_get_template( 'loop/title.php' )`)&&(t=a.wooGetPgelBySelector(r,e,"wc-product-title-text",!1)||e,o.addToChanges(function(){t.html(`<?php the_title(); ?>`)},this,[]))}}class PgWooActionStock extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-product-stock","Product Stock",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-product-stock-text":e.wooGetSelectorField("Show text in",`<p></p>`,!1,{selector_assign_name:"Show Stock Text"})});return this.addTemplateSection(!0,!0,!1,"single-product/stock"),a.addMeta({helptext:`Display stock.`,helplink:"product-stock"}),super.getAction()}process(e){var t,a=this.f,o=this.p,r=this.a;return!!super.process(e)&&!!this.saveOrUseTemplate(e,"single-product/stock",`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}
?>`,`echo wc_get_stock_html( $product )`)&&(t=a.wooGetPgelBySelector(r,e,"wc-product-stock-text",!1)||e,void o.addToChanges(function(){e.addClass("stock"),e.addClass(`<?php echo esc_attr( $class ); ?>`),t.html(`<?php echo wp_kses_post( $availability ); ?>`)},this,[]))}}class PgWooActionProductLink extends PgWooProductAction{getAction(){var e=this.f,t=this,a=(this.allowed_on="a",this.allowed_on_msg="Product Link action can only be used on <code>&lt;a&gt;</code> (link) elements.",this.a=e.addTag("wc-product-link","Product Link",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{}));return a.addMeta({helptext:`Add link to the product to an A element.`,helplink:"product-link"}),super.getAction()}process(e){this.f;var t=this.p;this.a;if(!super.process(e))return!1;t.addToChanges(function(){e.setAttribute("href",`<?php echo esc_url( apply_filters( 'woocommerce_loop_product_link', get_the_permalink(), $product ) ); ?>`)},this,[])}}class PgWooActionProductSaleFlash extends PgWooProductAction{getAction(){var r=this.f,t=this,a=this.a=r.addTag("wc-product-sale","Product Sale Flash",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-product-sale-amount-sel":{type:"selector",name:"Show amount in",placeholder:"element selector",action:"element_attribute",get_selector_options:function(e,t,a,o){return r.wpGetSelectorOptions(t,{},a,o)},validate:function(e,t,a){return r.wpValidateSelector(e,t,a)},helptext:`<p>Select the element that will be used to display the percentage or the amount saved. Leave blank to just display the sale sticker.</p>`},"wc-product-sale-amount-type":{type:"select",name:"Display saved",default_value:"percent",action:"element_attribute",options:[{key:"percent",name:"Percentage"},{key:"amount",name:"Amount"}],show_if:"wc-product-sale-amount-sel",helptext:`<p>Chose how to display the saved value.</p>`}});return this.addTemplateSection(!0,!0,!1,"$context/sale-flash"),a.addMeta({tags:[r.tag_set_content,r.tag_ret_string,r.tag_t_post,r.tag_use_loop],helptext:`Display product sale flash information if the product is on sale.`,helplink:"product-sale-flash",extra_name:null}),super.getAction()}process(e){var t,a,o,r,n=this.f,i=this.p;this.a;return!!super.process(e)&&(t=e.getAttribute("wc-product-sale-amount-sel"),a=e.getAttribute("wc-product-sale-amount-type")||"percent",t&&(o=n.wpGetPgelFromSelector(e,t),r=o&&0<=o.text().indexOf("%")),!!this.saveOrUseTemplate(e,"$context/sale-flash",`<?php
if ( ! defined( 'ABSPATH' ) ) {
	exit;
}

global $post, $product;

if ( $product->is_on_sale() ) : ?>
__CODE__        
<?php endif; ?>
`,"woocommerce_show_product_sale_flash()","woocommerce_show_product_loop_sale_flash()"))&&void i.addToChanges(function(){o&&i.toPhpHtml(o,`echo PG_WC_Helper::getSavedAmount( $product, ${n.quoteParam(a)}, ${r?"true":"false"} )`)},this,[])}}class PgWooActionProductAttributes extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-product-attributes","Product Attributes",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wp-product-attributes-item":e.wooGetSelectorField("Repeated item","The element that is repeated for each attribute item.",!0,{selector_assign_name:"Repeated Item"}),"wp-product-attributes-label":e.wooGetSelectorField("Label","The element in the Repeated item that is used for displaying the attribute label.",!0,{selector_assign_name:"Attribute Label"}),"wp-product-attributes-value":e.wooGetSelectorField("Value","The element for displaying the attribute value.",!0,{selector_assign_name:"Attribute Value"})});return this.addTemplateSection(!0,!0,!1,"single-product/product-attributes"),a.addMeta({helptext:`Display product attributes.`,helplink:"product-attributes"}),super.getAction()}process(e){var t=this.f,a=this.p,o=this.a;if(!super.process(e))return!1;var r=t.wooGetPgelBySelector(o,e,"wp-product-attributes-item",!0,!0),n=t.wooGetPgelBySelector(o,e,"wp-product-attributes-label",!0),i=t.wooGetPgelBySelector(o,e,"wp-product-attributes-value",!0);if(r&&0!==r.length&&n&&i){for(var s=1;s<r.length;s++)if(r[s].parent!==r[0].parent)return void t.addExportError(e,`<b>${o.name}</b>: Multiple repeated elements must be on the same level (have the same parent element).`);this.saveOrUseTemplate(e,"single-product/product-attributes",`<?php
defined( 'ABSPATH' ) || exit;

if ( ! $product_attributes ) {
    return;
}
?>`,`wc_display_product_attributes( $product )`)&&(a.resetAfterMap(),a.before(r[0],`<?php foreach ( $product_attributes as $product_attribute_key => $product_attribute ) : ?>`),r[0].addClass(`woocommerce-product-attributes-item--<?php echo esc_attr( $product_attribute_key ); ?>`),a.after(r[r.length-1],`<?php endforeach; ?>`),n.html(`<?php echo wp_kses_post( $product_attribute['label'] ); ?>`),i.html(`<?php echo wp_kses_post( $product_attribute['value'] ); ?>`))}}}class PgWooActionRelatedProducts extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-product-related","Related Products",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-product-related-heading":e.wooGetSelectorField("Heading",`<p>The element for displaying the heading.</p>`,!1,{selector_assign_name:"Heading"}),"wc-product-related-item":e.wooGetSelectorField("Repeated item",`<p>The element repeated for each related product.</p>`,!1,{selector_assign_name:"Repeated Item"}),"wc-product-related-posts-per-page":{type:"text",name:"Products per page",default_value:4,parameter_name:"posts_per_page",action:"element_attribute",helptext:`How many related products to show.`},"wc-product-related-orderby":{type:"select",name:"Order by",default_value:"rand",options:[{key:"rand",name:"Random"},{key:"title",name:"Title"},{key:"ID",name:"ID"},{key:"date",name:"Date"},{key:"modified",name:"Modified"},{key:"menu_order",name:"Menu_order"},{key:"price",name:"Price"}],parameter_name:"orderby",action:"element_attribute",helptext:`The order of how the products are shown.`},"wc-product-related-order":{type:"select",name:"Order direction",parameter_name:"order",default_value:"desc",options:[{key:"desc",name:"Descending"},{key:"asc",name:"Ascending"}],action:"element_attribute",helptext:`Order direction.`}});return this.addTemplateSection(!0,!0,!1,"single-product/related"),a.addMeta({helptext:`Display related products.`,helplink:"related-products"}),super.getAction()}process(e){var t=this.f,a=this.p,o=this.a;if(!super.process(e))return!1;e.setData("show_product","related");var r=t.wooGetPgelBySelector(o,e,"wc-product-related-item",!0),t=t.wooGetPgelBySelector(o,e,"wc-product-related-heading",!1);if(!this.saveOrUseTemplate(e,"single-product/related",`<?php
if ( ! defined( 'ABSPATH' ) ) {
	exit;
}

global $product, $post;

$current_product = $product;
$heading = apply_filters( 'woocommerce_product_related_products_heading', __( 'Related products', 'woocommerce' ) );

if ( $related_products ) : ?>
__CODE__        
<?php endif; 
wp_reset_postdata();
$product = $current_product;
?>`,`woocommerce_related_products( ${a.getNamedParams(o,e)} )`))return!1;r&&(t&&(a.before(t,`<?php if( $heading ) : ?>`),t.html(`<?php echo esc_html( $heading ); ?>`),a.after(t,`<?php endif; ?>`)),a.before(r,`<?php foreach ( $related_products as $product ) : ?>`),r.prepend(pgCreate(`<?php setup_postdata( $GLOBALS['post'] =& $post_object ); ?>`)),r.prepend(pgCreate(`<?php $post_object = get_post( $product->get_id() ); ?>`)),a.after(r,`<?php endforeach; ?>`))}}class PgWooActionUpsells extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-product-upsells","Product upsells",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-product-upsells-heading":e.wooGetSelectorField("Heading",`<p>The element for displaying the heading.</p>`,!1,{selector_assign_name:"Heading",ignore_parameter:!0}),"wc-product-upsells-item":e.wooGetSelectorField("Repeated item",`<p>The element repeated for each product.</p>`,!1,{selector_assign_name:"Repeated Item",ignore_parameter:!0}),"wc-product-upsells-limit":{type:"text",name:"Number of products",default_value:"-1",numeric:!0,action:"element_attribute",helptext:`How many products to show.`},"wc-product-upsells-orderby":{type:"select",name:"Order by",default_value:"rand",options:[{key:"rand",name:"Random"},{key:"title",name:"Title"},{key:"ID",name:"ID"},{key:"date",name:"Date"},{key:"modified",name:"Modified"},{key:"menu_order",name:"Menu_order"},{key:"price",name:"Price"}],action:"element_attribute",helptext:`How to order the list of products.`},"wc-product-upsells-order":{type:"select",name:"Order",default_value:"desc",options:[{key:"desc",name:"Descending"},{key:"asc",name:"Ascending"}],action:"element_attribute",helptext:`Order direction.`}});return this.addTemplateSection(!0,!0,!1,"single-product/up-sells"),a.addMeta({helptext:`Display product upsells.`,helplink:"upsells"}),super.getAction()}process(e){var t=this.f,a=this.p,o=this.a;if(!super.process(e))return!1;e.setData("show_product","upsells");var r=t.wooGetPgelBySelector(o,e,"wc-product-upsells-item",!0),t=t.wooGetPgelBySelector(o,e,"wc-product-upsells-heading",!1);this.saveOrUseTemplate(e,"single-product/up-sells",`<?php
if ( ! defined( 'ABSPATH' ) ) {
	exit;
}

global $product, $post;

$current_product = $product;
$heading = apply_filters( 'woocommerce_product_upsells_products_heading', __( 'You may also like&hellip;', 'woocommerce' ) );

if ( $upsells ) : ?>
__CODE__        
<?php endif; 
wp_reset_postdata();
$product = $current_product;
?>`,`woocommerce_upsell_display(${a.getParams(o,e)})`)&&r&&(t&&(a.before(t,`<?php if( $heading ) : ?>`),t.html(`<?php echo esc_html( $heading ); ?>`),a.after(t,`<?php endif; ?>`)),a.before(r,`<?php foreach ( $upsells as $product ) : ?>`),r.prepend(pgCreate(`<?php setup_postdata( $GLOBALS['post'] =& $post_object ); ?>`)),r.prepend(pgCreate(`<?php $post_object = get_post( $product->get_id() ); ?>`)),a.after(r,`<?php endforeach; ?>`))}}class PgWooActionProductImageGallery extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-product-gallery","Product Image Gallery",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-product-gallery-mode":{type:"select",name:"Mode",action:"element_attribute",default_value:"wc",options:[{key:"wc",name:"WooCommerce"},{key:"custom",name:"Custom"}],helptext:`How do you want to implement the gallery?
<ul>
<li><b>WooCommerce default</b> - adjust the layout to fit the default WooCommerce gallery structure and use default zoom, slider and lightbox to make the gallery interactive.</li>
<li><b>Custom</b> - display a custom gallery. Interactive features have to be implemented with Interactions or custom JavaScript code.</li>
</ul>`},"wc-product-gallery-wrapper":e.wooGetSelectorField("Wrapper",`<p>WooCommerce default gallery implementation requires that the content of the gallery is wrapped with a DIV element. Select that DIV element here. Note, this should not be the main action element.</p>`,!1,{selector_assign_name:"Gallery Wrapper",show_if:"!wc-product-gallery-mode==custom"}),"wc-product-gallery-main-item":e.wooGetSelectorField("Main image",`<p>The element that represents the main image. The element should be or contain an IMG element. If you are using a WooCommerce gallery, the Main Image element should be a DIV that wraps arround A that wraps around the IMG.</p>`,!1,{selector_assign_name:"Main image"}),"wc-product-gallery-main-size":{type:"text",name:"Main image size",placeholder:e.defaultValue("woocommerce_single"),action:"element_attribute",options:e.wpInsight.getImageSizes,open_list_on_focus:!0,show_if:"wc-product-gallery-mode==custom",helptext:`<p>Select the size of the main image.</p>`},"wc-product-gallery-thumb-container":e.wooGetSelectorField("Thumbnails container",`<p>Optionally, select the element that contains the thumbnails. This element is shown only if there are images in the gallery.</p>`,!1,{selector_assign_name:"Thumbnails Container",show_if:"wc-product-gallery-mode==custom"}),"wc-product-gallery-thumb-item":e.wooGetSelectorField("Thumbnail",`<p>The element that holds a thumbnail. The element will be repeated for every image in the gallery. The element should be or contain an IMG element.</p>`,!1,{selector_assign_name:"Thumbnail",show_if:"wc-product-gallery-mode==custom"}),"wc-product-gallery-size":{type:"text",name:"Thumbnail size",placeholder:e.defaultValue("woocommerce_gallery_thumbnail"),action:"element_attribute",options:e.wpInsight.getImageSizes,open_list_on_focus:!0,helptext:`<p>Select the thumbnail image size.</p>`},"wc-product-gallery-link-to":{type:"text",name:"Link to size",placeholder:e.forExample("full"),action:"element_attribute",options:e.wpInsight.getImageSizes,open_list_on_focus:!0,helptext:`<p>Link to a larger version of the image:</p><ul>
<li><code>title</code> is set to the image title.</li>
<li><code>data-caption</code> is set to the image description (excerpt field).</li>
<li><code>data-large-src</code> is set to the url of the selected large size.</li>
<li><code>href</code> of any <code>a</code> element wrapper is set to the url of the large image.</li>
</ul>
<p>Note, you have to include the JavaScript code that displays the image based on this information.</p>`},"wc-product-gallery-wccss":{type:"checkbox",name:"Use default styling",action:"element_attribute",value:"true",helptext:`<p>Check this if you wish to make sure that the gallery layout is compatible with WooCommerce default gallery styling.</p>`,show_if:"!wc-product-gallery-mode==custom"},"wc-product-gallery-wrapper-info-label":e.wpGetInfoHTMLField(`<p style="text-align:left;">Note, the action element should NOT be a <code>div</code> if you do not want to use default WooCommerce styling.</p>`,{show_if:function(e,t){return"custom"!==e["wc-product-gallery-mode"]&&"true"!==e["wc-product-gallery-wccss"]&&"div"===t.tagName}})});return this.addTemplateSection(!0,!0,!1,"single-product/product-image"),a.addMeta({helptext:`Display the product image gallery.`,helplink:"product-image-gallery"}),super.getAction()}process(p){var c=this.f,u=this.p,m=this.a;if(!super.process(p))return!1;var e=p.getAttribute("wc-product-gallery-mode")||"wc";if("wc"===e){if(!this.saveOrUseTemplate(p,"single-product/product-image",`<?php
defined( 'ABSPATH' ) || exit;

global $product;    

$attachment_ids = $product->get_gallery_image_ids();        
$product_image_id =  $product->get_image_id();
$is_main_image = !empty($product_image_id);
    
array_unshift( $attachment_ids, $product_image_id ? $product_image_id : -1 );
?>

__CODE__
`,`woocommerce_show_product_images();`))return}else if(!this.saveOrUseTemplate(p,"single-product/product-image",`<?php
defined( 'ABSPATH' ) || exit;

global $product;    

$attachment_ids = $product->get_gallery_image_ids();        
$product_image_id =  $product->get_image_id();
?>

__CODE__
`,`woocommerce_show_product_images();`))return;function d(e,t){c.addExportError(e,`<b>${m.name}</b>: `+t)}var h,t=p.getAttribute("wc-product-gallery-main-item"),g=(p.getAttribute("wc-product-gallery-thumb-item"),p.getAttribute("wc-product-gallery-size")||"woocommerce_gallery_thumbnail"),i=p.getAttribute("wc-product-gallery-main-size")||"woocommerce_single",_=p.getAttribute("wc-product-gallery-link-to")||"full",f="wc"===e,w="wc"===e&&"true"===p.getAttribute("wc-product-gallery-wccss"),b=c.wooGetPgelBySelector(m,p,"wc-product-gallery-wrapper",f),s=c.wooGetPgelBySelector(m,p,"wc-product-gallery-thumb-item",!1),l=c.wooGetPgelBySelector(m,p,"wc-product-gallery-thumb-container",!1),y=p;t&&!(y=c.wpGetPgelFromSelector(p,t))?c.addExportError(p,`<b>${m.name}</b>: Main image with the selector <code>${t}</code> not found.`):(h=y.findIncludingSelf("img",!0),"wc"===e?u.addToChanges(function(){p.addClass("woocommerce-product-gallery"),p.addClass("images"),p.addClass(`<?php echo $product->get_image_id() ? 'woocommerce-product-gallery--with-images' : 'woocommerce-product-gallery--without-images'; ?>`),w&&("div"!==p.tagName&&d(p,"The element should be a DIV in order to be compatible with default WooCommerce Image Gallery styling."),(r=c.wcGetContextInfo(p))&&r.pgel&&"div"===r.pgel.tagName||d(p,"The element with the action Product Single, or repeated element of Show Products, Related Products or Upsells should be a DIV in order to be compatible with default WooCommerce Image Gallery styling.")),f&&(p===y&&d(p,`Lightbox requires a wrapper element.`),h===y?d(h,`Lightbox requires that images are wrapped in a DIV and A. Select the DIV as the Main image.`):y.addClass("woocommerce-product-gallery__image")),b&&b.addClass("woocommerce-product-gallery__wrapper");var e,t,a,o,r="$image_index",n=!1,i=!1,s=y.getAttribute("id"),n=(s&&s.indexOf("<?")<0&&(i=n=!0),n&&u.before(y,`<?php ${r} = 0; ?>`),u.resetAfterMap(),u.before(y,`<?php foreach ( $attachment_ids as $attachment_id ) : ?>`),n&&u.after(y,`<?php ${r}++; ?>`),{}),l=(e=y,t=h,_&&((l=e.clone(!0)).insertAfter(e),t.addClass(`<?php ( $is_main_image ? 'wp-post-image' : '') ?>`),u.before(e,`<?php if( $attachment_id >= 0 ) : ?>`),f&&(u.before(e,`<?php $attachment_thumb_src = wp_get_attachment_image_src( $attachment_id, '${g}' ); ?>`),e.setAttribute("data-thumb",`<?= esc_url( $attachment_thumb_src[0] ); ?>`),e.setAttribute("data-thumb-alt",`<?= trim( wp_strip_all_tags( get_post_meta( $attachment_id, '_wp_attachment_image_alt', true ) ) ); ?>`)),u.before(e,`<?php $attachment_large_src = wp_get_attachment_image_src( $attachment_id, '${_}' ); ?>`),(o=e.findIncludingSelf("a",!0))&&o.contains(t)&&(!(a=o.getAttribute("href"))||"#"===a||a.indexOf("<?")<0)&&o.setAttribute("href",`<?php echo esc_url($attachment_large_src[0]); ?>`),u.after(e,`<?php else : ?>`),u.after(l,`<?php endif; ?>`),u.after(l,`<?php $is_main_image = false; ?>`),u.after(l,`<?php endforeach; ?>`),l.addClass("woocommerce-product-gallery__image--placeholder"),(a=l.findOne("img"))&&(a.setAttribute("src",`<?php echo esc_url( wc_placeholder_img_src( 'woocommerce_single' ) ); ?>`),a.setAttribute("alt",`<?php echo esc_html__( 'Awaiting product image', 'woocommerce' ); ?>`)),o=l.findOne("a"))&&o.contains(a)&&o.detag(),i&&y.setAttribute("id",s+`-<?php echo ${r} ?>`),c.wcGetImageCode(h,m,`(new PG_HTML_Inspector(wc_get_gallery_image_html($attachment_id, $is_main_image)))->getHTML('img', null, null, _ATTRS_ )`,null,n));u.toPhpHtmlOrNode(h,l,m)},this,[]):u.addToChanges(function(){function e(e,t,a,o){var r,n,i,s;return _?(a&&(r=e.clone(!0)).insertAfter(e),u.before(e,`<?php $attachment_thumb_src = wp_get_attachment_image_src( ${o}, '${g}' ); ?>`),e.setAttribute("data-thumb",`<?=esc_url( $attachment_thumb_src[0] )?>`),e.setAttribute("data-thumb-alt",`<?=trim( wp_strip_all_tags( get_post_meta( ${o}, '_wp_attachment_image_alt', true ) ) )?>`),u.before(e,`<?php $attachment_large_src = wp_get_attachment_image_src( ${o}, '${_}' ); ?>`),n={title:`<?=_wp_specialchars( get_post_field( 'post_title', ${o} ), ENT_QUOTES, 'UTF-8', true )?>`,"data-caption":`<?=_wp_specialchars( get_post_field( 'post_excerpt', ${o} ), ENT_QUOTES, 'UTF-8', true )?>`,"data-large_image":`<?=esc_url($attachment_large_src[0])?>`,"data-src":`<?=esc_url($attachment_large_src[0])?>`,"data-large_image_width":`<?=esc_attr( $attachment_large_src[1] )?>`,"data-large_image_height":`<?=esc_attr( $attachment_large_src[2] )?>`},(s=e.findIncludingSelf("a",!0))&&s.contains(t)&&(!(i=s.getAttribute("href"))||"#"===i||i.indexOf("<?")<0)&&s.setAttribute("href",`<?php echo esc_url($attachment_large_src[0]); ?>`),a&&(u.after(e,`<?php else : ?>`),u.after(r,`<?php endif; ?>`),r.addClass("woocommerce-product-gallery__image--placeholder"),(i=r.findOne("img"))&&(i.setAttribute("src",`<?php echo esc_url( wc_placeholder_img_src( 'woocommerce_single' ) ); ?>`),i.setAttribute("alt",`<?php echo esc_html__( 'Awaiting product image', 'woocommerce' ); ?>`)),s=r.findOne("a"))&&s.contains(i)&&s.detag(),n):{}}var t,a,o,r=!1,n=y.getAttribute("id");n&&n.indexOf("<?")<0&&(r=!0);u.resetAfterMap(),y&&(u.before(y,`<?php if ( $product_image_id ) : ?>`),a=e(y,h,!0,"$product_image_id"),r&&y.setAttribute("id",n+`-<?php echo $product_image_id ?>`),o=c.wcGetImageCode(h,m,`wp_get_attachment_image( $product_image_id, _SIZE_, false, _ATTRS_ )`,i,a),u.toPhpHtmlOrNode(h,o,m)),s&&(r=!1,(n=s.getAttribute("id"))&&n.indexOf("<?")<0&&(r=!0),l&&(u.before(l,`<?php if( count( $attachment_ids ) > 0 ) : ?>`),u.after(l,`<?php endif; ?>`)),t=s.findIncludingSelf("img",!0),u.before(s,`<?php foreach ( $attachment_ids as $attachment_id ) : ?>`),u.after(s,`<?php endforeach; ?>`),a=e(s,t,!1,"$attachment_id"),r&&s.setAttribute("id",n+`-<?php echo $attachment_id ?>`),o=c.wcGetImageCode(t,m,`wp_get_attachment_image( $attachment_id, _SIZE_, false, _ATTRS_ )`,i,a),u.toPhpHtmlOrNode(t,o,m))},this,[]))}}class PgWooActionProductRating extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-product-rating","Product Rating",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-product-rating-mode":{type:"select",name:"Mode",default_value:"width",action:"element_attribute",options:[{key:"width",name:"Set width"},{key:"stars",name:"Clone stars"}],helptext:`<p>Choose the method for displaying the starts:</p>
<ul>
<li><b>Set width</b> - set the CSS width of the element to the percentage value of the rating</li>
<li><b>Clone stars</b> - use the active, inactive and partial star icons to display the rating</li>
</ul>`},"wc-product-rating-active-star":e.wooGetSelectorField("Active star",`<p>Select the icon for the active star.</p>`,!1,{selector_assign_name:"Active Star",show_if:"!wc-product-rating-mode==width"}),"wc-product-rating-half-star":e.wooGetSelectorField("Active star partial",`<p>Select the icon for the partially active star.</p>`,!1,{selector_assign_name:"Partial Star",show_if:"!wc-product-rating-mode==width"}),"wc-product-rating-inactive-star":e.wooGetSelectorField("Inactive star",`<p>Select the icon for the inactive star.</p>`,!1,{selector_assign_name:"Inactive Star",show_if:"!wc-product-rating-mode==width"}),"wc-product-rating-width":e.wooGetSelectorField("Set width on element",`<p>Select the element on which the CSS width property should be set.</p>`,!1,{selector_assign_name:"Set Width",show_if:"wc-product-rating-mode==width"}),"wc-product-rating-label-element":e.wooGetSelectorField("Display label",`<p>The element for displaying the rating label.</p>`,!1,{selector_assign_name:"Display Label"}),"wc-product-rating-label-with-total":{type:"text",textarea:!0,name:"Label with total",placeholder:e.defaultValue("Rated {stars} out of 5 based on {count} customer ratings."),action:"element_attribute",show_if:"wc-product-rating-label-element",helptext:`<p>The text for the rating with the count of customer ratings. Use {starts} and {count} to insert dynamic information.</p>`},"wc-product-rating-label-with-total-singular":{type:"text",textarea:!0,name:"Label with total singular",placeholder:e.defaultValue("Rated {stars} out of 5 based on 1 customer rating."),action:"element_attribute",show_if:"wc-product-rating-label-element",helptext:`<p>The text for the rating with the single customer rating. Use {starts} to insert dynamic information.</p>`},"wc-product-rating-label-without-total":{type:"text",textarea:!0,name:"Label without total",placeholder:e.defaultValue("Rated {stars} out of 5."),action:"element_attribute",show_if:"wc-product-rating-label-element",helptext:`<p>The text for the rating with the unknown count of customer ratings. Use {starts} to insert dynamic information.</p>`},"wc-product-rating-reviews-count":e.wooGetSelectorField("Reviews count",`<p>The element for displaying the number and link to reviews. This element should be (or contain) a link.</p>`,!1,{selector_assign_name:"Reviews Count"})});return this.addTemplateSection(!0,!0,!0,"$context/rating"),a.addMeta({helptext:`Show the product rating.`,helplink:"product-rating"}),super.getAction()}process(e){var i=this.f,s=this.p,t=this.a;if(!super.process(e))return!1;var l=e.getAttribute("wc-product-rating-mode")||"stars",p=e.getAttribute("wc-product-rating-label-element"),a=e.getAttribute("wc-product-rating-active-star"),o=e.getAttribute("wc-product-rating-half-star"),r=e.getAttribute("wc-product-rating-inactive-star"),c=e.getAttribute("wc-product-rating-width"),u=e.getAttribute("wc-product-rating-label-with-total")||"Rated {stars} out of 5 based on {count} customer ratings.",m=e.getAttribute("wc-product-rating-label-with-total")||"Rated {stars} out of 5 based on 1 customer rating.",d=e.getAttribute("wc-product-rating-label-without-total")||"Rated {stars} out of 5.";if(this.saveOrUseTemplate(e,"$context/rating",`<?php 
if ( ! defined( 'ABSPATH' ) ) {
    exit; // Exit if accessed directly.
}

global $product;

if ( ! wc_review_ratings_enabled() ) {
    return;
}

$product_rating_count = $product->get_rating_count();
$product_review_count = $product->get_review_count();
$product_rating      = $product->get_average_rating();

if ( $product_rating_count > 0 ) : ?>     
__CODE__
<?php endif; ?>`,"woocommerce_template_single_rating()","woocommerce_template_loop_rating()")){var h,g=i.wooGetPgelBySelector(t,e,"wc-product-rating-reviews-count",!1);if(p&&(h=i.wpGetPgelFromSelector(e,p)),c){var _=i.wpGetPgelFromSelector(e,c);if(!i.wooRequireElement(t,e,_,`Element for the label is not found.`))return}if("stars"===l){var f=i.wpGetPgelFromSelector(e,a);if(r){var w=i.wpGetPgelFromSelector(e,r);if(!i.wooRequireElement(t,e,w,`Element for the inactive star is not found.`))return}if(o){var b=i.wpGetPgelFromSelector(e,o);if(!i.wooRequireElement(t,e,b,`Element for the partial star is not found.`))return}if(!i.wooRequireElement(t,e,f&&a,`Element for the active star is not found.`))return}s.addToChanges(function(){var e,t,a,o;if(s.resetAfterMap(),g&&((e=g.findOneIncludingSelf("a"))&&(e.setAttribute("href","#reviews"),e.addClass("woocommerce-review-link"),e.setAttribute("rel","nofollow")),e=e||g,a='<span class="count">',o="</span>",(t=g.findOne("span"))&&(a=t.getOpeningTag(),o=t.getClosingTag()),t=`<?php printf( _n( '%s customer review', '%s customer reviews', $product_review_count, 'woocommerce' ), '${a}' . esc_html( $product_review_count ) . '${o}' ); ?>`,a=0<=(a=e.html()).indexOf("{text}")?a.replace("{text}",t):t,e.html(a)),p&&(u=(o=function(e){return e.replace("{stars}","%1$s").replace("{count}","%2$s")})(u),m=o(m),d=o(d),h&&s.toPhpHtml(h,`echo sprintf( _n( '${m}', '${u}', $product_rating_count, '${i.current_theme_info.slug}' ), wc_format_decimal( $product_rating, 1 ), $product_rating_count )`),"a"===h.tagName)&&h.setAttribute("href",`<?php echo esc_url( apply_filters( 'woocommerce_loop_product_link', get_the_permalink(), $product ) . '#reviews' ); ?>`),"width"===l)c&&_.setInlineStylePropertyValue("width",`<?php echo ( ( $product_rating / 5 ) * 100 ) . '%'; ?>`,!1,!1,!0);else{for(var r=f.next(!0);r&&r!==w&&r!==b;){var n=r,r=r.next(!0);n.remove()}if(w)for(r=w.next(!0);r;)r=(n=r).next(!0),n.remove();s.before(f,`<?php $product_rating_rounded = ${b?"PG_WC_Helper::roundToHalfStar":"round"}( $product_rating ); ?>`),s.before(f,`<?php for($product_rating_star = 1; $product_rating_star <= $product_rating_rounded; $product_rating_star++ ) : ?>`),s.after(f,`<?php endfor; ?>`),b&&(s.before(b,`<?php if( $product_rating - $product_rating_rounded > 0.25) : ?>`),s.after(b,`<?php $product_rating_rounded++; ?>`),s.after(b,`<?php endif; ?>`)),w&&(s.before(w,`<?php for($product_rating_star = 1; $product_rating_star <= 5 - $product_rating_rounded; $product_rating_star++ ) : ?>`),s.after(w,`<?php endfor; ?>`))}},this,[])}}}class PgWooActionDisplayMeta extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-product-meta","Product Meta",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{});return e.addHtmlOrNodeField(a,null,"content"),a.addMeta({helptext:`Display product meta information. NOTE this action does not create the template.`,helplink:"product-meta"}),super.getAction()}process(e){this.f,this.p,this.a;return!!super.process(e)&&this.p.toPhpHtmlOrNode(e,"woocommerce_template_single_meta();",this.a)}}class PgWooActionProductCats extends PgWooProductAction{getAction(){var e=this.f;return(this.a=e.wpCreatePostTagsCatsAction("wc-product-cats","Product Categories",!1,"product_cat")).addMeta({helptext:`Display categories of the selected product. NOTE this action does not create the template.`,helplink:"product-categories"}),super.getAction()}}class PgWooActionProductTags extends PgWooProductAction{getAction(){var e=this.f;return(this.a=e.wpCreatePostTagsCatsAction("wc-product-tags","Product Tags",!1,"product_tag")).addMeta({helptext:`Display tags of the selected product. NOTE this action does not create the template.`,helplink:"product-tags"}),super.getAction()}}class PgWooActionLoop extends PgWooAction{getAction(){var b,y=this.f,v=this,t=b=this.a=y.addTag("wc-show-products","Show products",null,function(e){if(e.hasAttribute(t.attribute))return v.process(e)},{"wc-show-products":{type:"select",name:"Loop type",action:"element_attribute",attribute_keep_if_empty:!0,options:[{key:"loop",name:"the main loop"},{key:"query",name:"custom query"},{key:"rel",name:"relationship"},{key:"block",name:"block"}],helptext:`<p>Select the loop type:</p><ul>
<li><b>The main loop</b> - display default collection of products for the current template (products archive, single product...)</li>
<li><b>Custom query</b> - create a custom product query.</li>
<!-- <li><b>Related products</b> - show products related to the current product.</li> -->
<li><b>Relationship</b> - show products from Advanced Custom Fields relationship field.</li>
<li><b>Block</b> - show products that are selected in a Block attribute. Only valid when used inside the native Block.</li>
</ul>`},"wc-show-products-mode":{type:"select",name:"Layout mode",action:"element_attribute",default_value:"hooks",options:[{key:"hooks",name:"Hooks"},{key:"freestyle",name:"Freestyle"}],helptext:`How do you want to implement the loop view?
<ul>
<li><b>Hooks</b> - let the WooCoomerce hooks display the product information, so that various plugins can add their features to the product display. This is the most compatible approach, but the order and positioning of the elements is controlled by WooCommerce, not by your custom layout.</li>
<li><b>Freestyle</b> - use the selected element as the layout for displaying the product list. The product information and controls such as ordering and pagination are explicitly shown with Loop and Product actions. But some WooCommerce actions will not get triggered and that might affect any plugins that hook to these actions.</li>
</ul>`},"wc-show-products-display-label3":{type:"label",name:"Relationship options",action:"element_attribute",attribute:"wc-show-products-display-label3",class:"pg-action-info-label",show_if:"wc-show-products==rel"},"wc-show-products-field":{type:"text",name:"Field name",placeholder:y.forExample("special_products"),action:"element_attribute",validate:y.validateSlug,options:y.wpInsight.getLiveFieldsList,show_if:"wc-show-products==rel",helptext:`<p>Name of the field that contains the list of connected product ids.</p><p>ACF get_field is used if ACF plugin is activated, otherwise standard WordPress functions are used.</p><p>ACF (Advanced Custom Fields, free version) plugin is the recommended approach to implementing relationship fields.</p>`},"wc-show-products-display-label4":{type:"label",name:"Block attribute options",action:"element_attribute",attribute:"wc-show-products-display-label4",class:"pg-action-info-label",show_if:"wc-show-products==block"},"wc-show-products-block-attribute":{type:"text",name:"Attribute id",placeholder:y.forExample("my_products"),action:"element_attribute",validate:y.validateSlug,show_if:"wc-show-products==block",helptext:`<p>Id of the block attribute that contains the list of products.</p>`},"wc-show-products-block-attribute-title":{type:"text",name:"Attribute title",placeholder:y.forExample("Featured Products"),action:"element_attribute",show_if:"wc-show-products==block",helptext:`<p>Title (descriptive name) of the block attribute.</p>`},"wc-show-products-block-attribute-help":{type:"text",name:"Attribute description",placeholder:y.forExample("The list of featured projects."),textarea:!1,action:"element_attribute",show_if:"wc-show-products==block",helptext:`<p>Optional, describe what this attribute stands for. The description is displayed as a help message in the Block editor panel.</p>`},"wc-show-products-display-label1":{type:"label",name:"Custom query options",action:"element_attribute",attribute:"wc-show-products-display-label1",class:"pg-action-info-label",show_if:"wc-show-products==query"},"wc-show-products-type-query-name":{type:"text",name:"Query name",action:"element_attribute",validate:y.validateSlug,placeholder:y.defaultValue("product_query"),show_if:"wc-show-products==query",helptext:`<p>Give the query a name. A PHP variable with this name will be used to hold the query. The name is referenced in other actions, for example in Pagination.</p>`},"wc-show-products-type-load-posts":{type:"text",name:"Products to load",action:"element_attribute",placeholder:y.forExample("id list or function"),show_if:"wc-show-products==query",helptext:`<p>Load specific products(s). Enter list of ids or a function.</p>`},"wc-show-products-type-orderby":{type:"select",name:"Order by",empty_attribute:!1,action:"element_attribute",default_value:"date",options:[{key:"title",name:"Title"},{key:"price",name:"Price"},{key:"rating",name:"Average rating"},{key:"review_count",name:"Review count"},{key:"total_sales",name:"Total sales"},{key:"date",name:"Created date"},{key:"modified",name:"Modified date"},{key:"name",name:"Slug"},{key:"menu_order",name:"Menu order"},{key:"rand",name:"Random"}],show_if:"wc-show-products==query",helptext:`<p>How do you wish to order the results? Date is the default.</p>`},"wc-show-products-type-order":{type:"select",name:"Order direction",empty_attribute:!1,action:"element_attribute",default_value:"ASC",options:[{key:"ASC",name:"Ascending"},{key:"DESC",name:"Descending"}],show_if:"wc-show-products==query",helptext:`<p>Select the direction of the result ordering.</p>`},"wc-show-products-on-sale":{type:"select",name:"On sale",action:"element_attribute",show_empty:!0,options:[{key:"true",name:"Yes"},{key:"false",name:"No"}],show_if:"wc-show-products==query",helptext:`<p>Show only products that are or are not on sale.</p>`},"wc-show-products-tags":{type:"text",name:"Product tags",action:"element_attribute",placeholder:y.forExample("best,popular"),show_if:"wc-show-products==query",helptext:"<p>Search by tags. Use <code>tag1,tag2,tag3</code> to select products that have either of these tags or <code>tag1+tag2+tag3</code> to select products that have all the tags.</p>"},"wc-show-products-categories":{type:"text",name:"Product categories",action:"element_attribute",placeholder:y.forExample("hats,belts"),show_if:"wc-show-products==query",helptext:"<p>Search by tags. Use <code>cat1,cat2,cat3</code> to select products from these categories.</p>"},"wc-show-products-type-count":{type:"text",name:"Products per page",action:"element_attribute",placeholder:y.forExample("10"),show_if:"wc-show-products==query",helptext:"<p>Leave empty to return all products. Be careful, loading too many products can lead to slow performance.</p>"},"wc-show-products-type-paginate":{type:"checkbox",name:"Paginate results",action:"element_attribute",value:"true",negvalue:"false",default_value:"true",show_if:"wc-show-products==query&&wc-show-products-type-count",helptext:`<p>Paginate the query. Use Post Pagination action to implement pagination controls. There should be only one paginated query per page.</p>`},"wc-show-products-type-sticky":{type:"select",name:"Sticky",action:"element_attribute",options:[{key:"ignore",name:"ignore"},{key:"only",name:"only sticky"},{key:"none",name:"not sticky"}],show_if:"wc-show-products==query",helptext:`<p>Decide what to do with sticky products:</p><ul><li>Ignore the sticky flag, and return products regardless of their stickiness.</li><li>Return only sticky products.</li><li>Return only non-sticky products.</li></ul><p>Leave empty to return the sticky products at the top.</p>`},"wc-show-products-type-ignore-shown":{type:"checkbox",name:"Skip shown posts",action:"element_attribute",value:"true",empty_attribute:!0,show_if:"wc-show-products==query",helptext:`<p>Don't fetch products that were already displayed elsewhere on the page (up to this point).</p><p>This is great in cases when the same products would otherwise be returned and displayed with multiple queries.</p><p>For example, a featured product could also be shown in the latest products section below. This option will exclude the previously shown featured product from the latest products section.</p>`},"wc-show-products-type-by-field":{type:"checkbox",name:"Search by field value",action:"element_attribute",value:"true",empty_attribute:!0,show_if:"wc-show-products==query",helptext:`<p>Search posts by meta field value.</p>`},"wc-show-products-type-by-field-name":{type:"text",name:"Field name",action:"element_attribute",show_if:"wc-show-products==query&&wc-show-products-type-by-field",validate:y.required,options:y.wpInsight.getLiveFieldsList},"wc-show-products-type-by-field-value":{type:"text",name:"Field value",action:"element_attribute",show_if:"wc-show-products==query&&wc-show-products-type-by-field",validate:y.required},"wc-show-products-display-label2":{type:"label",name:"Post type options",action:"element_attribute",attribute:"wc-show-products-display-label2",class:"pg-action-info-label",show_if:"wc-show-products-type-register&&wc-show-products==query||rel"},"wc-show-products-label6":{type:"label",name:"Display options",action:"element_attribute",attribute:"wc-show-products-display-options",class:"pg-action-info-label"},"wc-show-products-first-classes":{type:"text",name:"Classes for the first item",action:"element_attribute",placeholder:y.forExample("active first"),helptext:`<p>Add one or more classes (separated with space characters) to the first item element in the loop.</p>`},"wc-show-products-range":{type:"text",name:"Range of items to show",action:"element_attribute",placeholder:y.forExample("2 or 0-5 (0 is first)"),validate:y.validateRangeValue,helptext:`<p>Display only certain returned products. Use number, for example 2 or range, for example 0-5. 0 is the first element. Note that this setting doesn't affect which products are returned by the query, only which of the returned products are displayed.</p><p>This is useful when having to display products in fixed positions on the page, for example in CSS grid items.</p>`},"wc-show-products-set-id":{type:"select",name:"Set id attribute of the product item",action:"element_attribute",options:[{key:"auto",name:"Only if no id is set"},{key:"true",name:"Always"},{key:"false",name:"Never"}],default_value:"auto",aaashow_if:function(e,t){return"false"===e["wc-show-products-set-id"]||null!==(t.findOne("[wp-loop-item]")||t).getAttribute("id")},helptext:`<p>Check this to set the id attribute of the element to the value provided by WordPress. Note that this might clash with CSS styling or Javascript code that is connected with the id of the item element.</p>`},"wc-show-products-label5":{type:"label",name:"Loop structure",action:"element_attribute",attribute:"wc-show-products-display-options",class:"pg-action-info-label",helptext:`<p>By default, the Show Products element is shown and repeated for all returned products.</p><p>You can customize the loop structure by setting:</p><ul><li><b>The items container</b> element, that is only shown if products are returned.</li><li><b>The item</b> element, within the container, that is repeated for each displayed product.</li><li><b>Last repeated</b> element lets you repeat a range of elements</li><li><b>The empty loop</b> element that is shown if no posts are found. This element must directly follow the Items container element.</li></ul><p>Take a look at the example:</p>
<pre>
section          &lt;- The element with Show Products
  h2 News
  div.container  &lt;- Items container
    div.row
      div.item   &lt;- Item to repeat
  div.empty      &lt;- Show if no posts found
    p No news!
</pre>`},"wc-show-products-items-container":{type:"selector",name:"Items container",action:"element_attribute",placeholder:y.defaultValue("current element"),get_selector_options:function(e,t,a,o){return y.wpGetSelectorOptions(t,{},a,o)},selector_assign_name:"Items Container",selector_info:`Select the element that contains the loop items. The container will be hidden if there are no items to show.`,validate:y.wpValidateSelector,helptext:`<p>The items container is only shown if products are found.</p>`},"wc-show-products-repeat":{type:"selector",name:"Repeated loop item",action:"element_attribute",fill_list_on_open:!0,open_list_on_focus:!0,get_selector_options:function(e,t,a,o){return y.wpGetSelectorOptions(t,{},a,o)},selector_assign_name:"Repeated Item",selector_info:`Select the element that represents the loop item.`,placeholder:y.defaultValue("current element"),default_value:"this",validate:y.wpValidateSelector,helptext:`<p>Select the element that will be repeated for each shown product.</p>`},"wc-show-products-show-empty-element":{type:"selector",name:"Define No products found template",action:"element_attribute",get_selector_options:function(e,t,a,o){return y.wpGetSelectorOptions(t,{},a,o)},selector_assign_name:"No Products Found",selector_info:`Select the element that will be shown if no products are found.`,validate:y.wpValidateSelector,helptext:`<p>Show this element if no products are found.</p><p>This element must directly follow the Items container element.</p>`}});return b.on_can_add_action=function(e,t,a){return!(0<=["html","body","head","script"].indexOf(e.tagName)&&(pinegrow.showQuickError(`Show Products can't be added to ${e.tagName} element.`),1))},b.on_action_added=function(e,t,a){e.getAttr("wc-show-products")||e.setAttr("wc-show-products","loop")},b.skip_compatibility_check=!0,b.get_action_tag=function(e,t,a){var o=[],r="";switch(e.getAttribute("wc-show-products")||"loop"){case"loop":r="Main";break;case"query":r=`Query `+(e.getAttr("wc-show-products-type")||"");break;case"related":r=`Related`;break;case"rel":r=`Rel `+(e.getAttr("wc-show-products-field")||"");break;case"block":r=`Block `+(e.getAttr("wc-show-products-block-attribute")||"")}return o.push(r),y.getExpressiveActionTag(e,t,o,"Products Loop",a)},b.wpGetLoopStructure=function(e){var t={container:e,rep:e,rep_end:e},a=y.wpGetPgelFromSelector(e,e.getAttr("wc-show-products-items-container"),e),o=y.wpGetPgelFromSelector(e,e.getAttr("wc-show-products-repeat"));return o||!a||a===e||(o=a.getFirstChild())||(a=null),o=o||e,t.container=a,t.rep=o,t},b.mapAction=function(e,t){var a,o=v.p,r="product",n=t.getAttribute(e.attribute+"-type-query-name")||"product_query",i=(i=t.getAttr("wc-show-products"))||"loop",s=t.getAttr("wc-show-products-mode")||"hooks",l=(t.setData("show_product","loop"),t.setData("layout_mode",s),t.getAttr("wc-show-products-categories")),p=t.getAttr("wc-show-products-tags"),c=null,u={},l=("query"===i&&n&&(c=`<?php
    $${n}_args['meta_query'] = WC()->query->get_meta_query(); 
    if( isset( $${n}_args[ 'orderby' ] ) ) {
        switch( $${n}_args[ 'orderby' ] ) {
            case 'price':
                $${n}_args[ 'orderby' ] = 'meta_value_num';
                $${n}_args[ 'meta_key' ] = '_price';
                break;
            case 'rating':
                $${n}_args[ 'orderby' ] = 'meta_value_num';
                $${n}_args[ 'meta_key' ] = '_wc_average_rating';
                break;
            case 'total_sales':
                $${n}_args[ 'orderby' ] = 'meta_value_num';
                $${n}_args[ 'meta_key' ] = 'total_sales';
                break;
            case 'review_count':
                $${n}_args[ 'orderby' ] = 'meta_value_num';
                $${n}_args[ 'meta_key' ] = '_wc_review_count';
                break;
        }
    }`,(d=t.getAttr("wc-show-products-on-sale"))&&(u["sale"]=d,c+=`
    if( isset( $${n}_args[ 'sale' ] ) ) {
        if( $${n}_args[ 'sale' ] === 'true' ) {
            $${n}_args[ 'post__in' ] = array_merge( array( 0 ), wc_get_product_ids_on_sale() );
        } else if( $${n}_args[ 'sale' ] === 'false' ) {
            $${n}_args[ 'post__not_in' ] = array_merge( array( 0 ), wc_get_product_ids_on_sale() );
        }
        unset( $${n}_args[ 'sale' ] );
    }
`),(l||p)&&(d=[],l&&d.push(`${y.wpGetClass("PG_Helper")}::getTaxonomyQuery( 'product_cat', ${y.quoteParam(y.evaluateBlockAttrsInParam(l))} )`),p&&d.push(`${y.wpGetClass("PG_Helper")}::getTaxonomyQuery( 'product_tag', ${y.quoteParam(y.evaluateBlockAttrsInParam(p))} )`),u["tax_query"]=`array_filter( array(${d.join(", ")}) )`),c+="?>"),t.setDataUncloned("loopOptions",{have_posts_condition:"loop"===i?`wc_get_loop_prop( 'total' )`:null,inner_code_before:`<?php global $product, $post; ?>`,after_args_code:c,extra_query_params:u}),b.wpGetLoopStructure(t)),p=l.container,m=l.rep,d=(p&&p!==t&&p.setAttr("wp-loop-items-container",null),m!==t&&m.setAttr("wp-loop-item",null),y.wpGetPgelFromSelector(t,t.getAttr("wc-show-products-show-empty-element"))),c=(d&&y.wooSaveTemplate(d,"loop/no-products-found",`<?php 
    defined( 'ABSPATH' ) || exit;
?>`),o.resetAfterMap(),t.getAttr("wc-show-products-repeat-end"));if(c&&m.parent){for(var u="[wc-show-products-end]",h=m.parent.find(c),g=m.index(),_=null,f=0;f<h.length;f++)if(h[f].index()>=g&&h[f].parent===m.parent){_=h[f];break}if(_&&_.setAttr("wc-show-products-end",null),!m.isSelector(u)&&(_=m.nextWithSelector(u)))for(var w=m.next();w&&(w.setAttr("wp-loop-add",null),w!==_);)w=w.next()}switch(m.setAttribute("wc-product-class"),t.getAttribute("wc-show-products-set-id")){case"true":m.setAttribute("wp-the-id",m.getAttribute("id"));break;case"false":break;default:m.getAttribute("id")||m.setAttribute("wp-the-id",null)}if(t.hasAttribute("wc-show-products-show-empty-text")&&t.setAttribute("wp-loop-show-empty-text",t.getAttribute("wc-show-products-show-empty-text")),"loop"===i&&t.setAttribute("wp-loop-show-empty-text","false"),"loop"===i)t.setAttribute("wp-loop");else if("query"===i){r=r||"post",t.setAttribute("wp-loop",n||"product_query"),t.setAttribute("wp-loop-post-type-custom",r);l=t.getAttribute(e.attribute+"-type-orderby")||"date",p=t.getAttribute(e.attribute+"-type-order")||"ASC",d=(t.setAttribute("wp-loop-orderby",l||"date"),t.setAttribute("wp-loop-order",p||"ASC"),t.getAttribute(e.attribute+"-type-count"));switch(d?(t.setAttribute("wp-loop-posts-per-page",d),"false"!==t.getAttribute("wc-show-products-type-paginate")&&t.setAttribute("wp-loop-paged",`get_query_var( 'paged' ) ?: 1`)):t.setAttribute("wp-loop-nopaging","true"),t.getAttr("wc-show-products-type-sticky")){case"ignore":t.setAttr("wp-loop-ignore-sticky","true");break;case"only":t.setAttr("wp-loop-ignore-sticky","true"),t.setAttribute("wp-loop-post",`in:get_option( 'sticky_posts' )`);break;case"none":t.setAttr("wp-loop-ignore-sticky","true"),t.setAttribute("wp-loop-post",`not_in:get_option( 'sticky_posts' )`)}t.hasAttr("wc-show-products-type-ignore-shown")&&("none"===t.getAttr("wc-show-products-type-sticky")?t.setAttribute("wp-loop-post",`not_in:array_merge( get_option( 'sticky_posts' ), ${y.wpGetClass("PG_Helper")}::getShownPosts() )`):t.setAttribute("wp-loop-post",`not_in:${y.wpGetClass("PG_Helper")}::getShownPosts()`));c=t.getAttr("wc-show-products-type-load-posts");c&&(t.setAttribute("wp-loop-post",`in:${y.wpGetClass("PG_Helper")}::getPostIdList( ${y.quoteParam(c)} )`),t.setAttribute("wp-loop-post-type","any"),t.setAttribute("wp-loop-post-status","any")),t.hasAttr("wc-show-products-type-by-field")&&(u=t.getAttr("wc-show-products-type-by-field-name"),n=t.getAttr("wc-show-products-type-by-field-value"),u)&&null!==n&&(t.setAttr("wp-loop-meta-key",u),t.setAttr("wp-loop-meta-value",n))}else"rel"===i?(a=t.getAttr("wc-show-products-field"))&&(t.setAttribute("wp-loop",a+"_query"),t.setAttribute("wp-loop-post-type","product"),t.setAttribute("wp-loop-post-status","any"),t.setAttribute("wp-loop-posts-per-page","-1"),t.setAttribute("wp-loop-orderby","post__in"),t.setAttribute("wp-loop-post",`in:${y.wpGetClass("PG_Helper")}::getRelationshipFieldValue( ${y.quoteParam(a)} ) ?: array('')`),t.setAttribute("wp-loop-ignore-sticky","true")):"block"===i&&(a=t.getAttr("wc-show-products-block-attribute"))&&(t.setAttribute("wp-loop",a+"_query"),t.setAttribute("wp-loop-post-type","product"),t.setAttribute("wp-loop-post-status","any"),t.setAttribute("wp-loop-posts-per-page","-1"),t.setAttribute("wp-loop-orderby","post__in"),t.setAttribute("wp-loop-post",`in:${y.wpGetClass("PG_Blocks")}::getAttributeAsPostIds( $args, ${y.quoteParam(a)} )`),t.setAttribute("wp-loop-ignore-sticky","true"));r=t.getAttribute("wc-show-products-first-classes"),r&&t.setAttribute("wp-loop-first-classes",r),l=t.getAttribute("wc-show-products-range");l&&t.setAttribute("wp-loop-range",l),"hooks"===s&&o.addToChanges(function(){m.html(`<?php do_action( 'woocommerce_shop_loop' ); ?>
<?php wc_get_template_part( 'content', 'product' ); ?>`)},this,[]),l&&!l.startsWith("0")||("loop"===i&&o.before(t,`<?php if ( woocommerce_product_loop() ) : ?>`),"hooks"===s&&(o.before(t,`<?php do_action( 'woocommerce_before_shop_loop' ); ?>`),o.after(t,`<?php do_action( 'woocommerce_after_shop_loop' ); ?>`)),"loop"===i&&(o.after(t,`<?php else : ?>`),o.after(t,`<?php do_action( 'woocommerce_no_products_found' ); ?>`),o.after(t,`<?php endif; ?>`)))},t.addMeta({tags:[y.tag_set_attr_class,y.tag_set_attr_id,y.tag_t_post,y.tag_use_loop],helptext:`Display a collection of products. Wraps the element with the loop and adds product id and classes. Optionally, run a custom query, show related products, load products from ACF field or block attribute.`,helplink:"https://pinegrow.com/docs/woocommerce/actions/show-products",extra_name:null}),t}process(e){var t=this.f,a=(this.p,this.a);t.wpMapAction(a,e,a.mapAction)}}class PgWooActionLoopResultsCount extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-loop-count","Product Loop Count",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-loop-count-text":e.wooGetSelectorField("Show text in",`<p>The element where the text is shown, if different from the main element.</p>`,!1,{selector_assign_name:"Show Count Text"})});return this.global=!0,this.addTemplateSection(!0,!0,!1,"loop/result-count"),a.addMeta({helptext:`Display the count and range of products shown in the list.`,helplink:"product-loop-count"}),super.getAction()}process(e){var t,a=this.f,o=this.p,r=this.a;if(!super.process(e))return!1;this.saveOrUseTemplate(e,"loop/result-count",`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}
?>`,"woocommerce_result_count()")&&(t=a.wooGetPgelBySelector(r,e,"wc-loop-count-text",!1)||e,o.addToChanges(function(){t.html(`<?php
	if ( 1 === intval( $total ) ) {
		_e( 'Showing the single result', 'woocommerce' );
	} elseif ( $total <= $per_page || -1 === $per_page ) {
		printf( _n( 'Showing all %d result', 'Showing all %d results', $total, 'woocommerce' ), $total );
	} else {
		$first = ( $per_page * $current ) - $per_page + 1;
		$last  = min( $total, $per_page * $current );
		printf( _nx( 'Showing %1$d&ndash;%2$d of %3$d result', 'Showing %1$d&ndash;%2$d of %3$d results', $total, 'with first and last result', 'woocommerce' ), $first, $last, $total );
	}
?>`)},this,[]))}}class PgWooActionLoopOrderBy extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-loop-orderby","Product Loop Order By",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{});return this.global=!0,this.addTemplateSection(!0,!0,!1,"loop/orderby"),a.addMeta({helptext:`Display the order by selector for product list.`,helplink:"product-loop-order-by"}),super.getAction()}process(e){var t,a,o=this.f,r=this.p,n=this.a;if(!super.process(e))return!1;this.saveOrUseTemplate(e,"loop/orderby",`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}
?>`,"woocommerce_catalog_ordering()")&&((t=e.findIncludingSelf("form",!0))?(a=t.findOne("select"))?r.addToChanges(function(){a.removeAllChildren();var e=pgCreate(`<option value="<?php echo esc_attr( $id ); ?>" <?php selected( $orderby, $id ); ?>><?php echo esc_html( $name ); ?></option>`);a.append(e),t.addClass("woocommerce-ordering"),t.setAttribute("method","get"),a.addClass("orderby"),a.setAttribute("name","orderby"),a.setAttribute("aria-label",`<?php esc_attr_e( 'Shop order', 'woocommerce' ); ?>`),t.append(pgCreate(`<input type="hidden" name="paged" value="1" />`)),t.append(pgCreate(`<?php wc_query_string_form_fields( null, array( 'orderby', 'submit', 'paged', 'product-page' ) ); ?>`)),r.resetAfterMap(),r.before(e,`<?php foreach ( $catalog_orderby_options as $id => $name ) : ?>`),r.after(e,`<?php endforeach; ?>`)},this,[]):o.addExportError(e,`<b>${n.name}</b>: The element must contain a SELECT element.`):o.addExportError(e,`<b>${n.name}</b>: The element must be or contain a FORM element.`))}}class PgWooActionProductImage extends PgWooProductAction{getAction(){var e=this.f,a=this,t=this.a=e.addTag("wc-product-thumbnail","Product Loop Thumbnail","Size#large or array(128,128)",function(e){if(e.hasAttribute(t.attribute))return a.process(e)},{"wc-product-thumbnail":{type:"text",name:"Size",placeholder:e.defaultValue("woocommerce_thumbnail"),attribute_keep_if_empty:!0,action:"element_attribute",options:e.wpInsight.getImageSizes,open_list_on_focus:!0},"wc-product-thumbnail-placeholder":{type:"checkbox",name:"Use placeholder if not set",action:"element_attribute",value:"true",negvalue:"false",default_value:"true",ignore_parameter:!0},"wc-product-thumbnail-sizes":{type:"text",name:"Responsive sizes",placeholder:e.forExample("max-width(1200px) 100vw, 1200px"),parameter_name:"sizes",action:"element_attribute"},"wc-product-thumbnail-sizes-button":{type:"button",name:"Guess sizes",func:function(t){t.getPage().activeView.calculateImageResponsiveSizes(t,function(e){e.length&&(pinegrow.makeChanges(t,"Guess sizes",function(){t.setAttr("wc-product-thumbnail-sizes",e.join(", "))}),pinegrow.selectedElements.reselect())})}}});return this.addTemplateSection(!0,!0,!1,"loop/product-image",function(e,t){if(!e)return t+a.willOverride("woocommerce_template_loop_product_thumbnail")}),this.allowed_on=function(e){return!!e.findIncludingSelf("img")},this.allowed_on_msg=`Product Thumbnail should be added to the element that is or contains an IMG element.`,t.addMeta({helptext:`Display product thumbnail in a loop.`,helplink:"product-loop-thumbnail"}),super.getAction()}process(e){var t,a,o=this.f,r=this.p,n=this.a;return!!super.process(e)&&(a="false"!==e.getAttribute("wc-product-thumbnail-placeholder"),t=e.findOne("img")||e,o=o.wcGetCodeForProductImage(t,e.getAttribute("wc-product-thumbnail")||"woocommerce_thumbnail",a),a=`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}
global $product;

`,this.saveOrUseTemplate(e,"loop/product-image",a+=t===e?`__NO_CODE__${o};`:"?>",`wc_get_template( 'loop/product-image.php' )`)&&t!==e?r.toPhpHtmlOrNode(t,o,n):void 0)}}class PgWooActionLoopAddToCart extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-loop-add-to-cart","Product Loop Add To Cart Button",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-loop-add-to-cart-remove-style":{type:"checkbox",name:"Remove default styling",action:"element_attribute",value:"true",helptext:"Remove default styling by removing the <code>button</code> class."}});return this.addTemplateSection(!0,!0,!1,"loop/add-to-cart"),this.allowed_on=function(e){return!!e.findIncludingSelf("a",!0)||(t.allowed_on_msg="The element must be or contain an A (link) element.",!1)},a.addMeta({helptext:`Add the Add to cart link to the A element.`,helplink:"product-loop-add-to-cart"}),super.getAction()}process(e){var t=this.f,a=this.p,o=this.a;if(!super.process(e))return!1;var r,n=`<?php
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}

global $product;

$classes = isset( $args['class'] ) ? $args['class'] : '';
`;"true"===e.getAttribute("wc-loop-add-to-cart-remove-style")&&(n+=`$classes = preg_replace('/(^|\\s)button($|\\s)/m', ' ', $classes );
`),this.saveOrUseTemplate(e,"loop/add-to-cart",n+=`
ob_start();
?>
__CODE__
<?php
echo apply_filters( 'woocommerce_loop_add_to_cart_link', ob_get_clean(), $product, $args );
`,"woocommerce_template_loop_add_to_cart()")&&((r=e.findIncludingSelf("a",!0))?a.addToChanges(function(){r.setAttribute("href",`<?php echo esc_url( $product->add_to_cart_url() ); ?>`),r.addClass(`<?php echo esc_attr( $classes ); ?>`),r.setAttribute("data-quantity",`<?php echo esc_attr( isset( $args['quantity'] ) ? $args['quantity'] : 1 ); ?>`),r.html(`<?php echo esc_html( $product->add_to_cart_text() ); ?>`),r.setAttribute(`<?php echo isset( $args['attributes'] ) ? wc_implode_html_attributes( $args['attributes'] ) : ''; ?>`,null)},this,[]):t.addExportError(e,`<b>${o.name}</b>: The element must be or contain an A (link) element.`))}}class PgWooActionLoopPagination extends PgWooAction{getAction(){var e=this.f,a=this,e=this.a=e.wpCreatePaginationSmartAction("wc-pagination","Product Loop Pagination",function(e){delete e["wc-pagination-post-type"]},"PG_WCPagination",function(e,t){(a.pgel=e).removeAttribute("wp-if-custom"),t&&t.setDataUncloned("dots_end_size",`PG_WCPagination::$args['end_size']`),t&&t.setDataUncloned("dots_mid_size",`PG_WCPagination::$args['mid_size']`),a.saveOrUseTemplate(e,"loop/pagination",`<?php 
if ( ! defined( 'ABSPATH' ) ) {
	exit;
}

$total   = isset( $total ) ? $total : wc_get_loop_prop( 'total_pages' );
$current = isset( $current ) ? $current : wc_get_loop_prop( 'current_page' );
$base    = isset( $base ) ? $base : esc_url_raw( str_replace( 999999999, '%#%', remove_query_arg( 'add-to-cart', get_pagenum_link( 999999999, false ) ) ) );
$format  = isset( $format ) ? $format : '';

if ( $total <= 1 ) {
	return;
}

PG_WCPagination::$args = apply_filters(
    'woocommerce_pagination_args',
    array( 
        'base'      => $base,
        'format'    => $format,
        'add_args'  => false,
        'current'   => max( 1, $current ),
        'total'     => $total,
        'end_size'  => 3,
        'mid_size'  => 3,
    )
);
?>`,"woocommerce_pagination()")});return e.on_action_added=function(e,t,a){e.setAttr("wc-pagination-fields",null)},this.global=!0,this.addTemplateSection(!0,!0,!1,"loop/pagination"),e.addMeta({helptext:`Implement the pagination control.`,helplink:"product-loop-pagination"}),super.getAction()}process(e){}}class PgWooAddToCart extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-product-cart","Product Add to Cart",null,function(e){e.hasAttribute(a.attribute)&&t.process(e)},{"wc-product-cart-type":{type:"select",name:"Product type",default_value:"simple",action:"element_attribute",options:[{key:"simple",name:"Simple"},{key:"variable",name:"Variable"}],helptext:`<p>Select the product type:</p>
<ul>
<li><b>Simple</b> - products without variations</li>
<li><b>Variable</b> - products with variations</li>
</ul>`},"wc-product-cart-label-attrs":e.wpGetSectionLabelField("Variation attributes",`<p>The element that lists all available variations and display selectors that let the customer choose a variation they wish to add to cart.</p>
<p>The inner structure of this element should be:</p>
<pre>
Repeated item - element repeated for each attribute
    Label - attribute label, for example Color
    Selector - the element with the SELECT with the options
...
Selected variation wrapper 
    Selected variation - displaying the selected variation
    Quantity and Add to cart button wrapper
</pre>`,{show_if:"wc-product-cart-type==variable"}),"wc-product-cart-variation-attribute":e.wooGetSelectorField("Repeated item",`<p>The element repeated for each attribute. This element should contain the attribute label and the selector.</p>`,!1,{selector_assign_name:"Repeated Attribute",show_if:"wc-product-cart-type==variable"}),"wc-product-cart-variation-attribute-label":e.wooGetSelectorField("Label",`<p>The element for displaying the attribute name.</p>`,!1,{selector_assign_name:"Attribute Label",show_if:"wc-product-cart-type==variable"}),"wc-product-cart-variation-value":e.wooGetSelectorField("Selector",`<p>The SELECT element for choosing a variant.<!-- This element should not be the SELECT input itself, rather it should be a wrapper around the SELECT.--></p>`,!1,{selector_assign_name:"Attribute Selector",show_if:"wc-product-cart-type==variable"}),"wc-product-cart-variation-clear":e.wooGetSelectorField("Clear link",`<p>The link for clearing the selection.</p>`,!1,{selector_assign_name:"Attribute Clear",show_if:"wc-product-cart-type==variable"}),"wc-product-cart-label-qb":e.wpGetSectionLabelField("Quantity and button",`<p>The element that contains the quantity field and the add to cart button.</p>
<p>The inner structure should be:</p>
<pre>
Wrapper element (quantity and button need a wrapper element)
    Quantity element (quantity input needs a wrapper element as well)
        Quantity input field
    Add to cart button
</pre>`,{}),"wc-product-cart-variation-single-wrapper":e.wooGetSelectorField("Selected variation wrapper",`<p>The wrapper element that contains the Selected variant, Quantity field and Add to cart button. This element should be outside of the Repeated item.</p>`,!1,{selector_assign_name:"Selected Variation Wrapper",show_if:"wc-product-cart-type==variable"}),"wc-product-cart-variation-add-to-cart":e.wooGetSelectorField("Quantity and Button Wrapper",`<p>The wrapper element that contains the quantity field and the add to cart button.</p>
`,!1,{selector_assign_name:"Quantity and Button Wrapper"}),"wc-product-cart-quantity":e.wooGetSelectorField("Quantity field",`<p>Select the element that contains the quantity input field, not the input field itself.</p>`,!1,{selector_assign_name:"Quantity Field"}),"wc-product-cart-quantity-no-export":{type:"checkbox",name:"Do not export the quantity template",action:"element_attribute",value:"true",helptext:`<p>Quantity field is exported into a separate template <code>global/quantity-input</code>.</p><p>If you are defining both Add to Cart for simple and variable products, you will get the warning message that the quantity template is exported multiple times.</p><p>To avoid that, decide which Add to Cart action should export the quantity template and then check this Do not export option on all other instances of the Add to Cart action.</p>`},"wc-product-cart-button":e.wooGetSelectorField("Add to Cart Button",`<p>Select the button that will add the product to the cart.</p>`,!1,{selector_assign_name:"Add to Cart Button"}),"wc-product-cart-label-vartemp":e.wpGetSectionLabelField("Variation display template (optional)",`<p>The template for displaying the selected variation. If not set, WooCommerce default template will be used instead.</p>
<p>The structure should be:</p>
<pre>
Template element 
    Description
    Price
    Availability
    Not available
</pre>
<p>NOTE: Template section Variant parameter is ignored for <code>add-to-cart/variation</code> template. The default template will always be used, even if the Template Variant is set.</p>`,{show_if:"wc-product-cart-type==variable"}),"wc-product-cart-variation-template":e.wooGetSelectorField("Template element",`<p>The element that contains the selected variation template. NOTE: Only the content of this element will be saved as a template. If you need to add styling to the template element, add a wrapper element inside it and add styling there.
</p>`,!1,{selector_assign_name:"Variation Template",show_if:"wc-product-cart-type==variable"}),"wc-product-cart-variation-template-desc":e.wooGetSelectorField("Description",`<p>The element that will display the product variant description, if it is set.</p>`,!1,{selector_assign_name:"Template Description",show_if:"wc-product-cart-type==variable"}),"wc-product-cart-variation-template-price":e.wooGetSelectorField("Price",`<p>The element for displaying the price. The price is displayed in the default WooCommerce format and layout.</p>`,!1,{selector_assign_name:"Template Price",show_if:"wc-product-cart-type==variable"}),"wc-product-cart-variation-template-price-unformat":{type:"checkbox",name:"Remove price styling",placeholder:"element selector",action:"element_attribute",value:"true",helptext:`<p>Remove the default WooCommerce price styling.</p>`,show_if:"wc-product-cart-type==variable"},"wc-product-cart-variation-template-availability":e.wooGetSelectorField("Availability",`<p>Display the product variant availability. This includes Out of stock message.</p>`,!1,{selector_assign_name:"Template Availability",show_if:"wc-product-cart-type==variable"}),"wc-product-cart-variation-template-not-available":e.wooGetSelectorField("Not available",`<p>Display the notice if selected variant is not available.</p>`,!1,{selector_assign_name:"Template Not Available",show_if:"wc-product-cart-type==variable"})});return this.addTemplateSection(!0,!0,!1,"single-product/add-to-cart/simple,global/quantity-input,single-product/add-to-cart/variation-add-to-cart-button,single-product/add-to-cart/variation,single-product/add-to-cart/variable"),a.addMeta({tags:[e.tag_set_content,e.tag_ret_string,e.tag_t_post,e.tag_use_loop],helptext:`Display Add to cart section.`,helplink:"product-add-to-cart",extra_name:null}),super.getAction()}process(a){var o=this.f,r=this.p,e=this.a;if(!super.process(a))return!1;var t=a.getAttribute("wc-product-cart-button")||"button",n=a.getAttribute("wc-product-cart-quantity"),i=a.getAttribute("wc-product-cart-type")||"simple",s="true"===a.getAttribute("wc-product-cart-quantity-no-export");if("variable"===i){var l=o.wooGetPgelBySelector(e,a,"wc-product-cart-variation-add-to-cart",!0),p=o.wooGetPgelBySelector(e,a,"wc-product-cart-variation-attribute",!0),c=o.wooGetPgelBySelector(e,a,"wc-product-cart-variation-attribute-label",!0),u=o.wooGetPgelBySelector(e,a,"wc-product-cart-variation-clear",!0),m=o.wooGetPgelBySelector(e,a,"wc-product-cart-variation-value",!0),d=o.wooGetPgelBySelector(e,a,"wc-product-cart-variation-single-wrapper",!0),h=o.wooGetPgelBySelector(e,a,"wc-product-cart-variation-template",!1),g=o.wooGetPgelBySelector(e,a,"wc-product-cart-variation-template-desc",!1),_=o.wooGetPgelBySelector(e,a,"wc-product-cart-variation-template-price",!1),f=o.wooGetPgelBySelector(e,a,"wc-product-cart-variation-template-availability",!1),w=o.wooGetPgelBySelector(e,a,"wc-product-cart-variation-template-not-available",!1);if(!(m&&p&&c&&l&&d&&u))return}var b=`woocommerce_template_single_add_to_cart()`,y=`<?php
defined( 'ABSPATH' ) || exit;

global $product;

if ( ! $product->is_purchasable() ) {
    return;
}
$cart_quantity_settings = PG_WC_Helper::getQuantityFieldSettings( $product );
`;switch(i){case"simple":y+=`
if ( $product->is_in_stock() ) :
`;break;case"variable":y+=`
$out_of_stock = empty( $available_variations ) && false !== $available_variations;                
`,"true"===a.getAttribute("wc-product-cart-variation-template-price-unformat")&&(y+=`
if(!$out_of_stock) {
    foreach ($available_variations as $i => $v) {
        $price_html = new PG_HTML_Inspector($v['price_html']);
        $available_variations[$i]['price_html'] = $price_html->getInnerContent(null, 'price');
    }
}                    
`),y+=`
$attribute_keys  = array_keys( $attributes );
$variations_json = wp_json_encode( $available_variations );
$variations_attr = function_exists( 'wc_esc_json' ) ? wc_esc_json( $variations_json ) : _wp_specialchars( $variations_json, ENT_QUOTES, 'UTF-8', true );
`}switch(y+=`?>

<?php do_action( 'woocommerce_before_add_to_cart_form' ); ?>

__CODE__

<?php do_action( 'woocommerce_after_add_to_cart_form' ); ?>
`,i){case"simple":y+=`<?php endif; ?>  
`;break;case"variable":y+=``}if(!this.saveOrUseTemplate(a,"single-product/add-to-cart/"+i,y,b))return!1;var v=a.findIncludingSelf("form",!0);if(o.wooRequireElement(e,a,v,"the element must be or contain a form.")){var k=o.wpGetPgelFromSelector(a,t);if(o.wooRequireElement(e,a,k,"the element must contain a button.")){var x=o.wpGetPgelFromSelector(a,n);if(x){if(!("input"!==x.tagName&&x.findOne("input")||o.wooRequireElement(e,a,null,"Quantity element must be a div (or similar) that contains the input element.")))return;var A=`do_action( 'woocommerce_before_add_to_cart_quantity' );

		woocommerce_quantity_input(
			array(
				'min_value'   => apply_filters( 'woocommerce_quantity_input_min', $product->get_min_purchase_quantity(), $product ),
				'max_value'   => apply_filters( 'woocommerce_quantity_input_max', $product->get_max_purchase_quantity(), $product ),
				'input_value' => isset( $_POST['quantity'] ) ? wc_stock_amount( wp_unslash( $_POST['quantity'] ) ) : $product->get_min_purchase_quantity(),
			)
		);

		do_action( 'woocommerce_after_add_to_cart_quantity' );`;s||this.saveOrUseTemplate(x,"global/quantity-input",`<?php
    defined( 'ABSPATH' ) || exit;
    
if ( $max_value && $min_value === $max_value ) { ?>
<div class="quantity hidden">
    <input type="hidden" id="<?php echo esc_attr( $input_id ); ?>" class="qty" name="<?php echo esc_attr( $input_name ); ?>" value="<?php echo esc_attr( $min_value ); ?>" />
</div>
<?php
} else {
$label = ! empty( $args['product_name'] ) ? sprintf( esc_html__( '%s quantity', 'woocommerce' ), wp_strip_all_tags( $args['product_name'] ) ) : esc_html__( 'Quantity', 'woocommerce' );
?>
__CODE__
<?php } ?>    
`,A,null,null,!0)}l&&this.saveOrUseTemplate(l,"single-product/add-to-cart/variation-add-to-cart-button",`<?php
defined( 'ABSPATH' ) || exit;

global $product;
?>
__CODE__
`,`
do_action( 'woocommerce_before_single_variation' );
do_action( 'woocommerce_single_variation' );
do_action( 'woocommerce_after_single_variation' );
`,null,null,!0),h&&this.saveOrUseTemplate(h,"single-product/add-to-cart/variation",`<?php
defined( 'ABSPATH' ) || exit;
?>
__CODE__
`,null,null,!0,!1,!0),r.addToChanges(function(){var e,t;r.resetAfterMap(),v.setAttribute("method","post"),v.setAttribute("action",`<?php echo esc_url( apply_filters( 'woocommerce_add_to_cart_form_action', $product->get_permalink() ) ); ?>`),v.setAttribute("enctype","multipart/form-data"),a.setAttribute("data-product-id",`<?php echo absint( $product->get_id() ); ?>`),"variable"===i&&(a.addClass("variations_form"),a.setAttribute("data-product_variations",`<?php echo $variations_attr; ?>`),r.before(p,`<?php foreach ( $attributes as $attribute_name => $options ) : ?>`),c.setAttribute("for",`<?php echo esc_attr( sanitize_title( $attribute_name ) ); ?>`),p.addClass("variations"),c.html(`<?php echo wc_attribute_label( $attribute_name ); ?>`),r.before(u,`<?php if( end( $attribute_keys ) === $attribute_name ) : ?>`),r.after(u,`<?php endif; ?>`),u.addClass("reset_variations"),"select"===m.tagName&&(e=o.wpAttributesToObject(m,["id"]),m.replaceWith(pgCreate(`<?php 
ob_start();
wc_dropdown_variation_attribute_options(
    array(
        'options'   => $options,
        'attribute' => $attribute_name,
        'product'   => $product,
    )
);
$dropdown_html = new PG_HTML_Inspector( ob_get_clean() );
$dropdown_html->setAttributes( $dropdown_html->findTokenIndex( 'select' ), ${r.getPhpArrayForValues(e,m,!1,!1)});
echo $dropdown_html->getWhole(); 
 ?>`))),r.after(p,`<?php endforeach; ?>`),r.after(p,`<?php do_action( 'woocommerce_after_variations_table' ); ?>`),d.addClass("single_variation_wrap"),l.addClass("woocommerce-variation-add-to-cart"),l.prepend(pgCreate(`<?php do_action( 'woocommerce_before_add_to_cart_button' ); ?>`)),l.append(pgCreate(`<input type="hidden" name="add-to-cart" value="<?php echo absint( $product->get_id() ); ?>" />`)),l.append(pgCreate(`<input type="hidden" name="product_id" value="<?php echo absint( $product->get_id() ); ?>" />`)),l.append(pgCreate(`<input type="hidden" name="variation_id" class="variation_id" value="0" />`)),h&&(e=pgCreate(`<script type="text/template" id="tmpl-variation-template"></script>`),(t=pgCreate(`<script type="text/template" id="tmpl-unavailable-variation-template"></script>`)).append(w),h.moveChildrenToElement(e),h.append(e),h.append(t),g.addClass("woocommerce-variation-description"),g.html(`{{{data.variation.variation_description}}}`),_.addClass("woocommerce-variation-price"),_.html(`{{{data.variation.price_html}}}`),f.addClass("woocommerce-variation-availability"),f.html(`{{{data.variation.availability_html}}}`)),a.append(pgCreate(`<?php do_action( 'woocommerce_after_variations_form' ); ?>`))),x&&(s&&x?x.replaceWith(pgCreate(`<?php ${A} ?>`)):(x.addClass("quantity"),x.prepend(pgCreate(`<?php do_action( 'woocommerce_before_quantity_input_field' ); ?>`)),x.append(pgCreate(`<?php do_action( 'woocommerce_after_quantity_input_field' ); ?>`)),(e=x.findOne("input")).addClass("qty"),(t=e.findOne("label"))&&(t.setAttribute("for",`<?php echo esc_attr( $input_id ); ?>`),t.html(`<?php echo esc_attr( $label ); ?>`)),e.setAttribute("type",`number`),e.setAttribute("id",`<?php echo esc_attr( $input_id ); ?>`),e.addClass(`<?php echo esc_attr( join( ' ', (array) $classes ) ); ?>`),e.setAttribute("step",`<?php echo esc_attr( $step ); ?>`),e.setAttribute("min",`<?php echo esc_attr( $min_value ); ?>`),e.setAttribute("max",`<?php echo esc_attr( 0 < $max_value ? $max_value : '' ); ?>`),e.setAttribute("name",`<?php echo esc_attr( $input_name ); ?>`),e.setAttribute("value",`<?php echo esc_attr( $input_value ); ?>`),e.setAttribute("title",`<?php echo esc_attr_x( 'Qty', 'Product quantity input tooltip', 'woocommerce' ); ?>`),e.hasAttribute("size")||e.setAttribute("size",`4`),e.setAttribute("placeholder",`<?php echo esc_attr( $placeholder ); ?>`),e.setAttribute("inputmode",`<?php echo esc_attr( $inputmode ); ?>`))),k.setAttribute("type","submit"),k.setAttribute("name","add-to-cart"),k.setAttribute("value",`<?php echo esc_attr( $product->get_id() ); ?>`),k.addClass("single_add_to_cart_button"),k.html(`<?php echo esc_html( $product->single_add_to_cart_text() ); ?>`),r.after(k,`<?php do_action( 'woocommerce_after_add_to_cart_button' ); ?>`)},this,[])}}}}class PgWooActionTabs extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-product-tabs","Product Tabs",null,function(e){e.hasAttribute(a.attribute)&&t.process(e)},{"wc-product-tabs-type":{type:"select",name:"Layout",default_value:"tabs",action:"element_attribute",options:[{key:"tabs",name:"Tabs"},{key:"accordion",name:"Accordion"}],helptext:`<p>Select the layout for the tabs:</p>
<ul>
<li><b>Tabs</b><pre>
Tab list
   Tab 1 - Tab 2 - Tab 3
Panels
   Panel 1 - Panel 2 - Panel 3   
</pre></li>
<li><b>Accordion</b><pre>
Panel 1
   Header
   Content
Panel 2
   Header
   Content
...
</pre></li>
</ul>`},"wc-product-tabs-tabs":e.wooGetSelectorField("Tab List",`<p>The element that contains the tabs. The first child element will be used as the repeated tab template. Other child element will not be exported. Important, select the parent element that contains tabs, not the first tab itself.</p>`,!1,{selector_assign_name:"Tab List",show_if:"!wc-product-tabs-type==accordion"}),"wc-product-tabs-panel":e.wooGetSelectorField("Repeated panel",`<p>The element repeated for each tab panel.</p>`,!1,{selector_assign_name:"Repeated Panel",show_if:"!wc-product-tabs-type==accordion"}),"wc-product-tabs-panel-content":e.wooGetSelectorField("Panel content",`<p>The element that contains the panel content, if different from the Repeated Panel element.</p>`,!1,{selector_assign_name:"Panel Content",show_if:"!wc-product-tabs-type==accordion"}),"wc-product-tabs-nojs":{type:"checkbox",name:"Do not use WooCommerce JavaScript",action:"element_attribute",value:"true",helptext:`<p>Check this field if you do not want to use default WooCommerce JavaScript code for tabs (for example, if you are using Bootstrap tabs). Disabling the default code is accomplished by not adding wc-tabs, panel and wc-tab classes to the tab elements.</p>`},"wc-product-tabs-accordion-panel":e.wooGetSelectorField("Repeated panel",`<p>The element that contains the panel header and the panel content. This element will be repeated for each panel.</p>`,!1,{selector_assign_name:"Repeated Panel",show_if:"wc-product-tabs-type==accordion"}),"wc-product-tabs-accordion-header":e.wooGetSelectorField("Panel header",`<p>The accordion panel header.</p>`,!1,{selector_assign_name:"Panel Header",show_if:"wc-product-tabs-type==accordion"}),"wc-product-tabs-accordion-header-text":e.wooGetSelectorField("Panel header label",`<p>The element for displaying the header label, if different from the Panel header itself.</p>`,!1,{selector_assign_name:"Panel Header Label",show_if:"wc-product-tabs-type==accordion"}),"wc-product-tabs-accordion-content":e.wooGetSelectorField("Panel content",`<p>The content part of the panel. In accordion, this is the element that is shown and hidden.</p>`,!1,{selector_assign_name:"Panel Content",show_if:"wc-product-tabs-type==accordion"}),"wc-product-tabs-accordion-content-body":e.wooGetSelectorField("Panel content body",`<p>The element that displays the actual content of the panel, if different from the Panel content.</p>`,!1,{selector_assign_name:"Panel Content Body",show_if:"wc-product-tabs-type==accordion"})});return this.addTemplateSection(!0,!0,!0,"single-product/tabs/tabs"),a.addMeta({helptext:`Display product tabs.`,helplink:"product-tabs"}),super.getAction()}process(i){var r=this.f,s=this.p,e=this.a;if(!super.process(i))return!1;var l=i.getAttribute("wc-product-tabs-type")||"tabs",p=!0;if("tabs"===l){var c=r.wooGetPgelBySelector(e,i,"wc-product-tabs-tabs",!0),u=r.wooGetPgelBySelector(e,i,"wc-product-tabs-panel",!0),m=r.wooGetPgelBySelector(e,i,"wc-product-tabs-panel-content",!1)||u,d="true"!==i.getAttribute("wc-product-tabs-nojs");if(!c||!u)return}else{var h=r.wooGetPgelBySelector(e,i,"wc-product-tabs-accordion-panel",!0),t=r.wooGetPgelBySelector(e,i,"wc-product-tabs-accordion-header",!0),g=r.wooGetPgelBySelector(e,i,"wc-product-tabs-accordion-header-text",!1)||t,_=r.wooGetPgelBySelector(e,i,"wc-product-tabs-accordion-content",!0),m=r.wooGetPgelBySelector(e,i,"wc-product-tabs-accordion-content-body",!1)||_;if(!h||!t||!_)return}var f,w,e=`<?php
defined( 'ABSPATH' ) || exit;

$product_tabs = apply_filters( 'woocommerce_product_tabs', array() );

global $product;

if ( ! empty( $product_tabs ) ) : ?>

__CODE__

<?php endif; ?>
`;"accordion"===l&&i===h&&(e=e.replace("__CODE__",`
<?php foreach ( $product_tabs as $key => $product_tab ) : ?>

__CODE__

<?php endforeach; ?>                    
                    `)),(f="tabs"===l?(d&&c.addClass("wc-tabs"),c.getAttribute("role")||c.setAttribute("role","tablist"),c.first()):t)&&this.saveOrUseTemplate(i,"single-product/tabs/tabs",e,"woocommerce_output_product_data_tabs();")&&(i.addClass("woocommerce-tabs"),i.addClass("wc-tabs-wrapper"),w=function(e,t,a){var o=r.wpGuessActiveClass(e,null);return o&&(s.before(a=a||t,`<?php $product_tab_first = true; ?>`),s.after(a,`<?php $product_tab_first = false; ?>`),t.removeClass(o),t.addClass(`<?php if($product_tab_first) echo '${o}'; ?>`)),o},s.addToChanges(function(){s.resetAfterMap();var e="a"===f.tagName||"button"===f.tagName?f:f.findOne("a,button");if("tabs"===l){var t=c.children.slice(0);c.removeAllChildrenExcept(f),w(t,f)||e!==f&&w(f.parent.find("a,button"),e,f),s.before(f,`<?php foreach ( $product_tabs as $key => $product_tab ) : ?>`),s.after(f,`<?php endforeach; ?>`),w(u.parent.children,u),s.before(u,`<?php foreach ( $product_tabs as $key => $product_tab ) : ?>`),s.after(u,`<?php endforeach; ?>`)}else if(u=_,w(h.parent.children,h),i!==h){if(p)for(var a=h.next();a;)a.isElement&&s.addToChanges(function(e){e.detach()},this,[a],"end"),a=a.next();s.before(h,`<?php foreach ( $product_tabs as $key => $product_tab ) : ?>`),s.after(h,`<?php endforeach; ?>`)}f.addClass(`<?php echo esc_attr( $key ) . '_tab'; ?>`),f.setAttribute("id",`tab-title-<?php echo esc_attr( $key ); ?>`),f.getAttribute("role")||f.setAttribute("role","tab"),f.setAttribute("aria-controls",`tab-<?php echo esc_attr( $key ); ?>`),(e?("a"===e.tagName&&e.setAttribute("href",`#tab-<?php echo esc_attr( $key ); ?>`),e):g||f).html(`<?php echo wp_kses_post( apply_filters( 'woocommerce_product_' . $key . '_tab_title', $product_tab['title'], $key ) ); ?>`);var o,r,n=u.getAttr("id");n&&(r=o=null,f.walkSelfAndChildren(function(e){if(e.isElement)for(var t=e.getAttrList(),a=0;a<t.length;a++)if(t[a].value==="#"+n)return o=t[a].name,r=e,!1;return!0}),r)&&r.setAttribute(o,`#tab-<?php echo esc_attr( $key ); ?>`),"tabs"===l&&(u.addClass(`woocommerce-Tabs-panel`),u.addClass(`woocommerce-Tabs-panel--<?php echo esc_attr( $key ); ?>`),d&&u.addClass("panel"),d)&&u.addClass("wc-tab"),u.setAttribute("id",`tab-<?php echo esc_attr( $key ); ?>`),u.getAttribute("role")||u.setAttribute("role","tabpanel"),u.setAttribute("aria-labelledby",`tab-title-<?php echo esc_attr( $key ); ?>`),(m||u).html(`<?php
				if ( isset( $product_tab['callback'] ) ) {
					call_user_func( $product_tab['callback'], $key, $product_tab );
				}
				?>`),i.append(pgCreate(`<?php do_action( 'woocommerce_product_after_tabs' ); ?>`))},this,[]))}}class PgWooActionTabDescription extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-product-tab-description","Product Tab Description",null,function(e){e.hasAttribute(a.attribute)&&t.process(e)},{"wc-product-tab-description-heading":e.wooGetSelectorField("Heading",`<p>The element for displaying the heading.</p>`,!1,{selector_assign_name:"Desc. Tab Heading"}),"wc-product-tab-description-content":e.wooGetSelectorField("Content",`<p>The element for displaying the content.</p>`,!1,{selector_assign_name:"Desc. Tab Content"})});return this.addTemplateSection(!0,!0,!0,"single-product/tabs/description"),this.allowed_on=function(e){return!e.closest("p")||(this.allowed_on_msg=a.name+" should not be added on or inside a P element because the description text is wrapped with a P element.",!1)},a.addMeta({helptext:`Define product description tab.`,helplink:"product-tab-description"}),super.getAction()}process(e){var t=this.f,a=this.p,o=this.a;if(!super.process(e))return!1;var r=t.wooGetPgelBySelector(o,e,"wc-product-tab-description-heading",!1),n=t.wooGetPgelBySelector(o,e,"wc-product-tab-description-content",r);(n=r?n:n||e)&&this.saveOrUseTemplate(e,"single-product/tabs/description",`<?php
defined( 'ABSPATH' ) || exit;

global $post, $product;

$heading = apply_filters( 'woocommerce_product_description_heading', __( 'Description', 'woocommerce' ) );

?>
`,null)&&a.addToChanges(function(){a.resetAfterMap(),r&&(a.before(r,`<?php if ( $heading ) : ?>`),a.after(r,`<?php endif; ?>`),r.html(`<?php echo esc_html( $heading ); ?>`)),n.html(`<?php the_content(); ?>`)},this,[])}}class PgWooActionTabInfo extends PgWooProductAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-product-tab-info","Product Tab Add. Info",null,function(e){e.hasAttribute(a.attribute)&&t.process(e)},{"wc-product-tab-info-heading":e.wooGetSelectorField("Heading",`<p>The element for displaying the heading.</p>`,!1,{selector_assign_name:"Info. Tab Heading"}),"wc-product-tab-info-content":e.wooGetSelectorField("Content",`<p>The element for displaying the content.</p>`,!1,{selector_assign_name:"Info. Tab Content"})});return this.addTemplateSection(!0,!0,!0,"single-product/tabs/additional-information"),a.addMeta({helptext:`Define product information tab.`,helplink:"product-tab-additional-information"}),super.getAction()}process(e){var t,a,o=this.f,r=this.p,n=this.a;return!!super.process(e)&&(t=o.wooGetPgelBySelector(n,e,"wc-product-tab-info-heading",!1),(a=o.wooGetPgelBySelector(n,e,"wc-product-tab-info-content",!1)||e)?!!this.saveOrUseTemplate(e,"single-product/tabs/additional-information",`<?php
defined( 'ABSPATH' ) || exit;

global $post, $product;

$heading = apply_filters( 'woocommerce_product_additional_information_heading', __( 'Additional information', 'woocommerce' ) );

?>
`,null)&&void r.addToChanges(function(){r.resetAfterMap(),t&&(r.before(t,`<?php if ( $heading ) : ?>`),r.after(t,`<?php endif; ?>`),t.html(`<?php echo esc_html( $heading ); ?>`)),a.detachAllChildren(),a.html(`<?php do_action( 'woocommerce_product_additional_information', $product ); ?>`)},this,[]):void 0)}}class PgWooActionCatImage extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-cat-image","Category image",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{});return a.addMeta({helptext:`Show the category image.`,helplink:"category-image"}),super.getAction()}process(t){var a=this.f,o=this.p;this.a;if(!super.process(t))return!1;o.addToChanges(function(){o.resetAfterMap();var e=a.wpAttributesToObject(t,["src","sizes","srcset","width","height","alt"]);o.before(t,`<?php ob_start(); woocommerce_subcategory_thumbnail( $term ); $image_html = ob_get_clean(); ?>`),o.before(t,`<?php if( $image_html ) : ?>`),o.after(t,`<?php endif; ?>`),t.replaceWith(pgCreate(`<?php 
$image_inspector = new PG_HTML_Inspector( $image_html ); 
$image_inspector->setAttributes( $image_inspector->findTokenIndex( 'img' ), ${o.getPhpArrayForValues(e,t,!1,!1)});
echo $image_inspector->getWhole(); 
?>`))},this,[])}}class PgWooActionCatLink extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-cat-link","Category link",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{});return a.addMeta({helptext:`Add the link to the category to the A (link) element.`,helplink:"category-link"}),super.getAction()}process(e){this.f;var t=this.p;this.a;if(!super.process(e))return!1;t.addToChanges(function(){e.setAttribute("href",`<?php echo esc_url( get_term_link( $term, 'product_cat' ) ); ?>`)},this,[])}}class PgWooActionCatName extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-cat-name","Category name",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{});return a.addMeta({helptext:`Display the category name in the content of the element.`,helplink:"category-name"}),super.getAction()}process(e){this.f;var t=this.p;this.a;if(!super.process(e))return!1;t.addToChanges(function(){e.html(`<?php echo esc_html( $term->name ); ?>`)},this,[])}}class PgWooActionCatDescription extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-cat-description","Category description",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{});return a.addMeta({helptext:`Display the category description in the content of the element.`,helplink:"category-description"}),super.getAction()}process(e){this.f;var t=this.p;this.a;if(!super.process(e))return!1;t.addToChanges(function(){e.html(`<?php echo esc_html( term_description( $term ) ); ?>`)},this,[])}}class PgWooActionCatCount extends PgWooAction{getAction(){var e=this.f,t=this,a=this.a=e.addTag("wc-cat-count","Category count",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-cat-count-text":e.wooGetSelectorField("Show count in",`<p></p>`,!1,{selector_assign_name:"Show Count Text"})});return a.addMeta({helptext:`Display the number of products in the category.`,helplink:"category-count"}),super.getAction()}process(e){var t=this.f,a=this.p,o=this.a;if(!super.process(e))return!1;var r=t.wooGetPgelBySelector(o,e,"wc-cat-count-text",!1)||e;a.addToChanges(function(){a.resetAfterMap(),a.before(e,`<?php if( $term->count > 0 ) : ?>`),a.after(e,`<?php endif; ?>`),r.html(`<?php echo esc_html( $term->count ); ?>`)},this,[])}}class PgWooActionCats extends PgWooAction{getAction(){var r=this.f,t=this,a=this.a=r.addTag("wc-cats","Show Categories",null,function(e){if(e.hasAttribute(a.attribute))return t.process(e)},{"wc-cats-mode":{type:"select",name:"Show",action:"element_attribute",default_value:"all",options:[{key:"all",name:"All categories"},{key:"sub",name:"Subcategories"},{key:"list",name:"List ids"}],helptext:`<p>Which categories to show?</p>`},"wc-cats-parent":{type:"text",name:"Parent id",action:"element_attribute",placeholder:"0, empty or id",helptext:`<p>The id of the parent category. Leave empty to display children of the current category. Use 0 to display the top level categories.</p>`,show_if:"wc-cats-mode==sub"},"wc-cats-list":{type:"text",name:"List of ids or slugs",action:"element_attribute",placeholder:"cat1, cat2, cat3",helptext:`<p>The list of ids or slugs of categories to display, comma separated. Note, if you are using @block attributes or functions, only slugs are supported.</p>`,show_if:"wc-cats-mode==list"},"wc-cats-options":{type:"label",name:"Options",action:"element_attribute",attribute:"wc-cats-structure",class:"pg-action-info-label"},"wc-cats-order":{type:"select",name:"Order by",action:"element_attribute",default_value:"name ASC",options:[{key:"name ASC",name:"name - Up"},{key:"name DESC",name:"name - Down"},{key:"slug ASC",name:"slug - Up"},{key:"slug DESC",name:"slug - Down"},{key:"id ASC",name:"id - Up"},{key:"id DESC",name:"id - Down"},{key:"description ASC",name:"description - Up"},{key:"description DESC",name:"description - Down"},{key:"count ASC",name:"count - Up"},{key:"count DESC",name:"count - Down"},{key:"meta_value ASC",name:"meta_value - Up"},{key:"meta_value DESC",name:"meta_value - Down"}],show_if:"!wc-cats-mode==list",helptext:`<p>How to order the displayed terms.</p>`},"wc-cats-meta-name":{type:"text",name:"Meta field name",action:"element_attribute",show_if:"wc-cats-order==meta_value ASC||meta_value DESC",validate:r.required,helptext:`<p>Enter the name of a term field that will be used for ordering the terms.</p>`,options:r.wpInsight.getLiveFieldsList},"wc-cats-meta-num":{type:"checkbox",name:"Meta value is numeric",action:"element_attribute",value:"true",empty_attribute:!0,show_if:"wc-cats-order==meta_value ASC||meta_value DESC",helptext:`<p>Are values of this field numbers?</p>`},"wc-cats-hide-empty":{type:"checkbox",name:"Hide empty",action:"element_attribute",value:"true",negvalue:"false",default_value:"true",helptext:`<p>Don't show terms that are not associated with any posts. For example, not showing empty categories.</p>`},"wc-cats-range":{type:"text",name:"Range of items to show",action:"element_attribute",placeholder:r.forExample("2 or 0-5 (0 is first)"),validate:r.validateRangeValue,helptext:`<p>Display only certain terms. Use number - for example 2, or range - for example 0-5. 0 is the first element.</p><p>This is useful when having to display terms in fixed positions on the page, for example in CSS grid items. For example, we can display the first five terms (0-4) in one grid cell and the rest (5-99) in another.</p><p>Supports @block:attribute notation to use attribute values of dynamic blocks. For example: <code>0-@block:how_many</code>.</p>`},"wc-cats-continue":{type:"checkbox",name:"Continue previous query",action:"element_attribute",value:"true",empty_attribute:!0,show_if:function(e,t){return null!==t.getAttr("wc-cats-range")},helptext:`<p>This is useful in connection with using the Range of items to show. Instead of fetching the terms from the database again we can just continue displaying a different range of terms that were returned by the preceeding Site Terms action.</p><p>Note, using this without actually having a preceeding Site Terms action can lead to a PHP error.</p>`},"wc-cats-structure":{type:"label",name:"Display structure",action:"element_attribute",attribute:"wc-cats-structure",class:"pg-action-info-label",helptext:`<p>By default, the main element is repeated for all returned categories.</p><p>You can customize the display structure by setting:</p>
<ul>
<li><b>The categories container</b> element, that is only shown if any categories are returned.</li>
<li><b>Repeated category</b> element, within the container, that is repeated for each displayed category.</li>
<li><b>Show if empty</b> element that is shown if no categories are found. This element must be on the same level as the container element.</li>
</ul>
<p>Take a look at the example:</p>
<pre>
section              &lt;- The main element 
  h2 Categories
  div.container      &lt;- Categories container
    div.row
      div.item       &lt;- Repeated category
        a.link
          span.name  &lt;- Category name
          img        &lt;- Image...
  div.empty          &lt;- Show if no categories are found
    p No categories!
</pre>`},"wc-cats-items":{type:"selector",name:"Categories container",action:"element_attribute",get_selector_options:function(e,t,a,o){return r.wpGetSelectorOptions(t,{},a,o)},selector_assign_name:"Categories Container",selector_info:`Select the element that contains the terms.`,placeholder:r.defaultValue("current element"),validate:r.wpValidateSelector,helptext:`<p>Choose the element that contains the categories. This element will only be displayed if any categories are found.</p>`},"wc-cats-item":{type:"selector",name:"Repeated Category",action:"element_attribute",placeholder:r.defaultValue("current element"),selector_assign_name:"Repeated Category",get_selector_options:function(e,t,a,o){return r.wpGetSelectorOptions(t,{},a,o)},selector_info:`Select the element that will be repeated for each category.`,validate:function(e,t,a){return r.wpValidateSelector(e,t,a)},helptext:`<p>Choose the element that will be repeated for each category.</p>`},"wc-cats-empty":{type:"selector",name:"Show if empty",action:"element_attribute",get_selector_options:function(e,t,a,o){return r.wpGetSelectorOptions(t,{},a,o)},selector_assign_name:"Show If Empty",selector_info:`Select the element that will be shown if no categories are found.`,validate:r.wpValidateSelector,helptext:`<p>Select the element that will be shown if no categories are found. This element should be on the same level as the container element.</p>`}});return a.addMeta({helptext:`Loop through selected categories.`,helplink:"show-categories"}),super.getAction()}process(t){var e=this.f,a=this.p,o=this.a;if(!super.process(t))return!1;var r,n,i,s,l,p,c,u,m,d="product_cat";d&&(r={taxonomy:d},n=(t.getAttr("wc-cats-order")||"name ASC").split(" "),r.orderby=n[0],r.order=n[1]||"ASC","meta_value"===r.orderby&&((n=t.getAttr("wc-cats-meta-name"))?(r.meta_key=n,t.hasAttr("wc-cats-meta-num")&&(r.orderby="meta_value_num")):r.orderby="name"),n=t.getAttr("wc-cats-mode")||"all",i=t.getAttr("wc-cats-parent")||"","sub"===n?r.parent=""===i||null===i?"get_queried_object_id()":"0"===i?0:`${e.wpGetClass("PG_Helper")}::getTermIDFromSlug( ${e.quoteParam(e.evaluateBlockAttrsInParam(i))}, ${e.quoteParam(d)} )`:"list"===n&&((i=t.getAttr("wc-cats-list")||"").match(/^[0-9\s\,]*$/)?(r.include=e.wpCommaListToPHPArray(i,null,!1,{numeric:!0}),r.orderby="include"):(r.slug=`${e.wpGetClass("PG_Helper")}::getArray( ${e.wpCommaListToPHPArray(e.evaluateBlockAttrsInParam(i))} )`,r.orderby="slug__in"),r.order="ASC"),s=e.wpGetPgelFromSelector(t,t.getAttr("wc-cats-items"),null),l=e.wpGetPgelFromSelector(t,t.getAttr("wc-cats-item")),p=e.wpGetPgelFromSelector(t,t.getAttr("wc-cats-empty")),s=(s=l||!s||(l=s.getFirstChild())?s:null)||t,o="a"===(l=l||t).tagName?l:l.findOne("a"),o=(o=e.wpGetPgelFromSelector(l,t.getAttr("wc-cats-item-link"),o))||l,l.setData("wp-repeated-item",!0),o.setData("wp-import",!0),r.hide_empty="false"!==t.getAttr("wc-cats-hide-empty"),c=t.hasAttr("wc-cats-continue"),u="$term_i",m=e.parseRangeValue(t.getAttr("wc-cats-range"),u),a.addToChanges(function(){a.resetAfterMap();var e=`get_terms( ${a.getPhpArrayForValues(r,t,!1,!1,{parent:{numeric:!0}})} )`;a.before(t,`<?php $terms = ${e=c?`isset( $terms ) ? $terms : `+e:e} ?>`),a.before(s,`<?php if( !empty( $terms ) && !is_wp_error( $terms ) ) : ?>`),m&&a.before(l,`<?php ${u} = 0; ?>`),a.before(l,`<?php foreach( $terms as $term ) : ?>`),m&&(a.before(l,m),a.after(l,`<?php endif; ?>`)),m&&a.after(l,`<?php ${u}++; ?>`),a.after(l,`<?php endforeach; ?>`),a.after(s,`<?php endif; ?>`),p&&(a.before(p,`<?php if( empty( $terms ) ) : ?>`),a.after(p,`<?php endif; ?>`))},this,[]))}}$(function(){$("body").one("pinegrow-ready",function(D,m){function n(e){return s[e]||null}var d=new PgFramework("wordpress.pinegrow","WordPress"),l=(d.show_in_action_tab="CMS",m.addFramework(d),d.default="PGTC"===window.pgf.product,d.not_main_types=!0,d.trial_start_message="7 day trial of WordPress theme builder was started. WordPress theme builder is a premium add-on.",d.trial_expired_message="Your Pinegrow edition does not include The WordPress theme builder. Please purchase the product to continue using it. In Purchase and Activate dialog, click on Upgrade to WordPress Edition under STEP 2. Upgrade Pinegrow.",d.product="WP",d.has_actions=!0,d.wp_data={has_theme_settings:!1},d.wpBlockControlsVersion="3",d.wpServerRendererVersion="3",d.wpPGHelperVersion=2,d.wpPGBlocksVersion=3,d.wpGetClass=function(e){return{PG_Helper:"PG_Helper_v"+d.wpPGHelperVersion,PG_Blocks:"PG_Blocks_v"+d.wpPGBlocksVersion}[e]||e},!pgIsLive()&&isApp()||(d.wpRemoteResources=new PgPreloadedResources("frameworks/pgwpresources/resources/"),d.wpRemoteResources.preload(["css/wp-webflow.css",`pg-blocks-controls-${d.wpBlockControlsVersion}.css`,`pg-blocks-controls-${d.wpBlockControlsVersion}.js`,"wp_pg_helpers.php","wp_pg_blocks_helpers.php","wp_pg_pagination.php","wp_simple_form_mailer.php","wp_smart_navwalker.php","wc_pg_helpers.php","bootstrap/wp_bootstrap4_navwalker.php","bootstrap/wp_bootstrap4_pagination.php","bootstrap/wp_bootstrap_navwalker.php","bootstrap/wp_bootstrap_pagination.php"])),d.isWCEnabled=function(){return"undefined"!=typeof wc_addon&&wc_addon.isActive()},d.setScriptFileByScriptTagId("plugin-pg-wordpress","frameworks/pgwp/pgwp.js"),d.detect=function(e){var t=m.getCurrentProject();return!(!t||!d.isWPEnabledForProject(t))||!(!(t=e.sourceNode.findOne("html"))||!t.hasAttr("wp-site")&&!t.hasAttr("wp-template"))},{path:require("path"),fs:require("fs")}),s={},h=(d.getWPAction=n,d.wpInnerFunctionsOffset=11,d.wpInnerFunctionsCount=24,d.wpCurrentApi=null,d.wpCurrentLiveData=null,d.wpExportWithIds=!1,d.wpAutoImportLiveData="1"===m.getSetting("wp-auto-import-live-data","0"),d.wpLiveDataHelpUrl="https://pinegrow.com/docs/wordpress/live-preview/",d.wpIsApiAvailable=function(){return void 0!==PgWordpressApi},d.wpGetApi=function(){return d.wpCurrentApi||(d.wpCurrentApi=new PgWordpressApi),d.wpCurrentApi},d.wpGetLiveData=function(){return d.wpCurrentLiveData||(d.wpCurrentLiveData=new PgWordPressLiveData(d.wpGetApi())),d.wpCurrentLiveData},d.wpRefreshApiAndLiveData=function(){d.wpCurrentApi=null,d.wpCurrentLiveData=null},d.wpGetDefaultBlocksCategory=function(){return d.current_theme_info?.options.block_category||"text"},d.wpRegisterBlocksCategory=function(e,t,a){d.wpInsight.addBlockCategory(e);var o={slug:e,title:t||e},o=(a&&(o.icon=a),`
$categories = array_merge( $categories, array( ${d.phpFilter.getPhpArrayForValues(o,null,1,!1,{title:{translate:!0},icon:{translate:!1}})} ) );
`);d.addToFunctionsPhpSection("Register Blocks Category",o,!0,!1,!1,`
/* Register Blocks Categories */

function ${d.current_theme_info.slug}_register_blocks_categories( $categories ) {

    // Don't edit anything between the following comments.
    /* Pinegrow generated Register Blocks Category Begin */
    /* Pinegrow generated Register Blocks Category End */
    
    return $categories;
}
add_action( version_compare('5.8', get_bloginfo('version'), '<=' ) ? 'block_categories_all' : 'block_categories', '${d.current_theme_info.slug}_register_blocks_categories');

/* End of registering Blocks Categories */

`)},d.getTypes=function(e,t,a){var o=[];if(!a&&t)for(var r=t.getAttrList(),n=0;n<r.length;n++){var i=r[n].name.charAt(0);"w"!=i&&"c"!=i||(i=s[r[n].name]||!1)&&o.push(i)}return o},d.getActionTypes=function(e){return d.getTypes(null,e)},d.getActionTag=function(e,t,a){void 0===a&&(a=!1);var o=d.getTypes(null,e);if(o.length){for(var r="",n=0;n<o.length;n++)r.length&&(r+=", "),o[n].get_action_tag&&!a?r+=o[n].get_action_tag(e,o[n],t):r+=o[n].short_name||o[n].name;return'<i class="icon icon-WP"></i>&nbsp;'+r}return null},d.getExpressiveActionTag=function(e,t,a,o,r){var n=r?t.name+" ":o+`: `;if(a.length)for(var i=0;i<a.length;i++)0<i&&i===a.length-1?n+=" &amp; ":0<i&&(n+=", "),n+=a[i];return n=r?n:`<span title="${t.name}">${n}</span>`},d.forExample=function(e){return"for example: "+e},d.defaultValue=function(e){return"default: "+e},d.use=function(e){return"use "+e},d.required=function(e,t,a,o,r,n){return a?null:m.getValidationError(o.name,"req")},d.wpValidateSelector=function(e,t,a,o){var r;if(a)return r=null,(r="this"!==a?e.findOne(a):e)?"string"!=typeof o||r.isSelector(o)?void 0:"The element must be &quot;"+o+"&quot;":"Element with this selector is not found."},d.const_end_header="____WP_END_HEADER____",d.const_start_footer="____WP_START_FOOTER____",d.tag_ret_string="ret:string",d.tag_ret_html="ret:html",d.tag_ret_url="ret:url",d.tag_ret_part="ret:part",d.tag_ret_link="ret:link",d.tag_ret_image="ret:image",d.tag_ret_select="ret:select",d.tag_ret_form="ret:form",d.tag_set_content="set:content",d.tag_set_element="set:element",d.tag_set_outer="set:outer",d.tag_set_attr="set:attr",d.tag_set_attr_href="set:href",d.tag_set_attr_src="set:src",d.tag_set_attr_class="set:class",d.tag_set_attr_id="set:id",d.tag_t_post="type:post",d.tag_t_page="type:page",d.tag_t_comment="type:comment",d.tag_t_bookmark="type:bookmark",d.tag_t_author="type:author",d.tag_t_attachment="type:attachment",d.tag_t_user="type:user",d.tag_t_category="type:category",d.tag_t_="type:",d.tag_t_="type:",d.tag_t_="type:",d.tag_t_="type:",d.tag_use_loop="use:loop",d.tag_use_archive="use:archive",d.tag_use_comment="use:comment",d.tag_use_single="use:single",d.tag_use_body="use:body",d.tag_use_article="use:article",d.tag_use_feed="use:feed",d.tag_use_search="use:search",d.tag_use_image="use:image",d.tag_use_condition="use:condition",d.tag_use_site="use:site",d.tag_="",d.tag_="",d.tag_="",d.tag_="",d.template_parts=[],d.required_resources_list={},d.blocks_js_code={},d.blocks_reg_code={},d.insight_data={},new PgWpFilters,new PgWpData,new PgWpPhpFilter(d)),g=(d.phpFilter=h,null),_=null,f=null,G=(d.addTag=function(a,e,t,o,r,n,i,s){var l,p,c,u=new PgComponentType(a,e);return u.selector="["+a+"]",u.code=null,u.attribute=a,u.sections={},(t||r)&&(l={},p=0,t&&("string"==typeof t?(c=t.split("#"),l[a]={type:"text",name:c[0],action:"element_attribute",attribute:a,attribute_keep_if_empty:!0,parameter_order:p++},2==c.length?l[a].placeholder=d.forExample(c[1]).replace("|req","").replace("|trans",""):3==c.length&&(l[a].placeholder=d.defaultValue(c[2]).replace("|req","").replace("|trans","")),0<=t.indexOf("|req")&&(l[a].validate=function(e,t,a,o,r,n){return a?null:m.getValidationError(o.name,"req")},l[a].name=l[a].name.replace("|req","")),0<=t.indexOf("|trans")&&(l[a].translate=!0,l[a].name=l[a].name.replace("|trans",""))):((l[a]=t).parameter_order=p++,t.attribute_keep_if_empty=!0)),r&&$.each(r,function(e,t){(l[e]=t).parameter_name||t.ignore_parameter||(t.parameter_order=p++),"element_attribute"!=t.action||t.attribute||(t.attribute=e),e===a&&(t.attribute_keep_if_empty=!0)}),u.sections={parameters:{name:"Options",fields:l}}),u.return_string_code=i,o&&("function"==typeof o?h.list.push(o):(u.php_function=o,h.list.push(function(e){if(e.hasAttr(u.attribute))return h.toPhpHtmlOrNode(e,o+"("+h.getParams(u,e)+");",u)}),d.addHtmlOrNodeField(u,n,s))),d.addComponentType(u),u.addMeta=function(e){return u.meta=e,u},u.addApplyRenderedCode=function(e){return u.applyRenderedCode=e,u},u.addCode=function(e,t){return u.code=e,t&&(u.empty_placeholder=t),u},u.addNotPlaceable=function(e){return u.not_placeable=e,u},u},d.addHtmlOrNodeField=function(m,e,t,a,o,r){var l;t=t||"element",m.sections||(m.sections={}),m.sections.parameters||(m.sections.parameters={name:"Options",fields:{}}),m.sections.parameters.fields[m.attribute+"-set"]={type:"select",name:"Replace",action:"element_attribute",attribute:m.attribute+"-set",show_empty:!1,options:[{key:"element",name:"Element"},{key:"content",name:"Content"},{key:"before",name:"Insert before"},{key:"after",name:"Insert after"}]},m.wp_has_replace_property=!0,(m.php_function&&m.php_function.startsWith("echo ")||m.return_string_code)&&m.sections.parameters.fields[m.attribute+"-set"].options.push({key:"content-not-empty",name:"Content if not empty"}),t&&(m.sections.parameters.fields[m.attribute+"-set"].default_value=t),e&&m.sections.parameters.fields[m.attribute+"-set"].options.push({key:"href",name:"Href attribute (with esc_url)"}),a&&(m.sections.parameters.fields[m.attribute+"-set"].options.push({key:"attr",name:"Attribute"}),m.sections.parameters.fields[m.attribute+"-set-attr"]={type:"text",name:"Attribute",action:"element_attribute",attribute:m.attribute+"-set-attr",placeholder:d.forExample("title")},"string"==typeof a&&(m.sections.parameters.fields[m.attribute+"-set-attr"].default_value=a),m.sections.parameters.fields[m.attribute+"-set-attr-append"]={type:"select",name:"Append to attribute",action:"element_attribute",attribute:m.attribute+"-set-attr-append",show_empty:!0,options:[{key:"false",name:"No"},{key:"true",name:"Yes - with space"},{key:"nospace",name:"Yes - without space"}],placeholder:d.defaultValue("No")},l=function(e,t,a,o){var r=t.parent();"attr"==e?(pg$Show(r.find(".crsa-field-"+m.attribute+"-set-attr"),"flex"),pg$Show(r.find(".crsa-field-"+m.attribute+"-set-attr-append"),"flex")):(r.find(".crsa-field-"+m.attribute+"-set-attr").hide(),r.find(".crsa-field-"+m.attribute+"-set-attr-append").hide()),"style"==e?(pg$Show(r.find(".crsa-field-"+m.attribute+"-set-style"),"flex"),pg$Show(r.find(".crsa-field-"+m.attribute+"-set-style-mode"),"flex")):(r.find(".crsa-field-"+m.attribute+"-set-style").hide(),r.find(".crsa-field-"+m.attribute+"-set-style-mode").hide())},m.sections.parameters.fields[m.attribute+"-set"].on_changed=function(e,t,a,o,r,n,i,s){l(a,n)},m.sections.parameters.fields[m.attribute+"-set"].on_fields_created=function(e,t,a,o,r,n){l(a,r)}),r&&(m.sections.parameters.fields[m.attribute+"-set"].options.push({key:"style",name:"Set style property"}),m.sections.parameters.fields[m.attribute+"-set-style"]={type:"text",name:"Style property",action:"element_attribute",attribute:m.attribute+"-set-style",placeholder:d.forExample("background-color")},m.sections.parameters.fields[m.attribute+"-set-style-important"]={type:"checkbox",name:"Set <nocaps>!important</nocaps>",action:"element_attribute",attribute:m.attribute+"-set-style-important",empty_attribute:!0,value:"true",show_if:m.attribute+"-set==style"}),(a||r)&&(m.sections.parameters.fields[m.attribute+"-set-get-image"]={type:"checkbox",name:"Get image / media url from id",action:"element_attribute",attribute:m.attribute+"-set-get-image",empty_attribute:!0,value:"true",show_if:m.attribute+"-set==attr||style"},m.sections.parameters.fields[m.attribute+"-set-get-image-size"]={type:"text",name:"Image size",action:"element_attribute",attribute:m.attribute+"-set-get-image-size",show_if:m.attribute+"-set-get-image"}),m.applyRenderedCode=function(e,t,a){var o=e,r=h.getSetValue(e,m);if("content"!=(r="content-not-empty"==(r=t[0].isElement?r:"content")?"content":r)){if("element"!=r)return!1;for(var n=[],i=e.parent.getChildPos(e)+1;i<e.parent.children.length;i++){var s=e.parent.children[i];!s.isElement||s.getAttr("wp-preview")!=m.attribute||1<d.getTypes(null,s).length||n.push(s)}for(i=0;i<n.length;i++)n[i].remove();for(var l=e.getAttrList(),i=0;i<l.length;i++)(l[i].name.startsWith("cms-")||l[i].name.startsWith("wp-")||l[i].name.startsWith("wc-")||l[i].name.startsWith("data-pg-")&&"data-pg-id"!=l[i].name)&&t[0].setAttr(l[i].name,l[i].value);t[0].assignIdAndAddToCatalog(!0);for(var p,r=t[0],c=(o.replaceWith(r),r),i=1;i<t.length;i++)t[i].isElement&&(t[i].assignIdAndAddToCatalog(!0),t[i].setAttr("wp-preview",m.attribute),(p=t[i]).insertAfter(c),c=p);return r}var u="";if(1==t.length)u=t[0].html();else for(var i=0;i<t.length;i++)u+=t[i].toStringOriginal(!0);return o.html(u),!1},m.include_get_rendered_code=!0},d.addComponent=function(e,t,a){var o="wp_comp_"+e.replace(/\s/g,"_").toLowerCase(),o=new PgComponentType(o,e);return o.selector=null,o.code=t,d.addComponentType(o),o},d.parseRangeValue=function(e,t,a){var o=null;if(e){if(e=$.trim(e),e=d.evaluateBlockAttrsInParam(e,"intval($1)"),!d.isPhpValue(e)&&!e.match(/^([0-9]+\-[0-9]+)|([0-9]+)$/))return!1;if(0<=e.indexOf("-")){var r=e.split("-");if(2===r.length){var n=r[0],r=r[1];if(!d.isNumberOrPhpValue(n)||!d.isNumberOrPhpValue(r))return!1;o=`<?php if( ${t} >= ${n} && ${t} <= ${r} ) : ?>`,a&&(a.start=n,a.end=r)}}else{if(!d.isNumberOrPhpValue(e))return!1;o=`<?php if( ${t} == ${e} ) : ?>`,a&&(a.start=e,a.end=e)}}return o},d.validateRangeValue=function(e,t,a){if(!1===d.parseRangeValue(a))return"Use 4 or 2-5 (0 is first)"},d.isPhpValue=function(e){return(e=(e=e.toString().replace(/\%[0-9]+\$/gi,"var")).replace(/\s\(/gi,"ok")).match(/\$[a-z0-9\_]/i)||0<=e.indexOf("(")},d.isNumberOrPhpValue=function(e){switch(typeof e){case"number":return!0;case"string":return e.match(/^\+?\-?[0-9\.]+$/)?!0:this.isPhpValue(e)}return!1},d.wpEscapeSingleQuotes=function(e){return e=e.match(/'/)?(e=(e=(e=(e=e.replace(/\\\\/g,"###PGDD###")).replace(/\\\'/g,"###PGEQ###")).replace(/\'/g,"\\'")).replace(/\#\#\#PGEQ\#\#\#/g,"\\\\\\'")).replace(/\#\#\#PGDD\#\#\#/g,"\\\\"):e}),p=(d.evaluateBlockAttrsInParam=function(e,a){return a=a||"$1",e="string"==typeof e&&0<=e.indexOf("@block:")?e.replace(/@block:([a-zA-Z0-9_\.]+)/gm,function(e,t){return 1===(e=t.split(".")).length?a.replace("$1",d.wpGetClass("PG_Blocks")+`::getAttributeForAction( $args, '${t}' )`):a.replace("$1",`${d.wpGetClass("PG_Blocks")}::getAttributeForAction( $args, '${e[0]}', '${e[1]}' )`)}):e},d.quoteParam=function(e,t,a,o){var r;return null!==e&&("null"!==e||a||!t||"checkbox"!==t.type&&"select"!==t.type&&"hidden"!==t.type)?"true"!==e||a||!t||"checkbox"!==t.type&&"select"!==t.type&&"hidden"!==t.type?"false"!==e||a||!t||"checkbox"!==t.type&&"select"!==t.type&&"hidden"!==t.type?"boolean"==typeof e?e?"true":"false":"number"==typeof e||(t&&t.force_quotes&&(a=!0),d.isPhpValue(e)&&!a)||"'"===e.charAt(0)||t&&t.numeric&&("number"==typeof e||!isNaN(e)&&!isNaN(parseFloat(e)))?e:(r="'"+(e=G(e))+"'",t&&t.translate&&("function"==typeof t.translate&&o?t.translate(t,o):t.translate),t&&t.translate&&e.indexOf("<")<0?"__( "+r+", '"+d.current_theme_info.slug+"' )":r):"false":"true":"null"},d.stringOrArray=function(e,t){var a,o=[],r="",n=!1;if(null===e)return"''";for(var i=0;i<e.length;i++)a=e.charAt(i),!1===n?"'"!=a&&'"'!=a&&"("!=a||(n="("==a?")":a):a==n&&(n=!1),","==a&&!1===n?r.length&&(o.push($.trim(r)),r=""):r+=a;r.length&&(o.push($.trim(r)),r="");for(i=0;i<o.length;i++){var s=!1;"'"!=o[i].charAt(0)&&'"'!=o[i].charAt(0)||(o[i]=o[i].substr(1),s=!0),!o[i].length||"'"!=o[i].charAt(o[i].length-1)&&'"'!=o[i].charAt(o[i].length-1)||(o[i]=o[i].substr(0,o[i].length-1),s=!0),o[i]=d.quoteParam(o[i],t,s)}return 1!=o.length||t&&t.force_array?"array( "+o.join(", ")+" )":o[0]},d.buildParamList=function(e){for(e=e.slice(0);e.length&&"null"==e[e.length-1];)e.pop();var t=e.join(", ");return t=t.length?" "+t+" ":t},d.get_preview_for_action=function(e,t){return p(e,t,!0)},m.addEventHandler("on_before_changes_done",function(e,t,a){var o,r=m.getSelectedPage();r.hasFramework(d)&&"wp-live-data"!==a?.source&&d.wpAutoImportLiveData&&!a?.undoOrRedo&&d.wpGetApi().isApiEnabled()&&(o=new PgCollection,t.forEachElement(function(e){if((e=e.isDeleted?e.getRemovedFromPgel():e)&&e.getPage()===r){var t=e.closest("[cms-post]");if(t){if(d.wpGetLoopStructure(t).rep===t)t=t.parent;else for(var a=t.next();a;)a.hasAttribute("wp-loop-skip")&&o.add(a),a=a.next();o.add(t)}else o.add(e)}}),o.normalize(),o.orderByDocumentPosition(),d.wpShowLiveData(o,!1,t,!1,!1,!0))}),d.on_can_make_change=function(e,t,a,o){var r;return e.getCurrentFrameworkHandlerReturnValue("on_can_make_change")?e.getCurrentFrameworkHandlerReturnValue("on_can_make_change"):(r=t.closest("[wp-loop-skip]"))&&!("remove_action"===a&&"wp-loop-skip"===o?.attribute||"delete_element"===a&&r===t)?new PgEditException(`<p>This element is just a placeholder of a Show Posts item and will be replaced during Live data preview. Instead, edit the first repeated item that is used as a template for all posts.</p>`,"This is just a placeholder",function(a){$('<button class="btn btn-default btn-sm" type="button">Select the first item</button>').on("click",function(e){e.preventDefault();var t=d.wpFindItemForLoopItemPlaceholder(r);t?m.selectElement(t):m.showQuickError("Sorry, unable to find the repeated item."),a.modal("hide")}).insertBefore(a.find(".btn.ok"))}):void 0},d.on_action_show_code_clicked=function(e,t,a,o){b(t,!1,o)},d.on_action_magic_clicked=function(e,t,a,o){d.wpIsApiAvailable()&&(d.wpGetLiveData().setWrapperData(m.getSelectedPage().activeView?.wrapper_data),d.wpShowLiveData(t,!1,null,a,!1))},d.on_action_magic_preview_clicked=function(e,t,a,o){var r=t.clone(!0);return r.removeAttrIfStartsWith("wp-"),m.addActionToElementForPreview(r,a,!1),d.getRenderedWordPressHTML(r,o,d.getThemeInfo(t.document),!0)},function(e,t,a){if(d.resetGlobalThemeObjects(),!e.document)return"";var o=d.getThemeInfo(e.document);if(!o)return"Please set up the theme first by adding WordPress Site action from the Theme Setup section to the top &lt;HTML&gt; element of the page.";var r,n=null,i=e.getPage(),i=(i&&(n=i.url),e=e.clone(!0),pgCreateDocumentNode());if(i.append(e),a){for(;e.children.length;)e.children[0].remove();e.append(pgCreateNodeFromHtml("\n..."))}t&&m.addActionToElementForPreview(e,t,!0),d.in_get_code_preview=!0;try{r=d.parseToPhp(i,!0,o,null,null,n)}catch(e){console.error(e)}if(d.in_get_code_preview=!1,!a){d.beforeGeneratingPhpSections();for(var s=0;s<d.template_parts.length;s++){var l=d.template_parts[s],p=l.only_content?l.pgel.toString("",!0,!1,null,!0,m.getFormatHtmlOptions(),!0,!0):l.pgel.toStringOriginal(!0,m.getFormatHtmlOptions()),l=(l.filter_code&&(p=l.filter_code(p)),l.slug+(l.name?"-"+l.name:"")+".php");r+="\n\n\x3c!-- Template part: "+l+" --\x3e\n"+p}$.each(d.functions_php_sections,function(e,t){t.code.length&&(r+="\n\n\x3c!-- Functions.php section "+e+" --\x3e\n"+t.code)}),$.each(d.blocks_reg_code,function(e,t){r+="\n\n\x3c!-- Block registration "+t.file+" --\x3e\n"+t.code}),$.each(d.blocks_js_code,function(e,t){r+="\n\n\x3c!-- Block JS code "+t.file+" --\x3e\n"+t.code})}return r}),i=null,c="wp-preview-show-selected",u="1"==m.getSetting(c,"1"),w="quickWpPHPPreview";function b(e,t,a){var o,r={title:"WordPress PHP Code Preview (Read-only)",winId:w,pin:!1,focus:!1,key:"wp-php-preview",jade:!1,lint:!1,editable:!1,copy:!0,handleSelect:!1,custom:!0,$target:a},n=pgQuickWindowManager.getWindow(r.winId);t&&n?L():(n||(o=new PgQuickCodeEdit(e,r),r=new PgButtonToolbarItem("icon-267","Show preview for the selected element."),o.editors.toolbar.addItem("settings",r),r.onClick=function(){var e,t=!this.getActive();this.setActive(t),u=t,m.setSetting(c,t?"1":"0"),t&&(e=m.selectedElements.getLastSelected())&&(e=p(e),o.setCustomCode(e)),m.showMode("Show PHP preview for selected element",t)},r.setActive(u),n=o.win),r=d.canUseWP(!0)?e?p(i=e):"Please, select an element first.":d.trial_expired_message,n.view.setCustomCode(r))}{function R(){return pgQuickWindowManager.getWindow(w)}function M(e,o,t){var r=[],n=t?null:o,a=d.getActionTypes(o),i=(a.length&&(r.push({type:"header",label:"Remove action"}),a.forEach(function(e){r.push({label:e.name.replace(" - Smart",""),action:function(){(new PgApi).removeAction(n,e),m.showQuickMessage(`Action <b>${e.name}</b> removed.`)},check:!0})}),r.push({type:"divider"})),r.push({type:"header",label:"Add action"}),[]),s=!0;return d.getActionsSections().forEach(function(e){var a=[],t=e.getComponentTypes();(t=s?t.concat([d.getWPAction("cms-no-export")]):t).forEach(function(t){var e={label:t.name.replace(" - Smart",""),action:function(){var e=new PgApi;t.hasAction(o)?(e.removeAction(n,t),m.showQuickMessage(`Action <b>${t.name}</b> removed.`)):(e.addAction(n,t),m.selectedElements.isSelectedElement(o)||m.selectElement(o),m.showUIPanel("cms"),m.showQuickMessage(`Action <b>${t.name}</b> added.`))},check:function(){return t.hasAction(o)}};(s?r:a).push(e)}),s||i.push({label:e.name,submenu:a}),s=!1}),r.push({label:"More",submenu:i}),r.push({type:"divider"}),r.push({label:"Preview PHP code",class:"action-preview-php-code",kbd:"CMD P",manage_change:!0,action:function(e,t,a,o){b(e)}}),isApp()&&r.push({label:"Copy PHP code",class:"action-copy-php-code",kbd:null,manage_change:!0,action:function(e){copyCodeToClipboard(p(e))}}),r}function H(e){return e.indexOf("://")<0&&0!=e.indexOf("//")}var L=function(){var e=pgQuickWindowManager.getWindow(w);e&&e.destroy()},B=(d.on_page_changed=function(e,t){t&&R()&&(t==i||!u&&i)&&b(i)},d.on_assigned_actions_shown=function(e,t){if("CMS"===t.panel.panel_type)if(m.getCurrentProject()){var a,o=t.pgel;if(o){var r=o.closest("[wp-preview]");if(r&&r!==o)return t.message=`<p>This element was imported from WordPress and it will not be exported. Remove the "Preview" and "Do not export" actions from ${r.getName({short:!0})} to work with the element.</p>`,void(t.show_actions=!1);if((r=o.closest("[wp-no-export],[cms-no-export]"))&&r!==o)return t.message=`<p>This element will not be exported. Remove the Preview action from ${r.getName({short:!0})} to work with the element.</p>`,void(t.show_actions=!1);r=o.closest("[cms-template-part],[wp-include-template-part]");if(r&&r!==o&&!r.hasAttr("cms-template-part-define")&&!r.hasAttr("wp-template-part"))return t.message=`<p>This element is a part of a Reusable Template Part, included on the element ${r.getName({short:!0})}.</p><p>You should edit the element where the template part is defined.</p>`,void(t.show_actions=!1)}!e||!(a=e.sourceNode.findOne("html"))||a.hasAttribute("wp-template")||a.hasAttribute("wp-site")||(t.message='<p>This page is not yet configured for WordPress export. To export this page as a WordPress template or plugin, go to Page settings first.</p><p class="buttons"><button class="pg-button activate-wp-template">Page settings</button></p>',t.show_selector=!1,t.show_actions=!1,t.on_after=function(){t.panel.view.get$Element().find(".activate-wp-template").on("click",function(e){e.preventDefault(),pgf.use_selectors&&(a.getAttr("data-pg-sel")||a.setAttr("data-pg-sel","html"),a.getAttr("data-pg-name")||a.setAttr("data-pg-name","HTML element")),(new PgApi).addAction(a,n("wp-template")),m.selectElement(a)})})}else t.message=`<p>Please open the site as a Project in order to create a WordPress theme.</p><p class="buttons"><button class="pg-button goto-project">Go to Project panel</button></p>`,t.show_actions=!1,t.on_after=function(){t.panel.view.get$Element().find(".goto-project").on("click",function(e){e.preventDefault(),m.showUIPanel("project",!0,!1,!0)})}},m.addEventHandler("on_page_is_being_changed",function(e,t){d.on_page_changed(e,t.getFirst())}),d.on_get_menu_commands=function(e,t,a){"PGTC"===pgf.product&&a.push({icon:"icon-WP",tooltip:"Add or remove WordPress actions",action:function(e,t){var a=M(0,e,!1);new CrsaContextMenu(a,t).showForElement(t,null,8)}})},d.on_build_actions_menu=function(e,t,a,o){var r=M(0,a,o);t.unshift({type:"divider"}),t.unshift({label:"WordPress",submenu:r})},d.on_can_add_action=function(e,t,a,o){d.areActionsCompatible(t,a)||(o.can_add=!1,a.mapAction?m.showAlert(`<p>Action <b>${a.name}</b> is not compatible with one or more <b>regular actions</b> that are already on the element.</p><p>Please remove these actions and try again.</p>`,"Incompatible actions"):m.showAlert(`<p>Action <b>${a.name}</b> is not compatible with one or more <b>Smart actions</b> that are already on the element.</p><p>Please remove these actions and try again.</p>`,"Incompatible actions"))},d.on_key_pressed=function(e,t,a){if(!a.done&&(!e||e.hasFramework(d)))return 0&&","===t.key&&t.pgCtrlKey?(d.showWordPressSiteSetupDialog(),a.done=!0,!0):80==t.which&&t.pgCtrlKey?(b(m.selectedElements.getLastSelected(),!0),a.done=!0,!0):"m"===t.key&&t.pgCtrlKey?(F(),a.done=!0,!0):(("i"===t.key||"I"===t.key)&&a.ctrl&&d.wpIsApiAvailable()&&(t.shiftKey&&(d.wpRefreshApiAndLiveData(),m.showQuickMessage("Cached data refreshed.")),d.wpGetLiveData().setWrapperData(m.getSelectedPage().activeView?.wrapper_data),d.wpShowLiveData(m.getSelectedPage().sourceNode).then(function(){})),!1)},m.addEventHandler("on_selected_elements_changed",function(){var e=m.selectedElements.getLastSelected();e&&u&&R()&&b(e)}),m.addEventHandler("on_page_frameworks_changed",function(e){m.getAllPages().forEach(function(t){t.hasFramework(d)&&t.getPageViews().forEach(function(e){e.wpHasHeaderControls||B(t,e)})})}),m.addEventHandler("on_wp_quick_export_done",async function(e){e.getPageViews().forEach(function(e){e.wrapper_url&&e.reloadPage(null,null,!0)})}),m.addEventHandler("on_wp_export_done",async function(e){var t=m.getSelectedPage();t&&t.getPageViews().forEach(function(e){e.wrapper_url&&e.reloadPage(null,null,!0)})}),m.addEventHandler("on_auto_detect_wrapper_selector",function(e,t){var a;d.isWPEnabledForProject()&&((a=e.sourceNode.findOne("html"))&&a.hasAttribute("wp-template-no-export")&&a.findOne("[cms-block]")?t.selector="blocks_in_content":t.selector="body_replace")}),d.wpGetWrapperSelectorDescription=function(e,t){switch(e){case"body_replace":return"[RB]";case"auto_detect":return"[AUTO]";case"blocks_in_content":return"[BL]";default:return t||"[SEL]"}},function(o,r){function n(e){var t,a="",a=e&&(e.name||e.url)&&"_none_"!==e?.url?(t=e.name||e.url.split("/").filter(function(e){return!!e}).pop(),e.selector&&(t+=" "+d.wpGetWrapperSelectorDescription(e.selector)),`<span style="background: var(--pg-blue);
    color: white;
    padding: 1px 6px;
    border-radius: 3px;">`+t):`<span style="padding: 0px 6px;">Preview...`;return a+='<icon class="icon icon-down" style="vertical-align: middle;margin-left:2px;color:inherit;"></icon></span>'}var i=new PgButtonToolbarItem(n(r?.wrapper_data),"Import live data from WordPress site and preview the edited document on the WordPress site.");d.wpIsApiAvailable()&&r.addHeaderToolbarItem("wp",i),r.wpHasHeaderControls=!0,i.onClick=async function(){var e,t=d.wpGetApi(),t=new PgWordPressApiUrlSelector(t,o,d,r),a=await t.showMenu(i.$element);return a&&(void 0===(e=r.wrapper_data||{})?.selector&&(e.selector="auto_detect"),"selector"in a&&(e.selector=a.selector),e=(a.url,{...e,...a}),t.isNone(e.url)||!e.url?(i.$element.get(0).innerHTML=n(),await m.openPageViewInWrapper(r,null,e.selector,e)):(i.$element.get(0).innerHTML=n(e),await m.openPageViewInWrapper(r,e.url,e.selector,e),t.addToRecent(e),d.wpAutoImportLiveData&&(d.wpGetLiveData().setWrapperData(e),await d.wpShowLiveData(o.sourceNode)))),!1}}),y=(d.wpGetThemeUrl=function(){return d.wpIsPlugin()?d.current_theme_info.slug+`_plugin_base_url()`:`get_template_directory_uri()`},d.wpGetThemePath=function(){return d.wpIsPlugin()?d.current_theme_info.slug+`_plugin_base_path()`:`get_template_directory()`},d.wpAttributeHasPHPCode=function(e){return!(!e||e.indexOf("<?php")<0&&e.indexOf("PG_Image::")<0)},d.makeUrlRelativeToTheme=function(e,t,a){return t&&a&&(t["wp_original_"+a]=e),e=e&&H(e)&&!d.wpAttributeHasPHPCode(e)?`<?php echo ${d.wpGetThemeUrl()}; ?>`+("/"!==e.charAt(0)?"/":"")+e:e},d.makeUrlRelativeToThemeCode=function(e,t){return e=e&&H(e)&&!d.wpAttributeHasPHPCode(e)?t?d.wpGetThemeUrl()+` . `+d.quoteParam(("/"!=e.charAt(0)?"/":"")+e):`esc_url( ${d.wpGetThemeUrl()} . `+d.quoteParam(("/"!=e.charAt(0)?"/":"")+e)+" )":e},d.register_post_types={},d.functions_php_sections={},d.addToFunctionsPhpSection=function(e,t,a,o,r,n){if(d.functions_php_sections[e]){if(a&&0<=d.functions_php_sections[e].code.indexOf(t))return}else d.functions_php_sections[e]={code:""};d.functions_php_sections[e].code=r?t+d.functions_php_sections[e].code:d.functions_php_sections[e].code+t,d.functions_php_sections[e].silent_fail=o,n&&(d.functions_php_sections[e].add_section_code=n)},d.addThemeSupportsCode=function(e){var t=d.current_theme_info.slug;d.addToFunctionsPhpSection("Theme Supports",e,!0,!1,!1,`
/* Setting up theme supports options */

function ${t}_setup_theme_supports() {
    // Don't edit anything between the following comments.
    /* Pinegrow generated Theme Supports Begin */
    /* Pinegrow generated Theme Supports End */
}
add_action('after_setup_theme', '${t}_setup_theme_supports');

/* End of setting up theme supports options */

`)},d.functions_php_sections_missing_text={},d.export_errors=[],d.addExportError=function(e,t,a,o){o||e&&e.document&&e.document.pgwp_file_name&&(o=e.document.pgwp_file_name),d.export_errors.push({pgel:e,desc:t,details:a,page_name:o||d.current_exported_page_name})},d.getExportErrors=function(){return d.export_errors},d.showExportErrors=function(){var o;d.export_errors.length&&(o="",d.export_errors.forEach(function(e){var t,a;o+="<li>",e.pgel?(e.page_name?o+="<code>"+e.page_name+"</code> - ":(t=!(t=e.pgel.getPage())&&e.pgel.clonedFromPgId&&(a=getPgNodeByPgId(e.pgel.clonedFromPgId))?a.getPage():t)&&(o+="<code>"+t.getName()+"</code> - "),o+="<b>"+e.pgel.getName({short:!0})+"</b> - "):e.page_name&&(o+="<code>"+e.page_name+"</code> - "),o+=e.desc,e.details&&(o+='<p class="text-mutted">'+e.details+"</p>"),o+="</li>"}),m.showAlert(`<p>The following problems and warnings were encountered during the export:</p><ul>${o}</ul><p>Those parts of the project that were not affected by these problems were exported.</p>`,"Problems during export"))},d.resetGlobalThemeObjects=function(){d.current_exported_page_name=null,d.export_errors=[],d.register_post_types={},d.required_resources_list={},d.functions_php_sections={},d.template_parts_defs={},d.last_customizer_section_id=null,d.create_default_customizer_section_id=null,d.blocks_js_code={},d.blocks_reg_code={},d.used_script_handles={},d.theme_data={},d.enqueue_scripts_id=1,d.enqueue_styles_id=1,d.enqueued_urls={},d.enqueued_inline_scripts=[],d.addToFunctionsPhpSection("Register Sidebars",""),d.addToFunctionsPhpSection("Register Menus",""),d.addToFunctionsPhpSection("Image sizes",""),d.addToFunctionsPhpSection("Taxonomies",""),d.addToFunctionsPhpSection("Custom Post Types",""),d.addToFunctionsPhpSection("Customizer Controls",""),d.addToFunctionsPhpSection("Include Resources",""),d.addToFunctionsPhpSection("Enqueue Scripts",""),d.addToFunctionsPhpSection("Enqueue Styles",""),d.addToFunctionsPhpSection("Enqueue Admin Scripts",""),d.addToFunctionsPhpSection("Enqueue Admin Styles",""),d.addToFunctionsPhpSection("Load Text Domain",""),d.addToFunctionsPhpSection("Register Blocks",""),d.addToFunctionsPhpSection("Register Pinegrow Blocks","")},d.beforeGeneratingPhpSections=function(){m.dispatchEvent("on_wp_before_generating_php_sections",null,d.theme_data)},d.wpGetThemeOption=function(e){var t=d.current_theme_info;if(!t||!t.options)return null;t=t.options[e]||null;if("string"==typeof t){if("true"===t)return!0;if("false"===t)return!1}return t}),e=(d.runActionsAndFilters=function(n,i){d.current_theme_info;var s=[];n.withoutEvents(function(){var e,t,a=n.findOne("html"),o=(a&&(a.removeAttr("lang"),a.setAttr("<?php language_attributes(); ?>")),n.findOne("head"));o&&((e=o.findOne("meta[charset]"))||(e=pgCreateNodeFromHtml("<meta>"),o.prepend(e)),e.setAttr("charset","<?php bloginfo( 'charset' ); ?>"),(e=o.findOneWithAttrValue("rel","pingback"))||(e=pgCreateNodeFromHtml('<link rel="pingback">'),o.append(e)),e.setAttr("href","<?php bloginfo( 'pingback_url' ); ?>"),(e=o.findOne("title"))&&e.remove(),y("wpseo")&&(o.find("meta[property]").forEach(function(e){(e.getAttr("property")||"").match(/^(og:|twitter:)/)&&s.push(e)}),a.find(['link[rel="dns-prefetch"]','link[rel="canonical"]','meta[name="description"]','meta[name="keywords"]','meta[name="language"]','meta[name="robots"]'].join(",")).forEach(function(e){s.push(e)})),y("generator"))&&(e=o.findOne('meta[name="generator"]')||o.findOne('meta[charset"]'),a=pgCreate(`<meta content="${pgf.product_name}" name="generator">`),t=pgCreate(`<!--  Converted from HTML to WordPress with ${pgf.product_name}. ${pgf.product_url}  -->`),h.addToChanges(function(e,t,a,o){t?a.insertAfter(t):e.append(a);var r=e.closest("html");r&&o.insertBefore(r)},this,[o,e,a,t])),n.walkSelfAndChildren(function(e){return"a"===e.tagName&&"_pg_blank"===e.getAttr("target")&&e.removeAttr("target"),i&&e.isElement&&e.setAttr("pgwp-export-id",e.clonedFromPgId),e.hasAttr("wp-remove-class")&&d.wpRemoveClasses(e,e.getAttr("wp-remove-class")),!0}),d.wpExportAllBlocks(n),n.walkSelfAndChildren(function(e){if(e.isElement){if(e.hasAttr("cms-no-export")||e.hasAttr("wp-no-export")||e.hasAttr("wp-loop-skip")||e.hasAttr("wp-preview"))return s.push(e),"skip_children";for(var t=0;t<h.list.length&&!h.list[t](e);t++);if(e.hasAttr("cms-no-export")||e.hasAttr("wp-no-export")||e.hasAttr("wp-loop-skip")||e.hasAttr("wp-preview"))return s.push(e),"skip_children"}return e.textNode&&d.wpTranslateText(e),!0});for(var r=0;r<s.length;r++)s[r].remove();s=null;var u=/url\(['"]*([^'"\)]*)['"]*\)/gi;for(n.walkSelfAndChildren(function(e){if("head"==e.tagName&&(g=e),"html"==e.tagName&&(_=e),"body"==e.tagName&&(f=e),e.hasAttr("wp-href")){var t=e.getAttr("wp-href"),a=e.getAttr("wp-href-after");if(null!==t){switch(t=t||"url"){case"post_permalink":case"get_permalink":t="<?php echo esc_url( get_permalink() ); ?>";break;case"logout":case"login":t="<?php echo esc_url( wp_"+t+"_url("+((o=e.getAttr("wp-href-redirect"))?` ${d.quoteParam(o)} `:"")+") ); ?>";break;case"lost_password":t="<?php echo esc_url( wp_lostpassword_url("+((o=e.getAttr("wp-href-redirect"))?` ${d.quoteParam(o)} `:"")+") ); ?>";break;case"comment_author":t="<?php comment_author_url(); ?>";break;case"comments_link":t="<?php comments_link(); ?>";break;case"attachment_link":t="<?php echo esc_url( get_attachment_link() ); ?>";break;case"author_posts":var o=e.getAttr("wp-href-author-id"),r=e.getAttr("wp-href-author-nice-name"),o=o||"get_the_author_meta( 'ID' )";t="<?php echo esc_url( get_author_posts_url( "+(o=d.quoteParam(o))+((r=r&&d.quoteParam(r))?", "+r:"")+" ) ); ?>";break;case"url":t="<?php echo esc_url( home_url("+(a=a?" "+d.quoteParam(a)+" ":"")+") ); ?>",a=null;break;default:t="<?php echo esc_url( get_bloginfo( '"+t+"' ) ); ?>"}a&&(t+=a),e.removeAttr("wp-href"),e.removeAttr("wp-href-after"),e.setAttr(e.hasAttr("src")?"src":"href",t)}}else{var n,i,s,l,p;"img"===e.tagName||"video"===e.tagName||"audio"===e.tagName||"source"===e.tagName?((p=e.getAttr("src"))&&e.setAttr("src",d.makeUrlRelativeToTheme(p,e,"src")),(p=e.getAttr("poster"))&&e.setAttr("poster",d.makeUrlRelativeToTheme(p,e,"poster")),(c=e.getAttr("srcset"))&&!d.wpAttributeHasPHPCode(c)&&(e.wp_original_srcset=c,e.transformSrcsetUrls(function(e){return d.makeUrlRelativeToTheme(e)}))):"script"==e.tagName?(p=e.getAttr("src"))?e.hasAttr("wp-enqueue-script")||e.hasAttr("wp-no-enqueue")?e.hasAttr("wp-no-enqueue")&&e.setAttr("src",d.makeUrlRelativeToTheme(p)):d.export_page&&(d.isOnMasterPage(e)||d.isInSiteContent(e))&&(n=d.getScriptHandle(p),c=!1,i=null==e.closest("head")?"true":"false","jquery"===n&&y("wpjquery")&&(l=d.wpConditionalEnqueue(e,l=`
    wp_enqueue_script( 'jquery' );`),d.addToFunctionsPhpSection("Enqueue Scripts",l,!0),d.last_enqued_script_handle="jquery",d.last_enqued_script_in_head="false"==i,h.addToChanges(function(e){e.remove()},this,[e]),c=!0),c||(d.enqueued_urls[p]=!0,p=d.makeUrlRelativeToThemeCode(p,!0),l="",l=(l+="\n"+(s="    ")+"wp_deregister_script( "+d.quoteParam(n)+" );")+"\n"+s+"wp_enqueue_script( "+d.quoteParam(n)+", "+d.quoteParam(p)+", [], "+d.wpGetProjectVersionForRegister()+", "+i+");\n",l=d.wpConditionalEnqueue(e,l),d.addToFunctionsPhpSection("Enqueue Scripts",l,!0),d.last_enqued_script_handle=n,d.last_enqued_script_in_head="false"==i,d.wpEnqueInlineScriptIfNeeded(e,d.last_enqued_script_in_head),h.addToChanges(function(e){e.remove()},this,[e]))):e.hasAttr("wp-no-enqueue")||e.hasAttr("wp-enqueue-script")||"body"!==e.parent.tagName&&"head"!==e.parent.tagName||d.export_page&&(d.isOnMasterPage(e)||d.isInSiteContent(e))&&d.wpEnqueInlineScriptIfNeeded(e,null!==e.closest("head"))&&h.addToChanges(function(e){e.remove()},this,[e]):"link"==e.tagName?(p=e.getAttr("href"),c=e.getAttr("rel"),p&&("stylesheet"!=c||e.hasAttr("wp-enqueue-style")||e.hasAttr("wp-no-enqueue")?e.hasAttr("wp-enqueue-style")||("style.css"==p||"/style.css"==p?e.setAttr("href","<?php bloginfo('stylesheet_url'); ?>"):e.setAttr("href",d.makeUrlRelativeToTheme(p))):d.export_page&&(d.isOnMasterPage(e)||d.isInSiteContent(e))&&(n=d.getScriptHandle(p,!0),i=e.getAttr("media")||"all",d.enqueued_urls[p]=!0,p="style.css"==p?"get_bloginfo('stylesheet_url')":d.makeUrlRelativeToThemeCode(p,!0),l="",l=(l+="\n"+(s="    ")+"wp_deregister_style( "+d.quoteParam(n)+" );")+"\n"+s+"wp_enqueue_style( "+d.quoteParam(n)+", "+d.quoteParam(p)+", [], "+d.wpGetProjectVersionForRegister()+", "+d.quoteParam(i)+");\n",l=d.wpConditionalEnqueue(e,l),d.addToFunctionsPhpSection("Enqueue Styles",l,!0),h.addToChanges(function(e){e.remove()},this,[e])))):"form"==e.tagName&&(p=e.getAttr("action"))&&e.setAttr("action",d.makeUrlRelativeToTheme(p))}var c;return e.hasAttr("style")&&(c=(c=e.getAttr("style")||"").replace(u,function(e,t){var a=0<=e.indexOf('"')?'"':"'",o=d.makeUrlRelativeToTheme(t);return t!==o?"url("+a+o+a+")":e}),e.setAttr("style",c)),e.comment&&e.attributes.startsWith("[")&&(e.attributes=e.attributes.replace(/<[a-z]+[^>]+src=['"]([^'"]*)['"]/g,function(e,t,a,o){return e.replace(/src=['"][^'"]*['"]/,'src="'+d.makeUrlRelativeToTheme(t)+'"')}),e.attributes=e.attributes.replace(/<[a-z]+[^>]+href=['"]([^'"]*)['"]/g,function(e,t,a,o){return e.replace(/href=['"][^'"]*['"]/,'href="'+d.makeUrlRelativeToTheme(t)+'"')})),!0}),n.walkSelfAndChildren(function(e){return e.removeAttrIfStartsWith("wp-"),e.removeAttrIfStartsWith("data-pgc-"),e.removeAttr("data-pgc"),e.removePinegrowAttributes(),!0});0<h.changes.length;)h.changes.shift()();h.changes_end.forEach(function(e){e()}),h.changes_end=[],h.changes_super_end.forEach(function(e){e()}),h.changes_super_end=[],_&&(_.removeAttr("lang"),_.setAttr("<?php language_attributes(); ?>",null)),g&&g.append(pgCreateNodeFromHtml("<?php wp_head(); ?>")),f&&(f.prepend(pgCreateNodeFromHtml(`<?php if( function_exists( 'wp_body_open' ) ) wp_body_open(); ?>`)),f.append(pgCreateNodeFromHtml("<?php wp_footer(); ?>"))),h.resetFilters()})},d.parseToPhp=function(e,t,a,o,r,n,i){var s=t?e:e.clone(!0);return s.pgwp_file_name=e.pgwp_file_name||null,d.exportedOutputDocument=s,d.current_theme_info=a,d.current_page_url=n,d.template_parts=[],d.page_template_name=null,d.post_template_name=null,d.post_template_types=null,d.requireResource("wp_pg_helpers.php","inc",null),d.includeInFunctions("wp_pg_helpers.php","inc",null,d.wpGetClass("PG_Helper")),m.dispatchEvent("on_wp_before_parse_to_php",null),d.last_enqued_script_handle=null,d.last_enqued_script_in_head=null,d.runActionsAndFilters(s,i),o?(s.walkSelfAndChildren(function(e){return e.pgId=e.clonedFromPgId||e.pgId||null,!0}),s.toStringWithIds(!0)):s.toStringOriginal(!0)},h.list.push(function(e){return d.render_php_on_export_started&&d.render_php_on_export_started(e),!1}),pgWordPressUtilsInit(d),pgWordpressSmart(d,h)),t=(d.isWCEnabled()&&(a=function(e){return d.wcIsEnabledInProject()},o=pgWooSmart(d,h),(t=new PgFrameworkLibSection("woo_product","Product Actions","WooCommerce")).show_if=a,t.tooltip="Displaying information about a product, either displayed in a loop or as a single product.",t.setComponentTypes(o.product),d.addActionsSection(t),(t=new PgFrameworkLibSection("woo_loop","Product Loop Actions","WooCommerce")).show_if=a,t.setComponentTypes(o.loop),t.tooltip="Display a list of products, either with the default loop or custom criteria.",d.addActionsSection(t),(t=new PgFrameworkLibSection("woo_cats","Category Actions","WooCommerce")).show_if=a,t.setComponentTypes(o.cat),t.tooltip="Display product categories.",d.addActionsSection(t),(r=new PgFrameworkLibSection("woo_misc","Misc Actions","WooCommerce")).show_if=a,r.setComponentTypes(o.misc),r.tooltip="Other WooCommerce actions.",d.addActionsSection(r)),new PgFrameworkLibSection("wp_block_pg_smart","Blocks Smart Actions"));t.setComponentTypes(e.blocks),d.addActionsSection(t),d.isWCEnabled()&&(r.addComponentType(e.func_action),r.addComponentType(e.no_export_action)),(t=new PgFrameworkLibSection("wp_post_pg_smart","Post Smart Actions")).setComponentTypes(e.post),d.addActionsSection(t),(t=new PgFrameworkLibSection("wp_global_pg_smart","Global Smart Actions")).setComponentTypes(e.site),d.addActionsSection(t);var a,o=((a=new PgFrameworkLibSection("wp_pg_cond","Conditionals")).setComponentTypes(pgWordpressConditions(d,h)),a.default_closed=!0,new PgFrameworkLibSection("wp_pg_loop","Loops")),r=(o.setComponentTypes(pgWordpressLoop(d,h)),o.default_closed=!0,pgWordpressSiteRegistrations(d,h)),e=pgWordpressParts(d,h),v=new PgFrameworkLibSection("wp_pg_customize","Customizer"),k=(v.setComponentTypes(pgWordpressCustomizer(d,h)),v.default_closed=!0,h.list.push(function(e){return d.render_php_on_control_structures_complete&&d.render_php_on_control_structures_complete(e),!1}),e=e.concat(pgWordpressParts_Part2(d,h)),pgWordpressSite(d,h)),t;"PGTC"!==pgf.product&&((t=new PgFrameworkLibSection("wp_pg_theme_setup","Theme Setup")).setComponentTypes(k.site_actions),d.addActionsSection(t)),(t=new PgFrameworkLibSection("wp_pg_site","Site")).setComponentTypes(k.actions.concat(r)),t.default_closed=!0,d.addActionsSection(t)}(t=new PgFrameworkLibSection("wp_pg_post","Posts")).setComponentTypes(pgWordpressPost(d,h)),t.default_closed=!0,d.addActionsSection(t),(t=new PgFrameworkLibSection("wp_pg_author","Authors")).setComponentTypes(pgWordpressAuthor(d,h)),t.default_closed=!0,d.addActionsSection(t),(t=new PgFrameworkLibSection("wp_pg_comments","Comments")).setComponentTypes(pgWordpressComments(d,h)),t.default_closed=!0,d.addActionsSection(t),(t=new PgFrameworkLibSection("wp_pg_bookmarks","Bookmarks")).setComponentTypes(pgWordpressBookmarks(d,h)),t.default_closed=!0,d.addActionsSection(t),(t=new PgFrameworkLibSection("wp_pg_category","Categories")).setComponentTypes(pgWordpressCategory(d,h)),t.default_closed=!0,d.addActionsSection(t),(t=new PgFrameworkLibSection("wp_pg_user","Users")).setComponentTypes(pgWordpressUsers(d,h)),t.default_closed=!0,d.addActionsSection(t),d.addActionsSection(a),d.addActionsSection(o),(t=new PgFrameworkLibSection("wp_pg_links","Links")).setComponentTypes(pgWordpressLinks(d,h)),t.default_closed=!0,d.addActionsSection(t),(t=new PgFrameworkLibSection("wp_pg_nav","Navigation &amp; Pagination")).setComponentTypes(pgWordpressNavigation(d,h)),t.default_closed=!0,d.addActionsSection(t),(t=new PgFrameworkLibSection("wp_pg_parts","Template parts")).setComponentTypes(e),t.default_closed=!0,d.addActionsSection(t),d.addActionsSection(v),(t=new PgFrameworkLibSection("wp_pg_acf","Adv. Custom Fields")).setComponentTypes(pgWordpressACF(d,h)),t.default_closed=!0,d.addActionsSection(t);function j(e){var o,t=m.getCurrentProject();t&&(o=new PgCollection,t.forEachEditableFile(function(e,t,a){A(e.sourceNode,e.url,0,o),t(e,a)},function(){0<o.getLength()&&t.db.changed(o),e&&e(t)},"Inspecting project..."))}function z(e){return!(!e.hasAttr("wp-preview")||e.hasAttr("data-pg-sel"))}function x(i,e){var s,t,a=m.getCurrentProject();a&&(s=a.db,a=new CrsaProfile,(t=s.getDocumentNode(i.url)).withoutEvents(function(){var n=t.findOne(">elements"),a=0,o=[],r=[];n.children.forEach(function(e){var t;"element"===e.tagName&&(("ok"===(t=e.getAttr("status"))||null===t||"multiple"===t?o:r).push(e),e._dbIndex=a++)}),o.forEach(function(e){e.remove()}),r.forEach(function(e){e.detach()}),n.removeAllChildren(),i.sourceNode.walk(function(a){var e,t,o,r;return a.isElementOrScript&&(e=a.getAttribute("data-pg-sel"))&&(t={selector:e,desc:a.getName(),status:"ok"},(o=a.getAttribute("data-pg-name"))&&(t.name=o),o=d.getActionTypes(a),a.hasAttr("data-pg-sel-auto")&&(t.auto="true"),1<i.sourceNode.findMaxItems(e,2,z).length&&(t.status="multiple"),t.auto&&0===o.length&&!t.name||(r=s.createElementNode(t),n.append(r),o.forEach(function(e){var t=e.getActionValuesForPgel(a),t=(t.name=e.name,s.createActionNode(e.type,t));r.append(t)}))),!0}),r.forEach(function(e){e.insertAtIndex(n,e._dbIndex)})}),s.changed(),e&&s.save(),a.show("Project DB update for "+(i.name||i.url)))}function A(i,e,t,s){var a,l,o=m.getCurrentProject();return s=s||new PgCollection,o&&(a=o.db,l=new PgElementSelectorHelper,o=new CrsaProfile,i.withoutEvents(function(){a.getDocumentNode(e).find("element").forEach(function(e){var t,a,o,r="ok",n=e.getAttribute("selector");n&&"unused"!==e.getAttr("status")?0<(o=(a=!1)?(t=i.findOne(n))?[t]:[]:i.findMaxItems(n,2,z)).length?(a=(t=a?t:o[0]).getAttribute("data-pg-sel"))&&a!==n?(r="taken",e.setAttr("taken-selector",a),s.add(e)):(t.setAttribute("data-pg-sel",n),t.setAttribute("data-pg-name",e.getAttr("name")),e.hasAttr("auto")&&((a=l.isThereABetterAutoSelector(t,n))&&(e.setAttr("selector",a),s.add(e)),t.setAttr("data-pg-sel-auto",null)),l.addElementActionsToPgel(e,t),1<o.length&&(r="multiple")):r=0===o.length?"none":"multiple":r="unused",r!==e.getAttr("status")&&(e.setAttr("status",r),s.add(e))})}),o.show("Added Actions from DB to "+e)),s}(t=new PgFrameworkLibSection("wp_pg_code","Misc")).setComponentTypes(pgWordpressCode(d,h)),t.default_closed=!0,d.addActionsSection(t),d.is_element_locked=function(e,t){var a=e.sourceNode.findOne("html");return!(!(0&&a.hasAttr("wp-site-master-page")&&a.findOne("[wp-site-content]"))||t.closest("[wp-site-content]"))&&"Not in site content"},d.on_page_cloned=function(e,t){var a,o=e.sourceNode.findOne("html");o&&(o.hasAttr("wp-site")?o.hasAttr("wp-site-is-master-page")&&(a=crsaGetNameFromUrl(t.url),o.removeAttr("wp-site-is-master-page"),o.removeAttr("wp-site-theme-name"),o.removeAttr("wp-site-theme-slug"),o.removeAttr("wp-site-themes-folder"),o.setAttr("wp-site-master-page",a)):o.hasAttr("wp-template")&&(o.removeAttr("wp-template-export-as"),o.hasAttribute("wp-template-define-master-page"))&&(a=crsaGetNameFromUrl(t.url),m.showAlert(`<p>The original page is a WordPress master page. What would you like to do with the duplicated page?</p><ul>
<li>Define the new master page on the new page.</li>
<li>Use the original page <code>${a}</code> as the master page for the new page.</li>
</ul>
<p><a href="https://pinegrow.com/docs/wordpress/actions/page-settings/#define-a-master-page" class="external">Learn more about WordPress master pages.</a></p>`,"Do you want to define a new master page?","Define a new master page","Use the original master page",function(){m.showQuickMessage("Done. Please double-check the Page settings."),d.showPageSettings(e)},function(){o.removeAttribute("wp-template-define-master-page"),o.setAttr("wp-template-master",a),m.showQuickMessage("Done. Please double-check the Page settings."),d.showPageSettings(e)})))},d.wpUpdateProjectDBForPage=x;function U(e,t){if(e.hasAttribute("cms-block-field"))for(var a=1;a<d.wp_ba_max_editable;a++){var o=1<a?`-`+a:"",r=e.getAttribute("cms-block-field-type"+o);if(!r)break;"class"===r&&((r=e.getAttribute("cms-block-field-default-value"+o))&&t.push(r),(r=e.getAttribute("cms-block-field-values"+o))&&pgSplitKeyEqualsValueString(r).forEach(function(e){t.push(e.two)}),r=e.getAttribute("cms-block-field-checkbox-value"+o))&&t.push(r)}}function P(e){var t=m.getCurrentProject();t?m.showAlert(`<p>Are you sure that you want to run "Apply the master page" on all pages in the project${e?` that use the master page <b>${e}</b>`:""}?</p><p>Everything on the page, except the region with the <b>Site content</b> action, will be replaced by the content of its master page.</p>`,e?`Apply the master page ${e} to all related files?`:"Apply master pages in the whole project?","Cancel","Apply Master Pages",null,function(){var r=0;t.forEachEditableFile(function(t,a,o){d.applyMasterPage(t.url,t,!0,function(e){e&&(o.changed=!0,o.skip_refresh=!0,r++),a(t,o)},e)},function(){0===r?m.showQuickError("No pages were changed. Perhaps master pages are not used, or are not set-up correctly."):isApp()&&m.showAlert(`<p><b>${r}</b> file(s) were changed. Changes have not been saved yet.</p><p>Changed files are marked in the <b>Project panel</b> with <b><i class="" style="color:#444;">&#x2731;</i></b> icon next to their name.</p><p>To review and save changes do one of the following:</p><ul><li>To review changes <b>click on the file name</b> in the Project panel to open the changed file.</li><li><b>Right-click</b> on the file name and choose <b>Save</b>.</li><li>Use <b>File -&gt; Save all</b> to save all changed files.</li></ul>`,`Review and save ${r} changed files`,"Close",null)},e?`Applying ${e} master page to all related pages...`:"Applying Master pages on the whole project...")}):m.showAlert("Please open a project first.","Project is required")}function V(){var e=m.selectedElements.hasSelection()?"selected elements":"page";m.showAlert("Would you like to remove all WordPress actions from the <b>"+e+"</b>? All <code>wp-*, cms-*, wc-*</code> attributes will be removed.","Are you sure","Cancel","Remove",null,function(){var e=m.getSelectedPage();e&&(m.makeChanges(e,"Remove WordPress actions",function(){m.selectedElements.hasSelection()?m.selectedElements.forEachElement(function(e){e.removeAttrIfStartsWith(["wp-","cms-","wc-"],!0)}):e.sourceNode.findOne("html").removeAttrIfStartsWith(["wp-","cms-","wc-"],!0)}),m.showQuickMessage("WordPress actions removed!"),m.refreshCurrentProject(null,!1,!0),e.refresh())})}function S(o){$.each(m.getAllPages(),function(e,t){var a=t.get$Html();a&&(o?a.addClass("wp-mark-areas"):a.removeClass("wp-mark-areas"))}),o?ae.addClass("icon-check").removeClass("icon-minus"):ae.removeClass("icon-check").addClass("icon-minus")}function Q(e){e?oe.addClass("icon-check").removeClass("icon-minus"):oe.removeClass("icon-check").addClass("icon-minus")}function J(){var e=m.getSelectedPage();return e?d.getPreviewUrlForPage(e.sourceNode)||(m.showAlert("<p>Preview url for the page is not defined.</p><p>Set the <b>Page preview url</b> in <b>WordPress Page settings</b> on the HTML (top in the tree) element of the selected page or in <b>Theme Settings</b>.</p>","Preview URL is not defined"),null):null}d.addActionsFromProjectDBToPage=A,pgf.use_selectors&&(m.addEventHandler("on_page_parsed_in_proxy",function(e){var t;e.openedInEditor&&(t=A(e.sourceNode,e.url))&&0<t.getLength()&&m.getCurrentProject().db.changed(t)}),m.addEventHandler("on_got_source_node_of_url_from_file",function(e,t,a){var o=A(t,a);o&&0<o.getLength()&&m.getCurrentProject().db.changed(o)}),m.addEventHandler("on_project_loaded",function(e,t){j(function(e){e.db.getElementsWithIssues().length})}),m.addEventHandler("on_page_changes_done",function(e){x(e,!1)}),T=function(e){e.withoutEvents(function(){e.walk(function(e){return e.isElement&&e.getAttr("data-pg-sel")&&d.wpRemoveWPAttributes(e,!1),!0})})},m.addEventHandler("on_filter_page_before_save",function(e,t){T(t)}),m.addEventHandler("on_toolbar_created",function(e,t){t.addSection("wp");var a=new PgButtonToolbarItem("icon-WP","Import the content from the WordPress site."),a=(t.addItem("wp",a),a.onClick=function(){var e=m.getSelectedPage();e?d.getRenderedWordPressHTMLWithNotice(e.sourceNode):m.showQuickMessage("Open a page first.")},new PgButtonToolbarItem("icon-wand","Automatically add WordPress actions."));t.addItem("wp",a),a.onClick=function(){var e=m.getSelectedPage();e?d.autoAddActionsToPage(e):m.showQuickMessage("Open a page first.")}}),pgf.edit_html||m.addEventHandler("on_before_element_code",function(e,t){t.pgel.withoutEvents(function(){t.pgel=t.pgel.clone(!1),pgIsDev()||t.pgel.removeAttrIfStartsWith(["wp-","wc-","cms-","data-pg-sel","data-pg-name"],!0)})})),d.wpUpdateTemplateTagOnFile=function(e,t,a,o){var r,n;e=e||t.getFileNode(),(a=a||t.sourceNode.findOne("html"))&&e&&(r=e.getTagByType("wpmap"),a.hasAttr("wp-template")?(e.removeTagByType("wpcopy"),n=`<i class="icon icon-WP"></i> `+crsaRemoveExtFromUrl(a.getAttr("wp-template-export-as")||t.name)+".php",r?(r.text=n,e.updateTags()):(r=new CrsaFileTag(n,"wpmap","Export WordPress template.",null),t.setFileNodeTag(r,null,null,0))):(e.removeTagByType("wpmap"),e.updateTags()))},d.wpSetShouldCopyFile=function(e,t,a){var o,r,n,i=m.getCurrentProject();(e="string"==typeof e?i.getFileForUrl(e):e)&&(o=a.getSetting("wp-files")||{},r=i.getRelativeUrl(e.url),"auto"!==t||r in o)&&o[r]!==t&&("auto"===t?delete o[r]:o[r]=t,n=[e],"true"===t&&e.withParents(function(e){o[i.getRelativeUrl(e.url)]=t,n.push(e)}),d.wpShouldCopyFile(e,i,o)?m.showQuickMessage(`<b>${e.name}</b> will be copied to the theme.`):m.showQuickMessage(`<b>${e.name}</b> will <b>not</b> be copied to the theme.`),a.setSetting("wp-files",o),a.save(),n.forEach(function(e){d.wpUpdateCopyTagOnFile(e,i,o)}))},d.wpShouldCopyFile=function(e,t,a){var o=d.wpIsPlugin(),r=t.getRelativeUrl(e.url);switch(a[r]||"auto"){case"true":return!0;case"false":return!1;default:return"screenshot.png"===e.name?!o:"theme.json"===e.name?!o:"custom_theme.json"!==e.name&&(0<=["php","php5"].indexOf(crsaGetExtFromUrl(e.name))||!e.name.startsWith("_pg")&&!(e.name.startsWith(".")||!r.startsWith("templates/")&&(e.isEditable||0<=["_info.html","pinegrow.json","projectdb.pgml","projectdb.pgml.backup"].indexOf(e.name)||e.name.endsWith("_backup.php")||(!o||"inc"!==e.name&&"custom.php"!==e.name)&&o)))}},d.wpUpdateImportantTagOnFile=function(e,t){var a,o;"pinegrow.json"!==e.name&&"projectdb.pgml"!==e.name||(e.removeTagByType("wpcopy"),o=`<i class="icon icon-269"></i> Important`,(a=e.getTagByType("wpimportant"))?a.text=o:(a=new CrsaFileTag(o,"wpimportant","This file contains important information about the WordPress theme. Don't delete it. This file will not be exported to the theme."),e.addTag(a)),e.updateTags())},d.wpUpdateCopyTagOnFile=function(e,t,a){a||(t=m.getCurrentProject(),a=(pi=m.getCurrentProjectInfo()).getSetting("wp-files")||{});var o,r,n,i,s=e.getTagByType("wpcopy");e.getTagByType("wpmap")?s&&(e.removeTagByType("wpcopy"),e.updateTags()):(i=d.wpShouldCopyFile(e,t,a)?(o="check",r="Copy to exported theme or plugin",n="Will be copied to the theme or plugin.","pg-file-tag-gray"):(o="close",r=`Don't copy`,n="Will not be copied to the theme or plugin","pg-file-tag-white"),s?(s.text=r,s.icon=o,s.desc=n,s.class=i):(s=new CrsaFileTag(r,"wpcopy",n,o,i),e.addTag(s)),e.updateTags())};var T,C,E=d.isWPEnabledForProject_map=new WeakMap,Y=(d.isWPEnabledForProject=function(e,t){var a,o;return!!(e=e||m.getCurrentProject())&&("PGTC"===pgf.product||!(e.disable_wp&&!t)&&(E.has(e)?E.get(e):(a=!1,(o=e.getProjectInfo())&&o.getSetting("wp-theme-info")&&(a=!0),E.set(e,a),a)))},d.on_project_scan_begin=function(e,t){},m.addEventHandler("on_project_scan_page",function(e,t,a,o,r){d.isWPEnabledForProject(t)&&d.wpUpdateTemplateTagOnFile(r,a)}),m.addEventHandler("on_project_refreshed",function(e,t){var a;d.isWPEnabledForProject(t)&&(a=m.getCurrentProjectInfo().getSetting("wp-files")||{},d.wpClearUrlCache(),t.walkThroughFiles(function(e){d.wpUpdateCopyTagOnFile(e,t,a),d.wpUpdateImportantTagOnFile(e,t)}),pgf.use_selectors)&&j()}),d.wpAskToConvertProjectToPGTC=function(){m.showAlert(`<p>This looks like a project created with Pinegrow with WordPress Theme Builder.</p><p>In order to use it with Pinegrow Theme Converter we have to first convert it to its format.</p><p>Do you want to convert the project?</p><p>This will remove all WordPress actions from the HTML code and store them into a project database file. <b>Create a backup copy of the project before going forward with the conversion.</b></p>`,"Convert the project to Theme Converter?","No, I'll keep editing it with Theme Builder","Yes, convert it. I made a backup.",function(){m.closeCurrentProject()},function(){d.wpConvertProject(!0,!1)})},d.wpAskToConvertProjectFromOldPGWPToPGWP=function(){m.showAlert(`<p>This project uses WordPress Site actions to store theme settings.</p><p>In order to use Theme Settings dialog we have to first convert theme settings to the new format where settings are stored in the file pinegrow.json. This only affects the theme settings. WordPress actions will still be stored as attributes in HTML files.</p><p>Do you want to convert the project?</p><p><b>Create a backup copy of the project before going forward with the conversion.</b></p>`,"Convert the project settings?","No, I'll keep using old settings","Yes, convert it. I made a backup.",function(){},function(){d.wpConvertProject(!1,!0,!0)})},m.addEventHandler("on_project_closed",function(e,t){d.current_theme_info=null,d.wp_force_is_plugin=!1,d.wpRefreshApiAndLiveData(),isApp()||d.wpUpdateWPMenuButtonLabel();var a=m.findFrameworkByType("tailwind");a&&a.classTracker.unregisterHandler(U)}),m.addEventHandler("on_project_loaded",function(e,a){function t(){var e=m.getCurrentProjectInfo(),t=e.getSetting("wp-files")||{};d.wpClearUrlCache(),a.walkThroughFiles(function(e){d.wpUpdateCopyTagOnFile(e,a,t),d.wpUpdateImportantTagOnFile(e,a)}),(e=e.getSetting("wp-insight"))&&d.wpInsight.loadData(e)}d.wp_force_is_plugin=!1;var o,r=null,n=m.getCurrentProjectInfo(),n=(n&&((r=n.getSetting("wp-theme-info"))&&(d.wp_force_is_plugin="plugin"===r.project_type),te()),isApp()?d.updateWPMenuForProjectType():d.wpUpdateWPMenuButtonLabel(),m.findFrameworkByType("tailwind"));n&&n.classTracker.registerHandler(U),"PGTC"===pgf.product?(r?(d.wp_data.has_theme_settings=!0,d.wpIsPGTCProject(a)||d.wpAskToConvertProjectToPGTC()):(d.wp_data.has_theme_settings=!1,d.showWordPressSiteSetupDialog()),t()):d.isWPEnabledForProject(a)&&(d.wpIsPGTCProject(a)&&(o=!1,m.showAlert(`<p>This looks like a project created with Pinegrow Theme Converter.</p><p>In order to use it with Pinegrow Web Editor we have to first convert it to its format.</p><p>Do you want to convert the project?</p><p>This will add all WordPress actions to the HTML code, instead of storing them in a project database file. <b>Create a backup copy of the project before going forward with the conversion.</b></p>`,"Convert the project to Pinegrow Web Editor?","No, I'll keep editing it with Theme Converter","Yes, convert it. I made a backup.",function(){o||m.closeCurrentProject()},function(){d.wpConvertProject(!1,!0)},"I'll just edit HTML &amp; CSS",function(){a.disable_wp=!0,o=!0,m.showQuickMessage("WordPress export is disabled.")})),t())}),m.addEventHandler("on_project_item_get_context_menu_regular",function(e,t,a,o){var r,n,i,s,l;d.isWPEnabledForProject(a)&&(n=(r=m.getCurrentProjectInfo()).getSetting("wp-files")||{},(i=[]).push({divider:!0,header:"WordPress"}),s=n[a.getRelativeUrl(t.url)]||"auto",t.isEditable&&i.push({label:"Page settings...",func:function(){d.showPageSettings(t.url)}}),l=function(e){d.wpSetShouldCopyFile(t,e,r)},i.push({label:"Copy to the theme or plugin",check:d.wpShouldCopyFile(t,a,n),submenu:[{label:"Yes",check:"true"===s,action:function(){l("true")}},{label:"No",check:"false"===s,action:function(){l("false")}},{label:"Auto",check:"auto"===s,action:function(){l("auto")}}]}),o.push(i))}),["wp-template","wp-site-content"]),K=(d.on_action_added=function(e,t,a){a.framework===d&&!d.isOnMasterOrInContent(t)&&Y.indexOf(a.attribute)<0&&m.showQuickError(`This action will be ignored because it is placed outside of the Site content (body by default) area of the non-master page.`,!1,1e4)},d.on_page_saved=function(e,t,a){pgf.use_selectors&&(x(e,!0),m.getCurrentProject().db.rememberSavedDocument(e.url)),a||e.openedInEditor&&O()&&d.canUseWP(!0)&&X(e,t)},d.on_page_closed=function(e){pgf.use_selectors&&e.closed_without_saving&&m.getCurrentProject().db.restoreSavedDocument(e.url)},!1),I=(d.on_plugin_activated=function(e,t){var a,o;K?t&&t(d):("undefined"!=typeof PgEditableAreaExtension&&(a=new PgEditableAreaExtension("wordpress","WordPress actions",d),o=function(e){return e.match(/^(wp|cms)\-/)},a.addField("wp-actions",{fieldDefinition:{type:"checkbox",name:"Editable WordPress actions",value:"1",empty_attribute:!0,helptext:"When enabled, you can place different WordPress actions on this element in component instances.<br><br>Note: if you add WordPress actions to component definition, all instances will inherit these actions. Even if you remove them on instances, they will come back when components are updated."},shouldShowField:function(e,t){return!0},getValue:function(e){var t=[];return e.getAttrList().forEach(function(e){o(e.name)&&t.push({...e})}),t},setValue:function(e,t,a){return e&&e.forEach(function(e){t.setAttribute(e.name,e.value,!0,e.quote)}),e},canMakeChange:function(e,t,a){return!("attr"!==t||!o(a))||"add_action"===t&&a.framework===d||"remove_action"===t&&a.framework===d},getProperty:null}),m.addEditableAreaExtension(a)),K=!0)},d.on_page_loaded_from_external=function(e){var t;pgf.use_selectors&&(m.getCurrentProject().db.rememberSavedDocument(e.url),e.openedInEditor)&&(T(e.sourceNode),0<(t=A(e.sourceNode,e.url)).getLength()||1)&&m.getCurrentProject().db.changed(t),O()&&X(e)},d.on_css_loaded_from_external=d.on_css_file_edited_in_code_editor_saved=function(e,t){var a,o;O()&&(a=d.getThemeInfo())&&(o=new CrsaOverwriteProtectionFileWriter(a.source_dir,a.dir),Z(t,t.localFile,a,o),o.askIfNeeded(function(){d.updatePreview(),m.showQuickMessage("<b>"+t.name+"</b> exported.")}))},d.on_wp_block_attributes_get_values_presets=function(e,t,a){t.push({type:"divider"}),t.push({type:"header",label:"WordPress"}),t.push({label:"Show Posts Order By",action:function(){a(`Slug=name
Title=title
Id=ID
Description=description
Date=date
Modified date=modified
Comment count=comment_count
Menu order=menu_order
Meta value=meta_value
Meta value numeric=meta_value_num
Random=rand`)}}),t.push({label:"Show Posts Order",action:function(){a(`Ascending=asc
Descending=desc`)}})},[]),X=(d.setRequireThemeExport=function(e){I.indexOf(e)<0&&I.push(e)},d.resetRequireThemeExport=function(){I=[]},function(t,e){if(canDoStuffOrIsTrialDisabled()){try{l.path;var a=l.fs,o=d.getThemeInfo(t.sourceNode);if(o){if(!d.canMiskolin())return;if(!m.hasActivatedProduct("WP")&&!d.isTrialActive())return;if(isApp()&&(!o.dir||"dir"!==crsaIsFileOrDir(o.dir,a)))return void d.showFolderNotSetNotice();var r=m.getCurrentProject(),n=r?r.getDir():o.source_dir,i=new CrsaOverwriteProtectionFileWriter(n,o.dir);if(d.resetGlobalThemeObjects(),i.on_should_write_file=d.wpShouldWriteFile,d.exportPage(t.localFile,t.sourceNode,o.dir,i,o,null,t.url),e)for(var s=0;s<e.length;s++)Z(e[s].cs,e[s].path,o,i);i.askIfNeeded(function(){d.updatePreview(),d.isThemeInstalled(o.dir)||m.showAlert("<p>The theme or plugin is not yet properly installed. Use <b>WordPress -&gt; Export the theme / plugin</b> to export the complete project, including style.css and any resource files.</p><p>Whenever you save the page in Pinegrow, only that page and any modified CSS files will be exported.</p>","Export the whole theme or plugin first")}),I.length&&m.showQuickError("Quick export was done. But the Whole Theme Export is needed to apply changes to "+I.join(", ")+"."),m.dispatchEvent("on_wp_quick_export_done",t)}}catch(e){d.addExportError(null,"Page "+t.name+" could not be exported.",e.toString()),console.error(e)}d.showExportErrors()}}),Z=function(e,t,a,o){var r,n,i,s;a&&a.dir&&((r=o.getDestNameFromSource(t))?(n=!1,r===d.wpGetFilePathInExportDir(a.dir,"style.css")&&(i=isApp()?l.fs.readFileSync(t,{encoding:"utf8"}):m.getCurrentProject().getContentOfUrlWithLookup("style.css"),s={},a.name&&(s["Theme Name"]=a.name),s=d.getStyleHeader(s,a),d.hasStyleHeader(i)||(o.writeFile(r,i=s+"\n"+i,function(){}),n=!0)),n||o.copyFile(r,t)):console.log("WP - CSS file is not relative to page: "+t))},ee=(d.on_set_inline_style=function(e,t){t.css+='            php {                display:none;            }            html.wp-mark-areas script[type="php"], html.wp-mark-areas php {            position: relative;            visibility: visible;            display: inline-block;            font-family: monospace;            background-color: #FFF9BA;            font-size: 15px;            color: #555;            white-space: inherit;            max-height: 20px;            overflow: hidden;            max-width: 100%;            }            [wp-site] {                aavisibility:hidden;            }            [wp-hide] {                display:none; !important            }            html.wp-mark-areas [wp-site-content] {            box-shadow: 0 0 0px 1px rgba(255, 214, 0, 1);            aavisibility: visible;            }            html.wp-mark-areas [wp-include-template-part], html.wp-mark-areas [wp-get-sidebar] {            box-shadow: 0 0 0px 1px rgba(0, 236, 255, 1);            opacity: 0.5;            }            html.wp-mark-areas [wp-template-part] {            box-shadow: 0 0 0px 1px rgba(0, 236, 255, 1);            opacity: 1;            }',"webflow"===d.wpDetectFramework(e.sourceNode)&&(t.css+=`
img {height:auto;}
`)},[]),k=($.each(d.component_types,function(e,t){var a;t.on_show_live_data&&(t.sections.parameters||(t.sections.parameters={name:"Options",fields:{}}),t.sections.parameters.fields[t.attribute+"-live-data"]={start_section:"cms-post"!==t.attribute?"Live data":null,name:"Show live data",type:"checkbox",action:"element_attribute",attribute:t.attribute+"-live-data",value:"true",negvalue:"false",default_value:"true",helptext:"Set to No if you wish to prevent this action importing live data from the WordPress site."}),t.sections.parameters&&(t.sections.parameters.fields&&d.convertNegativeCheckboxFieldsToSelect(t.sections.parameters.fields),t.sections.parameters.name=t.name+" options",t.sections.parameters.parameters=!0,t.sections[e+"_parameters"]=t.sections.parameters,delete t.sections.parameters),t.attribute&&(s[t.attribute]=t,["wp-preview"].indexOf(t.attribute)<0)&&ee.push(`html.pg-internal-wp-oa [${t.attribute}]`),t.meta&&t.meta.helptext&&1<(a=t.meta.helptext.split("#")).length&&(a[1]="<span class='more'>"+a[1]+"</span>",t.meta.helptext=a.join("")),t.not_main_type=!0,0}),new PgPageViewHelper("Outline WP actions","wp-outline-actions","pg-internal-wp-oa",null,`
${ee.join(",")} 
{
    outline: 1px dashed #COLOR# !important;
    outline-offset:-1px !important;
}`,"1",d,!0,"orange"),d.wpSayTheme=function(e){return`<span class="wp-say-theme-plugin" style="text-transform:${e?"u"===e?"uppercase":"none":"capitalize"};">theme</span>`}),te=d.wpUpdateSayTheme=function(e,t){var a=void 0!==e?e:d.wpIsPlugin(),o=a?"plugin":"theme";t?t.find(".wp-say-theme-plugin").html(o):($(".wp-say-theme-plugin").html(o),`.wp-menu-page-settings, .wp-menu-screenshot, .wp-menu-import-page, .wp-menu-auto-add, .wp-menu-show-content`.split(",").forEach(function(e){var t=$(e.trim()).parent();(a?pg$Hide:pg$Show)(t)}),$(".wp-menu-regenerate").html("Regenerate "+(a?"the plugin file":"functions.php")+"..."))},W=(d.updateWPMenuForProjectType=function(){var e=d.wpIsPlugin();d.wpUpdateSayTheme(e,W),e?W.find(".wp-menu-regenerate").html("Regenerate the plugin PHP file..."):W.find(".wp-menu-regenerate").html("Regenerate functions.php...")},$('<li class="dropdown wp-menu"><a href="#" class="dropdown-toggle" data-toggle="dropdown">WordPress</a>                        <ul class="dropdown-menu with-checkboxes">                            <li><a href="#" class="wp-menu-export">Export the '+k(!0)+'</a></li>                            <li><a href="#" class="wp-menu-page-settings">Page settings...</a></li>                            <li><a href="#" class="wp-menu-theme-settings">Theme / Plugin settings...</a></li>                            <li class="wp-theme-only"><a href="#" class="wp-menu-screenshot">Update '+k(!0)+' screenshot</a></li>                            <li><a href="#" class="wp-menu-clean">Clear the '+k(!0)+' folder...</a></li>                            <li class="divider"></li>                            <li><a href="#" class="wp-menu-php-preview">Show PHP code preview</a></li>                            <li><a href="#" class="wp-menu-preview">Open site preview window</a></li>                            \x3c!-- <li><a href="#" class="wp-menu-use-preview-url">Use preview URL</a></li>--\x3e                            <li><a href="#" class="wp-menu-import-page">Import content from the site</a></li>                            <li><a href="#" class="wp-menu-auto-add">Auto add WordPress actions</a></li>                            <li class="nopgc divider"></li>                            <li><a href="#" class="nopgc wp-menu-apply-master">Apply master page</a></li>                            <li><a href="#" class="nopgc wp-menu-apply-master-all">Apply master pages to all open pages</a></li>                            <li><a href="#" class="nopgc wp-menu-apply-master-project-related">Apply the selected master to related files</a></li>                            <li><a href="#" class="nopgc wp-menu-apply-master-project">Apply master pages on the whole project</a></li>                            <li class="divider"></li>                            <li><a href="#" class="wp-menu-regenerate">Regenerate functions.php...</a></li>                            <li><a href="#" class="wp-menu-show-content">Validate &amp; Show the content area</a></li>                            <li><a href="#" class="wp-menu-remove">Remove WordPress actions...</a></li>                            <li class="divider"></li>                            <li><a href="#" class="wp-menu-quick-export"><i class="icon icon-check check-icon"></i>Quick export on save</a></li>                            <li><a href="#" class="nopgc wp-menu-mark"><i class="icon icon-check check-icon"></i>Mark WP areas &amp; scripts</a></li>                            <li><a href="#" class="wp-menu-help">Documentation</a></li>            </ul></li>')),F=(crsaAddKbd(W.find(".wp-menu-export"),"CMD M"),crsaAddKbd(W.find(".wp-menu-php-preview"),"CMD P"),function(e,t,a){if(canDoStuffOrIsTrialDisabled()){var o=m.getSelectedPage();if(o){var r=m.getCurrentProject();if(r){if(r.disable_wp)return!1;isApp()||r.isSavedOnTheBackend()?d.exportWholeTheme(r.getDir(),null,null,e,t,a):m.showAlert(`<p>The project is not yet saved.</p><p>Please save the project before exporting it.</p>`,"Save the project first","Close","Save the project",null,function(){m.backend.saveCurrentProject()})}else o&&(o.isNew()?m.showAlert(`<p>This is a new page. <b>Please save the page first.</b></p><p>Note: The source files of your WordPress theme should be located in a folder, not mixed with files from other projects.</p>`,"The page has to be saved first"):o.localFile?(r=require("path").dirname(o.localFile),d.exportWholeTheme(r,null,null,e,t,a)):m.showAlert(`<p>This is a remote page opened from URL. Creating WordPress themes only works with local projects on your computer.</p>`,"This is a remote page"))}else m.showQuickError("Please open at least one page first.")}}),r=(d.exportWholeThemeWithGetFolder=F,"PGTC"===pgf.product&&W.find(".nopgc").remove(),W.find(".wp-menu-clean").on("click",function(e){var t;e.preventDefault(),(t=d.getThemeInfo())&&t.dir?m.showAlert(`<p>Do you want to delete all theme files in the folder <b>${t.dir}</b>?</p><p>Any edits that you might have done there will be lost.</p>`,`Are you sure you want to delete ${d.wpSayTheme(!0)} files?`,"Better not",`Sure, I didn't modified anything in there`,null,function(){pgDeleteFolderContent(t.dir)&&m.showQuickMessage("The theme files were deleted.")}):m.showQuickError("The export folder is not defined.")}),W.find(".wp-menu-export").on("click",function(e){e.preventDefault(),F()}),W.find(".wp-menu-auto-add").on("click",function(e){e.preventDefault();var t=m.getSelectedPage();t&&d.autoAddActionsToPage(t)}),W.find(".wp-menu-page-settings").on("click",function(e){e.preventDefault(),d.showPageSettings()}),W.find(".wp-menu-screenshot").on("click",function(e){e.preventDefault(),d.wpUpdateThemeScreenshot()}),W.find(".wp-menu-theme-settings").on("click",function(e){e.preventDefault(),d.showWordPressSiteSetupDialog()}),W.find(".wp-menu-import-page").on("click",function(e){e.preventDefault();var t=m.getSelectedPage();t?d.getRenderedWordPressHTMLWithNotice(t.sourceNode):m.showQuickError("Open a page first.")}),W.find(".wp-menu-php-preview").on("click",function(e){e.preventDefault(),b(m.selectedElements.getLastSelected())}),W.find(".wp-menu-help").on("click",function(e){e.preventDefault(),m.openExternalUrl("https://pinegrow.com/docs/wordpress/")}),W.find(".wp-menu-regenerate").on("click",function(e){e.preventDefault(),d.wpRegenerateFunctionsPhp()}),W.find(".wp-menu-apply-master").on("click",function(e){e.preventDefault();var t=m.getSelectedPage();t&&d.applyMasterPage(t.url,t)}),W.find(".wp-menu-apply-master-all").on("click",function(e){e.preventDefault(),m.showAlert('<p>Are you sure that you want to run "Apply the master page" on all open documents?</p><p>Everything on the page, except the region with the <b>Site content</b> action, will be replaced by the content of its master page.</p>',"Are you sure?","Cancel","Apply the Master Page",null,function(){for(var e=m.getAllPages(),t=0;t<e.length;t++){var a=e[t];if(!1===d.applyMasterPage(a.url,a,!0))break}})}),W.find(".wp-menu-apply-master-project").on("click",function(e){e.preventDefault(),P()}),W.find(".wp-menu-apply-master-project-related").on("click",function(e){e.preventDefault();var t,a=null,o=m.getSelectedPage();o&&((a=(t=o.sourceNode.findOne("html"))&&(t.hasAttr("wp-site")||t.hasAttr("wp-master-page")||t.hasAttr("wp-template-define-master-page"))&&(t.hasAttr("wp-site-is-master-page")||t.hasAttr("wp-master-page")||t.hasAttr("wp-template-define-master-page"))?o.name:a)?P(a):m.showQuickError(o.name+` is not a master page.`))}),W.find(".wp-menu-remove").on("click",function(e){e.preventDefault(),V()}),W.find(".wp-menu-show-content").on("click",function(e){e.preventDefault(),m.getSelectedPage()&&d.showTheSiteContentInTheTree()}),W.find(".wp-menu-mark")),ae=r.find("i"),a=(S("1"==m.getSetting("wp-mark-areas","1")),r.on("click",function(e){var t;e.preventDefault(),t="1"==m.getSetting("wp-mark-areas","1"),S(t=!t),m.setSetting("wp-mark-areas",t?"1":"0"),m.showQuickMessage("Mark WordPress areas: "+(t?"ON":"OFF"))}),W.find(".wp-menu-quick-export")),oe=a.find("i"),O=(Q("1"==m.getSetting("wp-quick-export","1")),a.on("click",function(e){e.preventDefault();var t="1"==m.getSetting("wp-quick-export","1");Q(t=!t),m.setSetting("wp-quick-export",t?"1":"0"),m.showQuickMessage("Quick WordPress export on save: "+(t?"ON":"OFF"))}),function(){var e=m.getCurrentProject();return!(e&&e.disable_wp||"1"!=m.getSetting("wp-quick-export","1"))}),q=(isApp()?m.addPluginControlToTopbar(d,W,"PGTC"===pgf.product,function(){var e=m.getSelectedPage();return!(!e||!e.hasFramework(d))||(e=m.getCurrentProject())&&d.isWPEnabledForProject(e)}):(C=$('<li><a href="#" class="wp-menu-button"><i class="icon icon-WP"></i> <span class="name">Cool Name</span></a></li>'),$(".main-menu").append(C),pg$Hide(C),d.wpUpdateWPMenuButtonLabel=function(){var e,t;m.getCurrentProject()?(pg$Show(C),e=d.current_theme_info||d.getThemeInfo(null,!0),t=C.find("span"),e?t.addClass("name").html(e.name||e.slug):t.removeClass("name").html("Activate")):pg$Hide(C)},C.find("a").on("click",function(e){e.preventDefault();var a,t,o,r=d.getThemeInfo(null,!0),n=m.getCurrentProjectInfo();return r?(a=isApp()||pgf.wp_allow_export,(t=[]).push({label:"Export the "+(d.wpIsPlugin(r)?"plugin":"theme"),action:function(e,t){a?t.altKey?(m.showQuickMessage("Exporting with fetching the export log..."),F(function(){m.backend.getExportLog(function(e){var t=e.log||"";t?m.showAlert(`<p>The following events happened during the project export:</p><pre>${t}</pre>`,"The export log","Close"):m.showQuickError("The log is empty.")})},!0)):F():m.showAlert(`<p>WordPress theme or plugin export is not supported on Pinegrow Online. Use the Download option from the WordPress menu to download the exported project and then upload it to your WordPress site.</p><p>You can also install the <a href="https://pinegrow.com/wordpress" target="_blank" class="external">Pinegrow WordPress Plugin</a> to develop the project directly on your WordPress site.</p>`,"Export is not supported",null,"Ok")},kbd:"CMD M",helptext:`Export the WordPress ${d.wpIsPlugin(r)?"plugin":"theme"}. <br>Click with ${pgShowKbd("ALT")} to generate the export log, used for troubleshooting.`}),t.push({type:"divider"}),t.push({type:"header",label:"Settings"}),t.push({label:"Theme / plugin settings...",action:function(){d.showWordPressSiteSetupDialog()}}),t.push({label:"Page settings...",action:function(){d.showPageSettings()}}),a&&(t.push({type:"divider"}),t.push({type:"header",label:"Deploy into"}),o=function(t){var e="Staging"===t?"Production":"Staging";m.showNotice(`<p>The project will be exported into the <code>${t}</code> environment. But, the site is currently displayed in the <code>${e}</code> mode.</p><p>This means that the current version of the project will not be used when viewing the site in the browser - if the ${e.toLowerCase()} version of the project exists on the site.</p><p>To view the site in the <code>${t}</code> mode, use the Pinegrow menu in the top admin bar of the site or admin panel.</p>`,`View the site in the ${t} mode to test the exported project`,`wp-not-in-${t.toLowerCase()}-view-mode`,function(e){e||m.showQuickError(`Switch to viewing the site in the ${t} mode in order to test the project.`)},!1,!1,!0)},t.push({label:"Production",helptext:`Pinegrow exports a regular version of the project. Production projects are loaded when you view the site in the Production mode.`,check:!d.wpIsTestingModeEnabled(n),action:function(){n.setSetting("wp-staging-mode","0"),n.save(),m.showMode("Export into Production",!0),m.showQuickMessage("Re-export the project to apply changes to the exported code."),d.wpIsViewStagingInBrowserEnabled()&&o("Production")}}),t.push({label:"Staging",helptext:`In staging, Pinegrow exports a separate "Staging" version of the project. Staging projects are loaded when you view the site in the Staging mode.<br><br>In addition, Pinegrow tries to protect the site from breaking in case of code errors in the exported project, by wrapping the PHP code in eval() calls.<br><br>This method is not 100% reliable because it does not catch run-time errors that happen in WordPress actions and filters.<br><br>Use the Error log to debug any issues.<br><br>Once you are sure that the code works, choose the Production mode and re-export the project for maximum performance and code legibility.`,check:d.wpIsTestingModeEnabled(n),action:function(){n.setSetting("wp-staging-mode","1"),n.save(),m.showMode("Export into Staging",!0),m.showQuickMessage("Re-export the project to apply changes to the exported code."),d.wpIsViewStagingInBrowserEnabled()||o("Staging")}}),t.push({type:"divider"}),t.push({label:"Try loading the site after export",helptext:"Try detecting fatal PHP errors by loading the site after the project is exported. This makes the export take more time, but helps prevent accidentally breaking the site. This only runs if the exported plugin or theme is activated.",check:"1"===n.getSetting("wp-export-loopback","0"),action:function(){var e="1"===n.getSetting("wp-export-loopback","0");n.setSetting("wp-export-loopback",(e=!e)?"1":"0"),m.showMode("Try loading the site after export",e),n.save()}}),t.push({label:"Get the staging error log...",action:function(){d.wpIsTestingModeEnabled(n)||m.showQuickError("Note - Staging mode is disabled and any errors are not logged.");var o=d.wpIsPlugin(r)?"plugin":"theme";m.backend.getExportedProjectLog(m.getCurrentProject(),r.slug,o,function(e){var t,a=e.log||"";a?t=m.showAlert(`<p>The following errors happened during the execution of your ${o} since the last export:</p><pre>${a}</pre>`,"Oops... the project has issues!","Close","Refresh",null,function(){return m.showQuickMessage("Refreshing log..."),m.backend.getExportedProjectLog(m.getCurrentProject(),r.slug,o,function(e){(e.log||"")!==a?(m.showQuickMessage("The log changed!"),a=e.log||"",t.find("pre").html(a)):m.showQuickMessage("Nothing new.")}),!1}):m.showQuickError("The error log is empty.")})}})),d.wpIsPlugin(r)||(t.push({type:"divider"}),t.push({type:"header",label:"Master pages"}),t.push({label:"Apply master page",action:function(){var e=m.getSelectedPage();e&&d.applyMasterPage(e.url,e)}}),t.push({label:"Apply master pages to whole project",action:function(){P()}})),t.push({type:"divider"}),t.push({type:"header",label:"Download"}),t.push({label:"Download the "+(d.wpIsPlugin(r)?"plugin":"theme")+" ZIP...",action:function(){d.exportWholeTheme("",!1,!0)}}),t.push({type:"divider"}),t.push({type:"header",label:"Cleanup"}),t.push({label:d.wpIsPlugin(r)?"Regenerate the plugin PHP file":"Regenerate functions.php",action:function(){d.wpRegenerateFunctionsPhp()}}),t.push({label:"Remove WP actions...",action:function(){V()}}),t.push({type:"divider"}),t.push({type:"header",label:"View information"}),t.push({label:"Show PHP code preview",action:function(){b(m.selectedElements.getLastSelected())},kbd:"CMD P"}),t.push({label:"Documentation",action:function(){},link_url:"https://pinegrow.com/docs/wordpress/",dont_handle_click:!0}),new CrsaContextMenu(t,C).showForElement(C,null,8)):d.showWordPressSiteSetupDialog(),!1})),d.on_page_loaded=function(e){S("1"==m.getSetting("wp-mark-areas","1"))},d.on_page_refreshed=function(e){S("1"==m.getSetting("wp-mark-areas","1"))},d.on_get_class_named_custom_states=function(e,t){t.push({name:"WordPress",states:[{state:"[&:where(.admin-bar_*)]",name:"wp-has-admin-bar",helptext:"Admin bar is shown"},{state:"[&:where(.editor-styles-wrapper_*)]",name:"wp-in-block-editor",helptext:"Element is shown in the block editor.<br><br>Does not work for the <code>body</code> element. Use a separate editor CSS file for styling body in the editor."}]})},null),N=(d.wpGetPreviewWin=function(){return q},require("nw.gui"));N.Window.get().on("focus",function(){q&&q.setAlwaysOnTop(!0)}),N.Window.get().on("blur",function(){q&&q.setAlwaysOnTop(!1)}),N.Window.get().on("close",function(){q&&q.close(!0)});d.updatePreview=function(e){if(q)try{(e=e||J())&&(q.window.document.location.href!=(e=crsaAppendQueryToUrl(e,[`z=`+(new Date).getTime()]))&&!1||N.App.clearCache(),q.window.document.location.href=e,N.Window.get().focus(),setTimeout(function(){q.show()},100))}catch(e){q=null,console.error(e)}},d.wpShowPreviewForUrl=function(e){e?q?d.updatePreview(e):(N.App.clearCache(),N.Window.open(e,{focus:!0,id:"pgWPPreview",always_on_top:!1},function(e){(q=e).on("closed",function(){q=null}),q.on("loaded",function(){q.window.document.addEventListener("contextmenu",function(e){return e.preventDefault(),!1},!0,!1)}),q.setAlwaysOnTop(!0)})):m.showQuickMessage("Preview url is not set.")},W.find(".wp-menu-preview").on("click",function(e){e.preventDefault(),setTimeout(function(){var e=J();e&&d.wpShowPreviewForUrl(e)},10)}),W.find(".wp-menu-use-preview-url").on("click",function(e){e.preventDefault();function t(e){m.showAlert("<p><b>"+e+"</b></p><p>Use this function to set the current preview window url as the preview url for the selected page.</p>","Can't set preview url")}var a,o;q?(a=m.getSelectedPage())?(a=a.sourceNode.findOne("html"))&&(a.hasAttr("wp-site")||a.hasAttr("wp-template"))?(o=q.window.document.location.href,a.setAttr(a.hasAttr("wp-site")?"wp-site-preview-url":"wp-template-preview-url",o),m.showQuickMessage("The preview url was set to "+o+". <b>Save the page</b> to keep the setting",3e3)):t("The page doesn't have a WordPress Site action on it's Body element."):t("No page is selected. Select the page first."):t("The preview window is not open.")}),pgWPInitPineCone(d)})});