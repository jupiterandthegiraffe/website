class PgDmDesignSkillPlainHTMLOptions extends PgDmDesignSkill{constructor(){super("plainhtml","Design options"),this.addControl("reset",{name:"Normalize styles",type:"checkbox",value:"true",dm_no_lock:!0,helptext:`<p>Add normalize.css to make the default styling the same in all major browsers.</p>`})}populateDefaultParams(){this.setParam("reset","true")}onSurpriseMe(e){e&&e()}onGetCSS(e){var t="";return"init"===e&&("true"===this.getParam("reset")&&(t+=`
/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}
                    
`),t+=`*, *::before, *::after {
    box-sizing: border-box;
}`),t}}class PgDmDesignSkillColorsForPlainHTML extends PgDmDesignSkillColors{constructor(e){super("plainhtml.colors",e,function(){var s=`
:root {
`;return e.forEachColor(function(e,t){s+=`    --${e}: ${t};
`}),s+="}"},"rules")}populateDefaultParams(e){e||this.colors.clear(),this.colors.add("primary","#0d6efd",!1,null,!0),this.colors.add("secondary","#6c757d",!1,null,!0),this.colors.add("color3","#0dcaf0",!1,null,!0),this.colors.add("color4","#198754",!1,null,!0),this.colors.add("white","white",!0,null,!0),this.colors.add("light","#f8f9fa",!0,null,!0),this.colors.add("dark","#212529",!0,null,!0),super.populateDefaultParams()}}class PgDmDesignProviderForPlainHTML extends PgDmDesignProvider{constructor(e){super("plainhtml","Plain HTML Design"),this.framework=e,this.prefix="plainhtml";this.on_engine_ready_funcs=[],this.colors=new PgDmDesignColors,this.colors.can_edit=!0,this.colors.mode="css",this.addSkills()}addSkills(){var e=new PgDmDesignSkillColorsForPlainHTML(this.colors),e=(this.addSkill(e),this.fonts_skill_main=new PgDmDesignSkillFonts(!1,e,"css"),this.addSkill(this.fonts_skill_main),this.fonts_skill_headings=new PgDmDesignSkillFonts(!0,e,"css"),this.addSkill(this.fonts_skill_headings),new PgDmDesignSkillBackground(e));e.onGetBackgroundColorCSS=function(e){return e?`
body {
    background-color: var(--${e});            
}
`:""},this.addSkill(e),this.addSkill(new PgDmDesignSkillPlainHTMLOptions)}canEditColors(){return!0}getActiveFonts(){var e=[];return this.fonts_skill_main.getActiveFonts(e),this.fonts_skill_headings.getActiveFonts(e),e}getEngine(e){var s=this;this.engine?this.engine.isReady()?e(this.engine):s.on_engine_ready_funcs.push(e):this.engine=new PgDmEngineForPlainHTML(function(t){s.on_engine_ready_funcs.forEach(function(e){e(t)}),s.on_engine_ready_funcs=[],e&&e(t)},this.framework)}destroyEngine(){this.engine&&this.engine.destroy(),this.engine=null}}class PgDmEngineForPlainHTML extends PgDmEngine{constructor(e,t){super(e);var s,n=this,i=(this.delayedTasks=new PgDelayedTasks,this.design_provider=t,this.is_ready=!1,this.done_list=[],this.busy=!1,this.update_on_done=!1,pinegrow.getCurrentProject()),o=(this.custom_cs_url=null,isApp()?(s=i.getAbsolutePath("css/theme.css"),this.custom_cs_url=crsaMakeUrlFromFile(s)):this.custom_cs_url=i.getAbsoluteUrl("css/theme.css"),this.outcs=pinegrow.getStylesheetByUrl(this.custom_cs_url));o?(n.is_ready=!0,e&&e(n)):(isApp()||((s=pinegrow.getCurrentProject()).hasContentForUrl("css/theme.css")||s.setContentOfUrl("css/theme.css",""),pinegrow.refreshCurrentProjectDelayed(!0)),(o=this.outcs=PgCSSStylesheet()).setUrl(this.custom_cs_url),pinegrow.stylesheets.addCrsaStylesheet(o),o.usedByDesignPanel=!0,o.load(this.custom_cs_url,function(){n.is_ready=!0,o.setIgnore(!0),e&&e(n)},!1,!0,!0)),o.isLocked()||o.setLocked(!0,"The stylesheet is generated by the Design panel.")}getStylesheetUrl(){return this.custom_cs_url}activateOnPage(e,t){var s,n=this;!e.sourceNode||(s=null,e.stylesheets.has(this.outcs))?t&&t():(e.sourceNode.withoutEvents(function(){e.sourceNode.find("link").forEach(function(e){var t;"stylesheet"===e.getAttribute("rel")&&(t=e.getAttribute("href"))&&t.match(/normalize\.css/i)&&(s=e)}),e.stylesheets.attachTo(n.outcs,null,function(){pinegrow.changeManager.didChange(null,"Add theme stylesheet",null,e),$("body").trigger("crsa-stylesheets-changed"),e.refresh(function(){pinegrow.insight.inspectPageOrPgel(e,null)}),t&&t()},s,!0)}),e.setPageChanged(!0))}getOutputCS(e){return this.outcs}update(e){e&&this.done_list.push(e),this.delayedTasks.run("update",this.updateTask.bind(this),10)}updateTask(){var e,t,s,n=this,i=pinegrow.getSelectedPage();i?this.busy?this.update_on_done=!0:(e={css:"",cs_url:this.custom_cs_url},pinegrow.dispatchEvent("on_dm_get_css",null,"import",e),pinegrow.dispatchEvent("on_dm_get_css",null,"init",e),pinegrow.dispatchEvent("on_dm_get_css",null,"rules",e),t=new CrsaProfile,this.busy=!0,(s=n.getOutputCS(i))&&(s.ignore_imports_in_apply=!0,s.setSource(e.css,function(){t.show("Applied to page"),n.busy=!1,n.update_on_done?n.update():(n.done_list.forEach(function(e){e()}),n.done_list=[]),n.update_on_done=!1,pinegrow.dispatchEvent("on_css_stylesheet_changed",null,s),pinegrow.selectedElements.repositionMenusDelayed(),pinegrow.refreshPageChangedStatusForAllPages(!0)}),i=pgDmStore.design.fonts.getFontUrls(),n.addFontsToPageViews(s,i))):(n.done_list.forEach(function(e){e()}),n.done_list=[])}saveCSS(){var e=pinegrow.getSelectedPage(),e=this.getOutputCS(e);!e||!e.localFile&&isApp()||(e.save(e.localFile),e.setChanged(!1))}destroy(){this.design_provider=null,this.outcs.usedByDesignPanel=!1,this.outcs.remove()}}