var PgDmStyleListItem=function(e){this.style=e,this.$element=$(`<div class="pg-dm-style-list-item"></div>`),this.$element.data("item",this)},PgDmStyleListView=(PgDmStyleListItem.prototype.update=function(){var e="",t=(e+=`<name>${this.style.name}</name>`,this.style.getHTMLForStyleDisplay());t.length&&(e+=`<div class="pg-sm-style-list-item-preview">${t}</div>`),this.$element.get(0).innerHTML=e},PgDmStyleListItem.prototype.setActive=function(e){e?this.$element.addClass("active"):this.$element.removeClass("active")},function(){function e(e,t){s.show()}function t(){new WeakMap,l.empty(),s.show()}function n(e,t){d.whenVisible(function(){var e=a.get(t);e&&e.update()},"updateStyle"+t.name)}function i(e,t,n){d.whenVisible(function(){m&&(m.setActive(!1),m=null);var e=a.get(t);e&&(e.setActive(!0),m=e)},"setActiveStyle",1)}var s=this,l=(this.$element=$('<div class="pg-dm-style-list"></div>'),$('<div class="pg-dm-style-list-items"></div>').appendTo(this.$element)),d=this.view=new PgUIView(this.$element,"pgdmstylelist"),a=new WeakMap,o=[],m=null;l.on("click",".pg-dm-style-list-item",function(e){e.preventDefault();var t=$(this).data("item");pgDmStore.assignStyleToSelectedElements(t.style),pgDmStore.setCurrentStyle(t.style)}),this.show=function(){d.whenVisible(function(){o.forEach(function(e){}),pgDmStore.getStyles().forEach(function(e){var t;a.has(e)?a.get(e):(t=new PgDmStyleListItem(e),a.set(e,t),o.push(t),t.update(),l.append(t.$element))})})},this.show();pinegrow.addEventHandler("on_dm_style_added",e),pinegrow.addEventHandler("on_dm_project_loaded",t),pinegrow.addEventHandler("on_dm_style_changed",n),pinegrow.addEventHandler("on_dm_current_style_changed",i),d.onDestroy=function(){pinegrow.removeEventHandler("on_dm_style_added",e),pinegrow.removeEventHandler("on_dm_project_loaded",t),pinegrow.removeEventHandler("on_dm_style_changed",n),pinegrow.removeEventHandler("on_dm_current_style_changed",i)}});