$(function(){$("body").one("pinegrow-ready",function(t,n){new PgDmSkill("text","Text",function(){this.description="Display a line under headings";var n=new PgToggleButtonMaker,r=(this.addControl("font",{name:"Font",type:"select",toggle_buttons:!0,show_empty:!0,recreate_on_show:!0,options:function(){var e=[];return pgDmStore.design.getFontTypes().forEach(function(t){e.push({key:t,name:t,html:n.makeText(t,{})})}),e}}),this.addControl("fontsize",{name:"Size",type:"slider",slider_def_unit:"",slider_min:pgDmStore.design.options.font_sizes.min,slider_max:pgDmStore.design.options.font_sizes.max,options:function(){for(var t=[],e=pgDmStore.design.options.font_sizes,n=1.2,i=e.min;i<=e.max;i++){var a=13*Math.pow(n,i);t.push({key:i,name:i,html:`<span style="font-size:${a}px;">Text Size ${i}</span>`})}return t}}),this.addControl("line-height",{name:"Line height",type:"slider",slider_def_unit:""}),this.addControl("color",{name:"Color",type:"color"}),this.addControl("spacing",{name:"Spacing",type:"slider",slider_def_unit:"px"}),{left:"left",right:"right",center:"center",justify:"full"});this.addControl("align",{name:"Align",type:"select",toggle_buttons:!0,show_empty:!0,options:[{key:"left",name:"Left",html:n.makeIcon("align-left",{attributes:{title:"Left"}})},{key:"center",name:"Center",html:n.makeIcon("align-center",{attributes:{title:"Center"}})},{key:"right",name:"Right",html:n.makeIcon("align-right",{attributes:{title:"Right"}})},{key:"justify",name:"Justify",html:n.makeIcon("align-full",{attributes:{title:"Justify"}})}]}),this.addControl("font-options-container",{name:"Options",type:"displayhtmlwithlabel",html:""}),this.addControl("italic",{name:"Italic",type:"select",toggle_buttons:!0,append_to:".crsa-field-text-font-options-container",without_text:!0,show_empty:!0,options:[{key:"italic",name:"Italic",html:n.makeIcon("style_italic",{attributes:{title:"Italic"}})}]}),this.addControl("smallcaps",{name:"Small caps",type:"select",toggle_buttons:!0,append_to:".crsa-field-text-font-options-container",without_text:!0,show_empty:!0,options:[{key:"small-caps",name:"Small caps",html:n.makeText("Abc",{styles:{"font-family":"serif","font-size":"15px","font-variant":"small-caps"},attributes:{title:"Small caps"}})}]}),this.addControl("uppercase",{name:"Uppercase",type:"select",toggle_buttons:!0,append_to:".crsa-field-text-font-options-container",without_text:!0,show_empty:!0,options:[{key:"uppercase",name:"Uppercase",html:n.makeIcon("Transform-uppercase",{attributes:{title:"Uppercase"}})}]}),this.addControl("truncate",{name:"Truncate",type:"select",toggle_buttons:!0,append_to:".crsa-field-text-font-options-container",without_text:!0,show_empty:!0,options:[{key:"truncate",name:"...",html:n.makeText("...",{})}]}),this.addControl("indent",{name:"Indent",type:"slider",slider_def_unit:""}),this.populateDefaultParams=function(){this.setParam("width","50px"),this.setParam("height","0.05em")},this.onGetCSS=function(t,e){var n="";return t["font"]&&(n+=pgDmStore.design.getFontDeclarationForCSS(t["font"])),t["fontsize"]&&(n+=`font-size: ${pgDmStore.design.getFontSizeForCSS(t["fontsize"])};
`),t["line-height"]&&(n+=`line-height: ${t["line-height"]};
`),t["color"]&&(n+=`color: ${pgDmStore.design.getColorForCSS(t["color"])};
`),t["spacing"]&&(n+=`letter-spacing: ${t["spacing"]};
`),t["align"]&&(n+=`text-align: ${t["align"]};
`),t["italic"]&&(n+=`font-style: italic;
`),t["uppercase"]?n+=`text-transform: uppercase;
`:t["smallcaps"]&&(n+=`font-variant: small-caps;
`),t["truncate"]&&(n=(n+=`overflow: hidden;
`)+`white-space: nowrap;
`+`text-overflow: ellipsis;
`),t["indent"]&&(n+=`text-indent: ${pgDmStore.design.getFontSizeForCSS(t["indent"])};
`),n},this.getHTMLForStyleDisplay=function(t){var n,e="",i="A",a=!1,o="";return t["font"]&&(i=t["font"],a=!0),t["align"]&&(o+=`<div><i class="icon icon-align-${r[t["align"]]}"></i></div>`),a&&(n="",$.each({},function(t,e){n+=t+":"+e+";"}),e=`<div style="${n}">${i}</div>`),e+o}}),new PgDmSkill("container","Container",function(){this.description="Container settings";var i=this,t=new PgToggleButtonMaker,o=(this.addControl("mode",{name:"Mode",type:"select",toggle_buttons:!0,show_empty:!0,options:[{key:"absolute",name:"Absolute",html:t.makeText("Abs",{attributes:{title:"Absolute"}})},{key:"columns",name:"Columns",html:t.makeText("Cols",{attributes:{title:"Columns"}})},{key:"rows",name:"Rows",html:t.makeText("Rows",{attributes:{title:"Rows"}})},{key:"grid",name:"Grid",html:t.makeText("Grid",{attributes:{title:"Grid"}})}]}),this.addControl("flex.wrap.columns",{name:"Wrap",type:"select",show_empty:!0,toggle_buttons:!0,options:[{key:"wrap",name:"Wrap",html:t.makeIcon("204",{attributes:{title:"Wrap"}})},{key:"nowrap",name:"No wrap",html:t.makeIcon("203",{attributes:{title:"No wrap"}})},{key:"wrap-reverse",name:"Wrap reverse",html:t.makeIcon("202",{attributes:{title:"Wrap reverse"}})}],show_if:"container.mode==columns"}),this.addControl("flex.wrap.rows",{name:"Wrap",type:"select",show_empty:!0,toggle_buttons:!0,options:[{key:"wrap",name:"Wrap",html:t.makeIcon("204 flip-icon",{attributes:{title:"Wrap"}})},{key:"nowrap",name:"No wrap",html:t.makeIcon("203 flip-icon",{attributes:{title:"No wrap"}})},{key:"wrap-reverse",name:"Wrap reverse",html:t.makeIcon("202 flip-icon",{attributes:{title:"Wrap reverse"}})}],show_if:"container.mode==rows"}),this.addControl("flex.align.items.columns",{name:"Align items",type:"select",show_empty:!0,toggle_buttons:!0,options:[{key:"flex-start",name:"Start",html:t.makeIcon("223",{attributes:{title:"Start"}})},{key:"center",name:"Center",html:t.makeIcon("221",{attributes:{title:"Center"}})},{key:"flex-end",name:"End",html:t.makeIcon("220",{attributes:{title:"End"}})},{key:"stretch",name:"Stretch",html:t.makeIcon("214",{attributes:{title:"Stretch"}})},{key:"baseline",name:"Baseline",html:t.makeIcon("212",{attributes:{title:"Baseline"}})}],show_if:"container.mode==columns"}),this.addControl("flex.align.items.rows",{name:"Align items",type:"select",show_empty:!0,toggle_buttons:!0,options:[{key:"flex-start",name:"Start",html:t.makeIcon("223 flip-icon",{attributes:{title:"Start"}})},{key:"center",name:"Center",html:t.makeIcon("221 flip-icon",{attributes:{title:"Center"}})},{key:"flex-end",name:"End",html:t.makeIcon("220 flip-icon",{attributes:{title:"End"}})},{key:"stretch",name:"Stretch",html:t.makeIcon("214 flip-icon",{attributes:{title:"Stretch"}})},{key:"baseline",name:"Baseline",html:t.makeIcon("212 flip-icon",{attributes:{title:"Baseline"}})}],show_if:"container.mode==rows"}),this.addControl("flex.justify.columns",{name:"Justify",type:"select",show_empty:!0,toggle_buttons:!0,options:[{key:"flex-start",name:"Start",html:t.makeIcon("223",{attributes:{title:"Start"}})},{key:"center",name:"Center",html:t.makeIcon("219",{attributes:{title:"Center"}})},{key:"flex-end",name:"End",html:t.makeIcon("218",{attributes:{title:"End"}})},{key:"space-between",name:"Space between",html:t.makeIcon("206",{attributes:{title:"Space between"}})},{key:"space-around",name:"Space around",html:t.makeIcon("205",{attributes:{title:"Space around"}})}],show_if:"container.mode==columns"}),this.addControl("flex.justify.rows",{name:"Justify",type:"select",show_empty:!0,toggle_buttons:!0,options:[{key:"flex-start",name:"Start",html:t.makeIcon("223 flip-icon",{attributes:{title:"Start"}})},{key:"center",name:"Center",html:t.makeIcon("219 flip-icon",{attributes:{title:"Center"}})},{key:"flex-end",name:"End",html:t.makeIcon("218 flip-icon",{attributes:{title:"End"}})},{key:"space-between",name:"Space between",html:t.makeIcon("206 flip-icon",{attributes:{title:"Space between"}})},{key:"space-around",name:"Space around",html:t.makeIcon("205 flip-icon",{attributes:{title:"Space around"}})}],show_if:"container.mode==rows"}),this.addControl("flex.align.content.columns",{name:"Align content",type:"select",show_empty:!0,toggle_buttons:!0,options:[{key:"flex-start",name:"Start",html:t.makeIcon("217",{attributes:{title:"Start"}})},{key:"center",name:"Center",html:t.makeIcon("215",{attributes:{title:"Center"}})},{key:"flex-end",name:"End",html:t.makeIcon("216",{attributes:{title:"End"}})},{key:"stretch",name:"Stretch",html:t.makeIcon("214",{attributes:{title:"Stretch"}})},{key:"space-between",name:"Space between",html:t.makeIcon("210",{attributes:{title:"Space between"}})},{key:"space-around",name:"Space around",html:t.makeIcon("209",{attributes:{title:"Space around"}})}],show_if:"container.mode==columns"}),this.addControl("flex.align.content.rows",{name:"Align content",type:"select",show_empty:!0,toggle_buttons:!0,options:[{key:"flex-start",name:"Start",html:t.makeIcon("217 flip-icon",{attributes:{title:"Start"}})},{key:"center",name:"Center",html:t.makeIcon("215 flip-icon",{attributes:{title:"Center"}})},{key:"flex-end",name:"End",html:t.makeIcon("216 flip-icon",{attributes:{title:"End"}})},{key:"stretch",name:"Stretch",html:t.makeIcon("214 flip-icon",{attributes:{title:"Stretch"}})},{key:"space-between",name:"Space between",html:t.makeIcon("210 flip-icon",{attributes:{title:"Space between"}})},{key:"space-around",name:"Space around",html:t.makeIcon("209 flip-icon",{attributes:{title:"Space around"}})}],show_if:"container.mode==rows"}),{}),t=new function(t,e,n,i){var a=this;this.key=t,this.name=e,this.description=i,this.params=n,this.controls=[],this.addControl=function(t,e){e.subkey=t,this.controls.push(e)},this.getCSS=function(i){var e="";return $.each(this.params,function(t,n){a.controls.forEach(function(t){var e=i[t.subkey]||null;n=n.replace(new RegExp("\\$"+t.grid_param,"g"),e)}),t.startsWith("_subrule")?e+=n+`;
`:e+=t+`: ${n};
`}),e}}("gallery","Gallery",{"grid-template-columns":"repeat(auto-fit, minmax($min, 1fr))","grid-auto-rows":"$rowsize",_subrule1:"> img, > a > img { @include m-grid-image; }"},"Bla bla...");t.addControl("min",{name:"Min. col. size",type:"slider",default_value:"200px",slider_def_unit:"px"}),t.addControl("rowsize",{name:"Row size",type:"slider",value:"100px",slider_def_unit:"px"}),o[t.key]=t,this.addControl("grid.preset",{name:"Preset",type:"select",show_empty:!0,options:function(){var n=[];return $.each(o,function(t,e){n.push({key:e.key,name:e.name})}),n},show_if:"container.mode==grid"}),$.each(o,function(t,n){n.controls.forEach(function(t){var e=t;e.show_if="container.grid.preset=="+n.key,e.grid_param=t.subkey,i.addControl("grid."+n.key+"."+t.subkey,e)})}),this.addControl("grid.gap",{name:"Gap",type:"slider",slider_def_unit:"px",show_if:"container.mode==grid"}),this.addControl("editor",{name:"Open Grid Editor",type:"button",func:function(t,e){n.showCSSGridControl(t,e)},show_if:"container.mode==grid"}),this.onGetCSS=function(t,e){var n="";switch(t["mode"]){case"absolute":n+=`position: relative;
`;break;case"columns":case"rows":var i=t["mode"],a=(n=n+`display: flex;
`+`flex-direction: ${"columns"==t["mode"]?"row":"column"};
`,t["flex.wrap."+i]&&(n+=`flex-wrap: ${t["flex.wrap"]};
`),"flex.align.items."+i);t[a]&&(n+=`align-items: ${t[a]};
`),t["flex.justify."+i]&&(n+=`justify-content: ${t["flex.justify."+i]};
`),t["flex.align.content."+i]&&(n+=`align-items: ${t["flex.align.content."+i]};
`);break;case"grid":n+=`display: grid;
`,t["grid.preset"]&&(a=o[t["grid.preset"]]||null)&&(n+=a.getCSS(t)),null!==t["grid.gap"]&&(n+=`grid-gap: ${t["grid.gap"]};
`)}return n}}),new PgDmSkill("heading.line","Heading Line",function(){this.description="Display a line under headings",this.addControl("color",{type:"color",name:"Color",help:"Line color."}),this.addControl("width",{name:"Width",type:"slider",default_value:"40px",slider_min:0}),this.addControl("height",{name:"Height",type:"slider",slider_min:0}),this.addControl("opacity",{name:"Opacity",type:"range",range_min:0,range_max:1,range_step:.05}),this.populateDefaultParams=function(){this.setParam("width","50px"),this.setParam("height","0.05em")},this.onGetCSS=function(t,e){var n=this.getParam("color",t),i=this.getParam("width",t),a=this.getParam("height",t),o=this.getParam("opacity",t),r=[];return null!==o&&r.push(`opacity: ${o};`),`
    &:after {
        border-top: ${a} solid ${n?" "+pgDmStore.design.getColorForCSS(n):""};
        display: block;
        width: ${i};
        height: 1px;
        margin-top: 1rem;
        content: "";
        ${r.join("\n")}
    }
    `}}),new PgDmSkill("margin.padding","Margin &amp; Padding",function(){function a(t,e){var n,i=t+"-top"in e?e[t+"-top"]:null,a=t+"-right"in e?e[t+"-right"]:null,o=t+"-bottom"in e?e[t+"-bottom"]:null,r=t+"-left"in e?e[t+"-left"]:null;return i===a&&a===o&&o===r?null!==i?[t+`: ${i};`]:null:null!==i&&null!==a&&null!==o&&null!==r?i===o&&a===r?[t+`: ${i} ${r};`]:[t+`: ${i} ${r} ${o};`]:(n=[],null!==i&&n.push(t+`-top: ${i};`),null!==a&&n.push(t+`-right: ${a};`),null!==o&&n.push(t+`-bottom: ${o};`),null!==r&&n.push(t+`-left: ${r};`),n)}var r=this,l=(this.description="Display a line under headings",{type:"custom",name:"margin_padding",action:"none"});l.control=PgControlMarginPadding({setCssValueForShorthandable:function(t,e,n,i,a,o){return r.controlSetValue(t,i,null,null,"input",{subkey:e+"-"+n}),i},getCssValueForShorthandable:function(t,e,n,i,a){return r.controlGetValue(t,n,e,{subkey:n+"-"+i})},on_subfield_changed:function(t,e,n,i,a,o){l.on_changed&&l.on_changed(t,e,n,i,a,o)}}),this.addControl("control",l);this.onGetCSS=function(t,e){var n=[],i=a("margin",t),i=(i&&(n=i),a("padding",t));return(n=i?n.concat(i):n).length?n.join("\n"):""}}),new PgDmSkill("grid","CSS Grid",function(){var e=this;this.description="CSS Grid Control",this.addControl("editor",{name:"Open Editor",type:"button",func:function(t,e){n.showCSSGridControl(t,e)}});["display","grid-template-columns","grid-template-rows","grid-template-areas","grid-gap","grid-auto-columns","grid-auto-rows"].forEach(function(t){e.addControl(t,{name:t,type:"text",show:!1})}),this.onGetCSS=function(t,e){var n="";return $.each(t,function(t,e){null!==e&&(n+=t+`: ${e};
`)}),n}}),new PgDmSkill("grid.item","CSS Grid Item",function(){var e=this;this.description="CSS Grid Item Control",["grid-area"].forEach(function(t){e.addControl(t,{name:t,type:"text"})}),this.onGetCSS=function(t,e){var n="";return n=t["grid-area"]?`grid-area: ${t["grid-area"]};
`:n}}),new PgDmSkill("test","Test control",function(){this.description="Display a line under headings",this.addControl("x",{name:"X",type:"slider",slider_def_unit:"deg"}),this.addControl("y",{name:"Y",type:"slider",slider_def_unit:"deg"}),this.addControl("z",{name:"Z",type:"slider",slider_def_unit:"deg"}),this.populateDefaultParams=function(){this.setParam("width","50px"),this.setParam("height","0.05em")},this.onGetCSS=function(t,e){return`transform: rotateX(${this.getParam("x",t)||0}) rotateY(${this.getParam("y",t)||0}) rotateZ(${this.getParam("z",t)||0});`}})})});