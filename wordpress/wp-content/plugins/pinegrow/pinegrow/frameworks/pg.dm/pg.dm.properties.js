var PgDmPropertiesView=function(){function e(){pinegrow.getSelectedPage()&&s.whenVisible(function(){a.show(i,null,r.just_obj)})}function n(e,n,o){o&&o.source&&o.source==r?a.updateHasDataDelayed():c()}function o(e,n,o){c()}var t=$('<div class="crsa-panel crsa-properties"></div>'),s=new PgUIView(t,"prop","Props"),r=(this.view=s,this.just_obj=!1,s.tabIcon="icon-settings",this),i=null,a=new PgShowProperties(t),l=(a.view.get$Element().appendTo(t),["pg-classes"]),c=(a.filterSection=function(e,n){return l.indexOf(e)<0},function(e){var n;r.just_obj||(n=pinegrow.selectedElements.getLastSelected(),r.show(n,null,r.just_obj))});this.show=function(e,n){this.just_obj=n,s.whenVisible(function(){e&&pinegrow.dispatchEvent("on_before_properties_shown",e.getPage()),a.show(e,null,n)}),i=e},this.show(null),s.onAddedToLayout=function(e){},s.onResize=function(){a.updateLayout()},$("body").on("crsa-frameworks-changed",e),t.on("crsa-field-value-changed",function(e){return pinegrow.dispatchEventDelayedForObject(i,"on_prop_field_changed",null,i,{source:r}),!1}),t.on("crsa-refresh-properties",function(e){return r.show(i,r.just_obj),!1}),pinegrow.addEventHandler("on_prop_field_changed",n),pinegrow.addEventHandler("on_selected_elements_changed",c);pinegrow.addEventHandler("on_element_classes_changed",o),s.onDestroy=function(){a.show(null),show_general&&show_general.show(null),pinegrow.removeEventHandler("on_selected_elements_changed",c),pinegrow.removeEventHandler("on_prop_field_changed",n),pinegrow.removeEventHandler("on_element_classes_changed",o),$("body").off("crsa-frameworks-changed",e)}};