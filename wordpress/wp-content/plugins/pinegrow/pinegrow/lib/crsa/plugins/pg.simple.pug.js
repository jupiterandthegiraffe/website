class PgSimplePugNode{constructor(t,s,e,i,n){this.tag=t,this.id=s,this.classes=e||[],this.children=[],this.parent=null,i&&this.children.push(i),this.spaces=n}addChild(t){this.children.push(t),"string"!=typeof t&&(t.parent=this)}toString(s){var e,i,t,n=s=void 0===s?"":s,r="__root__"===this.tag;if(this.tag){switch(r||(n+=`<`+this.tag,this.id&&(n+=` id="${this.id}"`),this.classes.length&&(n+=` class="${this.classes.join(" ")}"`)),this.tag.toLowerCase()){case"a":n+=' href="#"';break;case"img":n+=' src="$IMAGE_URL"'}this.children.length&&(r||(n+=">"),i=e=!1,this.children.forEach(function(t){"string"==typeof t?(e&&(n+=" "),n+=t,e=!0):(n+=(n.length?"\n":"")+t.toString(s+(r?"":"    ")),e=!1,i=!0)}),i)&&!r&&(n+="\n"+s),r||(t=0<=pgSingleTags.indexOf(this.tag.toLowerCase()),this.children.length||!t?(0===this.children.length&&(n+=">"),n+=`</${this.tag}>`):n+=" />")}return n}}class PgSimplePug{constructor(){}render(t){var s=t.split(/[\n\r]+/),l=null,c=new PgSimplePugNode("__root__"),d=null,g=0;return s.forEach(function(t){g++;var s=t.match(/^(\s*)(.*)$/);if(s){var e=s[1].replace(/\t/,"    ").length,s=(null===l&&(l=e,c.spaces=e,d=c),s[2].match(/^([^\s\.\#]+)(#[^\s\.]+)?(\.\S+)?\s*(.*)/));if(!s)throw`Syntax error in line ${g} - ${t}. Only tags, ids, classes and text are supported.`;var i=s[1],n=(n=s[2])&&n.replace("#",""),r=s[3],s=s[4],a=null,a="|"===i?s||"":(r=r&&r.replace(".","").split("."),new PgSimplePugNode(i,n,r||[],s,e));if(d.spaces<e||d===c)d.addChild(a);else if(d.spaces===e)d.parent.addChild(a);else{for(var h=d.parent;h&&h.spaces>e;)h=h.parent;if(!h||!h.parent)throw`Bad indent in line ${g} - `+t;h.parent.addChild(a)}"string"!=typeof a&&(d=a)}}),c.toString()}}