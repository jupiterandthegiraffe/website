class PgSearch{constructor(){this.results=[],pinegrow.addEventHandler("on_page_menu",function(a,e){return e.push({label:"Remove attributes...",kbd:null,action:function(){pinegrow.showPrompt(`Enter the name of the attribute you want to remove from all elements on the page. Use <code>*</code> to match a pattern, for example <code>data-pg-*</code>.`,"Remove attributes","","data-pg-*",null,function(e){var t,r,o=0;return""===(e=e.trim())?pinegrow.showQuickError("Please enter a value."):(t=(t="^"+pgParserEscapeRegExp(e)+"$").replace("\\*",".*"),r=new RegExp(t,"i"),pinegrow.makeChanges(a,"Remove attribute "+e,function(){a.sourceNode.walk(function(t){return t.isElement&&t.getAttrList().slice(0).forEach(function(e){e.name.match(r)&&(t.removeAttribute(e.name),o++)}),!0})}),0===o?pinegrow.showQuickError("No such attributes found!"):pinegrow.showQuickMessage(o+" attributes removed!")),!1},"Close","Remove")}}),e})}addError(e,t,r){this.results.push({pgel:e,attr:t,value:r})}elementSelector(e){return'<b data-pg-id="'+e.getId()+'">'+e.getName({short:!0})+"</b>"}describeResults(){var t="";return 0===this.results.length?t+="<li>No elements found.</li>":this.results.forEach(function(e){crsaGetSummaryStr(e.pgel.text(null,!0)||"",10,!0);t+='<li data-pg-id="'+e.pgel.getId()+'"><span>'+e.pgel.getName({short:!0})+"</span></li>"}),t}search(e){var t='<p class="status"></p><p>Results:</p><ul style="user-select: text;">',r=(t+="</ul>",e.getPage());new PgQuickDialog("Remove attributes in "+r.getName(),function(e){t=t+'<p class="help">Click on the element on the above list to select it.'+"</p>";return e.addClass("pg-code-validator-results"),e.on("click","[data-pg-id]",function(e){e.preventDefault();var t=$(this).attr("data-pg-id"),r=getPgNodeByPgId(t);r&&(r.scrollTo(),setTimeout(function(){pinegrow.selectElement(r),pinegrow.showQuickMessage(r.getName({short:!0})+" was selected.")},100))}),t+='<button class="pg-button pg-button-primary refresh">Refresh</button>',e.on("click","button.refresh",function(e){e.preventDefault(),validate()}),t},{width:480})}}$(function(){pgf.edit_html&&$("body").one("pinegrow-ready",function(e,t){new PgSearch})});