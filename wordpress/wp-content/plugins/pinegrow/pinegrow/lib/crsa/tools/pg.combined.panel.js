var PgComboDividerBox=function(e,i,t){var n,o=null,a=i.getFastdomTasks().getUniqueKey(),s=e.get(0),d=function(){o&&o.remove(),o=$('<div class="pg-combined-panel-box"></div>'),t&&o.addClass("without-title"),(n=e.closest(".lm_item_container,.pg-quick-win")).append(o),c()},c=function(e){var t;n&&(n.get(0).parentNode||d(),(t=e?i.getFastdomTasks().create(a):i.getFastdomTasks().createDummy()).measure(function(){var e=s.getBoundingClientRect(),i=n.get(0).getBoundingClientRect();t.mutate(function(){o.css({top:e.top-i.top+"px"})})}))};this.onAddedToLayout=function(){d(),i.whenVisible(function(){d()},"onComboDividerFirstShow")},this.update=function(e){i.whenVisible(function(){c(e)},"updateComboDivider")},this.destroy=function(){o&&o.remove(),i.getFastdomTasks().stopAll(a)},this.hide=function(){o&&pg$Hide(o)},this.show=function(){o&&(pg$Show(o),this.update())},i.whenVisible(function(){d()},"onComboDividerFirstShow")},PgCombinedPanelView=function(e,i,t,n,o){var a=this,s=(this.minHelperSize=50,e+"-open"),d=e+"-size",c=$('<div class="pg-combined-panel"></div>'),r=this.view=new PgUIView(c),u=c,p=$('<div class="pg-combined-panel-master"></div>').appendTo(u),g=$('<div class="pg-combined-panel-master-helper"><h1><span class="text">'+(n||"")+'</span><span class="handle"><i class="icon icon225 icon-drag-vert-x225"></i></span>\x3c!-- <i class="icon icon-ddown hide-gui"></i><i class="icon icon-dup show-gui"></i>--\x3e</h1></div>').appendTo(u),l=(n||g.addClass("without-title"),i.get$Element().appendTo(p),t.get$Element().appendTo(g),g.find("> h1")),h=(l.find(".hide-gui").on("click",function(e){return e.preventDefault(),m(),!1}),new PgComboDividerBox(l,r,!n)),f=(r.onResize=function(){c.width();S?a.enterStaticMode(b):(y=0,v(w)),h.update()},"1"===pinegrow.getSetting(s,"1")),m=function(){},w=parseFloat(localStorage[d]||o||50).toString(),v=function(e){90<e&&(e=90),(y=y||c.height())&&e*y/100<a.minHelperSize&&(e=a.minHelperSize/y*100),g.css({"min-height":e+"%","max-height":e+"%"}),h.update()},S=(v(w),!1),b=0,T=(this.enterStaticMode=function(e){var i=100-100*(b=e)/c.height();v(i),l.addClass("static"),S=!0},this.exitStaticMode=function(){S=!1,l.removeClass("static"),w=parseFloat(pinegrow.getSetting(d,(o||50).toString())),v(w)},this.isStatic=function(){return S},this.setHelperView=function(e){return e!==t&&(t&&t.get$Element().detach(),(t=e).get$Element().appendTo(g),pgUIViewManager.updateVisibilityInArea(c),!0)},f||m(),l.on("click",function(e){e.preventDefault(),V||(f=!f)||m()}),!1),u=(this.hideSecondPanel=function(){T||(pg$Hide(g),T=!0,h.hide(),pgUIViewManager.updateVisibility())},this.showSecondPanel=function(){T&&(pg$Show(g),T=!1,h.show(),pgUIViewManager.updateVisibility())},this.onAddedToLayout=function(){h.onAddedToLayout()},new PgDragHelper(l,".handle",null,!1)),C=0,V=!1,y=0;u.onBefore=function(){return!S},u.on("dragStart",function(e,i){C=g.outerHeight(),y=c.height(),V=!0,$.fn.crsapages("showOverlays")},this),u.on("drag",function(e,i,t){var n=Math.max(0,C-i);v(w=n/y*100)},this),u.on("dragStop",function(e,i){$.fn.crsapages("showOverlays",!0),setTimeout(function(){V=!1},100),localStorage[d]=w},this)};