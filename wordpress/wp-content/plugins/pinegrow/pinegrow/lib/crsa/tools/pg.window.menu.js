class PgWindowMenu{constructor(){(this.menuView=new PgDropdownMenu($(".menu-window"))).onGetActions=function(o){function a(e){return e.on_is_visible?e.on_is_visible():!pinegrow.isHiddenUIPanel(e.key)}function t(e,n){e.on_show?e.on_show():pinegrow.showUIPanel(e.key,!1,!1,n)}function i(e){e.on_hide?e.on_hide():pinegrow.hideUIPanel(e.key)}var e,n,r,p=[],c=null,l=!0,s=(pinegrow.panelManager.forEachPanel(function(e){c!==e.category&&e.category&&(l||p.push({type:"divider"}),p.push({type:"header",label:e.category}),l=!1,c=e.category);var n=e.name;e.icon&&(n=`<i class="icon ${e.icon}" style="color:rgba(255,255,255,0.55);margin-right:2px;position:relative;top:2px;"></i> `+n),p.push({label:n,check:function(){return a(e)},action:function(){a(e)?i(e):t(e,!0)},helptext:e.description,kbd:e.kbd||null})}),p.push({type:"divider"}),p.push({label:"Show all",action:function(){pinegrow.panelManager.forEachPanel(function(e){a(e)||t(e,!1)})}}),p.push({label:"Hide all",action:function(){pinegrow.panelManager.forEachPanel(function(e){a(e)&&i(e)})}}),o.add({label:"Show / hide panels",submenu:p}),[]),u=(s.push({type:"header",label:"Layout"}),pgGetWorkspaces().forEach(function(a){s.push({label:a.name,action:function(e,n,o){pinegrow.showWorkspace(a.key)}})}),s.push({type:"divider"}),s.push({type:"header",label:"My layouts"}),pgCustomWorkspaces.getList().forEach(function(n){var e={label:n.name,action:function(){pinegrow.showWorkspace(n)},check:'<i class="icon icon-close"></i>',check_action:function(e){pgCustomWorkspaces.remove(n.name),e.preventDefault(),e.stopPropagation(),o.close(),pinegrow.showQuickMessage("<b>"+n.name+"</b> was removed.")},check_tooltip:"Remove"};s.push(e)}),s.push({label:"Save the current layout...",action:function(e,n,o){pinegrow.showPrompt("<p>Please enter the name for the saved workspace layout. Use the name of an existing layout to update that layout.</p>","Save workspace layout","","",null,function(e){(e=$.trim(e))&&(pgCustomWorkspaces.save(e),pinegrow.showQuickMessage("The workspace layout <b>"+e+"</b> was saved."))})}}),s.push({type:"divider"}),s.push({label:"Refresh the current layout",action:function(e,n,o){var a=$.extend(!0,myLayout.toConfig(),{});pinegrow.showWorkspace({config:JSON.stringify(a),ccmode:pinegrow.isContributorMode()})}}),o.add({label:"Workspace",submenu:s}),(isApp()||1)&&(e=[],n=pinegrow.getWorkspaceTheme(),[{name:"Dark gray (default)",key:"gray"},{name:"Light",key:"light"}].forEach(function(a){e.push({label:a.name,action:function(e,n,o){pinegrow.setWorkspaceTheme(a.key)},check:function(){return n==a.key}})}),o.add({label:"Theme",submenu:e})),isApp()&&(r=[{type:"header",label:"Make UI smaller or larger"}],[{key:-2,name:"50%"},{key:-1,name:"75%"},{key:0,name:"100%"},{key:1,name:"125%"},{key:2,name:"150%"},{key:4,name:"200%"}].forEach(function(a){r.push({label:a.name,action:function(e,n,o){setUIZoom(a.key),pinegrow.setSetting("ui-zoom",a.key)},check:function(){return getUIZoom()==a.key}})}),o.add({label:"UI Zoom",submenu:r})),o.add({type:"divider"}),[]),g=pinegrow.getCurrentProject();pinegrow.getAllPages().forEach(function(e){var n=g?g.getRelativeUrl(e.url):e.url,n=pgUrlToDisplayString(n),n=shortenString(n,40,"&hellip;",!0);e.hasChanges()&&(n+=" *"),u.push({label:n,action:function(){pinegrow.openOrShowPage(e.url)}})}),0===u.length&&u.push({type:"header",label:"No documents are open."}),o.add({label:"Open documents",submenu:u}),pgIsDev()&&0&&(o.add({type:"divider"}),o.add({type:"header",label:"Dev mode"}),o.add({label:"Enable product",submenu:[{label:"Web Editor",check:"PG"===pgGetApp(),action:function(){pinegrow.setSetting("app","PG"),pinegrow.restartPinegrow()}},{label:"Magic",check:"MAGIC"===pgGetApp(),action:function(){pinegrow.setSetting("app","MAGIC"),pinegrow.restartPinegrow()}},{label:"WP Converter",check:"PGTC"===pgGetApp(),action:function(){pinegrow.setSetting("app","PGTC"),pinegrow.restartPinegrow()}},{label:"Snap!",check:"SNAP"===pgGetApp(),action:function(){pinegrow.setSetting("app","SNAP"),pinegrow.restartPinegrow()}}]})),pgf.hide_panels&&(o.add({type:"divider"}),o.add({label:"Quickly hide panels",kbd:pgShowKbd("TAB"),check:pgArePanelsQuicklyHidden(),action:function(){pgToggleFloatingPanels()}}))}}}