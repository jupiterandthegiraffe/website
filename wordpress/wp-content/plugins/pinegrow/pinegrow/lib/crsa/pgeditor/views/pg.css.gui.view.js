var PgCssGuiView=function(){function i(e,t){e=e||pinegrow.getSelectedRule(),(r=r||new PgCSSEditorNEW(o)).editRule(e,t)}function n(){var e,t=pinegrow.getSelectedRule();t&&(e=pinegrow.pgPostCSSHelper.getRootNodeFor(t.data).pgStylesheet,t=pinegrow.pgPostCSSHelper.getNodeIndices(t.data),e=pinegrow.pgPostCSSHelper.getNodeByIndices(e.getRootNode(),t),t=getObjectFromRule(e),$("body").trigger("crsa-rule-selected",{rule_obj:t}))}var o=$('<div id="crsa-css-gui" class="aacrsa-panel crsa-stylesheets crsa-css-gui"></div>'),r=null,l=new PgUIView(o);this.view=l;l.on("crsa-rule-selected",function(e,t){l.whenVisible(function(){t?(i(t.rule_obj,{clickedProp:t.clickedProp||null}),t.rule_obj):n()})}),l.onResize=function(){r&&r.updateLayout()},pinegrow.addEventHandler("on_css_node_updated",function(e,o){l.whenVisible(function(){var e,t;"gui"!=o.edited_by&&("rule"==(e=o.node).type?(t=pinegrow.pgPostCSSHelper.getRuleForNode(e),t=getObjectFromRule(t),i(t)):"atrule"==e.type&&"media"==e.name&&n())})})};