var initSass,browser_sass=null;isApp()||(initSass=async function(){browser_sass=await import("../sass/sass.js")})(),window.PgSCSSStylesheet=function(){var u=window.PgCompilableStylesheet(),l=(u.fileType="scss",!1),c=(l&&(Function.prototype.call$1=function(e){return this(e)},Function.prototype.call$0=function(){return this()},Function.prototype.call$2=function(e,r){return this(e,r)},Function.prototype.call$3=function(e,r,t){return this(e,r,t)},Function.prototype.call$4=function(e,r,t,n){return this(e,r,t,n)},Function.prototype.call$5=function(e,r,t,n,s){return this(e,r,t,n,s)},Function.prototype.call$1$1=function(e){return this(e)},Function.prototype.call$1$3=function(e,r,t){return this(e,r,t)},Function.prototype.call$2$2=function(e,r){return this(e,r)},Function.prototype.call$6=function(e,r,t,n,s,o){return this(e,r,t,n,s,o)},Function.prototype.call$1$0=function(){return this()}),isApp()?require(isApp()?"sass-embedded":"dart-sass"):browser_sass),e=require("postcss"),r=e.postcss,a=e.postcssSCSS,p=e.postcssSCSS.stringify,o=e.postcssSCSS.stringifyWithParams;const t=["rgb","rgba","red","green","blue","mix","hue","saturation","lightness","adjust-hue","lighten","darken","saturate","desaturate","grayscale","complement","invert","alpha","opacity","fade-out","fade-in","transparentize","adjust-color","scale-color","change-color","ie-hex-str","unquote","quote","str-length","str-insert","str-index","str-slice","to-upper-case","to-lower-case","percentage","round","ceil","floor","abs","min","max","random","length","nth","set-nth","join","append","zip","index","list-separator","is-bracketed","map-get","map-merge","map-remove","map-keys","map-values","map-has-key","keywords","selector-nest","selector-append","selector-extend","selector-replace","selector-unify","is-superselector","simple-selectors","selector-parse","feature-exists","variable-exists","global-variable-exists","function-exists","mixin-exists","content-exists","inspect","type-of","unit","unitless","comparable","call","get-function","if","unique-id"];u.getEditorMode=function(){return"scss"},u.getAutocompleteArr=function(){return t},u.isBuitInFunction=function(e){return-1<t.indexOf(e)},u.skipImportFile=function(e){return crsaIsAbsoluteUrl(e)||e.endsWith(".css")||-1<e.indexOf(this.getDeclCharachter())||-1<e.indexOf("#{")},u.getRelativeUrlFromImported=function(e,r,t){e=e&&e.trim();var n,s=crsaGetUrlAndParamsFromImport(e)[0];return!this.skipImportFile(s)&&(n="",s.endsWith(".scss")||(n=".scss"),"/"===(s=crsaGetBaseForUrl(s)+"/"+(t?"_":"")+crsaGetNameFromUrl(s)+n)[0])?s.substr(1,s.length):s};var d=0;return u.parseSource=function(e,n,s){this.resetError();var o=this,t=(pinegrow.getSetting("disable-formating","0"),d++),i=new CrsaProfile("PARSE "+t+" "+this.url);i.show("START"),r([]).process(e,{syntax:a,parser:a,stringifier:p}).then(function(e){i.show("DONE");var r,t=e.root;o.resetTreeNodeId(),s&&(o.processNodes(t.nodes),r=pinegrow.pgPostCSSHelper.getSource(t,p),r=o.addSemicolonToSource(r)),o.sourceFormated=!1,n&&n(null,r,t),i.show("AFTER DONE")}).catch(function(e){console.log("DONE PARSE with ERROR "+t);var r=e.reason+":"+e.line;o.codeError=r,n&&n(r)})},u.getSourceForRules=function(e,r,t){if(!(e=e||this.getRootNode()))return"";!t&&r||this.updateNodeFormatting(e,t);var n=null,s=(r&&(n=pinegrow.pgPostCSSHelper.getSource(e,o)),pinegrow.pgPostCSSHelper.getSource(e,p));return r?n:s},u.regenerateCssFromScssSource=function(t){var n=new CrsaProfile,s=this,e=(this.sourceToSave=null,this.getSourceForRules(null,!u.dontAddIds));if(""==e)t&&t(null,{css:""});else{var o,r,i={aaimporter:function(e,r,t){return s.importer(e,r,t)},importers:[{canonicalize(e){return new URL(e,s.url)},load:function(e){e=(e=e.toString()).replace(/\-pg[0-9]+/,"");var r,t=s.getFullUrlFor(e,!1),t=pinegrow.stylesheets.findCrsaStylesheetForUrl(t);return 0===t.length&&(r=s.getFullUrlFor(e,!0),t=pinegrow.stylesheets.findCrsaStylesheetForUrl(r)),t.length?{contents:t[0].getSourceForRules(null,!s.dontAddIds),syntax:"scss"}:{contents:"",syntax:"scss"}}}]};if(this.includeSourceMap){if(!this.outFile)throw"You should enter the out file in order to generate source map";i["sourceMap"]=!0,i["outFile"]=this.outFile}this.render_busy?this.update_on_render_done=function(){s.regenerateCssFromScssSource(t)}:(this.render_busy=!0,this.update_on_render_done=null,this.recursiveImports=null,o=function(){var e;s.render_busy=!1,s.update_on_render_done&&(e=s.update_on_render_done,s.update_on_render_done=null,e())},browser_sass||isApp()&&!l?(this.render_promise&&(this.render_promise.cancel(),this.render_promise=null),0&&browser_sass?(r=c.compileString(e,i),n.show("SASS Compile"),s.render_promise=null,s.renderingFinished(null,r,t),o()):this.render_promise=c.compileStringAsync(e,i).then(function(e){n.show("SASS Compile"),s.render_promise=null,s.renderingFinished(null,e,t),o()}).catch(function(e){s.render_promise=null,s.renderingFinished(e,null,t),o()})):(i.data=e,i.importer=function(e,r,t){return s.importer(e,r,t)},c.render(i,function(e,r){n.show("SASS Compile"),s.renderingFinished(e,r,t),o()})))}},u.regenerateCssFromCompilableSource=function(e){this.regenerateCssFromScssSource(e)},u.getNewStylesheet=function(){return PgSCSSStylesheet()},u.getDeclCharachter=function(){return"$"},u.stringifyNode=function(e){return this.addSemicolonToSource(this.filterSource(pinegrow.pgPostCSSHelper.getSource(e,p)))},u.superFilter=function(e){return null},u};